<template>
    <template for:each={lstdata} for:item='row' for:index='index'>
        <lightning-card key={row.strRecordId}>
        <div>
            <lightning-layout horizontal-align="spread" multiple-rows="true">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                    <c-sub-icon-component index={index} isvisible={row.isVisible}
                                            onshowhide={setvisibility}>
                    </c-sub-icon-component>
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="8"
                    small-device-size="8" medium-device-size="4">
                    <div id={index} title={row.strRecordId}>
                        <label><b>{row.strName}</b></label><br>
                        <label><b>{erpCustomerId} : </b></label>{row.strERP}<br>
                        <label><b>{street} : </b></label>{row.strAddress}<br>
                        
                    </div>
                </lightning-layout-item> 

                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">

                    <div class="slds-p-around_x_small">
                        <template if:true={row.strIcon}>
                            <lightning-icon class="slds-float_left" icon-name={row.strIcon} size="small"></lightning-icon>
                        </template>
                        <template if:false={row.strIcon}>
                            <lightning-button-icon icon-name="utility:save" id={index}  size="small" alternative-text="Save" onclick={handleSelection}></lightning-button-icon>
                        </template>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
            
        </div>

        <template if:true={row.isVisible} >
            
            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="10"
                    small-device-size="10" medium-device-size="5">
                    <label><b>{defaultPartner} : </b></label>{row.strDefault}<br>
                </lightning-layout-item>
            </lightning-layout>
            
            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="10"
                    small-device-size="10" medium-device-size="5">
                    <label><b>{careOf} : </b></label>{row.strCareOf}<br>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="10"
                    small-device-size="10" medium-device-size="5">
                    <label><b>{city} : </b></label>{row.strCity}<br>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="10"
                    small-device-size="10" medium-device-size="5">
                    <label><b>{postal} : </b></label>{row.strZip}<br>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="10"
                    small-device-size="10" medium-device-size="5">
                    <label><b>{state} : </b></label>{row.strState}<br>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="10"
                    small-device-size="10" medium-device-size="5">
                    <label><b>{country} : </b></label>{row.strCountry}<br>
                </lightning-layout-item>
            </lightning-layout> 

            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="1">
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="10"
                    small-device-size="10" medium-device-size="5">
                    <template if:true={booIsDirect}>
                        <label><b>{relationship} : </b></label>{row.strRelationship}<br>
                    </template>
                    <template if:false={booIsDirect}>
                        <label><b>{accountGroup} : </b></label>{row.strAccountGroup}<br>
                    </template>
                    
                </lightning-layout-item>
            </lightning-layout>
        </template>
        </lightning-card>
    </template>
    <template if:false={boolstempty}>
        <template if:true={booPageGr1}>
            <lightning-layout horizontal-align="spread" multiple-rows="true" class="slds-p-around_none">
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="2" large-device-size="2">
                    <lightning-button-icon icon-name="utility:back" variant="brand" class="slds-m-left_xx-small" label="Previous Page" disabled={booIsFirstPage} onclick={prevPage}></lightning-button-icon>
                </lightning-layout-item>

                <lightning-layout-item flexibility="auto"
                    class="slds-p-right_x-medium layoutItem-min-size" size="8"
                    small-device-size="8" medium-device-size="8"
                    large-device-size="8">
                    <div class="slds-p-around_medium slds-text-align_center">
                        <label>Page {intPageNumber} of {intPageTotal}</label>
                    </div>
                </lightning-layout-item>
                <lightning-layout-item flexibility="auto"
                    class="slds-p-around_xx-small layoutItem-min-size" size="2"
                    small-device-size="2" medium-device-size="2" large-device-size="2">
                    <lightning-button-icon icon-name="utility:forward" variant="brand" class="slds-m-right_xx-small" label="Next Page" disabled={booIsLastPage} onclick={nextPage}></lightning-button-icon>
                </lightning-layout-item>
            </lightning-layout>
        </template>
    </template>

    <template if:true={boolstempty}>
        <template if:true={mapLabels}>
            {mapLabels.UI_Label_No_Results}
        </template>
    </template>

    <template if:false={boolstempty}>
        <div class="slds-clearfix slds-p-right_x-small slds-text-align_left">
            <!-- Show disclaimer-->
            <template if:true={mapLabels}>
                <template if:true={booIsBillTo}>
                    <template if:false={checkDirect}>
                        <br><br><lightning-icon class="slds-float_left" icon-name="utility:ban" size="medium"></lightning-icon>{mapLabels.UI_Disclaimer}
                    </template>
                </template>
            </template>
        </div>
    </template>
    
</template>