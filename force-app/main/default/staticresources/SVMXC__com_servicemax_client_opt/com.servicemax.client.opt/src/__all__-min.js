(function(){var a=SVMX.Package("com.servicemax.client.opt.commands");a.init=function(){a.Class("processLatestRun",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.GET_PROCESS_LATEST_RUN"});}},{});a.Class("purgeLatestRun",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.GET_PURGE_LATEST_RUN"});}},{});a.Class("getJobListForPurge",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.GET_JOB_LIST_FOR_PURGE"});}},{});a.Class("getJobListForExecution",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.GET_JOB_LIST_FOR_EXECUTION"});}},{});a.Class("purgeSelectedRuns",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.GET_PURGE_SELECTED_RUNS"});}},{});a.Class("executionSelectedRuns",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.GET_EXECUTION_SELECTED_RUNS"});}},{});a.Class("loadDispatchProcessNames",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.LOAD_DISPATCH_PROCESS_NAME"});}},{});a.Class("saveOptConfiguration",com.servicemax.client.mvc.api.Command,{__constructor:function(){this.__base();},executeAsync:function(c,b){this._executeOperationAsync(c,b,{operationId:"APFT.SAVE_OPT_CONFIGURATION"});}},{});};})();(function(){var a=SVMX.Package("com.servicemax.client.opt.console");a.init=function(){a.Class("ConsoleAppImpl",com.servicemax.client.sfmconsole.api.AbstractConsoleApp,{engine:null,__options:null,start:function(b){b=b||{};this.__options=b;this.showLoadMask();var c=SVMX.create("com.servicemax.client.opt.engine.DeliveryEngineImpl");this.engine=c.getInterface();this.engine.initAsync({handler:this.__onEngineInit,context:this});a.log("Inside start");},__onEngineInit:function(){this.engine.run({onReady:{handler:this.__onEngineReady,context:this}});},__onEngineReady:function(){this.setRootContainer(this.engine.getRoot());this.hideLoadMask();this.setAppInfo({groupName:"",windowTitle:this.engine.translate("TAG0002")});},onClose:function(){},onAppHide:function(b){},onAppShow:function(b){},reset:function(){if(this.engine){this.engine.reset();}},onAppResize:function(b){if(this.engine.getRoot()){this.engine.getRoot().resize(b);}}},{});};})();(function(){var a=SVMX.Package("com.servicemax.client.opt.engine");a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("OPT");a.Class("DeliveryEngineImpl",com.servicemax.client.sfmconsole.api.AbstractDeliveryEngine,{__root:null,__loadMask:null,__isContainerExternal:null,__parent:null,__translation:null,__view:null,__constructor:function(){this.__base();this.__isContainerExternal=false;},initAsync:function(c){var d=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.niservice").getInstance();this.__eventBus=SVMX.create("com.servicemax.client.opt.impl.APFTEngineEventBus",{});d.createNamedInstanceAsync("CONTROLLER",{handler:function(e){d.createNamedInstanceAsync("MODEL",{handler:function(f){e.setModel(f);d.createNamedInstanceAsync("APFT.VIEW",{handler:function(g){this.__view=g;c.handler.call(c.context);},context:this,additionalParams:{eventBus:this.getEventBus()}});},context:this});},context:this,additionalParams:{eventBus:this.__eventBus}});},getEventBus:function(){return this.__eventBus;},translate:function(c){return b.T(c);},getAllTranslation:function(){return this.__translation;},__appCurrentState:"",changeApplicationState:function(c){if(this.__appCurrentState===c){return;}this.__appCurrentState=c;if(c=="block"){if(!this.__loadMask){this.__loadMask=new com.servicemax.client.ui.components.utils.LoadMask({parent:this.__root});}this.__loadMask.show({});this.__loadMask.setZIndex(50000);}else{if(c=="unblock"&&this.__loadMask!==null){if(this.__loadMask!==null){this.__loadMask.hide();}}}},reset:function(){this.getRoot().destroy();this.__root=null;this.run(this.options);},triggerEvent:function(c){this.__eventBus.triggerEvent(c);},run:function(c){this.options=c||{};var d=[];this.__metaModel=SVMX.create("com.servicemax.client.opt.engine.APFTMetaModel",this,d);this.__metaModel.initialize();this.__root=this.__view.createComponent("ROOTCONTAINER",{metaModel:this.__metaModel,deliveryEngine:this});this.__root.render(SVMX.getDisplayRootId());if(!SVMX.getClient().getApplicationParameter("svmx-sfm-no-window-resize")){SVMX.onWindowResize(function(){var e=Ext.getBody().getViewSize().height;
var g=Ext.getBody().getViewSize().width;if(this.__isContainerExternal){if(!!this.__parent){e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);g=Math.max(document.documentElement.clientWidth,window.innerWidth||0);e=(e>0)?(e-this.__parent.heightOffset):e;g=(g>0)?(g-this.__parent.widthOffset):g;}else{e=Ext.getDom("client_display_root").parentNode.clientHeight;g=Ext.getDom("client_display_root").parentNode.clientWidth;}}var f={width:g,height:e};this.onResize(f);},this);}this.__root.setHeight(containerHeight);if(this.options.onReady){this.options.onReady.handler.call(this.options.onReady.context||this);}},onprocessLatestRunCompleted:function(c){var d=c.message;this.__root.reportLatestRuns(d);},onpurgeLatestRunCompleted:function(c){var d=c.message;this.__root.purgeLatestRun(d);},ongetJobListForPurgeCompleted:function(c){this.__root.getJobListForPurge(c);},ongetJobListForExecutionCompleted:function(c){this.__root.getJobListForExecution(c);},onpurgeSelectedRunsCompleted:function(c){var d=c.message;this.__root.purgeSelectedRuns(d);},onexecutionSelectedRunsCompleted:function(c){var d=c.message;this.__root.executionSelectedRuns(d);},onloadDispatchProcessNamesCompleted:function(c){this.__root.loadDispatchProcessNames(c);},onsaveOptConfigurationCompleted:function(c){this.__root.saveOptConfiguration(c);},processLatestRunHandler:function(){var d=SVMX.create("com.servicemax.client.opt.responders.processLatestRun",this);var e={};var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.GET_PROCESS_LATEST_RUN",this,{request:e,responder:d});this.triggerEvent(c);},purgeLatestRunHandler:function(){var d=SVMX.create("com.servicemax.client.opt.responders.purgeLatestRun",this);var e={};var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.GET_PURGE_LATEST_RUN",this,{request:e,responder:d});this.triggerEvent(c);},getJobListForPurgeHandler:function(f){var d=SVMX.create("com.servicemax.client.opt.responders.getJobListForPurge",this);var e=f;var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.GET_JOB_LIST_FOR_PURGE",this,{request:e,responder:d});this.triggerEvent(c);},getJobListForExecutionHandler:function(f){var d=SVMX.create("com.servicemax.client.opt.responders.getJobListForExecution",this);var e=f;var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.GET_JOB_LIST_FOR_EXECUTION",this,{request:e,responder:d});this.triggerEvent(c);},purgeSelectedRunsHandler:function(){var d=SVMX.create("com.servicemax.client.opt.responders.purgeSelectedRuns",this);var e=param;var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.GET_PURGE_SELECTED_RUNS",this,{request:e,responder:d});this.triggerEvent(c);},executionSelectedRunsHandler:function(f){var d=SVMX.create("com.servicemax.client.opt.responders.executionSelectedRuns",this);var e=f;var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.GET_EXECUTION_SELECTED_RUNS",this,{request:e,responder:d});this.triggerEvent(c);},loadDispatchProcessNamesHandler:function(){var d=SVMX.create("com.servicemax.client.opt.responders.loadDispatchProcessNames",this);var e={};var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.LOAD_DISPATCH_PROCESS_NAME",this,{request:e,responder:d});this.triggerEvent(c);},saveOptConfigurationHandler:function(f){var d=SVMX.create("com.servicemax.client.opt.responders.saveOptConfiguration",this);var e=f;var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.SAVE_OPT_CONFIGURATION",this,{request:e,responder:d});this.triggerEvent(c);},showMessage:function(c,d){Ext.Msg.show({title:d,msg:c,width:300,closable:false,buttons:Ext.Msg.OK,buttonText:{ok:b.T("TAG020","OK")},fn:function(f,g,e){}});},getRoot:function(){return this.__root;},onResize:function(c){this.getRoot().resize(c);}},{});a.Class("APFTMetaModel",com.servicemax.client.lib.api.Object,{__parent:null,__data:null,__constructor:function(c,d){this.__parent=c;this.__data=d;},initialize:function(){},getQuestionInfo:function(){return this.__data;},addQuestionList:function(c){this.__data=c;},destroy:function(){this.__data=null;}},{});};})();(function(){var a=SVMX.Package("com.servicemax.client.opt.impl");a.Class("Module",com.servicemax.client.lib.api.ModuleActivator,{__constructor:function(){this.__base();this._logger=SVMX.getLoggingService().getLogger("APP-IMPL");},beforeInitialize:function(){},initialize:function(){com.servicemax.client.opt.commands.init();com.servicemax.client.opt.responders.init();com.servicemax.client.opt.engine.init();com.servicemax.client.opt.console.init();},afterInitialize:function(){}},{instance:null});a.Class("APFTEngineEventBus",com.servicemax.client.lib.api.EventDispatcher,{__constructor:function(){this.__base();},triggerEvent:function(b){SVMX.getLoggingService().getLogger("APFTEngineEventBus").info("Trigger event : "+b.type);return this.__base(b);}},{});})();(function(){var a=SVMX.Package("com.servicemax.client.opt.responders");a.init=function(){a.Class("processLatestRun",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();
this.__engine=b;},result:function(b){this.__engine.onprocessLatestRunCompleted(b);}},{});a.Class("purgeLatestRun",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();this.__engine=b;},result:function(b){this.__engine.onpurgeLatestRunCompleted(b);}},{});a.Class("getJobListForPurge",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();this.__engine=b;},result:function(b){this.__engine.ongetJobListForPurgeCompleted(b);}},{});a.Class("getJobListForExecution",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();this.__engine=b;},result:function(b){this.__engine.ongetJobListForExecutionCompleted(b);}},{});a.Class("purgeSelectedRuns",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();this.__engine=b;},result:function(b){this.__engine.onpurgeSelectedRunsCompleted(b);}},{});a.Class("executionSelectedRuns",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();this.__engine=b;},result:function(b){this.__engine.onexecutionSelectedRunsCompleted(b);}},{});a.Class("loadDispatchProcessNames",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();this.__engine=b;},result:function(b){this.__engine.onloadDispatchProcessNamesCompleted(b);}},{});a.Class("saveOptConfiguration",com.servicemax.client.mvc.api.Responder,{__parent:null,__constructor:function(b){this.__base();this.__engine=b;},result:function(b){this.__engine.onsaveOptConfigurationCompleted(b);}},{});};})();