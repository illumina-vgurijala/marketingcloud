(function(){var a=SVMX.Package("com.servicemax.client.tablet.sal.sfmopdoc.model.impl");a.Class("Module",com.servicemax.client.lib.api.ModuleActivator,{__constructor:function(){this.__base();},beforeInitialize:function(){com.servicemax.client.tablet.sal.sfmopdoc.model.operations.init();},initialize:function(){SVMX.getClient().bind("SFMOPDOCDELIVERY.JSEE_CREATED",function(b){var c=b.data.jsee;var e={},d=this;c.addInterceptor("$IMAGE",function(h,i){if(i&&i.node){if(e[h]!=null){$(i.node).attr("src",e[h]);}else{var g=new com.servicemax.client.tablet.sal.sfmopdoc.model.operations.SubmitQuery();i.pendingNodeItems.addItem(h,h);var f=g._performInternal({queryConfig:{api:"Document",fields:"Name, Type",condition:"DeveloperName='"+h+"'"}},function(j){i.pendingNodeItems.removeItem(h);if(j&&j.length>0){var k=j[0].Name+"."+j[0].Type;e[h]=k;$(i.node).attr("src",e[h]);$(i.node).attr("svmx-data",h);}},d);}}else{if(c!=null&&c.getProperty("ImageNameId")&&c.getProperty("ImageNameId")[h]){return c.getProperty("ImageNameId")[h];}else{SVMX.getLoggingService().getLogger().error("Image was not found in collection: "+h);return"";}}});});}},{});a.Class("CacheService",com.servicemax.client.lib.api.Object,{__constructor:function(){},getItem:function(b){return null;},setItem:function(b,c){},clear:function(b){},reset:function(){}},{});a.Class("PlatformSpecifics",com.servicemax.client.lib.api.Object,{__constructor:function(){},getQualificationInfo:function(c,e,g,d){var f=window.svmx_sfm_opdoc_delivery_is_qualified===undefined?true:window.svmx_sfm_opdoc_delivery_is_qualified;var b=window.svmx_sfm_opdoc_delivery_error_message===undefined?"":window.svmx_sfm_opdoc_delivery_error_message;g.call(d,{isQualified:f,errorMessage:b});},navigateBack:function(b){if(b&&b!=""){if(b.indexOf("%2F")!=-1){b="/"+b.substring(3,b.length);}SVMX.navigateTo(b);}},alert:function(b){alert(b);},confirm:function(b){return confirm(b);},getSettingsInfo:function(){return{};}},{});})();(function(){var a=SVMX.Package("com.servicemax.client.tablet.sal.sfmopdoc.model.operations");a.init=function(){a.Class("GetUserInfo",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={};GetUserInfo(c,function(e,f){com.servicemax.client.lib.datetimeutils.DatetimeUtil.setAmPmText(e.amText,e.pmText);e.Now=com.servicemax.client.lib.datetimeutils.DatetimeUtil.getFormattedDatetime(e.Now,e.DateFormat+" "+e.TimeFormat);e.Today=com.servicemax.client.lib.datetimeutils.DatetimeUtil.getFormattedDatetime(e.Today,e.DateFormat);e.Tomorrow=com.servicemax.client.lib.datetimeutils.DatetimeUtil.getFormattedDatetime(e.Tomorrow,e.DateFormat);e.Yesterday=com.servicemax.client.lib.datetimeutils.DatetimeUtil.getFormattedDatetime(e.Yesterday,e.DateFormat);b.result(e);},this);}},{});a.Class("GetTemplate",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={ProcessId:d.processId};GetTemplate(c,function(e,f){b.result(e);},this);}},{});a.Class("SubmitDocument",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={Document:d.document};}},{});a.Class("CreatePDF",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={DocumentId:d.documentId,RecordId:d.recordId};}},{});a.Class("SubmitQuery",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},_performInternal:function(e,g,c){var d=e.queryConfig;var f="SELECT "+d.fields+" FROM "+d.api;if(d.condition&&d.condition!=""){f+=" WHERE "+d.condition;}var b={Query:f};SubmitQuery(b,function(h,i){g.call(c,h);},this);},performAsync:function(c,b){b.result("");}},{});a.Class("ViewDocument",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(c,b){}},{});a.Class("GetDocumentMetadata",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={ProcessId:d.processId};GetDocumentMetadata(c,function(e,f){b.result(e);},this);}},{});a.Class("GetDocumentData",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={ProcessId:d.processId,RecordId:d.recordId};GetDocumentData(c,function(e,f){b.result(e);},this);}},{});a.Class("DescribeObject",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={objectName:d.objectName};DescribeObject(c,function(e,f){b.result(e);},this);}},{});a.Class("CaptureSignature",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={ProcessId:d.processId,RecordId:d.recordId,UniqueName:d.uniqueName,ImgHeight:d.imgHeight,ImgWidth:d.imgWidth,CaptureSignature:d.captureSignature};CaptureSignature(c,function(e,f){b.result(e);},this);}},{});a.Class("Finalize",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();
},performAsync:function(d,b){var c={ProcessId:d.processId,RecordId:d.recordId,HTMLContent:d.htmlContent};Finalize(c,function(e,f){},this);}},{});a.Class("GetDisplayTags",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(d,b){var c={};GetDisplayTags(c,function(e,f){b.result(e);},this);}},{});};})();