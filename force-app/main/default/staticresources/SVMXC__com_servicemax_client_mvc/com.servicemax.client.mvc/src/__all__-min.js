(function(){var a=SVMX.Package("com.servicemax.client.mvc.api");a.Class("Command",com.servicemax.client.lib.api.AbstractCommand,{__controller:null,__eventBus:null,__constructor:function(){this.__base();},setController:function(b){this.__controller=b;},setEventBus:function(b){this.__eventBus=b;},executeAsync:function(c,b){},_executeOperationAsync:function(d,b,c){this.__controller.getModel().executeOperationAsync(d,b,c,this.getEventBus());},getController:function(){return this.__controller;},getEventBus:function(){return this.__eventBus;}},{});a.Class("Operation",com.servicemax.client.lib.api.AbstractOperation,{__eventBus:null,__constructor:function(){this.__base();},performAsync:function(c,b){},setEventBus:function(b){this.__eventBus=b;},getEventBus:function(){return this.__eventBus;}},{});a.Class("Responder",com.servicemax.client.lib.api.AbstractResponder,{__constructor:function(){this.__base();},result:function(b){},fault:function(b){}},{});a.Class("CommandWithResponder",a.Command,{__responder:null,__constructor:function(){this.__base();},executeAsync:function(c,b){this.__base();this.__responder=b;},result:function(b){if(this.__responder){this.__responder(b);}},fault:function(b){}},{});})();(function(){var a=SVMX.Package("com.servicemax.client.mvc.impl");a.Class("Module",com.servicemax.client.lib.api.ModuleActivator,{__constructor:function(){this.__base();},beforeInitialize:function(){a.init();},initialize:function(){},afterInitialize:function(){}},{});a.init=function(){a.Class("Controller",com.servicemax.client.runtime.api.AbstractNamedInstance,{__eventId2EventMap:null,_model:null,__logger:null,__eventBus:null,__constructor:function(){},initialize:function(e,k,g){this.__logger=SVMX.getLoggingService().getLogger("MVC-CONTROLLER("+e+")");this.__eventId2EventMap={};var o=g.eventBus;this.__eventBus=g.eventBus;var l,m=k.length;for(l=0;l<m;l++){var n=k[l];var f=n.data,c=f.length,h;for(h=0;h<c;h++){var b=f[h];this.__eventId2EventMap[b.event]={data:n,mapping:b};o.bind(b.event,this.eventHandler,this);}}},eventHandler:function(d){try{var i=this.__eventId2EventMap[d.type];var b=i.mapping.command;var c=SVMX.getClass(b);var h=new c();h.setController(this);h.setEventBus(this.__eventBus);var g=d.data.request;var f=d.data.responder;this.__logger.info("Executing command => "+d.type);h.executeAsync(g,f);}catch(j){this.__logger.error(j);throw j;}},setModel:function(b){this._model=b;},getModel:function(){return this._model;}},{});a.Class("Model",com.servicemax.client.runtime.api.AbstractNamedInstance,{__operationId2OperationMap:null,__logger:null,__constructor:function(){},initialize:function(c,h,f){this.__logger=SVMX.getLoggingService().getLogger("MVC-MODEL("+c+")");this.__operationId2OperationMap={};var k,l=h.length;for(k=0;k<l;k++){var m=h[k];var e=m.data,n=e.length,g;for(g=0;g<n;g++){var b=e[g];this.__operationId2OperationMap[b.operationId]={data:m,mapping:b};}}},executeOperationAsync:function(c,b,k,i){try{var j=this.__operationId2OperationMap[k.operationId];if(!j){return;}var g=j.mapping.operation;var d=SVMX.getClass(g);var f=new d();f.setEventBus(i);f.performAsync(c,b);}catch(h){this.__logger.error(h);throw h;}}},{});a.Class("View",com.servicemax.client.runtime.api.AbstractNamedInstance,{__viewConfig:null,__logger:null,__eventBus:null,__constructor:function(){},initialize:function(b,c,d){this.__logger=SVMX.getLoggingService().getLogger("MVC-VIEW("+b+")");this.__viewConfig={};if(!d){d={};}this.__eventBus=d.eventBus;SVMX.array.forEach(c,function(e){SVMX.array.forEach(e.data,function(g){var f=g["component-id"];this.__viewConfig[f]=g["class-name"];},this);},this);},createComponent:function(b,f){try{var c=this.__viewConfig[b];if(!f){f={};}f.__view=this;if(c&&SVMX.getClass(c,true)){return SVMX.create(c,f);}}catch(d){this.__logger.error("Error creating "+b+": "+d);throw d;}},triggerEvent:function(b){this.__eventBus.triggerEvent(b);}},{});};})();