(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-034bddd6"],{"60aa":function(t,e,s){"use strict";var a=s("e54d"),n=s.n(a);n.a},c59a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("right-page",{attrs:{header:t.rightPageHeader,"modal-button-name":"OK","hide-content-padding":t.rightPageHeader.isHidePadding,"is-list-content":t.rightPageHeader.hasListContent}},[s("li",{attrs:{slot:"button-group"},slot:"button-group"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:t.changeDefaultStatus}},[t._v("Change Desktop Offline Status")]),s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:t.disabledNewBtn},on:{click:t.newAgentStatus}},[t._v("New Status")])]),s("div",{staticClass:"list-content",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"slds-border_bottom agent-title"},[s("div",{staticClass:"slds-text-body_regular"},[t._v("Maximum number of statuses: 10 â€¢ "+t._s(t.agentStatuses.length>1?t.agentStatuses.length+" items":t.agentStatuses.length+" item"))])]),t.agentStatuses.length>0?s("div",{key:"agentStatuses",staticClass:"slds-table--header-fixed_container agent-list-content"},[s("div",{staticClass:"slds-scrollable_y scroll-content"},[s("table",{staticClass:"slds-table slds-table_bordered slds-table--header-fixed",attrs:{id:"agent-status-table"}},[s("thead",[s("tr",{staticClass:"slds-line-height_reset"},[s("th",{staticClass:"slds-cell-wrap",staticStyle:{width:"3rem"},attrs:{scope:"col"}},[s("span",{staticClass:"slds-truncate slds-cell-fixed"})]),s("th",{staticClass:"slds-cell-wrap priority-title",staticStyle:{width:"90px"},attrs:{scope:"col"}},[s("span",{staticClass:"slds-cell-fixed",staticStyle:{width:"90px"}},[s("span",{staticClass:"slds-truncate",attrs:{title:"Priority"}},[t._v("Priority")]),s("tooltip",{attrs:{"info-style":"top: 4px;",content:"New chat requests are assigned to agents with higher priority statuses."}})],1)]),s("th",{staticClass:"slds-cell-wrap",staticStyle:{width:"12%"},attrs:{scope:"col"}},[s("span",{staticClass:"slds-cell-fixed",staticStyle:{width:"12%"}},[s("span",{staticClass:"slds-truncate",attrs:{title:"Name"}},[t._v("Name")])])]),s("th",{staticClass:"slds-cell-wrap",staticStyle:{width:"12%"},attrs:{scope:"col"}},[s("span",{staticClass:"slds-cell-fixed",staticStyle:{width:"12%"}},[s("span",{staticClass:"slds-truncate",attrs:{title:"Active"}},[t._v("Active")])])]),s("th",{staticClass:"slds-cell-wrap",staticStyle:{width:"15%"},attrs:{scope:"col"}},[s("span",{staticClass:"slds-cell-fixed",staticStyle:{width:"15%"}},[s("span",{staticClass:"slds-truncate",attrs:{title:"Accepts Chats"}},[t._v("Accepts Chats")])])]),s("th",{staticClass:"slds-cell-wrap",staticStyle:{width:"15%"},attrs:{scope:"col"}},[s("span",{staticClass:"slds-cell-fixed",staticStyle:{width:"15%"}},[s("span",{staticClass:"slds-truncate",attrs:{title:"Offline Default Status"}},[t._v("Offline Default Status")])])]),s("th",{staticClass:"slds-cell-wrap",staticStyle:{width:"15%"},attrs:{scope:"col"}},[s("span",{staticClass:"slds-cell-fixed",staticStyle:{width:"15%"}},[s("span",{staticClass:"slds-truncate",attrs:{title:"Non-overridable By System"}},[t._v("Non-overridable By System")])])]),s("th",{staticClass:"slds-cell-wrap",staticStyle:{width:"3rem"},attrs:{scope:"col"}})])]),s("draggable",{attrs:{element:"tbody"},on:{start:t.dragStart,end:t.dragEnd},model:{value:t.activeAgentStatuses,callback:function(e){t.activeAgentStatuses=e},expression:"activeAgentStatuses"}},t._l(t.activeAgentStatuses,(function(e,a){return s("tr",{key:a,staticClass:"slds-hint-parent list-item"},[s("th",[s("span",{staticClass:"slds-media__figure slds-listbox__option-icon list-icon"},[s("span",{staticClass:"slds-icon_container slds-icon-utility-search"},[s("icon",{attrs:{name:"drag_drop","icon-class-name":"slds-icon slds-icon_x-small slds-icon-text-default"}})],1)])]),s("th",{attrs:{"data-label":"PRIORITY",scope:"row"}},[s("div",{staticClass:"slds-truncate"},[t._v(t._s(e.Priority))])]),s("th",{attrs:{"data-label":"NAME",scope:"row"}},[s("div",{staticClass:"slds-truncate"},[s("a",{attrs:{href:"javascript:void(0);",title:e.Name},on:{click:function(s){return t.goToDetail(e)}}},[t._v(t._s(e.Name))])])]),s("td",{attrs:{"data-label":"ACTIVE"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox4",disabled:""},domProps:{checked:e.IsActive}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox4"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"ACCEPTS CHATS"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox1",disabled:""},domProps:{checked:e.IsAcceptsChats}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox1"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"OFFLINE DEFAULT STATUS"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox2",disabled:""},domProps:{checked:e.IsOfflineDefaultStatus}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox2"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"NON OVERRIDABLE BY SYSTEM"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox3",disabled:""},domProps:{checked:e.IsNonoverridableBySystem}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox3"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"ACTION"}},[e.IsOfflineDefaultStatus?s("action-menu",{attrs:{actions:t.activeAgentStatusActions,item:e,"concealed-actions":t.defaultAgentStatusHideActions},on:{edit:t.editAgent,deactivate:function(e){return t.openChangeAgentStatusModal(e,"Deactivate")}}}):t._e(),e.IsOfflineDefaultStatus?t._e():s("action-menu",{attrs:{actions:t.activeAgentStatusActions,item:e},on:{edit:t.editAgent,deactivate:function(e){return t.openChangeAgentStatusModal(e,"Deactivate")}}})],1)])})),0),s("tbody",{staticClass:"table-bordered"},t._l(t.inactiveAgentStatuses,(function(e,a){return s("tr",{key:a,staticClass:"slds-hint-parent"},[s("th",[s("div",{staticClass:"slds-truncate"})]),s("th",{attrs:{"data-label":"PRIORITY",scope:"row"}},[s("div",{staticClass:"slds-truncate"},[t._v(t._s(e.Priority))])]),s("th",{attrs:{"data-label":"NAME",scope:"row"}},[s("div",{staticClass:"slds-truncate"},[s("a",{attrs:{href:"javascript:void(0);",title:e.Name},on:{click:function(s){return t.goToDetail(e)}}},[t._v(t._s(e.Name))])])]),s("td",{attrs:{"data-label":"ACTIVE"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox5",disabled:""},domProps:{checked:e.IsActive}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox5"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"ACCEPTS CHATS"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox6",disabled:""},domProps:{checked:e.IsAcceptsChats}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox6"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"OFFLINE DEFAULT STATUS"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox7",disabled:""},domProps:{checked:e.IsOfflineDefaultStatus}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox7"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"NON OVERRIDABLE BY SYSTEM"}},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("div",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"options",id:"checkbox8",disabled:""},domProps:{checked:e.IsNonoverridableBySystem}}),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox8"}},[s("span",{staticClass:"slds-checkbox_faux"})])])])])]),s("td",{attrs:{"data-label":"ACTION"}},[s("action-menu",{attrs:{actions:t.inactiveAgentStatusActions,item:e},on:{edit:t.editAgent,activate:function(e){return t.openChangeAgentStatusModal(e,"Activate")}}})],1)])})),0)],1)])]):s("div",{key:"agentStatuses",staticClass:"no-records"},[s("div",{staticClass:"slds-text-body_regular"},[t._v("No Records")])]),s("new-agent-status",{ref:"NewAgentStatus",attrs:{"edit-agent":t.editAgentStatus},on:{save:t.saveEditAgentStatus,hide:t.cancelNewAgentStatus}}),s("ld-modal",{ref:"modal",attrs:{title:"Change Offline Default Status",persistent:t.isChangeStatus},scopedSlots:t._u([{key:"content",fn:function(){return[s("div",{staticClass:"slds-p-around_medium picklist-content"},[t.showLoading?s("loading",{attrs:{"custom-style":"position: relative; padding: 10px"}}):t._e(),t.showLoading?t._e():s("label",{staticClass:"slds-form-element__label"},[s("abbr",{staticClass:"slds-required"},[t._v("* ")]),t._v("Agent Status")]),t.showLoading?t._e():s("input-box",{attrs:{current:t.defaultAgentStatus}}),t.showLoading?t._e():s("div",{staticClass:"slds-form-element__help help-label"},[t._v("The status to use when the system determines an agent is already offline, for example after a computer goes to the sleep mode.")])],1)]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{disabled:t.isChangeStatus,neutral:""},on:{click:function(e){return t.cancelChangeStatus()}}},[t._v("\n          Cancel\n        ")]),s("ld-button",{attrs:{disabled:t.isChangeStatus,brand:""},on:{click:function(e){return t.saveChangeAgentStatus()}}},[t._v("\n          Change\n        ")])]},proxy:!0}])}),s("dropdown",{attrs:{options:t.options,current:t.defaultAgentStatus},on:{select:t.selectAgentStatus}})],1)])},n=[],i=(s("ac6a"),s("5df3"),s("768b")),c=(s("96cf"),s("3b8d")),r=s("310e"),l=s.n(r),o=s("2e20"),d=s("ae6f"),u=s("2d0e"),h=s.n(u),g=s("84e3"),p=s("4017"),S={name:"AgentStatusesSettings",components:{draggable:l.a,NewAgentStatus:o["a"],LdModal:g["LdModal"],LdButton:p["LdButton"]},computed:{disabledNewBtn:function(){return this.agentStatuses.length>=10}},data:function(){return{rightPageHeader:{label:"CHARKET SETTINGS",name:"Agent Statuses",isHidePadding:!0,hasListContent:!0},agentStatuses:[],activeAgentStatuses:[],inactiveAgentStatuses:[],activeAgentStatusActions:["Edit","Deactivate"],inactiveAgentStatusActions:["Edit","Activate"],defaultAgentStatusHideActions:["Deactivate"],selectedAgentStatus:{},defaultAgentStatus:{},isChangeStatus:!1,options:[],showLoading:!1,editAgentStatus:{},dragStartActiveAgentStatus:[],hasRemoting:!1,remoteIndex:0,remoteAgentStatusIndex:-1,remoteAgentStatus:[],canUpdateAgentStatus:!0}},created:function(){this.fetchAgentStatus()},mounted:function(){var t=this;this.$bus.on("click-toast-close",(function(){t.canUpdateAgentStatus=!0,t.hasRemoting=!1}))},beforeDestroy:function(){this.$bus.off("click-toast-close")},methods:{fetchAgentStatus:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$bus.emit("show-loading"),t.next=4,Object(d["h"])();case 4:this.agentStatuses=t.sent,this.activeAgentStatuses=this.agentStatuses.filter((function(t){return t.IsActive})),this.inactiveAgentStatuses=this.agentStatuses.filter((function(t){return!t.IsActive})),this.canUpdateAgentStatus=!0,this.hasRemoting=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.$bus.emit("error",{content:t.t0.msg,type:"error"});case 14:return t.prev=14,this.$bus.emit("hide-loading"),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[0,11,14,17]])})));function e(){return t.apply(this,arguments)}return e}(),fetchActiveAgentStatus:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.showLoading=!0,t.next=4,Promise.all([Object(d["f"])(),Object(d["r"])()]);case 4:e=t.sent,s=Object(i["a"])(e,2),a=s[0],n=s[1],this.options=a,this.defaultAgentStatus=n,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),this.$bus.emit("error",{content:t.t0.msg,type:"error"});case 15:return t.prev=15,this.showLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[0,12,15,18]])})));function e(){return t.apply(this,arguments)}return e}(),resetRemoteAndToast:function(){this.$bus.emit("close-toast"),this.canUpdateAgentStatus=!0,this.hasRemoting=!1},openChangeAgentStatusModal:function(t,e){var s=this,a="",n="";"Deactivate"===e?(a="Deactivate Agent Status",n="Are you sure want to deactivate this agent status?"):"Activate"===e&&(a="Activate Agent Status",n="Are you sure want to activate this agent status?"),this.selectedAgentStatus=t,this.resetRemoteAndToast();var i=this.$confirm({title:a,content:n,ok:"OK"});i.$on("ok",Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s.selectedAgentStatus.Id){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,s.changeAgentStatusState(s.selectedAgentStatus,i);case 4:case"end":return t.stop()}}),t)}))))},newAgentStatus:function(){this.$refs.NewAgentStatus.open(),this.editAgentStatus={},this.resetRemoteAndToast()},cancelNewAgentStatus:function(){this.editAgentStatus={}},editAgent:function(t){this.$refs.NewAgentStatus.open(),this.editAgentStatus=JSON.parse(JSON.stringify(t)),this.resetRemoteAndToast()},saveEditAgentStatus:function(){this.editAgentStatus={},this.fetchAgentStatus()},goToDetail:function(t){this.resetRemoteAndToast(),this.$router.push({path:"/agent-statuses/agent-statuses-settings/".concat(t.Id,"/detail")})},changeDefaultStatus:function(){this.$refs.modal.open(),this.resetRemoteAndToast(),this.fetchActiveAgentStatus()},cancelChangeStatus:function(){this.$refs.modal.close(),this.defaultAgentStatus={}},selectAgentStatus:function(t){this.defaultAgentStatus=t},saveChangeAgentStatus:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isChangeStatus=!0,t.next=4,Object(d["a"])(this.defaultAgentStatus.Id);case 4:this.$refs.modal.close(),this.defaultAgentStatus={},this.$bus.emit("success",{content:"The change was saved.",type:"success"}),this.fetchAgentStatus(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e=this.$parseErrorMessage(t.t0),this.$refs.modal.showError(e);case 14:return t.prev=14,this.isChangeStatus=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[0,10,14,17]])})));function e(){return t.apply(this,arguments)}return e}(),dragStart:function(){var t=this;this.remoteAgentStatusIndex++,this.dragStartActiveAgentStatus=[],this.activeAgentStatuses.map((function(e){return t.dragStartActiveAgentStatus.push(e.Id)}))},dragEnd:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],this.remoteAgentStatus.push({oldAgentStatusIds:this.dragStartActiveAgentStatus,oldAgentStatus:JSON.parse(JSON.stringify(this.activeAgentStatuses)),updateAgentStatus:[],newAgentStatus:[]}),this.activeAgentStatuses.map((function(t,s){s+1!==t.Priority&&(t.Priority=s+1,e.push({Id:t.Id,Priority:t.Priority}))})),this.remoteAgentStatus[this.remoteAgentStatusIndex].updateAgentStatus=JSON.parse(JSON.stringify(e)),this.remoteAgentStatus[this.remoteAgentStatusIndex].newAgentStatus=JSON.parse(JSON.stringify(this.activeAgentStatuses)),!this.hasRemoting&&this.canUpdateAgentStatus&&(this.remoteIndex=this.remoteAgentStatus.length-1,s=this.remoteAgentStatus[this.remoteAgentStatus.length-1],this.recursiveSortAgentStatus(s.oldAgentStatusIds,s.updateAgentStatus,s.oldAgentStatus));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),recursiveSortAgentStatus:function(t,e,s){var a=this;this.hasRemoting=!0,Object(d["I"])(JSON.stringify(t),JSON.stringify(e)).then((function(t){if(a.remoteIndex<a.remoteAgentStatus.length-1){var e=JSON.parse(JSON.stringify(a.remoteAgentStatus[a.remoteIndex].newAgentStatus)),s=[];e.map((function(t){return s.push(t.Id)})),a.remoteIndex=a.remoteAgentStatus.length-1;var n=JSON.parse(JSON.stringify(a.remoteAgentStatus[a.remoteIndex].newAgentStatus)),i=[];n.map((function(t,s){t.Id!==e[s].Id&&i.push({Id:t.Id,Priority:t.Priority})})),a.recursiveSortAgentStatus(s,i,e)}else a.hasRemoting=!1}),(function(t){if("serve_error"===t.type){var e=JSON.parse(h.a.unescape(t.msg));a.$bus.emit("error",{content:e.message,type:"error",hasAction:!0})}else a.$bus.emit("error",{content:t.msg,type:"error"});a.canUpdateAgentStatus=!1,a.activeAgentStatuses=JSON.parse(JSON.stringify(s))}))},changeAgentStatusState:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d["J"])(e.Id,!e.IsActive);case 3:e.IsActive?this.$bus.emit("success",{content:"The agent status was deactivated.",type:"success"}):this.$bus.emit("success",{content:"The agent status was activated.",type:"success"}),s.close(),this.fetchAgentStatus(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$bus.emit("error",{content:t.t0.msg,type:"error"});case 11:return t.prev=11,s.resume(),t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[0,8,11,14]])})));function e(e,s){return t.apply(this,arguments)}return e}()}},f=S,m=(s("60aa"),s("2877")),b=Object(m["a"])(f,a,n,!1,null,"755c1153",null);e["default"]=b.exports},e54d:function(t,e,s){}}]);
//# sourceMappingURL=chunk-034bddd6.js.map