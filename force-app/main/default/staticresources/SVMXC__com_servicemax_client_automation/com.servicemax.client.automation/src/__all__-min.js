(function(){var a=SVMX.Package("com.servicemax.client.automation.automationagent.impl");a.init=function(){a.Class("AutomationAgent",com.servicemax.client.lib.api.Object,{__constructor:function(b){},_selectSingle:function(c,d){var b=this._selectAll(c,d);if(b.length>0){b=b[0];}else{b=null;}return b;},_selectAll:function(b,c){return Ext.ComponentQuery.query(b,c);},fieldByLabel:function(d,e){var c="[fieldLabel="+d+"]";var b=this._selectSingle(c,e);if(b){b=new a.TextFieldAutomationItem({parent:e,agent:this,target:b});}return b;},fieldByTooltip:function(f,e){var d="[tooltip="+f+"]";var c=this._selectSingle(d,e);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:e,agent:this,target:c});}return c;},checkboxByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},buttonByLabel:function(e,f){var d="[text="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},buttonByTooltip:function(f,e){var d="[tooltip="+f+"]";var c=this._selectSingle(d,e);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:e,agent:this,target:c});}return c;},textareaByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},currencyByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},percentByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},emailByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},urlByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},phoneByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},numberByLabel:function(e,f){var d="[fieldLabel="+e+"]";var c=this._selectSingle(d,f);if(c){var b=this.__getAutomationItemTypeFor(c);c=new b({parent:f,agent:this,target:c});}return c;},lookupFieldByLabel:function(d,e){var c="[fieldLabel="+d+"]";var b=this._selectSingle(c,e);if(b){b=new a.LookupAutomationItem({parent:e,agent:this,target:b});}return b;},picklistByLabel:function(d,e){var c="[fieldLabel="+d+"]";var b=this._selectSingle(c,e);if(b){b=new a.PickListAutomationItem({parent:e,agent:this,target:b});}return b;},multipicklistByLabel:function(d,e){var c="[fieldLabel="+d+"]";var b=this._selectSingle(c,e);if(b){b=new a.MultiPickListAutomationItem({parent:e,agent:this,target:b});}return b;},datetimeByLabel:function(d,e){var c="[fieldLabel="+d+"]";var b=this._selectSingle(c,e);if(b){b=new a.DatetimeAutomationItem({parent:e,agent:this,target:b});}return b;},windowByTitle:function(d){var c="window[title="+d+"]";var b=this._selectSingle(c);if(b){b=new a.WindowAutomationItem({parent:null,agent:this,target:b});}return b;},tabByTitle:function(e,d){var c="panel[title="+e+"]";var b=this._selectSingle(c,d);if(b){b=new a.TabAutomationItem({parent:d,agent:this,target:b});}return b;},childByAlias:function(f,e,g){var d="[alias=widget."+f+"]";var c=this._selectAll(d,g),h;if(c.length>0){h=c[e];var b=this.__getAutomationItemTypeFor(h);c=new b({parent:g,agent:this,target:h});}else{c=null;}return c;},__getAutomationItemTypeFor:function(d){var c=com.servicemax.client.ui.components.controls.impl;var b=com.servicemax.client.ui.components.composites.impl;if(d instanceof c.SVMXPicklist){return a.PicklistAutomationItem;}else{if(d instanceof c.SVMXText){return a.TextFieldAutomationItem;}else{if(d instanceof c.SVMXButton){return a.ButtonAutomationItem;}else{if(d instanceof b.SVMXToolbar){return a.ToolbarAutomationItem;}else{if(d instanceof b.SVMXListComposite){return a.ListAutomationItem;}else{if(d instanceof c.SVMXDatetime){return a.DatetimeAutomationItem;}else{if(d instanceof b.SVMXTabPanel){return a.TabAutomationItem;}else{if(d instanceof b.SVMXSection){return a.SectionAutomationItem;}else{if(d instanceof c.SVMXCurrency){return a.CurrencyFieldAutomationItem;}else{if(d instanceof c.SVMXPercent){return a.PercentFieldAutomationItem;}else{if(d instanceof c.SVMXEmail){return a.EmailFieldAutomationItem;}else{if(d instanceof c.SVMXUrl){return a.URLFieldAutomationItem;}else{if(d instanceof c.SVMXPhone){return a.PhoneFieldAutomationItem;}else{if(d instanceof c.SVMXTextArea){return a.TextAreaFieldAutomationItem;}else{if(d instanceof c.SVMXNumber){return a.NumberFieldAutomationItem;}else{if(d instanceof c.SVMXCheckbox){return a.CheckboxFieldAutomationItem;
}else{if(d instanceof c.SVMXMultiSelectPicklist){return a.MultiSelectPicklistFieldAutomationItem;}}}}}}}}}}}}}}}}}}},{});a.Class("AutomationItemBase",com.servicemax.client.automation.automationclient.impl.AutomationItem,{__constructor:function(b){this.__base(b);}},{});a.Class("TextFieldAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},keysImpl:function(b){this._target.focus();com.servicemax.client.automation.chromeutils.EventHelper.sendKeysFromString(b.strKeys,this._target.inputEl.dom);},clearValueImpl:function(b){this._target.focus();if(b=="DEL"){com.servicemax.client.automation.chromeutils.EventHelper.sendDeleteKey(this._target.inputEl.dom);}else{if(b=="BACKSPACE"){com.servicemax.client.automation.chromeutils.EventHelper.sendBackspaceKey(this._target.inputEl.dom);}}}},{});a.Class("TextAreaFieldAutomationItem",a.TextFieldAutomationItem,{__constructor:function(b){this.__base(b);}},{});a.Class("EmailFieldAutomationItem",a.TextFieldAutomationItem,{__constructor:function(b){this.__base(b);}},{});a.Class("URLFieldAutomationItem",a.TextFieldAutomationItem,{__constructor:function(b){this.__base(b);}},{});a.Class("PhoneFieldAutomationItem",a.TextFieldAutomationItem,{__constructor:function(b){this.__base(b);}},{});a.Class("NumberFieldAutomationItem",a.TextFieldAutomationItem,{__constructor:function(b){this.__base(b);}},{});a.Class("CurrencyFieldAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},keysImpl:function(b){this._target.currencyValue.focus();com.servicemax.client.automation.chromeutils.EventHelper.sendKeysFromString(b.strKeys,this._target.currencyValue.inputEl.dom);}},{});a.Class("PercentFieldAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},keysImpl:function(b){this._target.percentValue.focus();com.servicemax.client.automation.chromeutils.EventHelper.sendKeysFromString(b.strKeys,this._target.percentValue.inputEl.dom);}},{});a.Class("ButtonAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},clickImpl:function(b){this._target.el.dom.click();}},{});a.Class("CheckboxFieldAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},checkImpl:function(b){this._target.setValue(true);},unCheckImpl:function(b){this._target.setValue(false);}},{});a.Class("LookupAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},submitImpl:function(b){this._target.lookupText.focus();com.servicemax.client.automation.chromeutils.EventHelper.sendEnterKey(this._target.lookupText.inputEl.dom);},keysImpl:function(b){this._target.lookupText.focus();com.servicemax.client.automation.chromeutils.EventHelper.sendKeysFromString(b.strKeys,this._target.lookupText.inputEl.dom);}},{});a.Class("PickListAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},setValueImpl:function(b){this._target.setValue(b);},keysImpl:function(b){this._target.focus();com.servicemax.client.automation.chromeutils.EventHelper.sendKeysFromString(b.strKeys,this._target.inputEl.dom);}},{});a.Class("MultiPickListAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},setValueImpl:function(b){},keysImpl:function(b){this._target.focus();com.servicemax.client.automation.chromeutils.EventHelper.sendKeysFromString(b.strKeys,this._target.inputEl.dom);}},{});a.Class("DatetimeAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},setCurrentDatetimeImpl:function(b){this._target.currentDatetimeBtn.el.dom.click();}},{});a.Class("WindowAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);}},{});a.Class("ToolbarAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);}},{});a.Class("TabAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},setActiveImpl:function(b){var c=this.tabByTitle(b);this._target.setActiveTab(c._target);}},{});a.Class("SectionAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);}},{});a.Class("ListAutomationItem",a.AutomationItemBase,{__constructor:function(b){this.__base(b);},getCount:function(){return 0;},select:function(b){this._target.getSelectionModel().select(0);}},{});};})();(function(){var automationClientImpl=SVMX.Package("com.servicemax.client.automation.automationclient.impl");automationClientImpl.Class("AutomationClient",com.servicemax.client.lib.api.Object,{__params:null,__rootAutomationItem:null,_logger:null,_currentTestSuite:null,_currentTestCase:null,__logTarget:null,__constructor:function(params){this.__params=params;automationClientImpl.AutomationClient.instance=this;var agent=new com.servicemax.client.automation.automationagent.impl.AutomationAgent();this.__rootAutomationItem=new automationClientImpl.AutomationItem({agent:agent,target:params.root});this.__logTarget=new automationClientImpl.AutomationLogTarget();this._logger=SVMX.getLoggingService().getLogger("SVMX-AUTOMATION");},startTestSuite:function(tsInfo){this._currentTestSuite=tsInfo;
this._logger.info("Starting TestSuite: "+this._currentTestSuite);},endTestSuite:function(){this._logger.info("Ending TestSuite: "+this._currentTestSuite);this._currentTestSuite=null;},startTestCase:function(tcInfo){this._currentTestCase=tcInfo;this._logger.info("Starting TestCase: "+this._currentTestCase);},endTestCase:function(){this._logger.info("Ending TestCase: "+this._currentTestCase);this._currentTestCase=null;},assertFalse:function(value,message){if(value==false){this._logger.error("Assert failed: "+message);}},waitFor:function(seconds,callback){this._logger.info("Waiting for "+seconds+" second(s)...");var timeout=seconds*1000;setTimeout(function(){callback();},timeout);},getRootAutomationItem:function(){return this.__rootAutomationItem;},run:function(options){this.__logTarget.show();if(options.tsPath){var loader=com.servicemax.client.lib.services.ResourceLoaderService.getInstance().createResourceLoader();loader.bind("LOAD_COMPLETE",this.__configLoadSuccess,this);loader.bind("LOAD_ERROR",this.__configLoadError,this);loader.loadAsync({url:options.tsPath,responseType:"text"});}},__configLoadSuccess:function(rle){var steps=this.__prepareSteps(rle.data);eval(steps);},__configLoadError:function(rle){},__prepareSteps:function(steps){return steps;}},{instance:null});automationClientImpl.Class("AutomationItem",com.servicemax.client.lib.api.Object,{_parent:null,_automationAgent:null,_target:null,_logger:null,searchedBy:null,__constructor:function(params){this._parent=params.parent;this._automationAgent=params.agent;this._target=params.target;this._logger=SVMX.getLoggingService().getLogger("SVMX-AUTOMATION");},fieldByLabel:function(label){var ret=this._automationAgent.fieldByLabel(label,this._target);if(ret){ret.searchedBy=label+"<field-label>";}else{}return ret;},fieldByTooltip:function(label){var ret=this._automationAgent.fieldByLabel(label,this._target);if(ret){ret.searchedBy=label+"<field-tooltip>";}else{}return ret;},checkboxByLabel:function(label){var ret=this._automationAgent.checkboxByLabel(label,this._target);if(ret){ret.searchedBy=label+"<checkbox-label>";}else{}return ret;},buttonByLabel:function(label){var ret=this._automationAgent.buttonByLabel(label,this._target);if(ret){ret.searchedBy=label+"<button-label>";}else{}return ret;},buttonByTooltip:function(tooltip){var ret=this._automationAgent.buttonByTooltip(tooltip,this._target);if(ret){ret.searchedBy=tooltip+"<button-tooltip>";}else{}return ret;},currencyByLabel:function(label){var ret=this._automationAgent.currencyByLabel(label,this._target);if(ret){ret.searchedBy=label+"<currency-label>";}else{}return ret;},percentByLabel:function(label){var ret=this._automationAgent.percentByLabel(label,this._target);if(ret){ret.searchedBy=label+"<percent-label>";}else{}return ret;},emailByLabel:function(label){var ret=this._automationAgent.emailByLabel(label,this._target);if(ret){ret.searchedBy=label+"<email-label>";}else{}return ret;},urlByLabel:function(label){var ret=this._automationAgent.urlByLabel(label,this._target);if(ret){ret.searchedBy=label+"<url-label>";}else{}return ret;},phoneByLabel:function(label){var ret=this._automationAgent.phoneByLabel(label,this._target);if(ret){ret.searchedBy=label+"<phone-label>";}else{}return ret;},lookupFieldByLabel:function(label){var ret=this._automationAgent.lookupFieldByLabel(label,this._target);if(ret){ret.searchedBy=label+"<lookup-label>";}else{}return ret;},picklistByLabel:function(label){var ret=this._automationAgent.picklistByLabel(label,this._target);if(ret){ret.searchedBy=label+"<picklist-label>";}else{}return ret;},multipicklistByLabel:function(label){var ret=this._automationAgent.multipicklistByLabel(label,this._target);if(ret){ret.searchedBy=label+"<multipicklist-label>";}else{}return ret;},textareaByLabel:function(label){var ret=this._automationAgent.textareaByLabel(label,this._target);if(ret){ret.searchedBy=label+"<textarea-label>";}else{}return ret;},numberByLabel:function(label){var ret=this._automationAgent.numberByLabel(label,this._target);if(ret){ret.searchedBy=label+"<number-label>";}else{}return ret;},datetimeByLabel:function(label){var ret=this._automationAgent.datetimeByLabel(label,this._target);if(ret){ret.searchedBy=label+"<datetime-label>";}else{}return ret;},windowByTitle:function(title){var ret=this._automationAgent.windowByTitle(title);if(ret){ret.searchedBy=title+"<window-title>";}else{}return ret;},tabByTitle:function(title){var ret=this._automationAgent.tabByTitle(title,this._target);if(ret){ret.searchedBy=title+"<tabpanel-title>";}else{}return ret;},childByAlias:function(alias,index){if(index===undefined){index=0;}var ret=this._automationAgent.childByAlias(alias,index,this._target);if(ret){ret.searchedBy=alias+"<child-alias>";}else{}return ret;},setAutomationAgent:function(agent){this._automationAgent=agent;},getParent:function(){return this._parent;},clickImpl:function(evtParams){},keysImpl:function(evtParams){},clearValueImpl:function(evtParams){},submitImpl:function(evtParams){},setValueImpl:function(evtParams){},setActiveImpl:function(evtParams){},setCurrentDatetimeImpl:function(evtParams){},checkImpl:function(evtParams){},unCheckImpl:function(evtParams){},getId:function(){return this.searchedBy;
},click:function(evtParams){this._logger.info("Executing click() on : "+this.getId());this.clickImpl(evtParams);},keys:function(evtParams){this._logger.info("Executing keys() on : "+this.getId());this.keysImpl(evtParams);},clearValue:function(evtParams){this._logger.info("Executing clearValue keys() on : "+this.getId());this.clearValueImpl(evtParams);},submit:function(evtParams){this._logger.info("Executing submit() on : "+this.getId());this.submitImpl(evtParams);},setValue:function(evtParams){this._logger.info("Executing setValue() on : "+this.getId());this.setValueImpl(evtParams);},setActive:function(evtParams){this._logger.info("Executing setActive() on : "+this.getId());this.setActiveImpl(evtParams);},setCurrentDatetime:function(evtParams){this._logger.info("Executing setCurrentDatetime() on : "+this.getId());this.setCurrentDatetimeImpl(evtParams);},check:function(evtParams){this._logger.info("Executing check() on : "+this.getId());this.checkImpl(evtParams);},unCheck:function(evtParams){this._logger.info("Executing unCheck() on : "+this.getId());this.unCheckImpl(evtParams);}},{});automationClientImpl.Class("AutomationLogTarget",com.servicemax.client.lib.services.AbsractLogTarget,{__ui:null,__constructor:function(options){this.__base(options);},log:function(message,options){if(options.source!="SVMX-AUTOMATION"){return;}var type=options.type;if(message instanceof Error){message=message.stack?message.stack.toString():message.toString();}message=type+": "+message;var ui=this.__ui.getComponent(0),val=ui.getValue();ui.setValue(val+"\n"+message);ui.selectText(ui.getValue().length);},show:function(){this.__ui=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXWindow",{width:500,height:200,title:"Automation Log",layout:{type:"fit"},items:[{xtype:"svmx.textarea"}]});this.__ui.show();this.__ui.setZIndex(75000);},clear:function(){},close:function(){}},{});function fieldByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().fieldByLabel(label);}function checkboxByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().checkboxByLabel(label);}function buttonByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().buttonByLabel(label);}function buttonByTooltip(tooltip){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().buttonByTooltip(tooltip);}function currencyByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().currencyByLabel(label);}function percentByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().percentByLabel(label);}function emailByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().emailByLabel(label);}function urlByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().urlByLabel(label);}function phoneByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().phoneByLabel(label);}function fieldByTooltip(tooltip){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().fieldByTooltip(tooltip);}function lookupFieldByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().lookupFieldByLabel(label);}function textareaByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().textareaByLabel(label);}function picklistByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().picklistByLabel(label);}function multipicklistByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().multipicklistByLabel(label);}function numberByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().numberByLabel(label);}function datetimeByLabel(label){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().datetimeByLabel(label);}function windowByTitle(title){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().windowByTitle(title);}function tabByTitle(title){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().tabByTitle(title);}function childByAlias(alias,index){return automationClientImpl.AutomationClient.instance.getRootAutomationItem().childByAlias(alias,index);}function waitFor(seconds,callback){return automationClientImpl.AutomationClient.instance.waitFor(seconds,callback);}function startTestSuite(tsInfo){return automationClientImpl.AutomationClient.instance.startTestSuite(tsInfo);}function endTestSuite(){return automationClientImpl.AutomationClient.instance.endTestSuite();}function startTestCase(tcInfo){return automationClientImpl.AutomationClient.instance.startTestCase(tcInfo);}function endTestCase(){return automationClientImpl.AutomationClient.instance.endTestCase();}function assertFalse(value,message){return automationClientImpl.AutomationClient.instance.assertFalse(value,message);
}})();(function(){var a=SVMX.Package("com.servicemax.client.automation.chromeutils");a.Class("EventHelper",com.servicemax.client.lib.api.Object,{__constructor:function(){}},{sendKeysFromString:function(e,f){var c,b=e.length,d;for(c=0;c<b;c++){d=e.charCodeAt(c);a.EventHelper.sendCharCode(d,f);}},sendEnterKey:function(b){a.EventHelper.sendKeyCode(13,b);},sendDeleteKey:function(b){a.EventHelper.sendCharCode(46,b);},sendBackspaceKey:function(b){a.EventHelper.sendCharCode(8,b);},sendKeyCode:function(b,d){var c=document.createEvent("KeyboardEvent");c.keyCodeVal=b;Object.defineProperty(c,"keyCode",{get:function(){return this.keyCodeVal;}});c.initKeyboardEvent("keydown",true,false,null,0,0,0,0,b,0);d.dispatchEvent(c);},sendCharCode:function(b,d){var c=document.createEvent("KeyboardEvent");Object.defineProperty(c,"keyCode",{get:function(){return this.charCodeVal;}});Object.defineProperty(c,"which",{get:function(){return this.charCodeVal;}});c.initKeyboardEvent("keypress",true,true,document.defaultView,false,false,false,false,b,b);c.charCodeVal=b;d.value+=String.fromCharCode(b);d.dispatchEvent(c);}});})();(function(){var a=SVMX.Package("com.servicemax.client.automation.impl");a.Class("Module",com.servicemax.client.lib.api.ModuleActivator,{__constructor:function(){this.__base();},beforeInitialize:function(){com.servicemax.client.automation.automationagent.impl.init();},initialize:function(){},afterInitialize:function(){}},{});})();