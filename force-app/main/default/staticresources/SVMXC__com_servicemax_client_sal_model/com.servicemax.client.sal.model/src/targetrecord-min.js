(function(){var a=SVMX.Package("com.servicemax.client.sal.model.sfmdelivery.targetrecord.impl");a.Class("SFMTargetRecord",com.servicemax.client.lib.api.Object,{__data:null,__metadata:null,__additionalInfo:null,__constructor:function(d,b,c){this.__data=d;this.__metadata=b;this.__additionalInfo=c;},getParentObjectName:function(){return this.__metadata.page.header.headerLayout[SVMX.OrgNamespace+"__Object_Name__c"];},getHeaderLayoutId:function(){return this.__metadata.page.header.hdrLayoutId;},getProcessType:function(){return this.__metadata.response.sfmProcessType;},getHeaderRecords:function(){var c=[],f=this.__data.getRawData().sfmData,b={targetRecordAsKeyValue:[]},g=null;for(var d in f){if(d=="details"||d=="attributes"||d=="sourceRecordID"){continue;}var e=f[d];g=null;if(typeof(e)=="object"&&e!==undefined&&e!==null){g={key:d,value:e.fieldvalue.key,value1:e.fieldvalue.value};}else{if(!(d=="RecordTypeId"&&e===undefined)){g={key:d,value:e};}}if(g){b.targetRecordAsKeyValue[b.targetRecordAsKeyValue.length]=g;}}c[c.length]=b;return c;},getDetailRecords:function(){var n=[],b=this.__data.getRawData().sfmData.details,e=null,h=null;for(h in b){n[n.length]={};}for(h in b){var o=this.getDetailMetadata(h),j=null,r=null,d=null,c=b[h].lines,k,g=c.length,q=null,m=null;e={};e.aliasName=o.dtlLayoutId;e.pageLayoutId=o.dtlLayoutId;e.objName=o.DetailLayout[SVMX.OrgNamespace+"__Object_Name__c"];e.parentColumnName=this.getDetailParentColumnName(o);e.records=[];e.deleteRecID=this.getDetailDeletedRecords(h);n[o.DetailLayout[SVMX.OrgNamespace+"__Sequence__c"]-1]=e;for(var k=0;k<g;k++){q=c[k],m={};r=q.Id;if(r){m.targetRecordId=r;}d=q.sourceRecordID;if(d){m.sourceRecordId=d;}m.targetRecordAsKeyValue=[];var f=false;for(key in q){f=false;if(key=="attributes"||key=="sourceRecordID"||key.indexOf("__key",key.length-"__key".length)!==-1){continue;}var p=q[key];if(q[key+"__key"]){p=q[key+"__key"];f=true;}j=null;if(typeof(p)=="object"&&p!==undefined&&p!==null){if(f){j={key:key,value:p.key,value1:p.value};}else{j={key:key,value:p.fieldvalue.key,value1:p.fieldvalue.value};}}else{if(!(key=="RecordTypeId"&&p===undefined)){j={key:key,value:p};}}if(j){m.targetRecordAsKeyValue[m.targetRecordAsKeyValue.length]=j;}}e.records[e.records.length]=m;}}return n;},getDetailDeletedRecords:function(e){var d=[],g=this.__data.getDeletedRecords(),f,c=g.length,b;for(f=0;f<c;f++){b=g[f];if(b.alias==e){d.push(b.id);}}return d;},getDetailMetadata:function(d){var c=null,f=this.__metadata.page.details,e,b=f.length;for(e=0;e<b;e++){if(f[e].dtlLayoutId==d){c=f[e];break;}}return c;},getDetailParentColumnName:function(f){var d=null,c=f.dtlLayoutId,g=this.__metadata.response.stringMap,e,b=g.length;for(e=0;e<b;e++){if(g[e].key=="PROCESSTYPE"){continue;}if(g[e].key==c){d=g[e].value;break;}}return d;},getRequest:function(){var d={headerRecord:{}};d.sfmProcessId=this.__additionalInfo.sfmProcessId;d.eventType=this.__additionalInfo.eventType;d.headerRecord.objName=this.getParentObjectName();d.headerRecord.pageLayoutId=this.getHeaderLayoutId();d.headerRecord.records=this.getHeaderRecords();d.detailRecords=this.getDetailRecords();var c=this.getProcessType();if(c=="EDIT"){d.headerRecord.records[0].targetRecordId=this.__data.getTargetRecordId();}else{if(c=="SOURCETOTARGET"){var e=this.__data.getTargetRecordId();if(e){d.headerRecord.records[0].targetRecordId=e;var b=d.headerRecord.records[0].targetRecordAsKeyValue;b[b.length]={key:"Id",value:e};}d.headerRecord.records[0].sourceRecordId=this.__data.getSourceRecordId();}else{if(c=="SOURCETOTARGETONLYCHILDROWS"){d.headerRecord.records[0].targetRecordId=this.__data.getTargetRecordId();d.headerRecord.records[0].sourceRecordId=this.__data.getTargetRecordId();}else{if(c=="STANDALONE CREATE"){}else{if(c=="VIEW RECORD"){}}}}}return d;}},{});})();