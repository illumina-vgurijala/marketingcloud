(function(){var a=SVMX.Package("com.servicemax.client.entitlement.ui.desktop.api");a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("ENTITLEMENT");Ext.define("com.servicemax.client.entitlement.ui.desktop.api.RootContainer",{extend:"com.servicemax.client.ui.components.composites.impl.SVMXSection",cls:"entitlement-root-container",width:"100%",__workOrderHeaderRecord:null,constructor:function(c){c=Ext.apply({title:b.T("TAG060","Check Entitlement: Work Order"),header:false,},c||{});this.callParent(arguments);},entitlementSelectionPanel:null,initComponent:function(){this.callParent(arguments);var n=this;var h=n.__engine.getWorkOrderDetailInfo();n.__workOrderHeaderRecord=h.headerRecord;var e=[];var f=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{width:"100%",cls:"svmx-ent-headerToolBar",dock:"top",autoHeight:true,});var q=SVMX.create("Ext.form.Panel",{border:false,flex:1,autoHeight:true,layout:{type:"vbox",align:"stretch",},items:[{xtype:"label",text:b.T("TAG060","Check Entitlement: Work Order"),cls:"svmx-ent-title"},{xtype:"label",text:n.__workOrderHeaderRecord.recordName,cls:"svmx-ent-WOName"},{xtype:"label",text:n.__workOrderHeaderRecord.accountName,cls:"svmx-ent-WOAccount",hidden:n.__workOrderHeaderRecord.accountName==null},{xtype:"label",text:b.T("TAG009","Contact")+": "+n.__workOrderHeaderRecord.contactName,cls:"svmx-ent-WOContact",hidden:n.__workOrderHeaderRecord.contactName==null}]});f.add(q);n.__showDetailView=h.entitlementSettings.entitlementSupportOnLines=="True"?true:false;if(n.__showDetailView){var l=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXText",{cls:"svmx-text-filter-icon svmx-ent-toolbarElement",emptyText:b.T("TAG061","Enter Installed Product or Product"),width:"30%",height:30,id:"searchtext",listeners:{change:function(r,s){n.entitlementPanel.workDetailstore.clearFilter();n.entitlementPanel.workDetailstore.filter(new Ext.util.Filter({filterFn:function(w){var u,x,t;var v=Ext.String.escapeRegex;u=new RegExp(Ext.escapeRe(Ext.String.htmlEnode(l.getValue())),"i");x=u.test(w.data.installedBaseName);t=u.test(w.data.productName);if(x||t){return true;}else{return false;}}}));}}});f.add(l);var g=SVMX.create("Ext.form.Checkbox",{boxLabel:b.T("TAG062","Show All"),checked:n.__engine.__manualEntitlementSettings.showAllLines=="True"?true:false,id:"showAll",cls:"svmx-ent-showAllCheckbox",handler:function(){if(g.getValue()){n.entitlementPanel.__showAll=true;n.entitlementPanel.loadData(n.__workOrderHeaderRecord.listDetailRecords);}else{n.entitlementPanel.__showAll=false;n.entitlementPanel.loadData(n.getUnentitledData(n.__workOrderHeaderRecord.listDetailRecords));}}});f.add(g);}var j=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG007","Check Entitlement"),id:"checkentitlement",scale:"medium",height:30,cls:"svmx-ent-toolbarElement",handler:function(){n.checkEntitlementCallBack();}});f.add(j);var m=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG043","Settings"),cls:"svmx-ent-toolbarElement",margin:"0 3",scale:"medium",height:30,handler:function(){n.showSettingPanel(n.__engine.getEntitlementSettings());}});f.add(m);var d=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG026","Back to Work Order"),scale:"medium",height:30,handler:function(){window.location="/"+SVMX.getUrlParameter("id");}});f.add(d);f.add({iconCls:"svmx-ent-help-icon ",cursor:"pointer",scale:"large",cls:"svmx-ent-help",tooltip:b.T("TAG015","Entitlement Check Help"),href:b.T("TAG000","Entitlement Check Help")});n.add(f);n.settingPanel=SVMX.create("com.servicemax.client.entitlement.ui.desktop.api.SettingPanel",{__parent:n,__engine:n.__engine,border:false,collapsible:false,hidden:true,title:b.T("TAG005","Entitlement Settings")});n.entitlementSelectionPanel=SVMX.create("com.servicemax.client.entitlement.ui.desktop.api.EntitlementSelectionPanel",{__parent:n,__engine:n.__engine,border:false,collapsible:false,hidden:true,__selectedEntitlement:null,});n.add(n.settingPanel);var o=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{width:"100%",dock:"bottom",style:"margin-top: 20px",border:false,});var c=SVMX.create("Ext.Toolbar.Fill",{});o.add(c);var p=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG063","Cancel"),scale:"medium",height:30,handler:function(){window.location="/"+SVMX.getUrlParameter("id");}});o.add(p);var k=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG008","Save Entitlement"),disabled:true,scale:"medium",height:30,id:"saveEnttoDatabase",handler:function(s,v){var t={};s.setDisabled(true);t.entitlementSettings=n.__engine.getEntitlementSettings();t.headerId=n.__workOrderHeaderRecord.recordID;t.entitlementInfoMap=[];if(n.__showDetailView){var r=n.entitlementPanel.workDetailstore.data.items;
r.forEach(function(w,x){if(w.raw.selectedPSEntitlement!=undefined&&w.raw.selectedPSEntitlement!=null){t.entitlementInfoMap.push(w.raw.selectedPSEntitlement);}});}else{var u={};u.recordID=SVMX.getUrlParameter("id");u.entitlementInfo=n.entitlementSelectionPanel.__selectedEntitlement;t.entitlementInfoMap.push(u);}n.__engine.saveEntitlement(t,function(w){SVMX.getCurrentApplication().getApplicationQuickMessageHandler().showQuickMessage(Ext.String.htmlEncode(w.messageList[0]),7000);if(n.__showDetailView){if(w.success){var x=Ext.getCmp("workDetailPannel");var z=x.__parent.__workOrderHeaderRecord.listDetailRecords;if(w.headerRecord!=null){var A=w.headerRecord.listDetailRecords;A.forEach(function(C,B){z.forEach(function(E,D){if(E.recordID==C.recordID){if(C.entitlementPerformed){E.selectedEntitlementInfo=C.selectedEntitlementInfo;E.entitlementPerformed=C.entitlementPerformed;E.selectedPSEntitlement=null;if(C.selectedEntitlementInfo.warrantyOrScon!="notcovered"){E.selectEntitlementName=C.selectedEntitlementInfo.recordName;}else{E.selectEntitlementName="Not Covered";}}}});});var y=Ext.getCmp("searchtext");y.setValue("");x.__parent.__workOrderHeaderRecord.listDetailRecords=z;if(x.__showAll){x.loadData(x.__parent.__workOrderHeaderRecord.listDetailRecords);}else{x.loadData(x.__parent.getUnentitledData(x.__parent.__workOrderHeaderRecord.listDetailRecords));}}}}else{if((!(typeof sforce==="undefined"||typeof sforce.one==="undefined")&&SVMX.getClient().getApplicationParameter("prefix"))||(SVMX.getClient().getApplicationParameter("uiTheme")&&SVMX.getClient().getApplicationParameter("uiTheme")=="Theme4d")){sforce.one.navigateToSObject(SVMX.getUrlParameter("id"));}else{window.location="/"+SVMX.getUrlParameter("id");}}});}});o.add(k);if(n.__showDetailView){n.entitlementPanel=SVMX.create("com.servicemax.client.entitlement.ui.desktop.api.EntitlementPanel",{__parent:n,__engine:n.__engine,border:false,collapsible:false,hidden:true,__showAll:g.getValue(),});n.add(n.entitlementPanel);if(n.entitlementPanel.__showAll){n.entitlementPanel.loadData(n.__workOrderHeaderRecord.listDetailRecords);}else{n.entitlementPanel.loadData(n.getUnentitledData(n.__workOrderHeaderRecord.listDetailRecords));}n.entitlementPanel.show();}else{n.entitlementSelectionPanel.__selectedEntitlement=n.__workOrderHeaderRecord.selectedEntitlementInfo;n.entitlementSelectionPanel.loadData(n.__workOrderHeaderRecord.listEntitlementInfo,n.__workOrderHeaderRecord);n.entitlementSelectionPanel.loadParentData();n.entitlementSelectionPanel.show();n.checkEntitlementCallBack();n.add(n.entitlementSelectionPanel);}n.add(o);},showSettingPanel:function(c){this.settingPanel.show();this.disable();},showEntitlementSelectionPanel:function(c,d){c.add(this.entitlementSelectionPanel);c.__workdetailSelected=d;this.entitlementSelectionPanel.loadData(d.raw.listEntitlementInfo,d.raw);this.entitlementSelectionPanel.loadParentData();this.entitlementSelectionPanel.show();},getUnentitledData:function(d){var c=[];if(d!=null){d.forEach(function(e){if(e.selectedEntitlementInfo==null){c.push(e);}});}return c;},checkEntitlementCallBack:function(){parentWin=this;var d={};d.headerId=parentWin.__workOrderHeaderRecord.recordID;d.entitlementSettings=parentWin.__engine.getEntitlementSettings();if(parentWin.__showDetailView){var e=[];var c=parentWin.entitlementPanel.workDetailstore.data.items;Ext.each(c,function(f){e.push(f.data.recordID);});d.detailLineIDs=e;}parentWin.__engine.CheckEntitlement(d,function(f){if(f.success){if(parentWin.__showDetailView){f.headerRecord.listDetailRecords.forEach(function(j,h){parentWin.entitlementPanel.workDetailstore.findRecord("recordID",j.recordID).raw=j;var k=parentWin.entitlementPanel.workDetailstore.allData.forEach(function(n,m){if(n.recordID==j.recordID){if(parentWin.entitlementPanel.workDetailstore.allData[m].selectedPSEntitlement!=null&&parentWin.entitlementPanel.workDetailstore.allData[m].selectedPSEntitlement!=undefined){j.selectedPSEntitlement=parentWin.entitlementPanel.workDetailstore.allData[m].selectedPSEntitlement;}parentWin.entitlementPanel.workDetailstore.allData[m]=j;}});var l=parentWin.__workOrderHeaderRecord.listDetailRecords.forEach(function(n,m){if(n.recordID==j.recordID){if(parentWin.__workOrderHeaderRecord.listDetailRecords[m].selectedPSEntitlement!=null&&parentWin.__workOrderHeaderRecord.listDetailRecords[m].selectedPSEntitlement!=undefined){j.selectedPSEntitlement=parentWin.__workOrderHeaderRecord.listDetailRecords[m].selectedPSEntitlement;}parentWin.__workOrderHeaderRecord.listDetailRecords[m]=j;}});});}else{var g=f.headerRecord.listEntitlementInfo;parentWin.entitlementSelectionPanel.loadData(g,f.headerRecord);parentWin.entitlementSelectionPanel.loadParentData();}}else{SVMX.getCurrentApplication().getApplicationQuickMessageHandler().showQuickMessage(Ext.String.htmlEncode(f.messageList[0]),7000,"success");}});},entHistoryCall:function(){this.entHisPanel.callEntHisWebservice();}});};})();(function(){var a=SVMX.Package("com.servicemax.client.entitlement.ui.desktop.api.entitlement");
a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("ENTITLEMENT");Ext.define("com.servicemax.client.entitlement.ui.desktop.api.EntitlementPanel",{extend:"com.servicemax.client.ui.components.composites.impl.SVMXSection",width:"100%",height:"100%",border:false,id:"workDetailPannel",constructor:function(c){this.callParent([c]);},initComponent:function(){this.callParent(arguments);var g=this;Ext.define("DetailLines",{extend:"Ext.data.Model",fields:[{name:"selectEntitlementName"},{name:"productName"},{name:"recordName"},{name:"installedBaseName"},{name:"description"},{name:"selectedEntitlementInfo",type:"object"},{name:"updatedEntitlementInfo",type:"object"},{name:"recordID"},{name:"entitlementPerformed"},{name:"listEntitlementInfo",type:"object"}]});var j=this.__entitlementSelectionWindow=SVMX.create("Ext.window.Window",{id:"entitlementSelectionWindow",layout:"anchor",border:false,title:b.T("TAG072","Select Warranty/Contract"),header:{titleAlign:"center",},closable:true,hidden:true,closeAction:"hide",width:"60%",__parentWin:g,resizable:false,overflowY:"auto",cls:"entitlement-root-container",listeners:{beforehide:function(l,k){var m=Ext.getCmp("selectionWindowTab");m.items.items[0].setVisible(true);Ext.getCmp("entHisPanel").loadEntHis([]);m.items.each(function(o,n){if(n!=0&&n!=1){m.remove(o);}});},hide:function(l,k){l.hide();Ext.getCmp("selectEntBtn").setDisabled(true);l.__parentWin.enable();}}});g.add(j);var d=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{width:"100%",dock:"bottom",border:false,style:"margin-top: 20px",});var f=SVMX.create("Ext.Toolbar.Fill",{});d.add(f);var h=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG021","Select"),id:"selectEntBtn",disabled:true,scale:"medium",height:30,handler:function(l,n){var p={};var m=Ext.getCmp("entitlementSelection");p.recordID=m.__parentData.recordID;p.entitlementInfo=m.__selectedEntitlement;m.__parentData.selectedPSEntitlement=p;m.__selectedEntitlement=null;var o=Ext.getCmp("saveEnttoDatabase");o.setDisabled(false);l.setDisabled(true);j.hide();j.__parentWin.enable();var k=j.__workdetailSelected;k.set("updatedEntitlementInfo",m.__parentData.selectedPSEntitlement.entitlementInfo);k.store.fireEvent("refresh");}});d.add(h);var e=20;g.workDetailstore=SVMX.create("Ext.data.Store",{model:"DetailLines",data:[],storeId:"entitlement_store",autoLoad:false,pageSize:e,proxy:{type:"memory",reader:{type:"array",root:"data",totalProperty:"total"}},allData:[],listeners:{beforeload:function(s,k,p){var n=this.allData||[];var r=k.start;var l=k.limit;var t=n.slice(r,r+l);var o=[];for(var m=0;m<t.length;m++){var q=Ext.create("DetailLines",t[m]);o.push(q);}s.proxy.data={data:o,total:n.length,};}}});var c=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{autoScroll:true,maxHeight:450,margin:"5 10",anchor:"100%",store:g.workDetailstore,border:false,emptyText:b.T("TAG077","No valid Products Serviced lines to display"),viewConfig:{deferEmptyText:false,},columns:[{xtype:"rownumberer",text:b.T("TAG080","No."),align:"left",flex:1/5},{flex:1,text:b.T("TAG045","Warranties/Service Contracts"),dataIndex:"selectEntitlementName",align:"left",resizable:true,readOnly:true,renderer:function(p,o,k,q,m,l){var n="";if(k.data.updatedEntitlementInfo!=""&&k.data.updatedEntitlementInfo!=undefined){n=k.data.updatedEntitlementInfo.recordName!=undefined?k.data.updatedEntitlementInfo.recordName:b.T("TAG068","Not Covered");o.tdCls="svmx-ent-uncommitedChanges";}else{if((k.data.selectedEntitlementInfo!=null&&k.data.selectedEntitlementInfo!=undefined)&&k.data.entitlementPerformed){if(k.data.selectedEntitlementInfo.warrantyOrScon=="notcovered"){o.tdCls="svmx-ent-notCovered";n=b.T("TAG068","Not Covered");}else{n=k.data.selectedEntitlementInfo.recordName!=null?k.data.selectedEntitlementInfo.recordName:k.data.selectedEntitlementInfo.warrantyTermName;}}else{o.tdCls="svmx-ent-emptytext";o.style="font-style: italic !important";n=b.T("TAG081","Select for Contract/Warranty options");}}return Ext.String.htmlEncode(n);}},{flex:1,text:b.T("TAG073","Product"),dataIndex:"productName",align:"left",resizable:false,readOnly:true,sortable:true,renderer:function(o,n,k,p,m,l){return Ext.String.htmlEncode(o);}},{flex:1,text:b.T("TAG074","Installed Product"),dataIndex:"installedBaseName",align:"left",resizable:false,readOnly:true,sortable:true,renderer:function(o,n,k,p,m,l){return Ext.String.htmlEncode(o);}},{flex:1,text:b.T("TAG075","Description"),dataIndex:"description",align:"left",resizable:false,readOnly:true,sortable:false,renderer:function(o,n,k,p,m,l){return Ext.String.htmlEncode(o);}}],dockedItems:[{xtype:"pagingtoolbar",store:g.workDetailstore,dock:"bottom",displayInfo:false,layout:{pack:"center"},beforePageText:b.T("TAG079","Page"),listeners:{afterrender:function(){this.child("#refresh").hide();}}}],listeners:{cellclick:function(m,q,l,k,n,p,o){j.add(g.__parent.showEntitlementSelectionPanel(j,k));
j.add(d);j.show();j.__parentWin.disable();}}});g.add(c);},loadData:function(c){this.workDetailstore.allData=c;this.workDetailstore.loadPage(1);},});};})();(function(){var a=SVMX.Package("com.servicemax.client.entitlement.ui.desktop.api.entitlementHistory");a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("ENTITLEMENT");Ext.define("com.servicemax.client.entitlement.ui.desktop.api.EntitlementHistoryPanel",{extend:"com.servicemax.client.ui.components.composites.impl.SVMXSection",autoScroll:true,cls:"entitlement-root-container",id:"entHisPanel",constructor:function(c){this.callParent([c]);},initComponent:function(){this.callParent(arguments);var c=this;c.entHisStore=SVMX.create("Ext.data.Store",{fields:[{name:"warrantyOrSconName"},{name:"warrantyOrSconId"},{name:"startDate"},{name:"endDate"},{name:"slaTermName"},{name:"slaTermID"},{name:"dateOfEntitlement"},{name:"coveredBy"},{name:"recordId"},{name:"recordName"},],data:[],storeId:"entitlementHis_store",});var d=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{autoScroll:true,margin:"5 10",anchor:"100%",store:c.entHisStore,emptyText:b.T("TAG095","No Entitlement History Available"),border:false,id:"entHistoryGrid",height:330,viewConfig:{deferEmptyText:false,},columns:[{flex:1,text:b.T("TAG017","Entitlement History"),dataIndex:"recordName",resizable:true,readOnly:true,sortable:true,renderer:function(k,j,f,l,h,g){if(f.data.recordName!=null){return'<a class="entHistoryRecord" href="#">'+f.data.recordName+"</a>";}else{return" ";}}},{flex:1,text:b.T("TAG045","Warranties/Service Contracts"),dataIndex:"warrantyOrSconName",resizable:true,readOnly:true,sortable:true,renderer:function(k,j,f,l,h,g){if(f.data.warrantyOrSconName!=null){return'<a class="sconWarrantyRecord" href="#">'+Ext.String.htmlEncode(f.data.warrantyOrSconName)+"</a>";}else{return" ";}}},{flex:1,text:b.T("TAG055","SLA Terms"),dataIndex:"slaTermName",align:"center",resizable:false,readOnly:true,sortable:true,renderer:function(k,j,f,l,h,g){if(f.data.slaTermName!=null){return'<a class="slaRecord" href="#">'+Ext.String.htmlEncode(f.data.slaTermName)+"</a>";}else{return" ";}}},{flex:1,text:b.T("TAG052","Start Date"),dataIndex:"startDate",align:"center",resizable:false,readOnly:true,sortable:true,},{flex:1,text:b.T("TAG053","End Date"),dataIndex:"endDate",align:"center",resizable:false,readOnly:true,sortable:true,},{flex:1,text:b.T("TAG096","Date of Entitlement"),dataIndex:"dateOfEntitlement",align:"center",resizable:false,readOnly:true,hidden:true,sortable:true},],listeners:{cellclick:function(h,n,g,f,k,m,l){var j=h.store.getAt(m);l.preventDefault();if(l.getTarget("a.entHistoryRecord")){c.__parent.findDuplicateTab(Ext.getCmp("selectionWindowTab"),Ext.getCmp("entitlementSelection"),f.data.recordName,f.data.recordId);}if(l.getTarget("a.sconWarrantyRecord")){c.__parent.findDuplicateTab(Ext.getCmp("selectionWindowTab"),Ext.getCmp("entitlementSelection"),f.data.warrantyOrSconName,f.data.warrantyOrSconId);}if(l.getTarget("a.slaRecord")){c.__parent.findDuplicateTab(Ext.getCmp("selectionWindowTab"),Ext.getCmp("entitlementSelection"),f.data.slaTermName,f.data.slaTermID);}},}});c.add(d);var e=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{width:"100%",dock:"bottom",border:false});},callEntHisWebservice:function(){var d=this;var c={};c.headerId=d.__parentRecordID;var e=d.__engine.getEntitlementHistory(c,function(f){if(f.headerRecord.entitlementHistoryMap!=null){d.loadEntHis(f.headerRecord.entitlementHistoryMap[c.headerId]);}});},loadEntHis:function(d){if(this.__parent.__parent.__showDetailView){var c=Ext.getCmp("entHistoryGrid");c.down("[dataIndex=slaTermName]").hide();}this.entHisStore.loadData(d);}});};})();(function(){var a=SVMX.Package("com.servicemax.client.entitlement.ui.desktop.api.entitlementSelection");a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("ENTITLEMENT");Ext.define("com.servicemax.client.entitlement.ui.desktop.api.EntitlementSelectionPanel",{extend:"com.servicemax.client.ui.components.composites.impl.SVMXSection",height:"100%",border:false,id:"entitlementSelection",__parentData:null,autoscroll:true,style:"top: 10px;",layout:"anchor",constructor:function(c){this.callParent([c]);},initComponent:function(){this.callParent(arguments);var n=this;var k=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{title:b.T("TAG067","Entitlement Selection"),bodyPadding:10,items:[],});var f=SVMX.create("Ext.form.Panel",{border:false,id:"entitlementInfoLabel",cls:"svmx-ent-entitlementInfoPanel",layout:{type:"vbox",},items:[]});k.add(f);var h=SVMX.create("Ext.window.Window",{id:"coveredServiceWindow",layout:"anchor",border:false,title:b.T("TAG082","Included Services"),header:{titleAlign:"center",},closable:true,hidden:true,closeAction:"close",width:"60%",layout:"anchor",resizable:false,autoScroll:true,cls:"entitlement-root-container",__parentWin:n,listeners:{hide:function(s,r){s.hide();
s.__parentWin.enable();}},});n.coveredServiceStore=SVMX.create("Ext.data.Store",{fields:[{name:"serviceName"},{name:"allowedUnits"},{name:"consumedUnits"},{name:"tracked"},{name:"recordID"},{name:"selected"}],data:[],storeId:"cs_store",listeners:{datachanged:function(r,s){var t=r.getRange();if(t.length>0){t[0].set("result_row_selected",true);}Ext.each(t,function(u){if(u.data.selected){u.set("result_row_selected",true);t[0].set("result_row_selected",false);}});}}});var c=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{autoScroll:true,margin:"20 10",anchor:"100%",store:n.coveredServiceStore,border:false,columns:[{maxWidth:40,width:40,xtype:"svmx.columnradio",dataIndex:"result_row_selected",contentAlign:"left",id:"selectedEntitlement",sortable:false,listeners:{onselect:function(u,s,t){var r=Ext.getCmp("coveredServiceWindow");var v=r.__SCParentData.getData();v.coveredService.forEach(function(x){if(x.recordID==s.data.recordID){x.selected=true;}else{x.selected=false;}});var w=r.__SCParentData;w.set("coveredService",v.coveredService);w.store.fireEvent("refresh");}}},{flex:1,text:b.T("TAG083","Service Name"),dataIndex:"serviceName",resizable:false,readOnly:true,sortable:false,renderer:function(v,u,r,w,t,s){return Ext.String.htmlEncode(v);}},{flex:1,text:b.T("TAG084","Allowed Units"),dataIndex:"allowedUnits",align:"center",resizable:false,readOnly:true,sortable:false,renderer:function(v,u,r,w,t,s){return Ext.String.htmlEncode(v);}},{flex:1,text:b.T("TAG085","Consumed Units"),dataIndex:"consumedUnits",align:"center",resizable:false,readOnly:true,sortable:false,renderer:function(v,u,r,w,t,s){return Ext.String.htmlEncode(v);}},{flex:1,text:b.T("TAG086","Tracked?"),dataIndex:"tracked",align:"center",resizable:false,readOnly:true,sortable:false},]});h.add(c);var d=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{width:"100%",dock:"bottom"});var e=SVMX.create("Ext.Toolbar.Fill",{});d.add(e);var l=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG088","Close"),scale:"medium",height:30,handler:function(r,s){h.close();h.__parentWin.enable();}});d.add(l);h.add(d);n.warrantystore=SVMX.create("Ext.data.Store",{fields:[{name:"recordName"},{name:"startDate"},{name:"endDate"},{name:"coveredBy"},{name:"sLARecordName"},{name:"coveredService"},{name:"recordId"},{name:"sLARecordId"},{name:"uniqueID"},{name:"warrantyOrScon"},{name:"warrantyTermId"},{name:"warrantyTermName"},{name:"installedBaseName"}],data:[],storeId:"warranty_store",listeners:{datachanged:function(r,s){var u=r.getRange();if(u.length>0){var t=Ext.getCmp("entitlementSelection");Ext.each(u,function(v){if(t.__parentData.selectedPSEntitlement!=undefined){if(t.__parentData.selectedPSEntitlement.entitlementInfo!=null&&t.__parentData.selectedPSEntitlement.entitlementInfo.uniqueID!=null&&v.data.uniqueID==t.__parentData.selectedPSEntitlement.entitlementInfo.uniqueID){v.set("result_row_selected",true);}}else{if(t.__parentData.selectedEntitlementInfo!=null&&t.__parentData.selectedEntitlementInfo.uniqueID!=null&&v.data.uniqueID==t.__parentData.selectedEntitlementInfo.uniqueID){v.set("result_row_selected",true);}}});}}}});n.serviceContractstore=SVMX.create("Ext.data.Store",{fields:[{name:"recordName"},{name:"startDate"},{name:"endDate"},{name:"coveredBy"},{name:"sLARecordName"},{name:"coveredService"},{name:"coveredServiceName"},{name:"recordId"},{name:"uniqueID"},{name:"sLARecordId"},{name:"warrantyOrScon"},{name:"warrantyTermId"},{name:"warrantyTermName"}],data:[],storeId:"sc_store",listeners:{datachanged:function(r,t){var s=r.getRange();if(s.length>0){var u=Ext.getCmp("entitlementSelection");Ext.each(s,function(v){if(u.__parentData.selectedPSEntitlement!=undefined){if(u.__parentData.selectedPSEntitlement.entitlementInfo!=null&&u.__parentData.selectedPSEntitlement.entitlementInfo.uniqueID!=null&&v.data.uniqueID==u.__parentData.selectedPSEntitlement.entitlementInfo.uniqueID){v.set("result_row_selected",true);return false;}}else{if(u.__parentData.selectedEntitlementInfo!=null){if(u.__parentData.selectedEntitlementInfo.uniqueID!=null){if(v.data.uniqueID==u.__parentData.selectedEntitlementInfo.uniqueID){v.set("result_row_selected",true);return false;}else{if(u.__parentData.selectedEntitlementInfo.uniqueID!=null&&u.__parentData.selectedEntitlementInfo.uniqueID==v.data.recordId&&v.data.uniqueID.startsWith(u.__parentData.selectedEntitlementInfo.uniqueID)){v.set("result_row_selected",true);return false;}}}}}});}}}});n.notCoveredstore=SVMX.create("Ext.data.Store",{fields:[{name:"notCovered"}],data:[{notCovered:b.T("TAG068","Not Covered")}],storeId:"notCovered"});var j=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{autoScroll:true,margin:"5 10",anchor:"100%",store:n.notCoveredstore,hideHeaders:true,border:false,bodyCls:"svmx-ent-selectionTable svmx-ent-notCovered",columns:[{maxWidth:30,width:30,xtype:"svmx.columnradio",dataIndex:"result_row_selected",contentAlign:"center",id:"selectedEntitlement",listeners:{onselect:function(v,r,u){var s=p.getStore().getRange();
Ext.each(s,function(y){if(y.data.result_row_selected!="undefined"){y.set("result_row_selected",false);}});var x=m.getStore().getRange();Ext.each(x,function(y){if(y.data.result_row_selected!="undefined"){y.set("result_row_selected",false);}});var w=Ext.getCmp("entitlementSelection");w.__selectedEntitlement={};var t=Ext.getCmp("entNotes");w.__selectedEntitlement.entitlementNotes=t.getValue();w.__selectedEntitlement.warrantyOrScon="notcovered";w.enableDisbaleSelectbtn();}}},{flex:1,text:"Not Covered",dataIndex:"notCovered",resizable:false,border:false}]});k.add(j);var p=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{autoScroll:true,margin:"5 10",anchor:"100%",store:n.warrantystore,emptyText:b.T("TAG071","No warranty available"),border:false,bodyCls:"svmx-ent-selectionTable",viewConfig:{deferEmptyText:false,cls:"svmx-ent-gridempty",},columns:[{maxWidth:30,width:30,xtype:"svmx.columnradio",dataIndex:"result_row_selected",contentAlign:"center",id:"selectedEntitlement",resizable:false,listeners:{onselect:function(u,r,t){var x=m.getStore().getRange();Ext.each(x,function(y){if(y.data.result_row_selected!="undefined"){y.set("result_row_selected",false);}});var w=j.getStore().getRange();Ext.each(w,function(y){if(y.data.result_row_selected!="undefined"){y.set("result_row_selected",false);}});var v=Ext.getCmp("entitlementSelection");v.__selectedEntitlement=r.data;var s=Ext.getCmp("entNotes");v.__selectedEntitlement.entitlementNotes=s.getValue();v.enableDisbaleSelectbtn();}}},{flex:1,text:b.T("TAG057","Warranty Name"),dataIndex:"recordName",resizable:true,readOnly:true,renderer:function(v,u,r,w,t,s){return'<a class="detailRecord" href="#">'+Ext.String.htmlEncode(r.data.recordName)+"</a>";}},{flex:1,text:b.T("TAG052","Start Date"),dataIndex:"startDate",align:"center",resizable:false,readOnly:true,},{flex:1,text:b.T("TAG053","End Date"),dataIndex:"endDate",align:"center",resizable:false,readOnly:true,},{flex:1,text:b.T("TAG058","Installed Product"),dataIndex:"installedBaseName",align:"center",resizable:false,readOnly:true,renderer:function(v,u,r,w,t,s){return Ext.String.htmlEncode(v);}},{flex:1,text:b.T("TAG059","Warranty Terms"),dataIndex:"warrantyTermName",align:"center",resizable:false,readOnly:true,renderer:function(v,u,r,w,t,s){return Ext.String.htmlEncode(v);}},],listeners:{cellclick:function(r,t,y,u,x,z,w){var s=w.getTarget("a.detailRecord");if(s){var v=r.store.getAt(z);w.preventDefault();var A=Ext.getCmp("entitlementSelection");n.findDuplicateTab(o,A,u.data.recordName,u.data.recordId);}}}});k.add(p);var m=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{autoScroll:true,margin:"5 10",anchor:"100%",store:n.serviceContractstore,id:"scGrid",emptyText:b.T("TAG070","No service contract available"),border:false,bodyCls:"svmx-ent-selectionTable",viewConfig:{deferEmptyText:false,cls:"svmx-ent-gridempty",},columns:[{maxWidth:30,width:30,xtype:"svmx.columnradio",dataIndex:"result_row_selected",contentAlign:"center",id:"selectedEntitlement",resizable:false,listeners:{onselect:function(w,t,s){var z=p.getStore().getRange();Ext.each(z,function(A){if(A.data.result_row_selected!="undefined"){A.set("result_row_selected",false);}});var x=j.getStore().getRange();Ext.each(x,function(A){if(A.data.result_row_selected!="undefined"){A.set("result_row_selected",false);}});var y=Ext.getCmp("entitlementSelection");if(t.data.coveredService!=null&&t.data.coveredService.length>0){t.data.coveredService.forEach(function(A,B){if(A.selected&&A.index==0){t.data.coveredService=null;return;}});var u=Ext.getCmp("coveredServiceWindow");u.__SCParentData=t;var v=Ext.getStore("cs_store");v.loadData(t.data.coveredService);u.show();u.__parentWin.disable();}y.__selectedEntitlement=t.data;var r=Ext.getCmp("entNotes");y.__selectedEntitlement.entitlementNotes=r.getValue();y.enableDisbaleSelectbtn();}}},{flex:1,text:b.T("TAG056","Contract Name/Number"),dataIndex:"recordName",resizable:true,readOnly:true,renderer:function(v,u,r,w,t,s){return'<a class="detailRecord" href="#">'+Ext.String.htmlEncode(r.data.recordName)+"</a>";}},{flex:0.7,text:b.T("TAG052","Start Date"),dataIndex:"startDate",align:"center",resizable:false,readOnly:true,sortable:true,},{flex:0.7,text:b.T("TAG053","End Date"),dataIndex:"endDate",align:"center",resizable:false,readOnly:true,sortable:true,},{flex:1,text:b.T("TAG025","Covered By"),dataIndex:"coveredBy",align:"center",resizable:false,readOnly:true,renderer:function(v,u,r,w,t,s){return Ext.String.htmlEncode(v);}},{flex:1,text:b.T("TAG055","SLA Terms"),dataIndex:"sLARecordName",align:"center",resizable:false,readOnly:true,renderer:function(v,u,r,w,t,s){return Ext.String.htmlEncode(v);}},{flex:1,text:b.T("TAG054","Covered Service"),dataIndex:"coveredServiceName",align:"center",resizable:false,readOnly:true,renderer:function(w,v,s,x,u,t){if(s.data.coveredService!=null){var r="";s.data.coveredService.forEach(function(y){if(y.selected){r+='<a class="coveredServiceLink" style="text-align:left" target="_blank" href="/'+y.recordID+' ">'+y.serviceName+"</a> <br/>";
r+=b.T("TAG087","Available Units")+"  "+y.availableUnits;s.data.coveredServiceName=y.serviceName;}});return r;}else{s.data.coveredServiceName=r;}return Ext.String.htmlEncode(r);}}],listeners:{cellclick:function(r,t,z,v,y,A,x){var s=x.getTarget("a.detailRecord");if(s){var w=r.store.getAt(A);x.preventDefault();var u=Ext.getCmp("entitlementSelection");n.findDuplicateTab(o,u,v.data.recordName,v.data.recordId);}},}});k.add(m);var g=SVMX.create("com.servicemax.client.entitlement.ui.desktop.api.EntitlementHistoryPanel",{__parent:n,__engine:n.__engine,border:false,collapsible:false,hidden:true,__parentRecordID:null});var q=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{tabConfig:{title:b.T("TAG017","Entitlement History"),margin:"0 0 0 4"},autoScroll:true,closable:false,id:"recordEntHis",listeners:{activate:function(t,s,r){if(t.id=="recordEntHis"){var u=Ext.getCmp("entHisPanel");u.__parentRecordID=Ext.getCmp("entitlementSelection").__parentData.recordID,u.callEntHisWebservice();u.show();}},}});q.add(g);var o=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXTabPanel",{activeTab:0,id:"selectionWindowTab",layout:"fit",autoScroll:true,tabBar:{height:40,},items:[k,q,],listeners:{beforeadd:function(t,s,r){if(r==5){t.getComponent(2).close();}},}});n.add(o);},loadData:function(d,c){var f=[];var e=[];this.__parentData=c;var k=c.selectedEntitlementInfo;var j=[];this.notCoveredstore.loadData([{notCovered:b.T("TAG068","Not Covered")}]);if(c.selectedPSEntitlement!=undefined&&c.selectedPSEntitlement.entitlementInfo.warrantyOrScon=="notcovered"){this.selectNotCovered();}else{if(c.selectedEntitlementInfo!=null&&c.selectedEntitlementInfo.warrantyOrScon=="notcovered"&&c.selectedPSEntitlement==undefined){this.selectNotCovered();}}if(d!=null){d.forEach(function(l,m){if(l.warrantyOrScon=="scontract"){e.push(l);}if(l.warrantyOrScon=="warranty"){f.push(l);}});}var h=false;if(k!=null){if(k.warrantyOrScon=="scontract"){e.forEach(function(m,l){if(m.recordId==k.recordId){h=true;return;}});if(!h){e.push(k);}}if(k.warrantyOrScon=="warranty"){f.forEach(function(m,l){if(m.recordId==k.recordId){h=true;return;}});if(!h){f.push(k);}}}this.serviceContractstore.loadData(e);this.warrantystore.loadData(f);if(this.__parent.__showDetailView){var g=Ext.getCmp("scGrid");g.down("[dataIndex=sLARecordName]").hide();g.down("[dataIndex=coveredServiceName]").hide();}},loadParentData:function(){var f=this.__parentData;var d="";var c=Ext.getCmp("entitlementInfoLabel");c.removeAll();if(f.productName!=null){var h=SVMX.create("Ext.form.Label",{text:f.productName,cls:"svmx-ent-entitlementInfo",});c.add(h);}if(f.installedBaseName!=null){var g=SVMX.create("Ext.form.Label",{text:b.T("TAG074","Installed Product")+": "+f.installedBaseName,cls:"svmx-ent-entitlementInfoPre",});c.add(g);}var e="";var j=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXTextArea",{grow:true,labelAlign:"top",fieldLabel:"Entitlement Notes",anchor:"100%",resizable:false,width:500,height:86,value:e,id:"entNotes",enableKeyEvents:true,fieldCls:"svmx-ent-entitlementnotes",listeners:{keyup:function(k,n,l){var m=Ext.getCmp("entitlementSelection");if(m.__selectedEntitlement!=undefined){m.__selectedEntitlement.entitlementNotes=k.getValue();m.enableDisbaleSelectbtn();}else{if(m.__parentData.selectedEntitlementInfo!=null){m.__selectedEntitlement=m.__parentData.selectedEntitlementInfo;m.__selectedEntitlement.entitlementNotes=k.getValue();m.enableDisbaleSelectbtn();}}}}});if(f.selectedPSEntitlement!=null&&f.selectedPSEntitlement.entitlementInfo.entitlementNotes!=null){e=f.selectedPSEntitlement.entitlementInfo.entitlementNotes;}else{if(f.selectedEntitlementInfo!=null&&f.selectedEntitlementInfo.entitlementNotes!=null){e=f.selectedEntitlementInfo.entitlementNotes;}}j.setValue(e);c.add(j);},enableDisbaleSelectbtn:function(){var c=Ext.getCmp("selectEntBtn");if(c!=undefined){c.setDisabled(false);}else{var d=Ext.getCmp("saveEnttoDatabase");d.setDisabled(false);}},selectNotCovered:function(){var c=this.notCoveredstore.getRange();Ext.each(c,function(d){d.set("result_row_selected",true);});},findDuplicateTab:function(e,h,f,d){var c=false;for(i=1;i<e.items.items.length;i++){if(e.items.items[i].itemId!=undefined&&e.items.items[i].itemId==d){e.setActiveTab(e.items.items[i]);c=true;break;}}if(!c){var g=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{tabConfig:{title:Ext.String.htmlEncode(f),margin:"0 0 0 4"},closable:true,itemId:d,loader:{autoLoad:true,url:h.__parent.__engine.__manualEntitlementSettings.recordViewPage+d,}});e.add(g);e.setActiveTab(g);}}});};})();(function(){var a=SVMX.Package("com.servicemax.client.entitlement.ui.desktop.impl");a.Class("Module",com.servicemax.client.lib.api.ModuleActivator,{__constructor:function(){this.__base();},beforeInitialize:function(){com.servicemax.client.entitlement.ui.desktop.api.entitlement.init();com.servicemax.client.entitlement.ui.desktop.api.setting.init();com.servicemax.client.entitlement.ui.desktop.api.entitlementSelection.init();
com.servicemax.client.entitlement.ui.desktop.api.entitlementHistory.init();},initialize:function(){com.servicemax.client.entitlement.ui.desktop.api.init();}},{instance:null});})();(function(){var a=SVMX.Package("com.servicemax.client.entitlement.ui.desktop.api.setting");a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("ENTITLEMENT");Ext.define("com.servicemax.client.entitlement.ui.desktop.api.SettingPanel",{extend:"com.servicemax.client.ui.components.composites.impl.SVMXWindow",hidden:true,width:"60%",layout:"anchor",closable:true,closeAction:"hide",resizable:false,autoScroll:true,cls:"entitlement-root-container",__settingObj:null,header:{titleAlign:"center",},listeners:{hide:function(d,c){d.hide();Ext.getCmp("savesettingBtn").setDisabled(true);d.__parent.enable();}},constructor:function(c){if(window.innerHeight<675){this.height=350;}this.center();this.callParent([c]);},initComponent:function(){this.callParent(arguments);var p=this;p.__settingObj=p.__engine.getEntitlementSettings();var r=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{layout:{type:"column",},collapsible:false,border:false,margin:"30 0 0 30",listeners:{change:function(s,t){k.setDisabled(false);},afterlayout:function(s,u,t){p.updateAccountProductSettings(p.__settingObj.entitleUsingAccountOrProduct);}}});var j=SVMX.create("Ext.form.RadioGroup",{columns:3,vertical:true,width:"100%",items:[{boxLabel:b.T("TAG090","Dates"),inputValue:"Dates",name:"considerCountersOrDates",id:"attributeDates",checked:p.__settingObj.considerCountersOrDates=="Dates",},{boxLabel:b.T("TAG091","Counters"),inputValue:"Counters",name:"considerCountersOrDates",id:"attributeCounter",checked:p.__settingObj.considerCountersOrDates=="Counters",},{boxLabel:b.T("TAG092","Both"),inputValue:"Both",name:"considerCountersOrDates",id:"attributeBoth",checked:p.__settingObj.considerCountersOrDates=="Both",}],listeners:{change:function(s,t){k.setDisabled(false);p.__settingObj.considerCountersOrDates=t.considerCountersOrDates;}}});var e=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXCheckboxGroup",{columns:1,fieldLabel:b.T("TAG064","Validity"),width:"50%",labelAlign:"top",items:[{boxLabel:b.T("TAG032","Show Future Entitlements"),checked:p.stringToBoolean(p.__settingObj.showFutureEntitlement),inputValue:"showFutureEntitlement",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.showFutureEntitlement=u;}}},{boxLabel:b.T("TAG034","Show Expired Entitlements"),checked:p.stringToBoolean(p.__settingObj.showExpiredEntitlement),inputValue:"showExpiredEntitlement",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.showExpiredEntitlement=u;}}}],listeners:{change:function(s,t){k.setDisabled(false);}}});var q=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{columns:1,width:"50%",header:false,bodyBorder:false,border:false,items:[e,j,],});r.add(q);var f=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXCheckboxGroup",{columns:1,});r.add(f);var h=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXCheckboxGroup",{columns:1,vertical:true,fieldLabel:b.T("TAG078","Matching"),labelAlign:"top",width:"50%",items:[{boxLabel:b.T("TAG036","Match Account"),checked:p.stringToBoolean(p.__settingObj.matchAccount),inputValue:"matchAccount",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.matchAccount=u;}}},{boxLabel:b.T("TAG038","Match Contact"),checked:p.stringToBoolean(p.__settingObj.matchContact),inputValue:"matchContact",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.matchContact=u;}}},{boxLabel:b.T("TAG076","Match Location"),checked:p.stringToBoolean(p.__settingObj.matchLocation),inputValue:"matchLocation",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.matchLocation=u;}}}],listeners:{change:function(s,t){k.setDisabled(false);}}});r.add(h);p.add(r);p.add({xtype:"container",style:"border:1px solid #A1A1A1 !important",margin:"20 30 20 30",});var g=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{layout:{type:"column",},collapsible:false,margin:"0 0 0 30",border:false});var d=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXCheckboxGroup",{columns:2,vertical:true,fieldLabel:b.T("TAG065","Product Attributes"),labelAlign:"top",width:"50%",items:[{boxLabel:b.T("TAG033","Parent Product"),checked:p.stringToBoolean(p.__settingObj.coverageOnParentProduct),inputValue:"coverageOnParentProduct",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.coverageOnParentProduct=u;}}},{boxLabel:b.T("TAG035","Top-Level Product"),checked:p.stringToBoolean(p.__settingObj.coverageOnTopLevelProduct),inputValue:"coverageOnTopLevelProduct",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.coverageOnTopLevelProduct=u;
}}},{boxLabel:b.T("TAG037","Child Product"),checked:p.stringToBoolean(p.__settingObj.coverageOnChildProduct),inputValue:"coverageOnChildProduct",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.coverageOnChildProduct=u;}}},{boxLabel:b.T("TAG039","Part Number"),checked:p.stringToBoolean(p.__settingObj.coverageOnPartProduct),inputValue:"coverageOnPartProduct",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.coverageOnPartProduct=u;}}},{boxLabel:b.T("TAG041","Product Family"),checked:p.stringToBoolean(p.__settingObj.coverageOnProductFamily),inputValue:"coverageOnProductFamily",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.coverageOnProductFamily=u;}}},{boxLabel:b.T("TAG042","Product Line"),checked:p.stringToBoolean(p.__settingObj.coverageOnProductLine),inputValue:"coverageOnProductLine",name:"settingvalues",height:30,listeners:{change:function(t,u,s){p.__settingObj.coverageOnProductLine=u;}}},],listeners:{change:function(s,t){k.setDisabled(false);}}});g.add(d);var l=SVMX.create("Ext.form.RadioGroup",{columns:2,vertical:true,fieldLabel:b.T("TAG040","Entitle Using"),labelAlign:"top",width:"68%",items:[{boxLabel:b.T("TAG010","Account"),name:"entitleUsingAccountOrProduct",inputValue:"Account",id:"entitleUsingAccount",disabled:!p.stringToBoolean(p.__settingObj.allowEntitlementFilters),checked:p.__settingObj.entitleUsingAccountOrProduct=="Account",},{boxLabel:b.T("TAG003","Product"),name:"entitleUsingAccountOrProduct",inputValue:"Product",id:"entitleUsingProduct",disabled:!p.stringToBoolean(p.__settingObj.allowEntitlementFilters),checked:p.__settingObj.entitleUsingAccountOrProduct=="Product",},],listeners:{change:function(s,t){k.setDisabled(false);p.__settingObj.entitleUsingAccountOrProduct=t.entitleUsingAccountOrProduct;p.updateAccountProductSettings(t.entitleUsingAccountOrProduct);}}});var n=SVMX.create("Ext.form.RadioGroup",{columns:3,vertical:true,width:"100%",id:"warrantyServiceContractGroup",items:[{boxLabel:b.T("TAG094","Service Contract"),checked:p.__settingObj.entUsingWarrantyOrSC=="Service Contract",inputValue:"Service Contract",height:30,id:"entitleUsingSC",name:"entUsingWarrantyOrSC",},{boxLabel:b.T("TAG093","Warranty"),checked:p.__settingObj.entUsingWarrantyOrSC=="Warranty",inputValue:"Warranty",height:30,id:"entitleUsingWarranty",name:"entUsingWarrantyOrSC",},{boxLabel:b.T("TAG092","Both"),checked:p.__settingObj.entUsingWarrantyOrSC=="Both",inputValue:"Both",height:30,id:"entitleUsingBoth",name:"entUsingWarrantyOrSC",}],listeners:{change:function(s,t){k.setDisabled(false);p.__settingObj.entUsingWarrantyOrSC=t.entUsingWarrantyOrSC;}}});var c=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{columns:1,width:"50%",header:false,bodyBorder:false,border:false,items:[l,n],});g.add(c);p.add(g);p.add({xtype:"container",style:"border:1px solid #A1A1A1 !important;",margin:"20 30 20 30",});var o=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{width:"100%",dock:"bottom",border:false});var m=SVMX.create("Ext.Toolbar.Fill",{});o.add(m);var k=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG066","Apply"),disabled:true,scale:"medium",id:"savesettingBtn",height:30,handler:function(){k.setDisabled(true);p.hide();p.__parent.enable();Ext.getCmp("checkentitlement").el.dom.click();},});o.add(k);p.add(o);},stringToBoolean:function(c){if(c!=null){switch(c.toLowerCase().trim()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(c);}}},updateAccountProductSettings:function(c){if(c!=null&&c=="Account"){Ext.getCmp("entitleUsingWarranty").hide();Ext.getCmp("entitleUsingBoth").hide();Ext.getCmp("attributeCounter").hide();Ext.getCmp("attributeBoth").hide();Ext.getCmp("attributeDates").setValue(true);Ext.getCmp("entitleUsingSC").setValue(true);}else{Ext.getCmp("entitleUsingWarranty").show();Ext.getCmp("entitleUsingBoth").show();Ext.getCmp("attributeCounter").show();Ext.getCmp("attributeBoth").show();}}});};})();