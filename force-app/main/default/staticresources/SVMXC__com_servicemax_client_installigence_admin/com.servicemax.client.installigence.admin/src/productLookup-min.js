(function(){var a=SVMX.Package("com.servicemax.client.installigence.admin.productLookup");a.init=function(){a.Class("ProductLookup",com.servicemax.client.lib.api.Object,{__d:null,__inited:false,__config:null,__objectInfo:null,__store:null,__grid:null,__win:null,__searchText:null,__constructor:function(b){this.__inited=false;this.__config=b;this.__searchText=b.searchText;},find:function(){this.__d=$.Deferred();this.__showUI();return this.__d;},__init:function(){},__initComplete:function(){this.__inited=true;this.__showUI();},__find:function(c){SVMX.getCurrentApplication().blockUI();var b=SVMX.create("com.servicemax.client.lib.api.Event","INSTALLIGENCEADMIN."+this.__config.mvcEvent,this,{request:{context:this,handler:this.__findComplete,text:this.searchTextBox.value}});SVMX.getCurrentApplication().getEventBus().triggerEvent(b);},__findComplete:function(b){this.__store.loadData(b);SVMX.getCurrentApplication().unblockUI();},__showUI:function(){this.__win=this.__getUI();this.__win.show(this.__config.sourceComponent);if(this.__searchText){this.searchTextBox.setValue(this.__searchText);}this.__find({});},__tryResolve:function(b){this.__d.resolve(b.data);this.__win.close();},__getUI:function(){var n=this;var o=this.__config.columns,g,e=o.length,n=this;var p=["Name"];var h=[];for(g=0;g<e;g++){h.push(o[g].name);}var q=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXStore",{fields:h,data:[]});var d=[],m,f;for(g=0;g<e;g++){m=o[g];for(f=0;f<p.length;f++){d.push({text:p[f],dataIndex:m.name,flex:1,renderer:function(c){return Ext.String.htmlEncode(c);}});}}var b=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXGrid",{store:q,cls:"piq-setup-ta-grid",viewConfig:{listeners:{itemdblclick:function(i,c,l,j,r){n.__tryResolve(c);}}},columns:d,flex:1,width:"100%"});n.searchTextBox=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXTextField",{width:"70%",emptyText:$TR.SEARCH_EMPTY_TEXT,enableKeyEvents:true,cls:"piq-setup-ta-product-window-textfield",listeners:{change:{fn:n.__onTextFieldChange,scope:this,buffer:500}}});var k=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXWindow",{layout:{type:"vbox"},height:400,width:800,title:$TR.PRODUCT_LIST,cls:"piq-setup-ta-product-window-win",dockedItems:[{dock:"top",xtype:"toolbar",margin:"0",items:[n.searchTextBox,{xtype:"button",text:$TR.GO,handler:function(){n.__find();}}]}],maximizable:false,closable:true,items:[b],modal:true,buttons:[{text:$TR.CANCEL,handler:function(){k.close();}}],listeners:{show:function(l){if(this.modal){var r=Ext.dom.Query.select(".x-mask");for(var c=0;c<r.length;c++){Ext.get(r[c]).setStyle("opacity",1);var j=Ext.get(r[c]);j.addCls("customWinMask");}}},close:function(l){if(this.modal){var r=Ext.dom.Query.select(".x-mask");for(var c=0;c<r.length;c++){Ext.get(r[c]).setStyle("opacity",1);var j=Ext.get(r[c]);j.removeCls("customWinMask");}}}}});this.__store=q;this.__grid=b;return k;},__onTextFieldChange:function(){var b=this.searchTextBox.getValue();this.__grid.search(b);}},{});};})();