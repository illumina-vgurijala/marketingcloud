(function(){var a=SVMX.Package("com.servicemax.client.installigence.admin.attachment");a.init=function(){Ext.define("com.servicemax.client.installigence.admin.Attachment",{extend:"com.servicemax.client.installigence.ui.components.SVMXPanel",__root:null,constructor:function(b){var c=this;b=b||{};b.title=$TR.ATTACHMENTS;b.id="attachment";this.__root=b.root;this.__registerForDidProfileSelectCall();c.showProfiles=b.root.showProfiles;c.enableAttachmentCheckbox=SVMX.create("com.servicemax.client.installigence.ui.components.Checkbox",{boxLabel:$TR.ENABLE_ATTACHMENTS_DOWNLOAD_DURING_SYNC,scope:this,disabled:true,handler:function(e,d){if(d){c.__enableOrDisableAttachmentTabFields(false);}else{c.__enableOrDisableAttachmentTabFields(true);}}});c.horizontalLine={xtype:"box",autoEl:{tag:"hr"}};c.attachmentSettingTitle={xtype:"label",forId:"myFieldId",text:$TR.ATTACHMENT_SETTING_TITLE,style:"font-weight: 600;",margin:"40 0 10 10"};c.fileTypeTextFields=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXTextField",{allowBlank:true,editable:true,width:600,disabled:true,margin:"40 0 10 10",labelStyle:"width:300px; white-space: nowrap;",fieldLabel:$TR.DOWNLOAD_ONLY_THESE_FILES_TYPE,});c.maxFileSizeTextFields=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXTextField",{allowBlank:true,editable:true,disabled:true,width:600,margin:"40 0 10 10",labelStyle:"width:300px; white-space: nowrap;",fieldLabel:$TR.ENTER_MAXIMUM_FILES_SIZE_TO_DOWNLOAD,maskRe:/[0-9]/});c.sfilesSettingTitle={xtype:"label",forId:"myFieldId",text:$TR.SFILE_SETTING_TITLE,style:"font-weight: 600;",margin:"40 0 10 10"};c.sfileTypeTextFields=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXTextField",{allowBlank:true,editable:true,width:600,disabled:true,margin:"40 0 10 10",labelStyle:"width:300px; white-space: nowrap;",fieldLabel:$TR.DOWNLOAD_ONLY_THESE_FILES_TYPE,});c.sfileMaxFileSizeTextFields=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXTextField",{allowBlank:true,editable:true,disabled:true,width:600,margin:"40 0 10 10",labelStyle:"width:300px; white-space: nowrap;",fieldLabel:$TR.ENTER_MAXIMUM_FILES_SIZE_TO_DOWNLOAD,maskRe:/[0-9]/});c.sfileTagsTextFields=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXTextField",{allowBlank:true,editable:true,disabled:true,width:600,margin:"40 0 10 10",labelStyle:"width:300px; white-space: nowrap;",fieldLabel:$TR.SFILE_TAGS_TYPES});b.items=[c.enableAttachmentCheckbox,c.horizontalLine,c.attachmentSettingTitle,c.fileTypeTextFields,c.maxFileSizeTextFields,c.sfilesSettingTitle,c.sfileTypeTextFields,c.sfileMaxFileSizeTextFields,c.sfileTagsTextFields];this.callParent([b]);},__enableOrDisableAttachmentTabFields:function(b){this.fileTypeTextFields.setDisabled(b);this.maxFileSizeTextFields.setDisabled(b);this.sfileTypeTextFields.setDisabled(b);this.sfileMaxFileSizeTextFields.setDisabled(b);this.sfileTagsTextFields.setDisabled(b);},__updateAttachmentDetails:function(e,b){if(e.getSelectedRecord().get("profileId")=="--None--"){this.enableAttachmentCheckbox.setDisabled(true);this.__enableOrDisableAttachmentTabFields(true);}else{this.enableAttachmentCheckbox.setDisabled(false);if(this.enableAttachmentCheckbox.getValue()){this.__enableOrDisableAttachmentTabFields(false);}else{this.__enableOrDisableAttachmentTabFields(true);}}var d=this.showProfiles.getSelectedRecord();if(d.getData().attachment==undefined){this.enableAttachmentCheckbox.setValue(false);this.fileTypeTextFields.setValue("");this.maxFileSizeTextFields.setValue("");this.sfileTypeTextFields.setValue("");this.sfileMaxFileSizeTextFields.setValue("");this.sfileTagsTextFields.setValue("");}else{if(d.getData().attachment.length>0){var c=d.getData().attachment[0];(c.isAttachmentsEnabled=="true"?this.enableAttachmentCheckbox.setValue(true):this.enableAttachmentCheckbox.setValue(false));this.fileTypeTextFields.setValue(c.fileTypes);this.maxFileSizeTextFields.setValue(c.maximumFileSize);this.sfileTypeTextFields.setValue(c.sfdcFileTypes);this.sfileMaxFileSizeTextFields.setValue(c.maxSfdcFileSize);this.sfileTagsTextFields.setValue(c.sfdcFileTags);}else{}}},__registerForDidProfileSelectCall:function(){var b=this;SVMX.getClient().bind("SELECTED_PROFILE_CALL",function(d){var e=SVMX.toObject(d.data);var f=d.target.result.combo;var c=d.target.result.record;this.showProfiles.setRawValue(c.get("profileName"));this.__updateAttachmentDetails(f,c);},this);},__persistAttachment:function(c){var b;if(c.getData().attachment==undefined){c.set("attachment",[]);b={};}else{if(c.getData().attachment.length>0){b=c.getData().attachment[0];}else{b={};}}b.isAttachmentsEnabled=this.enableAttachmentCheckbox.getValue().toString();b.fileTypes=this.fileTypeTextFields.getValue();b.maximumFileSize=this.maxFileSizeTextFields.getValue();b.sfdcFileTypes=this.sfileTypeTextFields.getValue();b.maxSfdcFileSize=this.sfileMaxFileSizeTextFields.getValue();b.sfdcFileTags=this.sfileTagsTextFields.getValue();c.set("attachment",[b]);}});};})();
