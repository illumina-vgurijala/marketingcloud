(function(){var a=SVMX.Package("com.servicemax.client.iot.admin.root");a.init=function(){Ext.define("com.servicemax.client.iot.admin.root.RootPanel",{extend:"com.servicemax.client.installigence.ui.components.SVMXPanel",metadata:null,__spinner:null,constructor:function(e){var l=this;e=e||{};e.renderTo=SVMX.getDisplayRootId();e.title="<span class='title-text'>"+$TR.IOT_SETUP+"</span>";metadata=e.metadata;var j=SVMX.create("com.servicemax.client.iot.admin.OtherSettings",{metadata:metadata});var d=SVMX.create("com.servicemax.client.iot.admin.ioteventmap",{metadata:metadata});var m=SVMX.create("com.servicemax.client.iot.admin.CompositeKey",{metadata:metadata});var k=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXTabPanel",{height:465,tabPosition:"left",tabRotation:0,cls:"iot-setup-tab-body",tabBar:{border:false,cls:"iot-setup-left-nav"},margin:"4 4 0 4",ui:"setup-tabpanel",defaults:{textAlign:"left",bodyPadding:7,cls:"iot-setup-content-body",}});k.add(d);k.add(m);k.setActiveTab("EM");var h=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXButton",{text:$TR.SAVE,cls:"iot-setup-save",handler:function(){l.save(m,d);}});var b=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXButton",{text:$TR.BACK_TO_SETUP_HOME,cls:"iot-setup-back-to-home",docked:"left",rigion:"left",align:"left",handler:function(){var n="/apex/"+SVMX.OrgNamespace+"__CONF_SetupHome";if((typeof sforce!="undefined")&&(sforce!=null)){n="/lightning/n/"+SVMX.OrgNamespace+"__ServiceMax_Setup";sforce.one.navigateToURL(n);}else{window.location.href=n;}}});var i=[b];e.tools=i;var g=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXButton",{text:$TR.CANCEL,cls:"iot-setup-cancel",handler:function(){window.location.reload();}});var c=["->",h,g];var f=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXToolbar",{style:"border-top-width: 0 !important",cls:"iot-setup-profile-selection",dock:"top",items:c});e.items=[];e.items.push(f);e.items.push(k);this.callParent([e]);},backToSetupHome:function(){this.blockUI();var c=this;var b=SVMX.create("com.servicemax.client.lib.api.Event","IOT.BACK_TO_SETUP_HOME",c,{request:{context:c}});SVMX.getCurrentApplication().getEventBus().triggerEvent(b);},save:function(i,e){var g=this;var b=g.__shouldAllowSave(e);if(!b.isValid){SVMX.getCurrentApplication().showQuickMessage("error",b.message);}else{g.blockUI();var h=e.getData();var f=i.getData();var d=e.getMappingRecords();var c=SVMX.create("com.servicemax.client.lib.api.Event","IOT.SAVE",g,{request:{context:g,events:h.data,deletedEvents:h.deletedEvents,compositeKey:f,objectMapEvents:d.data,deletedObjectMap:d.deletedEventMapIds}});SVMX.getCurrentApplication().getEventBus().triggerEvent(c);}},__shouldAllowSave:function(b){return b.shouldSave();},onSaveComplete:function(c){this.unblockUI();metadata=c;this.dataSavedSucessfullyMessage();var b=SVMX.create("com.servicemax.client.lib.api.Event","SAVE_SUCCESS",this,c);SVMX.getClient().triggerEvent(b);},dataSavedSucessfullyMessage:function(d){var b=$TR.SAVE_SUCCESS;if(d){b=d;}var c=Ext.Msg.alert({title:$TR.INFO,msg:b,closable:false,buttonText:{ok:$TR.OK},fn:function(e){}});},blockUI:function(){var b={lines:25,length:25,width:5,radius:30,corners:1,rotate:0,direction:1,color:"#ffa384",speed:3,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000};this.__spinner=new Spinner(b).spin($("#"+SVMX.getDisplayRootId())[0]);},unblockUI:function(){this.__spinner.stop();}});};})();