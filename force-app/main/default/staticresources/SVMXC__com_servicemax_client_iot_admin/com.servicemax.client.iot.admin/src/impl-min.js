(function(){SVMX.OrgNamespace=SVMX.getClient().getApplicationParameter("org-name-space")||"SVMXC";var a=SVMX.Package("com.servicemax.client.iot.admin.impl");a.Class("Module",com.servicemax.client.lib.api.ModuleActivator,{__constructor:function(){this.__base();},afterInitialize:function(){},beforeInitialize:function(){com.servicemax.client.iot.admin.root.init();com.servicemax.client.iot.admin.celleditors.init();com.servicemax.client.iot.admin.othersettings.init();com.servicemax.client.iot.admin.commands.init();com.servicemax.client.iot.admin.operations.init();com.servicemax.client.iot.admin.compositekey.init();com.servicemax.client.iot.admin.ioteventmap.init();com.servicemax.client.iot.admin.createevent.init();com.servicemax.client.iot.admin.maptoobject.init();},registerForSALEvents:function(b,c){if(!c){SVMX.getLoggingService().getLogger().warn("registerForSALEvents was invoked without operationObj!");}b.bind("REQUEST_ERROR",function(i){var f=c?c.getEventBus():SVMX.getCurrentApplication();var d=SVMX.create("com.servicemax.client.lib.api.Event","SFMDELIVERY.CHANGE_APP_STATE",this,{request:{state:"unblock"},responder:{}});f.triggerEvent(d);var g="Custom Tag ";try{g+="::"+i.data.xhr.statusText+"=>"+i.data.xhr.responseText;}catch(h){}d=SVMX.create("com.servicemax.client.lib.api.Event","SFMDELIVERY.NOTIFY_APP_ERROR",this,{request:{message:g},responder:{}});f.triggerEvent(d);},this);},createServiceRequest:function(d,c){var b=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.sal.service.factory");b.getInstanceAsync({handler:function(e){var f=d.options||{};var h={type:f.type||"REST",endPoint:f.endPoint||"",nameSpace:"SVMXDEV"};var i=e.createServiceManager(h);var g=i.createService();this.registerForSALEvents(g,c);d.handler.call(d.context,g);},context:this});},checkResponseStatus:function(e,f,j,g){if(!g){SVMX.getLoggingService().getLogger().warn("checkResponseStatus was invoked without operationObj!");}var i=true,m="",c="";if(f){if(f.response&&(f.response.success===false||f.response.success==="false")){i=false;if(f.response.msgDetails&&f.response.msgDetails.message){m=f.response.msgDetails.message;c=f.response.msgDetails.details;}else{m=f.response.message;}}else{if(f.success===false||f.success==="false"){i=false;if(f.msgDetails&&f.msgDetails.message){m=f.msgDetails.message;c=f.msgDetails.details;}else{m=f.message;}}}}var b=g?g.getEventBus():SVMX.getCurrentApplication(),k;if(i==false){k=SVMX.create("com.servicemax.client.lib.api.Event","SFMDELIVERY.CHANGE_APP_STATE",this,{request:{state:"unblock"},responder:{}});b.triggerEvent(k);k=SVMX.create("com.servicemax.client.lib.api.Event","SFMDELIVERY.NOTIFY_APP_ERROR",this,{request:{message:m,msgDetail:c},responder:{}});b.triggerEvent(k);var d=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("SFMDELIVERY");this.__logger.error(e+" : "+d.T("TAG035")+" "+m);}else{if(!j){var l=null,h=null;if(f.response&&f.response.message){l=f.response.message;h=f.response.messageType;}else{if(f.message){l=f.message;h=f.messageType;}}if(l&&typeof(l)=="string"){k=SVMX.create("com.servicemax.client.lib.api.Event","SFMDELIVERY.NOTIFY_QUICK_MESSAGE",this,{request:{message:l,type:h},responder:{}});b.triggerEvent(k);}}}return i;}},{instance:null});a.Class("IoTAdminEventBus",com.servicemax.client.lib.api.EventDispatcher,{__constructor:function(){this.__base();},triggerEvent:function(b){return this.__base(b);}},{});})();