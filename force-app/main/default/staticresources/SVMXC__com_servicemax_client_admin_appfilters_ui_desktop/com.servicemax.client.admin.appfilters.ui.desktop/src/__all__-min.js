(function(){var a=SVMX.Package("com.servicemax.client.admin.appfilters.ui.desktop.api");a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("APFT");Ext.define("com.servicemax.client.admin.appfilters.ui.desktop.api.RootContainer",{extend:"com.servicemax.client.ui.components.composites.impl.SVMXSection",cls:"apft-root-container",layout:"anchor",width:"100%",height:520,__parent:this,__resultsViewPanel:null,__runOpts:null,constructor:function(c){c=Ext.apply({header:{items:[{xtype:"svmx.button",itemId:"BackButton",padding:"0",text:b.T("TAG002","Back To Setup Home"),handler:function(l,i,f,h){var d=Ext.data.StoreManager.lookup("appStore");var g=d.getModifiedRecords();var k=(g.length>0)?true:false;if(k){Ext.Msg.show({title:b.T("TAG022","Warning"),msg:b.T("TAG019","Changes have not been saved. Are you sure to discard the changes?"),width:300,closable:false,icon:Ext.MessageBox.WARNING,buttons:Ext.Msg.YESNO,buttonText:{yes:b.T("TAG020","OK"),no:b.T("TAG021","Cancel"),},fn:function(m,o,e){if(m==="yes"){var n="/apex/"+SVMX.OrgNamespace+"__CONF_SetupHome";if((typeof sforce!="undefined")&&(sforce!=null)){n="/lightning/n/"+SVMX.OrgNamespace+"__ServiceMax_Setup";sforce.one.navigateToURL(n);}else{window.location.href=n;}}}});}else{var j="/apex/"+SVMX.OrgNamespace+"__CONF_SetupHome";if((typeof sforce!="undefined")&&(sforce!=null)){j="/lightning/n/"+SVMX.OrgNamespace+"__ServiceMax_Setup";sforce.one.navigateToURL(j);}else{window.location.href=j;}}}}]},collapsible:false,title:SVMX.getClient().getApplicationParameter("svmx-sfm-hide-title-bar")?"":b.T("TAG001","SFM App Permissions"),titleAlign:"center",layout:{type:"border"}},c||{});this.callParent([c]);},run:function(n){var k=this;this.__runOpts=n;this.__libraryPanel=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{collapsible:false,region:"center",width:"100%",anchor:"100%",layout:"anchor",layout:{type:"anchor",align:"stretch"}});this.add(this.__libraryPanel);var m=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{dock:"top",height:73,width:"100%",layout:"hbox",align:"stretchmax"});var j=SVMX.create("Ext.data.ArrayStore",{fields:["name","label"]});this.__filterListStore=j;var f=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXPicklist",{name:"label",fieldLabel:b.T("TAG006","Select Process Type"),labelField:"label",valueField:"name",displayField:"label",defaultValue:b.T("TAG003","--None--"),value:b.T("TAG003","--None--"),queryMode:"local",editable:false,store:j,labelAlign:"top",width:280,labelCls:"svmx-apft-dropdown",style:{marginLeft:"20px",},labelSeparator:"",listeners:{beforeselect:function(t,p,r){var q=this.getValue();var s=k.__tableStore.getModifiedRecords();var u=(s.length>0)?true:false;if(u){Ext.Msg.show({title:b.T("TAG022","Warning"),msg:b.T("TAG019","Changes have not been saved. Are you sure to discard the changes?"),width:300,closable:false,icon:Ext.MessageBox.WARNING,buttons:Ext.Msg.YESNO,buttonText:{yes:b.T("TAG020","OK"),no:b.T("TAG021","Cancel"),},fn:function(x,y,v){if(x==="yes"){var w=p.get("name");if(w!=="None"){k.__objectListDropDown.setDisabled(false);k.deliveryEngine.getAllSourceObjects(w);}else{k.__objectListDropDown.setDisabled(true);}k.__resultsViewPanel.hide();k.__objectListDropDown.setValue(b.T("TAG003","--None--"));k.__tableStore.removeAll();}else{t.setValue(q);}}});}else{var o=p.get("name");if(o!=="None"){k.__objectListDropDown.setDisabled(false);k.deliveryEngine.getAllSourceObjects(o);}else{k.__objectListDropDown.setDisabled(true);}k.__resultsViewPanel.hide();k.__objectListDropDown.setValue(b.T("TAG003","--None--"));k.__tableStore.removeAll();}},afterrender:function(o){o.setValue(this.defaultValue);}},listConfig:{getInnerTpl:function(o){return"{[Ext.String.htmlEncode(values."+o+")]}";}},});m.addItemsLeft(f);this.__filterListDropDown=f;var c=SVMX.create("Ext.data.ArrayStore",{fields:["name","label"]});this.__objectListStore=c;var e=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXPicklist",{id:"objectDropDown",name:"label",fieldLabel:b.T("TAG007","Select Object"),labelWidth:150,labelField:"label",valueField:"name",displayField:"label",defaultValue:b.T("TAG003","--None--"),value:b.T("TAG003","--None--"),queryMode:"local",disabled:true,store:c,width:280,labelAlign:"top",style:{marginLeft:"22px"},labelCls:"svmx-apft-dropdown",labelSeparator:"",listeners:{beforeselect:function(t,p,r){var q=this.getValue();var s=k.__tableStore.getModifiedRecords();var u=(s.length>0)?true:false;if(u){Ext.Msg.show({title:b.T("TAG022","Warning"),msg:b.T("TAG019","Changes have not been saved. Are you sure to discard the changes?"),width:300,closable:false,icon:Ext.MessageBox.WARNING,buttons:Ext.Msg.YESNO,buttonText:{yes:b.T("TAG020","OK"),no:b.T("TAG021","Cancel"),},fn:function(y,z,w){if(y==="yes"){var A=k.__filterListDropDown.getValue();var x=p.get("name");if(x!=="None"){k.deliveryEngine.getApplicationFilter(A,x);
k.__resultsViewPanel.show();k.__saveButton.setDisabled(true);}else{k.__tableStore.removeAll();k.__resultsViewPanel.hide();}}else{t.setValue(q);}}});}else{var v=k.__filterListDropDown.getValue();var o=p.get("name");if(o!=="None"){k.deliveryEngine.getApplicationFilter(v,o);k.__resultsViewPanel.show();k.__saveButton.setDisabled(true);}else{k.__tableStore.removeAll();k.__resultsViewPanel.hide();}}},afterrender:function(o){o.setValue(this.defaultValue);}},listConfig:{getInnerTpl:function(o){return"{[Ext.String.htmlEncode(values."+o+")]}";}},});m.addItemsLeft(e);this.__objectListDropDown=e;var h={iconCls:"svmx-appfilter-help-icon",cursor:"pointer",scale:"small",tooltip:b.T("TAG023","Help"),href:b.T("HLPURL","http://userdocs.servicemax.com:8080/ServiceMaxHelp/Summer16/en_us/svmx_redirector.htm?uid=SFM|SFMAppPermissions"),style:{marginRight:"25px",}};m.addItemsRight(h);var i=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG005","Save"),height:30,width:100,disabled:true,style:{marginRight:"1px",marginTop:"13px"},handler:function(){var q=k.__searchtext.getValue();var p=k.__tableStore;p.clearFilter();var o=p.getModifiedRecords();k.deliveryEngine.saveApplicationFilter(o);}});this.__saveButton=i;this.__libraryPanel.add(m);this.__toolbar=m;var g=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXText",{cls:"svmx-text-filter-icon",width:587,emptyText:Ext.String.htmlDecode(b.T("TAG004","Search for process name or process IDs")),selectOnFocus:true,listeners:{change:function(q,r){var o=g.getValue();k.__resultsViewPanel.getStore().clearFilter();if(!!o){var p=[new Ext.util.Filter({filterFn:function(s){return Ext.String.htmlDecode(s.get("processId")).toLowerCase().indexOf(o.toLowerCase())>-1||Ext.String.htmlDecode(s.get("name")).toLowerCase().indexOf(o.toLowerCase())>-1;}})];k.__resultsViewPanel.getStore().filter(p);}}}});this.__searchtext=g;Ext.define("appModel",{extend:"Ext.data.Model",fields:[{name:"name",type:"string"},{name:"processId",type:"string"},{name:"description",type:"string"},{name:"onlineEnabled",type:"boolean"},{name:"iPadEnabled",type:"boolean"},{name:"iPhoneEnabled",type:"boolean"},{name:"androidPhoneEnabled",type:"boolean"},{name:"androidTabletEnabled",type:"boolean"},{name:"windowsEnabled",type:"boolean"}]});var d=SVMX.create("Ext.data.ArrayStore",{model:"appModel",storeId:"appStore",proxy:{type:"memory"},folderSort:true});this.__tableStore=d;var l=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{width:"100%",collapsible:false,store:d,multiSelect:false,border:false,disableSelection:true,hidden:true,height:520,tbar:[g,"->",i],style:{marginLeft:"20px",marginRight:"25px"},columns:[{text:b.T("TAG008","Process ID"),dataIndex:"processId",sortable:true,baseCls:"svmx-noncheckcolumn-header-text",flex:1.8/10,menuDisabled:true},{text:b.T("TAG009","Process Name"),sortable:true,dataIndex:"name",baseCls:"svmx-noncheckcolumn-header-text",flex:1.8/10,menuDisabled:true},{text:b.T("TAG010","Description"),flex:2.2/10,dataIndex:"description",sortable:false,baseCls:"svmx-noncheckcolumn-header-text",menuDisabled:true},{xtype:"checkColumnEditor",text:b.T("TAG011","Online"),dataIndex:"onlineEnabled",flex:0.7/10,sortable:false,menuDisabled:true,align:"center",baseCls:"svmx-checkcolumn-header-text",listeners:{checkchange:function(q,r,p,o){k.enableDisableSaveButton();}}},{xtype:"checkColumnEditor",text:b.T("TAG012","iPad"),dataIndex:"iPadEnabled",flex:0.7/10,sortable:false,menuDisabled:true,align:"center",baseCls:"svmx-checkcolumn-header-text",listeners:{checkchange:function(q,r,p,o){k.enableDisableSaveButton();}}},{xtype:"checkColumnEditor",text:b.T("TAG013","Android Tablet"),dataIndex:"androidTabletEnabled",flex:0.7/10,sortable:false,menuDisabled:true,align:"center",baseCls:"svmx-checkcolumn-header-text",listeners:{checkchange:function(q,r,p,o){k.enableDisableSaveButton();}}},{xtype:"checkColumnEditor",text:b.T("TAG014","Windows"),dataIndex:"windowsEnabled",flex:0.7/10,sortable:false,menuDisabled:true,align:"center",baseCls:"svmx-checkcolumn-header-text",listeners:{checkchange:function(q,r,p,o){k.enableDisableSaveButton();}}},{xtype:"checkColumnEditor",text:b.T("TAG015","iPhone"),dataIndex:"iPhoneEnabled",flex:0.7/10,sortable:false,menuDisabled:true,align:"center",baseCls:"svmx-checkcolumn-header-text",listeners:{checkchange:function(q,r,p,o){k.enableDisableSaveButton();}}},{xtype:"checkColumnEditor",text:b.T("TAG016","Android Phone"),dataIndex:"androidPhoneEnabled",flex:0.7/10,sortable:false,menuDisabled:true,align:"center",baseCls:"svmx-checkcolumn-header-text",listeners:{checkchange:function(q,r,p,o){k.enableDisableSaveButton();}}}],listeners:{viewready:function(q){var o=q.view;q.mon(o,{uievent:function(v,s,r,t,u,w){q.cellIndex=u;q.recordIndex=t;}});q.tip=Ext.create("Ext.tip.ToolTip",{target:o.el,delegate:".svmx-grid-cell",trackMouse:true,listeners:{beforeshow:function p(r){if(!Ext.isEmpty(q.cellIndex)&&q.cellIndex!==-1){header=q.headerCt.getGridColumns()[q.cellIndex];
var s=q.getStore().getAt(q.recordIndex).get(header.dataIndex);r.update(s+"");}}}});}}});this.__resultsViewPanel=l;this.__libraryPanel.add(this.__resultsViewPanel);this.__filterListStore.loadData(this.metaModel.__data);this.resize();},enableDisableSaveButton:function(){var c=this.__tableStore.getModifiedRecords();var d=(c.length>0)?true:false;this.__saveButton.setDisabled(!d);},resize:function(c){if(!this.getEl()){return SVMX.timer.job(this.id+".resize",10,this,"resize");}if(!c){c=this.getEl().getViewSize();}if(c.width){c.width=c.width-4;}if(c.height){c.height=c.height-6;}if(c.width){this.setWidth(c.width);}if(c.height){this.setHeight(c.height);}},blockApplication:function(f){var e=f||{request:{state:"block",deliveryEngine:this.getDeliveryEngine()},responder:{}};var d=this.getDeliveryEngine().getEventBus();var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.CHANGE_APP_STATE",this,e);d.triggerEvent(c);},unblockApplication:function(f){var e=f||{request:{state:"unblock",deliveryEngine:this.getDeliveryEngine()},responder:{}};var d=this.getDeliveryEngine().getEventBus();var c=SVMX.create("com.servicemax.client.lib.api.Event","APFT.CHANGE_APP_STATE",this,e);d.triggerEvent(c);},getDeliveryEngine:function(){return this.deliveryEngine;}});Ext.define("Ext.ux.CheckBoxColumnEditor",{extend:"Ext.grid.column.Column",alias:"widget.checkColumnEditor",stopSelection:true,tdCls:Ext.baseCSSPrefix+"grid-cell-checkcolumn",constructor:function(){this.addEvents("beforecheckchange","checkchange");this.callParent(arguments);},processEvent:function(i,k,o,d,j,g,f,p){var h=this,n=i==="keydown"&&g.getKey(),c=i=="mousedown";if(c||(n==g.ENTER||n==g.SPACE)){var l=h.dataIndex,m=!f.get(l);if(h.fireEvent("beforecheckchange",h,d,m)!==false){f.set(l,m);h.fireEvent("checkchange",h,d,m);if(c){g.stopEvent();}if(!h.stopSelection){k.selModel.selectByPosition({row:d,column:j});}return false;}else{return !h.stopSelection;}}else{return h.callParent(arguments);}},renderer:function(d){var e=Ext.baseCSSPrefix,c=[e+"grid-checkheader"];if(d){c.push(e+"grid-checkheader-checked");}return'<center><div class="'+c.join(" ")+'">&#160;</div></center>';}});};})();(function(){var a=SVMX.Package("com.servicemax.client.admin.appfilters.ui.desktop.impl");a.Class("Module",com.servicemax.client.lib.api.ModuleActivator,{__constructor:function(){this.__base();},beforeInitialize:function(){},initialize:function(){},afterInitialize:function(){com.servicemax.client.admin.appfilters.ui.desktop.api.init();}},{instance:null});})();