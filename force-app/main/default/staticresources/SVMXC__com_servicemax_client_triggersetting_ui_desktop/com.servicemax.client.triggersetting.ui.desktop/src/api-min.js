(function(){var a=SVMX.Package("com.servicemax.client.triggersetting.ui.desktop.api");a.init=function(){var b=SVMX.getClient().getServiceRegistry().getServiceInstance("com.servicemax.client.translation").getDictionary("TRIGGERSETTING");Ext.define("com.servicemax.client.triggersetting.ui.desktop.api.RootContainer",{extend:"com.servicemax.client.ui.components.composites.impl.SVMXSection",cls:"triggersetting-root-container",width:"100%",id:"triggersetting",layout:"anchor",height:520,constructor:function(c){c=Ext.apply({title:b.T("TAG001","Trigger Setting"),titleAlign:"center",collapsible:false,header:{items:[{xtype:"svmx.button",itemId:"BackButton",cls:"triggersetting-back-btn",padding:"0",text:b.T("TAG002","Back to Setup Home"),handler:function(i,g,d,f){var h="/apex/"+SVMX.OrgNamespace+"__CONF_SetupHome";if((typeof sforce!="undefined")&&(sforce!=null)){h="/lightning/n/"+SVMX.OrgNamespace+"__ServiceMax_Setup";sforce.one.navigateToURL(h);}else{window.location.href=h;}}}]},},c||{});this.callParent(arguments);},initComponent:function(){this.callParent(arguments);var i=this;var c=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXToolbar",{width:"100%",dock:"top",autoHeight:true,});var g=SVMX.create("Ext.Toolbar.Fill",{});c.add(g);i.objectPicklistStore=SVMX.create("Ext.data.Store",{fields:[{name:"apiname"},{name:"label"}],proxy:{type:"memory"},data:this.__engine.__objectlist!=null?this.__engine.__objectlist:[],});var l=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXPicklist",{id:"objectPicklist",name:"objectPicklistName",fieldLabel:b.T("TAG003","Select Object"),labelField:"label",valueField:"apiname",displayField:"label",editable:false,labelSeparator:"",width:350,defaultAlign:"center",queryMode:"local",store:i.objectPicklistStore,listeners:{select:function(p,m,n){var o=Ext.getCmp("triggersetting");o.__engine.getObjectTriggerConfig(m[0].data.apiname,function(q){if(q.success){o.triggerStore.loadData(q.triggersettingvalue);Ext.getCmp("triggerEnDisSec").show();}else{SVMX.getCurrentApplication().getApplicationQuickMessageHandler().showQuickMessage(q.messagelist[0],7000,"success");}});}}});c.add(l);var g=SVMX.create("Ext.Toolbar.Fill",{});c.add(g);var h=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG004","Save"),scale:"medium",style:"margin-left: 3px !important",height:30,id:"saveBtn",cls:"triggersetting-save-btn",handler:function(){var m={};m.triggersettingvalue=[];i.triggerStore.data.items.forEach(function(n){m.triggersettingvalue.push(n.data);});i.__engine.saveTriggerSettingConfig(m,function(n){if(!n.success){SVMX.getCurrentApplication().getApplicationQuickMessageHandler().showQuickMessage(n.messagelist[0],7000,"success");}else{SVMX.getCurrentApplication().getApplicationQuickMessageHandler().showQuickMessage(b.T("TAG023","Save Successful"),7000,"success");}});}});var k=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXButton",{text:b.T("TAG005","Cancel"),scale:"medium",style:"margin-left: 3px !important",cls:"triggersetting-cancel-btn",height:30,handler:function(){var m="/apex/"+SVMX.OrgNamespace+"__CONF_SetupHome";if((typeof sforce!="undefined")&&(sforce!=null)){m="/lightning/n/"+SVMX.OrgNamespace+"__ServiceMax_Setup";sforce.one.navigateToURL(m);}else{window.location.href=m;}}});c.add(h);c.add(k);c.add({cursor:"pointer",scale:"large",cls:"triggersetting-help",tooltip:b.T("TAG011","Trigger Control Help"),href:b.T("TAG010","http://helplink"),width:32,height:32,margin:"0 0 0 15px",});i.add(c);var f=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXLabel",{html:"<span>"+b.T("TAG008","Enable/ Disable Trigger: ")+"</span>",cls:"triggersetting-enable-title",});i.triggerStore=SVMX.create("Ext.data.Store",{fields:[{name:"triggername"},{name:"isenabled",type:"boolean"}],proxy:{type:"memory"},data:[]});var j=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXListComposite",{width:"100%",collapsible:false,store:i.triggerStore,multiSelect:false,border:false,disableSelection:true,id:"triggerGrid",columns:[{text:b.T("TAG006","Trigger Name"),dataIndex:"triggername",sortable:true,flex:1.8/10,},{xtype:"checkColumnEditor",text:b.T("TAG007","Enable/Disable"),dataIndex:"isenabled",flex:0.7/10,menuDisabled:true,align:"center",}],});var e=SVMX.create("com.servicemax.client.ui.components.controls.impl.SVMXLabel",{html:"<span>"+b.T("TAG009","The trigger(s) displayed on this page get executed only when enabled. This is an org-wide setting.")+"</span>",cls:"triggersetting-enable-label",});var d=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXSection",{id:"triggerEnDisSec",bodyPadding:10,hidden:true,header:false,border:false,items:[f,j],});i.add(d);i.add(e);},});Ext.define("Ext.ux.CheckBoxColumnEditor",{extend:"Ext.grid.column.Column",alias:"widget.checkColumnEditor",stopSelection:true,tdCls:Ext.baseCSSPrefix+"grid-cell-checkcolumn",constructor:function(){this.addEvents("beforecheckchange","checkchange");
this.callParent(arguments);},processEvent:function(i,k,o,d,j,g,f,p){var h=this,n=i==="keydown"&&g.getKey(),c=i=="mousedown";if(c||(n==g.ENTER||n==g.SPACE)){var l=h.dataIndex,m=!f.get(l);if(h.fireEvent("beforecheckchange",h,d,m)!==false){f.set(l,m);h.fireEvent("checkchange",h,d,m);if(c){g.stopEvent();}if(!h.stopSelection){k.selModel.selectByPosition({row:d,column:j});}return false;}else{return !h.stopSelection;}}else{return h.callParent(arguments);}},renderer:function(d){var e=Ext.baseCSSPrefix,c=[e+"grid-checkheader"];if(d){c.push(e+"grid-checkheader-checked");}return'<center><div class="'+c.join(" ")+'">&#160;</div></center>';}});};})();