(function(){var a=SVMX.Package("com.servicemax.client.sfmconsole.utils");a.Class("Translation",com.servicemax.client.lib.api.Object,{__data:null,__parent:null,__constructor:function(c,b){this.__data={};this.__data=this.__convertData(c);this.__parent=b;},__convertData:function(e){var b={};if($.isArray(e)){var d,c=e.length;for(d=0;d<c;d++){b[e[d].Key]=e[d].Value;}}else{b=e;}return b;},replaceData:function(b){b=this.__convertData(b);$.extend(this.__data,b);},getTagArray:function(){var b=[];SVMX.forEachProperty(this.__data,function(d,c){b.push({Key:d,Value:c});});return b;},isEmpty:function(){for(var b in this.__data){return false;}return true;},T:function(c,b){if(c.match(/\./)){return this.__parent.T(c,b);}if(c in this.__data){return this.__data[c];}else{return b||"";}}},{});a.Class("TranslationService",com.servicemax.client.lib.api.Object,{__data:null,__hasData:false,__constructor:function(){this.__data={};},addData:function(c,b){this.__hasData=true;if(this.__data[b]){this.__data[b].replaceData(c);}else{this.__data[b]=new a.Translation(c,this);}},setData:function(d){var b={};SVMX.array.forEach(d,function(e){if(!b[e.module_id]){b[e.module_id]={};}b[e.module_id][e.tag_id]=e.value;});var c=b.COMMON||{};SVMX.forEachProperty(b,SVMX.proxy(this,function(f,e){$.extend(e,c);this.addData(e,f);}));},isEmpty:function(){return !this.__hasData;},getDictionary:function(b){if(!this.__data[b]){this.__data[b]=new a.Translation({},this);}return this.__data[b];},T:function(d,b){var c=d.indexOf(".");var f=d.substring(0,c);d=d.substring(c+1);var e=this.getDictionary(f);if(e){return e.T(d,b);}else{return b;}}},{});a.init=function(){a.Class("EventCollection",com.servicemax.client.lib.api.Object,{__eventBus:null,__eventItems:null,__stackIndex:0,__handler:null,__context:null,__constructor:function(b,c){this.__eventBus=b;this.__eventItems=[];this.__stackIndex=0;for(var d=0;d<c.length;d++){var e=SVMX.create("com.servicemax.client.sfmconsole.utils.EventCollectionItem",c[d]);this.__eventItems[d]=e;this.__eventItems[d].itemParent=this;}},addEvent:function(b){var c=SVMX.create("com.servicemax.client.sfmconsole.utils.EventCollectionItem",b);this.__eventItems[this.__eventItems.length]=c;this.__eventItems[this.__eventItems.length-1].itemParent=this;},triggerAll:function(d,c){this.__handler=d;this.__context=c;this.__stackIndex=(this.__stackIndex+this.__eventItems.length);for(var b=0;b<this.__eventItems.length;b++){this.__eventItems[b].trigger();}},handleResponse:function(b){this.__stackIndex--;if(this.__stackIndex==0){this.__handler.call(this.__context,this);}},getEventBus:function(){return this.__eventBus;},items:function(){return this.__eventItems;}},{});a.Class("EventCollectionItem",com.servicemax.client.mvc.api.Responder,{__event:null,response:null,itemParent:null,__constructor:function(b){this.__event=b;this.__event.data.responder=this;},trigger:function(){this.itemParent.getEventBus().triggerEvent(this.__event);},type:function(){return this.__event.type;},getEventObj:function(){return this.__event;},result:function(b){this.response=b;this.itemParent.handleResponse(this);},fault:function(c){var b="Error during event <"+this.__event.type+">";SVMX.getLoggingService().getLogger().error(b);throw new Error(b);}},{});a.Class("StateService",com.servicemax.client.lib.api.EventDispatcher,{__state:null,__index:null,__constructor:function(){this.__state=[];this.__index=0;},pushState:function(d){var b=d.stateParameters||{};delete d.stateParameters;d.index=this.__index;if(this.__state[this.__index]){this.__index++;}var c=this.getState();this.__state[this.__index]=d;if(c&&!b.noEvent){this.triggerStateDestroyed(c);}this.triggerStateChange();return this.getState();},replaceState:function(d){var b=d.stateParameters||{};delete d.stateParameters;var c=this.getState();d.index=this.__index;this.__state[this.__index]=d;if(c&&!b.noEvent){this.triggerStateDestroyed(c);}if(!b.noEvent){this.triggerStateChange();}return this.getState();},modifyState:function(d){var b=d.stateParameters||{};delete d.stateParameters;for(var c in d){this.__state[this.__index][c]=d[c];}if(!b.noEvent){this.triggerStateChange("STATE_MODIFIED");}return this.getState();},getState:function(b){var b=b===undefined?this.__index:b;var c=this.__state[b];return c;},getPriorState:function(){if(this.__index>0){return this.getState(this.__index-1);}else{return null;}},getIndex:function(){return this.__index;},back:function(){if(this.__index>0){this.__index--;}this.triggerStateChange();},forward:function(){this.__index++;this.triggerStateChange();},go:function(b){this.__index+=b;this.triggerStateChange();},reset:function(){this.__index=0;var b=this.__state;this.__state=[];SVMX.array.forEach(b,this.triggerStateDestroyed,this);},findByField:function(e,d){for(var b=this.__state.length-1;b>=0;b--){var c=this.__state[b];if(c[e]==d){return c;}}return false;},triggerStateChange:function(c){var d=this.getState();var b=new com.servicemax.client.lib.api.Event(c||"STATE_CHANGE",this,d);return this.triggerEvent(b);
},triggerStateDestroyed:function(c){var b=new com.servicemax.client.lib.api.Event("STATE_DESTROYED",this,c);return this.triggerEvent(b);}},{});a.Class("ConnectionUtil",com.servicemax.client.lib.api.Object,{__logger:null,__constructor:function(){this.__logger=SVMX.getLoggingService().getLogger("SFMDelivery : PlatformSpecifics");},},{checkConnectivity:function(){var f=SVMX.Deferred();var c=this;var e={type:"CONNECTIVITY",method:"CHECKCONNECTIVITY"};var b=com.servicemax.client.offline.sal.model.nativeservice.Facade.createConnectivityRequest();b.bind("REQUEST_COMPLETED",function(d){f.resolve(d.data.data);},c);b.bind("REQUEST_ERROR",function(d){f.resolve("false");},c);b.execute(e);return f;}});};})();