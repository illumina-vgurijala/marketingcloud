(function(){var a=SVMX.Package("com.servicemax.client.technicalattributes.api");a.init=function(){a.Class("Application",com.servicemax.client.lib.api.AbstractApplication,{__constructor:function(){},beforeRun:function(b){var c=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.niservice").getInstance();this.__eventBus=SVMX.create("com.servicemax.client.technicalattributes.impl.EventBus",{});c.createNamedInstanceAsync("CONTROLLER",{handler:function(d){c.createNamedInstanceAsync("MODEL",{handler:function(e){d.setModel(e);},context:this});},context:this,additionalParams:{eventBus:this.__eventBus}});b.handler.call(b.context);},getEventBus:function(){return this.__eventBus;},run:function(){this.__recordId=SVMX.getUrlParameter("Id");this.getMetaData();},getMetaData:function(){this.blockUI();var b=SVMX.create("com.servicemax.client.lib.api.Event","TECHNICALATTRIBUTE.GET_META_DATA",this,{request:{context:this,}});SVMX.getCurrentApplication().getEventBus().triggerEvent(b);},onGetMetaDataComplete:function(b){this.updateMetaData(b);if(SVMX&&SVMX.getClient()&&SVMX.getClient().__appParams&&b.instanceName){SVMX.getClient().__appParams.instanceName=b.instanceName;}var c={};for(var d in b.translations){c[d]=Ext.String.htmlEncode(b.translations[d]);}window.$TR=c;if(!this.__recordId){this.unblockUI();alert($TR.PARAMS_ERROR);}else{this.getTemplateData();}},updateMetaData:function(b){var e={};var c=b.isProductIQEnabled;if(c&&c.toLowerCase()=="true"){e.isProductIQEnabled=true;}else{e.isProductIQEnabled=false;}var d=b.isTechnicalAttributesEnabled;if(d&&d.toLowerCase()=="true"){e.isTechnicalAttributesEnabled=true;}else{e.isTechnicalAttributesEnabled=false;}e.timeZone=b.timeZone;this.__metaData=e;},getTemplateData:function(){var b=SVMX.create("com.servicemax.client.lib.api.Event","TECHNICALATTRIBUTE.GET_TEMPLATE_DATA",this,{request:{context:this,recordId:this.__recordId}});SVMX.getCurrentApplication().getEventBus().triggerEvent(b);},onGetTemplateDataComplete:function(b){this.unblockUI();const c=this;Ext.onReady(function(){c.createRootPanel(b);});},createRootPanel:function(b){SVMX.create("com.servicemax.client.technicalattributes.root.RootPanel",{collapsible:false,titleAlign:"center",frame:"true",template:b,metaData:this.__metaData,recordId:this.__recordId});},blockUI:function(){if(this.__spinner){this.__spinner.spin($("#"+SVMX.getDisplayRootId())[0]);}else{var c=window.innerHeight/2-100;var b={lines:25,length:25,width:5,radius:30,corners:1,rotate:0,direction:1,color:"#ffa384",speed:3,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:c};this.__spinner=new Spinner(b).spin($("#"+SVMX.getDisplayRootId())[0]);}},unblockUI:function(){this.__spinner.stop();},});};})();