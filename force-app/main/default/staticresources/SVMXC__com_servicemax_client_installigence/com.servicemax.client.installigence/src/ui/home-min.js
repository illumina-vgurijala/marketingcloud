(function(){var a=SVMX.Package("com.servicemax.client.installigence.home");a.init=function(){Ext.define("com.servicemax.client.installigence.home.Home",{extend:"com.servicemax.client.installigence.ui.components.SVMXPanel",alias:"widget.installigence.home",meta:null,root:null,__contentArea:null,__actions:null,__menu:null,constructor:function(c){this.meta=c.meta;this.root=c.root;this.__setSelectedAccountId();var b=SVMX.create("com.servicemax.client.installigence.contentarea.ContentArea",{region:"center",collapsible:false,floatable:false,split:false,meta:this.meta,root:this.root});var f=SVMX.create("com.servicemax.client.installigence.actions.Actions",{region:"east",collapsed:false,split:false,width:200,floatable:true,meta:this.meta,contentarea:b});var e=SVMX.create("com.servicemax.client.installigence.ibToolBar.ToolBarItems",{region:"north",margin:"0 0 0 0",cls:"ibtoolbar-home-account-filter",collapsed:false,split:false,height:50,floatable:true,meta:this.meta,contentarea:b});var d=this;c=Ext.apply({collapsible:false,height:SVMX.getWindowInnerHeight()-2,layout:{type:"border"},defaults:{collapsible:true,split:true},items:[b,e]},c||{});if(!SVMX.getCurrentApplication().isAppEmbedded()){c=Ext.apply({title:'<span class="title-text">ProductIQ</span> <div class="logo img"/></div> <div class="logo spinner" style="background-image: none"/></div>',titleAlign:"center",toolPosition:0,tools:[{type:"hamburger",cls:"hamburger",handler:function(j,i,g,h){if(!d.__showingMenu){d.__showingMenu=true;d.getMenu(g).showBy(g,"tl-bl?");}else{d.__showingMenu=false;d.getMenu(g).hide();}}}]},c||{});}this.__contentArea=b;this.__actions=f;this.__bindSyncEvents();this.callParent([c]);},__bindSyncEvents:function(){var b=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.installigence.sync").getInstance();b.bind("SYNC.STATUS",function(d){var c=d.data.type;var f=d.data.msg;var e=d.data.syncType;if(c==="start"){this._disableMenuItem($TR.__getValueFromTag($TR.PRODIQ001_TAG049,"Sync Data"));}else{if(c==="complete"||c==="canceled"){this._enableMenuItem($TR.__getValueFromTag($TR.PRODIQ001_TAG049,"Sync Data"));}}},this);},getMenu:function(){var b=this;if(!b.__menu){b.__menu=SVMX.create("com.servicemax.client.installigence.ui.components.Menu",{cls:"svmx-nav-menu",plain:true,height:"80%",items:[{text:$TR.__getValueFromTag($TR.PRODIQ001_TAG027,"Find & Get"),handler:function(){b._handleFindAndGet({syncType:"ib"});}},{text:$TR.__getValueFromTag($TR.PRODIQ001_TAG048,"Sync Configuration"),handler:function(){b._handleConfigSync();}},{text:$TR.__getValueFromTag($TR.PRODIQ001_TAG049,"Sync Data"),handler:function(){b._handleIncrementalSync();}},{text:$TR.__getValueFromTag($TR.PRODIQ001_TAG099,"Sync Conflicts"),handler:function(){b._showSyncConflicts();}},{text:$TR.__getValueFromTag($TR.PRODIQ001_TAG095,"Purge Data"),handler:function(){b._handlePurgeSync();}},{text:$TR.__getValueFromTag($TR.PRODIQ001_TAG051,"Reset Application"),handler:function(){b._handleResetApplication();}}]});}return b.__menu;},_disableMenuItem:function(d){var b=this.getMenu().items.items;for(var c=0;c<b.length;c++){if(b[c].text===d){b[c].disable();break;}}},_enableMenuItem:function(d){var b=this.getMenu().items.items;for(var c=0;c<b.length;c++){if(b[c].text===d){b[c].enable();break;}}},_handleResetApplication:function(){this.root.handleResetApplication();},_handleFindAndGet:function(){this.root.handleFindAndGet();},_handleConfigSync:function(){this.root.handleConfigSync();},_handleIncrementalSync:function(){this.root.handleIncrementalSync();},_handlePurgeSync:function(){this.root.handlePurgeSync();},_showSyncConflicts:function(){this.root.showSyncConflicts();},handleFocus:function(b){this.__contentArea.refreshContent(b);},selectTreeNode:function(b){this.__contentArea.selectTreeNode(b);},__setSelectedAccountId:function(){var b=this;SVMX.getClient().bind("ACCOUNT_ID_MESSAGE",function(c){var d=SVMX.toObject(c.data);if(d.accountId){b.meta.accountId=d.accountId;}});}});};})();