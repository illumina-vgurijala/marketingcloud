(function(){var a=SVMX.Package("com.servicemax.client.installigence.ui.comps");a.init=function(){Ext.define("com.servicemax.client.installigence.ui.comps.StringField",{extend:"com.servicemax.client.installigence.ui.components.SVMXTextField",alias:"widget.inst.stringfield",constructor:function(b){var c=this;b.fld.getBinding().setter=function(d){c.setValue(d);};b.fld.getBinding().getter=function(){return c.getValue()||"";};this.callParent([b]);b.fld.register(this);}});Ext.define("com.servicemax.client.installigence.ui.comps.StringFieldBarIcon",{extend:"com.servicemax.client.installigence.ui.components.SVMXFieldContainer",alias:"widget.inst.stringfieldBarIcon",__text:null,__btn:null,__lookup:null,__value:null,constructor:function(b){var c=this;b.fld.getBinding().setter=function(d){c.setValue(d);};b.fld.getBinding().getter=function(){return c.getValue()||"";};b.fld.getBinding().name=function(){return c.getValue()||"";};b=Ext.apply({layout:{type:"hbox"},items:[],defaults:{hideLabel:true}},b||{});this.__lookup=SVMX.create("com.servicemax.client.installigence.ui.comps.TextFieldWithBarCodeIcon",b);this.__text=this.__lookup.getTextField();this.__btn=this.__lookup.getBarButton();this.callParent([b]);b.fld.register(this.__text);},setValue:function(b){this.__text.setValue(b);},getValue:function(){return this.__text.getValue();}});a.Class("TextFieldWithBarCodeIcon",com.servicemax.client.lib.api.Object,{__config:null,__lookupBtn:null,__lookupText:null,__selectedRecord:null,__value:null,__constructor:function(b){this.__config=b||[];this.__config.items=[];this.__config.layout="hbox";this.__config.cls="svmx-barCodeField-field";this.__config.margin="05, 30";this.__config.labelAlign="top";this.__lookupField();this.__selectedRecord={};},getValue:function(){return this.__value;},getDisplayValue:function(){return this.__displayValue;},readOnly:function(){this.__lookupText.readOnly=true;this.__lookupBtn.disabled=true;},getTextField:function(){return this.__lookupText;},getBarButton:function(){return this.__lookupBtn;},__lookupField:function(){var c=this;var b=[];this.__lookupBtn=SVMX.create("com.servicemax.client.installigence.ui.components.SVMXButton",{iconCls:"svmx_BarIcon_Icon",margin:"0, 5",disabled:this.__config.fld.readOnly,handler:function(){c.launchScanner();}});this.__lookupText=SVMX.create("com.servicemax.client.installigence.lookup.TextField",{value:this.getValue(),readOnly:this.__config.fld.readOnly,allowBlank:!this.__config.fld.required,listeners:{specialkey:function(d,g){if(g.getKey()==g.ENTER){alert("test1");}},blur:function(){if(this.getValue().trim()===""){}c.__lookupBtn.hide();},focus:function(){c.__lookupBtn.show();}}});this.__lookupBtn.hide();this.__config.items.push(this.__lookupText);this.__config.items.push(this.__lookupBtn);},launchScanner:function(){var b=this;var f=SVMX.Deferred();var e=SVMX.getCurrentApplication().getNativeServiceRequest();var c=e.createScanRequest();c.bind("REQUEST_COMPLETED",function(d){if(d.data.data&&!d.data.data.cancelled){var g=d.data.data.text;b.__lookupText.setValue(g);b.__lookupText.focus();}else{if(d.data.data&&d.data.data.cancelled){}}f.resolve(d);},this);c.bind("REQUEST_ERROR",function(d){f.reject({});},this);c.execute({link:""},function(g,d){});return f.promise();}});Ext.define("com.servicemax.client.installigence.ui.comps.BooleanField",{extend:"com.servicemax.client.installigence.ui.components.Checkbox",alias:"widget.inst.booleanfield",constructor:function(b){var c=this;b.fld.getBinding().setter=function(d,e){if(e){c.suspendEvents();}c.setValue(d);if(e){c.resumeEvents();}};b.fld.getBinding().getter=function(){return c.getValue();};this.callParent([b]);b.fld.register(this);}});Ext.define("com.servicemax.client.installigence.ui.comps.ReferenceField",{extend:"com.servicemax.client.installigence.lookup.Container",alias:"widget.inst.fieldcontainer",constructor:function(b){var c=this;b.items=[];b.objectName=b.fld.referenceTo[0];b.columns=(b.objectName=="Product2"&&b.meta.productDisplayFields)?b.meta.productDisplayFields:[{name:"Name"}];b.searchColumns=(b.objectName=="Product2"&&b.meta.productDisplayFields)?b.meta.productSearchFields:[{name:"Name"}];b.mvcEvent="GET_RECORDS";this.callParent([b]);if(b.fld._parent.__objectName.toUpperCase()==="ACCOUNT"){this.makeReadOnly();}b.fld.getBinding().setter=function(d){c.setValue(d);};b.fld.getBinding().getter=function(){return c.getValue()||"";};b.fld.getBinding().name=function(){return c.getLookupText().getValue()||"";};b.fld.register(this.getLookupText());}});Ext.define("com.servicemax.client.installigence.ui.comps.RecordTypeField",{extend:"com.servicemax.client.installigence.ui.components.SVMXComboBox",alias:"widget.inst.recordtypefield",constructor:function(e){var d=e.recordTypeMappings,c=[];if(d){for(var f=0;f<d.length;f++){c.push({value:d[f].recordTypeId,display:d[f].name});}}var b=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXStore",{fields:["display","value"],data:c});e=Ext.apply({store:b,queryMode:"local",displayField:"display",valueField:"value",},e||{});
var g=this;e.fld.getBinding().setter=function(h){g.setValue(h);};e.fld.getBinding().getter=function(){return g.getValue()||"";};e.fld.getBinding().updateStore=function(h){if(h.length>0){g.store.loadData(h);}else{g.store.loadData([],false);}};this.callParent([e]);e.fld.register(this);}});Ext.define("com.servicemax.client.installigence.ui.comps.PicklistField",{extend:"com.servicemax.client.installigence.ui.components.SVMXComboBox",alias:"widget.inst.picklistfield",constructor:function(f){var c=f.fld.getListOfValues(),b=c.length,g,e=[];if(!f.fld.dependentPickList){for(g=0;g<b;g++){e.push({value:c[g].value,display:c[g].label});}}var d=SVMX.create("com.servicemax.client.ui.components.composites.impl.SVMXStore",{fields:["display","value"],data:e});f=Ext.apply({store:d,queryMode:"local",displayField:"display",valueField:"value",triggerAction:"all",lastQuery:" ",enableKeyEvents:true,listeners:{keyup:function(){var i=this.getRawValue();if(i.length===0){this.clearValue();this.applyEmptyText();this.reset();this.lastSelection=[];this.doQuery("",false);}this.store.filter("value",this.getRawValue(),false,false);}}},f||{});var h=this;f.fld.getBinding().setter=function(i){h.setValue(i);};f.fld.getBinding().getter=function(){return h.getValue()||"";};f.fld.getBinding().updateStore=function(i){if(i.length>0){h.store.loadData(i);}else{h.store.loadData([],false);}};this.callParent([f]);f.fld.register(this);}});Ext.define("com.servicemax.client.installigence.ui.comps.DateField",{extend:"com.servicemax.client.ui.components.controls.impl.SVMXDate",alias:"widget.inst.datefield",constructor:function(b){b=Ext.apply({},b||{});var c=this;b.fld.getBinding().setter=function(d,e){if(e){c.suspendEvents();}c.setValue(d);if(e){c.resumeEvents();}};b.fld.getBinding().getter=function(){var d=c.getValue()||"";if(d&&d!=""){d=Ext.Date.format(c.getValue(),"Y-m-d");}return d;};this.callParent([b]);b.fld.register(this);}});Ext.define("com.servicemax.client.installigence.ui.comps.DatetimeField",{extend:"com.servicemax.client.ui.components.controls.impl.SVMXDatetime",alias:"widget.inst.datetimefield",constructor:function(b){b=Ext.apply({cls:"svmx-custom-date-time"},b||{});var c=this;b.fld.getBinding().setter=function(g,h){if(h){c.suspendEvents();}if(g&&g!=""){var d=com.servicemax.client.lib.datetimeutils.DatetimeUtil;g=g.substring(0,"yyyy-mm-ddTHH:mm:ss".length).replace("T"," ");g=d.convertToTimezone(g);var f=d.getFormattedDatetime(g,d.getDefaultDateFormat());var e=d.getFormattedDatetime(g,"HH:mm");g=f+"T"+e;}c.setValue(g);if(h){c.resumeEvents();}};b.fld.getBinding().getter=function(){var e=c.getValue()||"";var d=e;if(e&&e!=""){e=new Date(e);e=new Date(e.getTime()+(e.getTimezoneOffset()*60000));e=e.toISOString();e=e.substring(0,e.length-1);e=e+"+0000";}return e;};this.callParent([b]);b.fld.register(this.getDateField());b.fld.register(this.getTimeField());}});};})();