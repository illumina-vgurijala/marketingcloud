(function(){var a=SVMX.Package("com.servicemax.client.sal.model.sfmsearchdelivery.operations");a.init=function(){var c=com.servicemax.client.sal.sfmsearch.model.impl.Module;var b;a.Class("GetSearchInfo",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(g,d){var e=c.instance,f=this;if(window.svmx_sfmsearch_delivery_search_info!=undefined&&window.svmx_sfmsearch_delivery_search_info!=null){setTimeout(function(){var h=window.svmx_sfmsearch_delivery_search_info;h=SVMX.toObject(h);window.svmx_sfmsearch_delivery_search_info=null;f.__handleResponse(g,d,h);},1);}else{if(e.useJsr){SVMXJsr.JsrGetSearchInfo(g,function(h,i){this.__handleResponse(g,d,h);},this);}else{e.createServiceRequest({handler:function(h){h.bind("REQUEST_COMPLETED",function(i){this.__handleResponse(g,d,i.data);},this);h.callMethodAsync({methodName:"getSearchInfo",data:{}});},context:this},this);}}},__handleResponse:function(f,d,g){var e=c.instance;if(e.checkResponseStatus("GetSearchInfo",g,false,this)==true){b=SVMX.cloneObject(g);d.result(g);}}},{});a.Class("GetUserInfo",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(e,d){if(window.svmx_sfmsearch_delivery_userinfo!=undefined&&window.svmx_sfmsearch_delivery_userinfo!=null){setTimeout(function(){ret=window.svmx_sfmsearch_delivery_userinfo;ret=SVMX.toObject(ret);c.instance.setUserInfo(ret);d.result(ret);},1);}else{c.instance.createServiceRequest({handler:function(f){f.bind("REQUEST_COMPLETED",function(g){c.instance.setUserInfo(g.data);d.result(g.data);});f.callMethodAsync({methodName:"getUserInfo",data:e});},context:this},this);}}},{});a.Class("GetSearchResults",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(g,d){var f=c.instance;var e={ProcessId:g.ProcessId,ProcessName:g.ProcessName,ObjectId:g.ObjectId,KeyWord:g.KeyWord,Operator:g.Operator,RecordLimit:g.RecordLimit};if(f.useJsr){SVMXJsr.JsrGetSearchResult(e,function(h,i){this.__handleResponse(g,d,h);},this);}else{f.createServiceRequest({handler:function(h){h.bind("REQUEST_COMPLETED",function(i){this.__handleResponse(g,d,i.data);},this);h.callMethodAsync({methodName:"getSearchResult",data:e});},context:this},this);}},__getSearchDef:function(e){var f=SVMX.array.get(b.lstSearchInfo,function(g){return g.searchDef.Id==e.ProcessId;});var d=SVMX.array.get(f.searchDetails,function(g){return g.objectDetails.Id==e.ObjectId;});return d;},__getSearchObjectFromDef:function(d){return d.objectDetails[SVMX.OrgNamespace+"__Target_Object_Name__c"];},__handleResponse:function(f,d,g){var e=c.instance;if(e.checkResponseStatus("GetSearchResult",g,false,this)==true){this.__convertResponse(f,d,g);d.result(g);}},__convertResponse:function(g,e,h){var m=h.MapStringMap;if(m){var l=this.__getSearchDef(g);var n=this.__getSearchObjectFromDef(l);var o=l.fields;for(var k=0;k<m.length;k++){var d=m[k].valueMap;for(var f=0;f<d.length;f++){this.__convertResponseItem(d[f],o[f],n);}}}},__convertResponseItem:function(d,h,e){var f=h[SVMX.OrgNamespace+"__Object_Name2__c"];var i=h[SVMX.OrgNamespace+"__Field_Name__c"];var g=h[SVMX.OrgNamespace+"__Lookup_Field_API_Name__c"];if(f&&f!=e){d.key=g+"-"+i;}else{d.key=i;}if(d.type=="DATETIME"){d.value=(d.value=="--"||d.value=="")?"--":this.__getDateTimeInSaveFormat(d.value);}else{if(d.type=="DATE"){d.value=(d.value=="--"||d.value=="")?"--":this.__getDateInSaveFormat(d.value);}}},__getDateTimeInSaveFormat:function(f){var d=com.servicemax.client.lib.datetimeutils.DatetimeUtil;var e=d.parseGMTDate(f,d.getDefaultDatetimeFormat());return d.convertToTimezone(e,null,true);},__getDateInSaveFormat:function(f){var d=com.servicemax.client.lib.datetimeutils.DatetimeUtil;var e=d.parseDate(f,d.getDefaultDateFormat());return d.getFormattedDatetime(e,d.getSaveFormat("date"));}},{});a.Class("GetSearchResultLimitSettings",com.servicemax.client.mvc.api.Operation,{__constructor:function(){this.__base();},performAsync:function(e,d){d.result({maxLimit:null,defaultLimit:null});}},{});};})();