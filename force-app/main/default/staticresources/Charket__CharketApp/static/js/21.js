(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"+yjF":function(t,e,s){"use strict";var o=s("9Q/M");s.n(o).a},"2FAg":function(t,e,s){"use strict";var o=s("TCZq");s.n(o).a},"4AR0":function(t,e,s){"use strict";var o=s("FFJI"),a=s.n(o);e.default=a.a},"5GAW":function(t,e,s){},"5pju":function(t,e,s){"use strict";var o=s("5GAW");s.n(o).a},"9Q/M":function(t,e,s){},FFJI:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"ActivitiesLabel":"活动","MessagesLabel":"消息","EventsLabel":"事件"},"en":{"ActivitiesLabel":"Activities","MessagesLabel":"Messages","EventsLabel":"Events"}}'),delete t.options._Ctor}},IVQ2:function(t,e,s){"use strict";var o=s("KeEv");s.n(o).a},KeEv:function(t,e,s){},LQoh:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"totalFollowersLabel":"总用户数","newFollowersLabel":"7天内新增关注者","newMessagesLabel":"新消息","followersTitle":"微信关注者","activitiesTitle":"微信近期活跃情况","campaignsTitle":"微信市场活动","moreLinkContent":"更多","NoWeChatCampaignLabel":"没有可显示的微信市场活动。","typeLabel":"类型","statusLabel":"状态","startDateLabel":"开始日期","endDateLabel":"结束日期","dayLabel":"天","hourlyLabel":"小时"},"en":{"totalFollowersLabel":"Total Followers","newFollowersLabel":"7 Day New Followers","newMessagesLabel":"New Messages","followersTitle":"WeChat Followers","activitiesTitle":"WeChat Activities","campaignsTitle":"WeChat Campaigns","moreLinkContent":"More","NoWeChatCampaignLabel":"No WeChat Campaigns to show.","typeLabel":"Type","statusLabel":"Status","startDateLabel":"Start Date","endDateLabel":"End Date","dayLabel":"Daily","hourlyLabel":"Hourly"}}'),delete t.options._Ctor}},MYJ2:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"FollowsLabel":"新关注","UnfollowsLabel":"取消关注","GrantedLabel":"已授权","Anonymous":"匿名"},"en":{"FollowsLabel":"Follows","UnfollowsLabel":"Unfollows","GrantedLabel":"Authorization Granted","Anonymous":"Anonymous"}}'),delete t.options._Ctor}},PN79:function(t,e,s){"use strict";var o=s("MYJ2"),a=s.n(o);e.default=a.a},SzHL:function(t,e,s){"use strict";var o=s("LQoh"),a=s.n(o);e.default=a.a},TCZq:function(t,e,s){},"u1G+":function(t,e,s){"use strict";s.r(e);var o=s("vQrK"),a=s.n(o),l=s("L2JU"),i=s("ProS");s("75ce"),s("AH3D"),s("Ynxi"),s("sRwP"),s("0o9m"),s("zRKj");var r={computed:a()({},Object(l.c)({followerChartCount:"home/followerChartCount",currentAccount:"sidebar/currentAccount"}),{isMiniProgramAcc(){return"Mini Program"===this.currentAccount.Type},legendLabels(){return this.isMiniProgramAcc?[this.$t("GrantedLabel"),this.$t("Anonymous")]:[this.$t("FollowsLabel"),this.$t("UnfollowsLabel")]},chartSeries(){return this.isMiniProgramAcc?[{name:this.legendLabels[0],type:"line",stack:"Follows",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#52678F"}},data:this.followerChartCount.granted},{name:this.legendLabels[1],type:"line",stack:"Unfollows",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#3DCD7F"}},data:this.followerChartCount.anonymous}]:[{name:this.legendLabels[0],type:"line",stack:"Follows",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#52678F"}},data:this.followerChartCount.followed},{name:this.legendLabels[1],type:"line",stack:"Unfollows",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#3DCD7F"}},data:this.followerChartCount.notfollowed}]}}),data:()=>({followerChart:""}),methods:{loadChart(){this.followerChart.setOption({title:{text:""},tooltip:{trigger:"axis"},legend:{data:this.legendLabels},toolbox:{feature:{saveAsImage:{title:this.$t("global.saveBtn"),name:"WeChat Dashboard - Followers"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{data:this.followerChartCount.categories,boundaryGap:!1,type:"category",axisLabel:{textStyle:{color:"#706E6B"}}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:["#E9E8E6"]}},axisLabel:{textStyle:{color:"#C5C5C5"}}},series:this.chartSeries})},showLoading(){const t={text:this.$t("global.loading"),color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0};this.followerChart.showLoading("default",t)}},watch:{followerChartCount:function(){this.followerChart.resize(),this.loadChart(),this.followerChart.hideLoading()}},mounted:function(){this.followerChart=i.init(document.getElementById("followerChart")),this.showLoading(),window.addEventListener("resize",this.followerChart.resize)},beforeDestroy(){window.removeEventListener("resize",this.followerChart.resize)}},n=(s("2FAg"),s("KHd+")),c=s("PN79"),h=Object(n.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"follower-chart",attrs:{id:"followerChart"}})}),[],!1,null,"73496264",null);"function"==typeof c.default&&Object(c.default)(h);var d=h.exports,u=s("ProS");s("75ce"),s("AH3D"),s("Ynxi"),s("sRwP"),s("0o9m"),s("zRKj");var g={computed:a()({},Object(l.c)({messageChartCount:"home/messageChartCount",currentAccount:"sidebar/currentAccount"}),{isMiniProgramAcc(){return"Mini Program"===this.currentAccount.Type},legendLabels(){return this.isMiniProgramAcc?[this.$t("MessagesLabel")]:[this.$t("ActivitiesLabel"),this.$t("MessagesLabel"),this.$t("EventsLabel")]},chartSeries(){return this.isMiniProgramAcc?[{name:this.legendLabels[0],type:"line",stack:"Messages",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#3DCD7F"}},data:this.messageChartCount.messageCounts}]:[{name:this.legendLabels[0],type:"line",stack:"Activities",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#52678F"}},data:this.messageChartCount.activityCounts},{name:this.legendLabels[1],type:"line",stack:"Messages",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#3DCD7F"}},data:this.messageChartCount.messageCounts},{name:this.legendLabels[2],type:"line",stack:"Events",areaStyle:{normal:{opacity:.2}},showAllSymbol:!0,symbol:"circle",symbolSize:8,itemStyle:{normal:{color:"#FFC336"}},data:this.messageChartCount.eventCounts}]}}),data:()=>({messageChart:""}),methods:{loadChart(){this.messageChart.setOption({title:{text:""},tooltip:{trigger:"axis"},legend:{data:this.legendLabels},toolbox:{feature:{saveAsImage:{title:this.$t("global.saveBtn"),name:"WeChat Dashboard - Messages"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{data:this.messageChartCount.categories,boundaryGap:!1,type:"category",axisLabel:{textStyle:{color:"#706E6B"}}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:["#E9E8E6"]}},axisLabel:{textStyle:{color:"#C5C5C5"}}},series:this.chartSeries})},showLoading(){const t={text:this.$t("global.loading"),color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0};this.messageChart.showLoading("default",t)}},watch:{messageChartCount:function(){this.messageChart.resize(),this.loadChart(),this.messageChart.hideLoading()}},mounted:function(){this.messageChart=u.init(document.getElementById("messageChart")),this.showLoading(),window.addEventListener("resize",this.messageChart.resize)},beforeDestroy(){window.removeEventListener("resize",this.messageChart.resize)}},m=(s("+yjF"),s("4AR0")),p=Object(n.a)(g,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"message-chart",attrs:{id:"messageChart"}})}),[],!1,null,"2a79adf8",null);"function"==typeof m.default&&Object(m.default)(p);var w={components:{HomeFollower:d,HomeMessage:p.exports},computed:a()({},Object(l.c)({currentUser:"user/currentUser",followerTotal:"home/followerTotal",latestFollowerTotal:"home/latestFollowerTotal",campaigns:"home/campaigns",newAccountMessageCount:"home/newAccountMessageCount",currentAccount:"sidebar/currentAccount"}),{accountId(){return this.$route.params.accountId},isMiniProgramAcc(){return"Mini Program"===this.currentAccount.Type}}),data(){return{isNeedReLoadData:!0,reportTypes:[this.$t("dayLabel"),this.$t("hourlyLabel")],followerReportType:this.$t("dayLabel"),messageReportType:this.$t("hourlyLabel"),showFollowerReportBox:!1,showMessageReportBox:!1}},created:async function(){this.isNeedReLoadData&&(this.isNeedReLoadData=!1,this.switchAccount({wechatAccountId:this.accountId}),this.getAccountDetail(this.accountId))},methods:a()({},Object(l.b)("home",["getAccountDetail","getChartFollowerCount","getChartHourlyFollowerCount","getChartMessageCount","getChartHourlyMessageCount"]),Object(l.b)("sidebar",["switchAccount"]),{goToLiveChat(){this.$router.push({path:"/chat"})},showSelect(t){if("follower"===t?(this.showFollowerReportBox=!this.showFollowerReportBox,this.showMessageReportBox=!1):(this.showMessageReportBox=!this.showMessageReportBox,this.showFollowerReportBox=!1),this.showFollowerReportBox||this.showMessageReportBox){const t=()=>{this.showFollowerReportBox=!1,this.showMessageReportBox=!1,window.removeEventListener("click",t)};window.addEventListener("click",t)}},changeReportType(t,e){"follower"===e?(this.showFollowerReportBox=!1,this.followerReportType!==t&&(this.followerReportType=t,this.refreshFollowerReport())):(this.showMessageReportBox=!1,this.messageReportType!==t&&(this.messageReportType=t,this.refreshMessageReport()))},refreshFollowerReport(){this.$refs.followerReport.showLoading(),this.followerReportType===this.$t("dayLabel")?this.getChartFollowerCount(this.currentAccount):this.getChartHourlyFollowerCount(this.currentAccount)},refreshMessageReport(){this.$refs.messageReport.showLoading(),this.messageReportType===this.$t("dayLabel")?this.getChartMessageCount(this.currentAccount):this.getChartHourlyMessageCount(this.currentAccount)}}),watch:{$route:async function(){this.followerReportType=this.$t("dayLabel"),this.messageReportType=this.$t("hourlyLabel"),this.getAccountDetail(this.accountId)}}},b=(s("5pju"),s("IVQ2"),s("SzHL")),C=Object(n.a)(w,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home slds-scrollable_y"},[s("div",{staticClass:"home-min-container"},[s("div",{staticClass:"amounts"},[s("ul",{staticClass:"slds-grid slds-grid_align-spread"},[s("li",{staticClass:"slds-col slds-size_1-of-3 slds-grid slds-border_right"},[s("label",{staticClass:"icon-container total-follower-icon"},[s("icon",{attrs:{name:"TotalFollowers","class-name":"total-followers","charket-icon":""}})],1),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[s("div",{},[s("p",{staticClass:"amount-value"},[t._v(t._s(t._f("addSeparators")(t.followerTotal)))]),t._v(" "),s("label",{staticClass:"amount-label"},[t._v(t._s(t.$t("totalFollowersLabel")))])])])]),t._v(" "),s("li",{staticClass:"slds-col slds-size_1-of-3 slds-grid slds-border_right"},[s("label",{staticClass:"icon-container new-follower-icon"},[s("icon",{attrs:{name:"NewFollowers","class-name":"new-followers","charket-icon":""}})],1),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[s("div",[s("p",{staticClass:"amount-value"},[t._v(t._s(t._f("addSeparators")(t.latestFollowerTotal)))]),t._v(" "),s("label",{staticClass:"amount-label"},[t._v(t._s(t.$t("newFollowersLabel")))])])])]),t._v(" "),s("li",{staticClass:"slds-col slds-size_1-of-3 slds-grid"},[s("label",{staticClass:"icon-container new-message-icon"},[s("icon",{attrs:{name:"NewMessages","class-name":"new-message","charket-icon":""}})],1),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[s("div",[s("a",{staticClass:"amount-value slds-grid",attrs:{href:"javascript: void(0)"},on:{click:function(e){return t.goToLiveChat()}}},[t._v(t._s(t._f("addSeparators")(t.newAccountMessageCount)))]),t._v(" "),s("label",{staticClass:"amount-label"},[t._v(t._s(t.$t("newMessagesLabel")))])])])])])]),t._v(" "),s("div",{staticClass:"slds-grid"},[s("div",{staticClass:"slds-col slds-grid_vertical",class:{"slds-size_2-of-3":!t.isMiniProgramAcc,"slds-p-horizontal_medium":!t.isMiniProgramAcc,"left-chart-section":!t.isMiniProgramAcc,"slds-size_3-of-3":t.isMiniProgramAcc}},[s("div",{staticClass:"slds-box followers"},[s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center title"},[s("span",[t._v(t._s(t.$t("followersTitle")))]),t._v(" "),s("div",{staticClass:"slds-grid"},[s("button",{staticClass:"slds-button slds-button--icon-border down-btn",attrs:{type:"button"},on:{click:function(e){return t.refreshFollowerReport()}}},[s("icon",{attrs:{name:"refresh","class-name":"down-icon",width:"16px",height:"16px"}})],1),t._v(" "),s("div",{staticClass:"slds-button-group report-action-change",on:{click:function(e){return e.stopPropagation(),t.showSelect("follower")}}},[s("a",{staticClass:"slds-button slds-button--icon-more down-btn action-btn",attrs:{href:"javascript:void(0);"}},[s("icon",{attrs:{name:"event","class-name":"down-icon",width:"16px",height:"16px"}}),t._v(" "),s("icon",{attrs:{name:"down","class-name":"down-icon",width:"16px",height:"16px"}})],1),t._v(" "),t.showFollowerReportBox?s("ul",{staticClass:"slds-listbox slds-listbox_vertical slds-dropdown"},t._l(t.reportTypes,(function(e){return s("li",{staticClass:"slds-listbox__item slds-text-body_small check-report-item",on:{click:function(s){return s.stopPropagation(),t.changeReportType(e,"follower")}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.followerReportType===e,expression:"followerReportType === item"}],staticClass:"check-icon"},[s("icon",{attrs:{name:"check","fill-color":"rgb(22, 50, 92)",width:"12px",height:"12px"}})],1),t._v(" "),s("span",[t._v(t._s(e))])])})),0):t._e()])])]),t._v(" "),s("home-follower",{ref:"followerReport"})],1),t._v(" "),s("div",{staticClass:"slds-box messages"},[s("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-grid_align-spread title"},[s("span",[t._v(t._s(t.$t("activitiesTitle")))]),t._v(" "),s("div",{staticClass:"slds-grid"},[s("button",{staticClass:"slds-button slds-button--icon-border down-btn",attrs:{type:"button"},on:{click:function(e){return t.refreshMessageReport()}}},[s("icon",{attrs:{name:"refresh","class-name":"down-icon",width:"16px",height:"16px"}})],1),t._v(" "),s("div",{staticClass:"slds-button-group report-action-change",on:{click:function(e){return e.stopPropagation(),t.showSelect("message")}}},[s("a",{staticClass:"slds-button slds-button--icon-more down-btn action-btn",attrs:{href:"javascript:void(0);"}},[s("icon",{attrs:{name:"event","class-name":"down-icon",width:"16px",height:"16px"}}),t._v(" "),s("icon",{attrs:{name:"down","class-name":"down-icon",width:"16px",height:"16px"}})],1),t._v(" "),t.showMessageReportBox?s("ul",{staticClass:"slds-listbox slds-listbox_vertical slds-dropdown"},t._l(t.reportTypes,(function(e){return s("li",{staticClass:"slds-listbox__item check-report-item",on:{click:function(s){return s.stopPropagation(),t.changeReportType(e,"message")}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.messageReportType===e,expression:"messageReportType === item"}],staticClass:"check-icon"},[s("icon",{attrs:{name:"check","fill-color":"rgb(22, 50, 92)",width:"12px",height:"12px"}})],1),t._v(" "),s("span",[t._v(t._s(e))])])})),0):t._e()])])]),t._v(" "),s("home-message",{ref:"messageReport"})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMiniProgramAcc,expression:"!isMiniProgramAcc"}],staticClass:"slds-box campaigns slds-col slds-size_1-of-3"},[s("div",{staticClass:"slds-border_bottom title slds-grid slds-grid_vertical-align-center slds-grid_align-spread"},[s("p",[t._v(t._s(t.$t("campaignsTitle")))]),t._v(" "),s("router-link",{staticClass:"slds-text-body_small",attrs:{tag:"a",to:{name:"wechat-campaign",query:{accountId:t.accountId}}}},[t._v(t._s(t.$t("moreLinkContent")))])],1),t._v(" "),t.campaigns&&0!==t.campaigns.length?t._e():s("p",{staticClass:"no-campaign-show slds-text-color_weak"},[t._v(t._s(t.$t("NoWeChatCampaignLabel")))]),t._v(" "),s("ul",{staticClass:"campaign-list"},t._l(t.campaigns,(function(e){return s("li",{staticClass:"slds-border_bottom campaign-item"},[s("div",{staticClass:"name-content"},[s("a",{attrs:{href:"/"+e.Id,target:"_blank"}},[t._v(t._s(e.Name))])]),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread campaign-flex-box"},[s("ul",[s("li",[s("label",{staticClass:"slds-text-heading_label-normal label-right"},[t._v(t._s(t.$t("typeLabel"))+":")]),t._v(" "),s("span",[t._v(t._s(e.Type))])]),t._v(" "),s("li",[s("label",{staticClass:"slds-text-heading_label-normal label-right"},[t._v(t._s(t.$t("statusLabel"))+":")]),t._v(" "),s("span",[t._v(t._s(e.Status))])]),t._v(" "),s("li",[s("label",{staticClass:"slds-text-heading_label-normal label-right"},[t._v(t._s(t.$t("startDateLabel"))+":")]),t._v(" "),s("span",[t._v(t._s(t._f("formatDateFilter")(e.StartDate,t.currentUser.TimeZoneSidKey)))])]),t._v(" "),s("li",[s("label",{staticClass:"slds-text-heading_label-normal label-right"},[t._v(t._s(t.$t("endDateLabel"))+":")]),t._v(" "),s("span",[t._v(t._s(t._f("formatDateFilter")(e.EndDate,t.currentUser.TimeZoneSidKey)))])])])])])})),0)])])])])}),[],!1,null,"ee4deaf2",null);"function"==typeof b.default&&Object(b.default)(C);e.default=C.exports}}]);