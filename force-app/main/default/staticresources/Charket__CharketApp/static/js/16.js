(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+O6Z":function(e,t,s){"use strict";var i=s("bvdj"),n=s.n(i);t.default=n.a},"/B6M":function(e,t,s){"use strict";t.a={"北京市":["北京市"],"天津市":["天津市"],"上海市":["上海市"],"重庆市":["重庆市"],"河北省":["石家庄市","唐山市","秦皇岛市","邯郸市","邢台市","保定市","张家口市","承德市","沧州市","廊坊市","衡水市","定州市","辛集市"],"山西省":["太原市","大同市","阳泉市","长治市","晋城市","朔州市","晋中市","运城市","忻州市","临汾市","吕梁市"],"内蒙古":["呼和浩特市","包头市","乌海市","赤峰市","通辽市","鄂尔多斯市","呼伦贝尔市","巴彦淖尔市","乌兰察布市","兴安盟","锡林郭勒盟","阿拉善盟"],"辽宁省":["沈阳市","大连市","鞍山市","抚顺市","本溪市","丹东市","锦州市","营口市","阜新市","辽阳市","盘锦市","铁岭市","朝阳市","葫芦岛市"],"吉林省":["长春市","吉林市","四平市","辽源市","通化市","白山市","松原市","白城市","延边州"],"黑龙江省":["哈尔滨市","齐齐哈尔市","鸡西市","鹤岗市","双鸭山市","大庆市","伊春市","佳木斯市","七台河市","牡丹江市","黑河市","绥化市","大兴安岭地区"],"江苏省":["南京市","无锡市","徐州市","常州市","苏州市","南通市","连云港市","淮安市","盐城市","扬州市","镇江市","泰州市","宿迁市"],"浙江省":["杭州市","宁波市","温州市","嘉兴市","湖州市","绍兴市","金华市","衢州市","舟山市","台州市","丽水市"],"安徽省":["合肥市","芜湖市","蚌埠市","淮南市","马鞍山市","淮北市","铜陵市","安庆市","黄山市","滁州市","阜阳市","宿州市","六安市","亳州市","池州市","宣城市"],"福建省":["福州市","厦门市","莆田市","三明市","泉州市","漳州市","南平市","龙岩市","宁德市"],"江西省":["南昌市","景德镇市","萍乡市","九江市","新余市","鹰潭市","赣州市","吉安市","宜春市","抚州市","上饶市"],"山东省":["济南市","青岛市","淄博市","枣庄市","东营市","烟台市","潍坊市","济宁市","泰安市","威海市","日照市","莱芜市","临沂市","德州市","聊城市","滨州市","菏泽市"],"河南省":["郑州市","开封市","洛阳市","平顶山市","安阳市","鹤壁市","新乡市","焦作市","濮阳市","许昌市","漯河市","三门峡市","南阳市","商丘市","信阳市","周口市","驻马店市","济源市"],"湖北省":["武汉市","黄石市","十堰市","宜昌市","襄阳市","鄂州市","荆门市","孝感市","荆州市","黄冈市","咸宁市","随州市","恩施州","仙桃市","潜江市","天门市","神农架林区"],"湖南省":["长沙市","株洲市","湘潭市","衡阳市","邵阳市","岳阳市","常德市","张家界市","益阳市","郴州市","永州市","怀化市","娄底市","湘西州"],"广东省":["广州市","韶关市","深圳市","珠海市","汕头市","佛山市","江门市","湛江市","茂名市","肇庆市","惠州市","梅州市","汕尾市","河源市","阳江市","清远市","东莞市","中山市","潮州市","揭阳市","云浮市"],"广西":["南宁市","柳州市","桂林市","梧州市","北海市","防城港市","钦州市","贵港市","玉林市","百色市","贺州市","河池市","来宾市","崇左市"],"海南省":["海口市","三亚市","三沙市","琼海市","万宁市","东方市","文昌市","五指山市","临高县","澄迈县","定安县","屯昌县","昌江县","白沙县","琼中县","陵水县","保亭县","乐东县","儋州市"],"四川省":["成都市","自贡市","攀枝花市","泸州市","德阳市","绵阳市","广元市","遂宁市","内江市","乐山市","南充市","眉山市","宜宾市","广安市","达州市","雅安市","巴中市","资阳市","阿坝州","甘孜州","凉山州"],"贵州省":["贵阳市","六盘水市","遵义市","安顺市","毕节市","铜仁市","黔西南州","黔东南州","黔南州"],"云南省":["昆明市","曲靖市","玉溪市","保山市","昭通市","丽江市","普洱市","临沧市","楚雄州","红河州","文山州","西双版纳州","大理州","德宏州","怒江州","迪庆州"],"西藏自治区":["拉萨市","日喀则市","昌都市","山南地区","那曲地区","阿里地区","林芝地区"],"陕西省":["西安市","铜川市","宝鸡市","咸阳市","渭南市","延安市","汉中市","榆林市","安康市","商洛市"],"甘肃省":["兰州市","嘉峪关市","金昌市","白银市","天水市","武威市","张掖市","平凉市","酒泉市","庆阳市","定西市","陇南市","临夏州","甘南州"],"青海省":["西宁市","海东地区","海北州","黄南州","海南州","果洛州","玉树州","海西州"],"宁夏":["银川市","石嘴山市","吴忠市","固原市","中卫市"],"新疆":["乌鲁木齐市","克拉玛依市","吐鲁番地区","哈密地区","昌吉州","博尔塔拉州","巴音郭楞州","阿克苏地区","克孜勒苏柯尔克孜自治州","喀什地区","和田地区","伊犁州","五家渠市","阿拉尔市","图克舒克市","铁门关市","昆玉市","哈城地区","阿勒泰地区"],"台湾":["台湾"],"港澳":["香港特别行政区","澳门特别行政区"]}},"/X08":function(e,t,s){"use strict";var i=s("7wNg"),n=s.n(i);t.default=n.a},"/qZ2":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"surveyLink":"问卷链接","surveyLinkTip":"该链接可发给微信关注者或用于创建图文消息","copySuccess":"链接已被复制至你的粘贴板。","copyFailed":"复制失败。","copyLinkBtn":"复制链接"},"en":{"surveyLink":"Survey Link","surveyLinkTip":"This link can be sent to WeChat followers or used by structured messages","copySuccess":"The link has been copied to your clipboard.","copyFailed":"Copy failed.","copyLinkBtn":"Copy Link"}}'),delete e.options._Ctor}},"0+6n":function(e,t,s){"use strict";var i=s("uq+9");s.n(i).a},"1+VO":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"newSurveyLabel":"新建问卷","editSurveyLabel":"编辑问卷","nameLabel":"名称","noteLabel":"备注","accountLabel":"微信公众号","surveyAccountTip":"选择一个微信公众号可以让问卷调查结果和一个微信关注者关联。"},"en":{"newSurveyLabel":"New Survey","editSurveyLabel":"Edit Survey","nameLabel":"Name","noteLabel":"Note","accountLabel":"WeChat Account","surveyAccountTip":"Select a WeChat Account that can link a survey response with a WeChat follower."}}'),delete e.options._Ctor}},"1MG1":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"defaultContent":"<p id=\\"initContent\\">开始输入...</p>","descriptionEditor":"描述编辑"},"en":{"defaultContent":"<p id=\\"initContent\\">Start Typing...</p>","descriptionEditor":"Description Editor"}}'),delete e.options._Ctor}},"1vOb":function(e,t,s){"use strict";var i=s("Hi2j"),n=s.n(i);t.default=n.a},"2G2i":function(e,t,s){},"3LAo":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"addRuleBtn":"添加一个新的规则","if":"如果","then":"然后","is":"等于","isNot":"不等于","hide":"隐藏","show":"显示","selectAQuestion":"选择一个问题","selectAnAnswer":"选择一个答案","selectQuestions":"选择问题","remove":"移除","reviewPage":"检查此页面上的错误。"},"en":{"addRuleBtn":"Add a new rule","if":"If","then":"then","is":"is","isNot":"is not","hide":"hide","show":"show","selectAQuestion":"select a question","selectAnAnswer":"select an answer","selectQuestions":"select questions","remove":"Remove","reviewPage":"Review the errors on this page."}}'),delete e.options._Ctor}},"3nmp":function(e,t,s){"use strict";var i=s("R9hF"),n=s.n(i),o=s("dUVM"),a=s.n(o),r=s("8Vev"),l=s.n(r),c=s("4LGG"),d=s.n(c),u=s("kZKX"),p=s.n(u),h=s("q1Z7"),v=s("QBew"),m=s("OZZp"),f=s("zEt/"),g=s.n(f),y=s("i+Lc"),b=s.n(y),w=s("20nU"),_=s("XIlo"),C=s("OB6B");var S={openRoute(e){let{wechatAccountId:t,path:s}=e;const i=["#",t,b()(s).call(s,"/")?s.substring(1):s].join("/");_.a.isInLightningConsole?C.a.openWindow(["/apex/",w.a.sfdc_namespace?"".concat(w.a.sfdc_namespace,"__"):"","CharketApp?isdtp=p1",i].join("")):window.open([window.location.origin,window.location.pathname,window.location.search,i].join(""))}},x=s("SLhn"),k=s.n(x),I=s("0G99"),T=s.n(I),L=s("cybb"),O=s("M9dV");const $=["Image","Skill","Pass","Video","Voice Message","Text Message","Coupon","Notification Template","Structured Message","Mini Program Page"],P=new p.a([["Image","global.imageLabel"],["Skill","global.skillLabel"],["Pass","global.passLabel"],["Video","global.videoLabel"],["Voice Message","global.voiceLabel"],["Text Message","global.textLabel"],["Coupon","global.couponLabel"],["Notification Template","global.notifyLabel"],["Structured Message","global.strucLabel"],["Mini Program Page","global.miniProgramLabel"]]),N=new p.a([["Image","global.popupHeader.selectImage"],["Skill","global.popupHeader.selectSkill"],["Pass","global.popupHeader.selectPass"],["Video","global.popupHeader.selectVideo"],["Voice Message","global.popupHeader.selectVoiceClip"],["Text Message","global.popupHeader.selectTextMessage"],["Coupon","global.popupHeader.selectCoupon"],["Notification Template","global.popupHeader.selectNotificationTemplateLabel"],["Structured Message","global.popupHeader.selectStructuredMessage"],["Mini Program Page","global.popupHeader.selectMiniProgram"]]);var A=class{constructor(e){this.componentInstance=e}static getAllChoosers(){return[...$]}getExclusivelyConfig(e){let t=null;switch(e){case"Skill":t={add:{title:this.componentInstance.$t("exclusive.skillAddTitle"),content:this.componentInstance.$t("exclusive.skillAddContent"),ok:this.componentInstance.$t("global.yesBtn"),cancel:this.componentInstance.$t("global.noBtn")},remove:{title:this.componentInstance.$t("exclusive.skillRemoveTitle"),content:this.componentInstance.$t("exclusive.skillRemoveContent"),ok:this.componentInstance.$t("global.yesBtn"),cancel:this.componentInstance.$t("global.noBtn")}}}return t}getReplyModeConfig(e){if("false"!==e&&!1!==e&&null!=e)return{label:this.componentInstance.$t("replyModeLabel"),modes:[{label:this.componentInstance.$t("replyModeAll"),value:"All"},{label:this.componentInstance.$t("replyModeRandom"),value:"Random"}]}}getChooserConfigs(e){return d()(e).call(e,e=>{const{type:t}=e,s={type:t,name:this.componentInstance.$t(P.get(t)),exclusive:this.getExclusivelyConfig(t),layout:this.createLayout(t,e.limitLabel),dataProvider:this.createDataProvider(t),limitOfItems:e.limit||null};if("Text Message"===t){s.showTabs=!0;const t=this.getSubConfigsOfTextMessageChooser(),{textConfig:i}=e;if(i){const e={};T()(i).call(i,s=>{e[s]=t.designer[s]}),s.configs={designer:e,editor:t.editor}}else s.configs=t}return s})}getSubConfigsOfTextMessageChooser(){return{designer:{link:{iconTitle:this.componentInstance.$t("designer.linkIcon"),title:this.componentInstance.$t("global.title"),linkURL:this.componentInstance.$t("designer.linkUrl"),invalidUrl:this.componentInstance.$t("designer.illegalUrl"),primaryButton:this.componentInstance.$t("global.confirmBtn"),secondaryButton:this.componentInstance.$t("global.cancelBtn"),change:this.componentInstance.$t("designer.changeBtn"),remove:this.componentInstance.$t("designer.removeBtn")},miniProgramPage:{iconTitle:this.componentInstance.$t("designer.miniProgramIcon"),title:this.componentInstance.$t("global.title"),linkUrl:this.componentInstance.$t("designer.linkUrl"),invalidUrl:this.componentInstance.$t("designer.illegalUrl"),appId:this.componentInstance.$t("designer.appId"),pagePath:this.componentInstance.$t("designer.pagePath"),primaryButton:this.componentInstance.$t("global.confirmBtn"),secondaryButton:this.componentInstance.$t("global.cancelBtn"),change:this.componentInstance.$t("designer.changeBtn"),remove:this.componentInstance.$t("designer.removeBtn"),dataProvider:this.createDataProvider("Mini Program Link")},action:{iconTitle:this.componentInstance.$t("designer.actionIcon"),name:this.componentInstance.$t("designer.name"),value:this.componentInstance.$t("designer.value"),primaryButton:this.componentInstance.$t("global.confirmBtn"),secondaryButton:this.componentInstance.$t("global.cancelBtn")},mergeField:{iconTitle:this.componentInstance.$t("designer.mergeFieldIcon"),title:this.componentInstance.$t("designer.selectAField"),placeholder:this.componentInstance.$t("designer.findObjectPlaceholder"),filterPlaceholder:this.componentInstance.$t("designer.labelFilterPlaceholder"),fieldTitle:this.componentInstance.$t("designer.fieldTitle"),type:this.componentInstance.$t("designer.type"),apiName:this.componentInstance.$t("designer.apiName"),primaryButton:this.componentInstance.$t("global.chooseBtn"),secondaryButton:this.componentInstance.$t("global.cancelBtn"),noMatches:this.componentInstance.$t("designer.noMatchesFound"),currentSelection:this.componentInstance.$t("designer.currentSelection"),dataProvider:this.createDataProvider("Merge Field")}},editor:{title:this.componentInstance.$t("global.popupHeader.editTextMessage"),cancelButton:this.componentInstance.$t("global.cancelBtn"),okButton:this.componentInstance.$t("global.saveBtn")}}}createLayout(e,t){const s={title:this.componentInstance.$t(N.get(e)),noRecords:this.componentInstance.$t("global.noRecords"),editButton:this.componentInstance.$t("global.editBtn"),searchPlaceholder:this.componentInstance.$t("global.searchPlaceholder"),primaryButton:this.componentInstance.$t("global.confirmBtn"),secondaryButton:this.componentInstance.$t("global.cancelBtn")},i={title:"Voice Message"===e?this.componentInstance.$t("uploader.voiceTitle"):this.componentInstance.$t("uploader.".concat(e.toLowerCase(),"Title")),label:this.componentInstance.$t("uploader.titleLabel"),descriptionLabel:this.componentInstance.$t("uploader.descriptionLabel"),secondaryButton:this.componentInstance.$t("uploader.cancelBtn"),sizeLimitError:this.componentInstance.$t("uploader.tooLarge"),upload:this.componentInstance.$t("uploader.uploadBtn"),uploading:this.componentInstance.$t("uploader.uploadingBtn")};switch(e){case"Text Message":s.tabs={new:{title:this.componentInstance.$t("global.popupHeader.createTextMessage"),tabLabel:this.componentInstance.$t("newTextMessage")},list:{title:this.componentInstance.$t("global.popupHeader.selectTextMessage"),tabLabel:this.componentInstance.$t("textMessages")}},s.iconLabel=this.componentInstance.$t("global.textLabel");break;case"Skill":s.headers=[{text:this.componentInstance.$t("nameLabel"),value:"name"},{text:this.componentInstance.$t("knowledgeSourceLabel"),value:"knowledgeSource"},{text:this.componentInstance.$t("relatedToLabel"),value:"relatedTo"},{text:this.componentInstance.$t("descriptionLabel"),value:"description"},{text:this.componentInstance.$t("validForLabel"),value:"validFor"},{text:this.componentInstance.$t("displayInLiveChatLabel"),value:"isDisplayInLiveChat"},{text:this.componentInstance.$t("internalLabel"),value:"isInternal"},{text:this.componentInstance.$t("lastModifiedByLabel"),value:"lastModifiedBy"}],s.iconLabel=this.componentInstance.$t("global.skillLabel");break;case"Pass":s.headers=[{text:this.componentInstance.$t("name"),value:"name"},{text:this.componentInstance.$t("startDate"),value:"localizedStartTime"},{text:this.componentInstance.$t("endDate"),value:"localizedEndTime"},{text:this.componentInstance.$t("quantity"),value:"quantity"},{text:this.componentInstance.$t("createdBy"),value:"compoundCreatedBy"}],s.iconLabel=t||this.componentInstance.$t("global.passLabel");break;case"Coupon":s.headers=[{text:this.componentInstance.$t("type"),value:"type"},{text:this.componentInstance.$t("name"),value:"name"},{text:this.componentInstance.$t("expirationDate"),value:"expirationDate"},{text:this.componentInstance.$t("quantity"),value:"quantity"},{text:this.componentInstance.$t("status"),value:"status"}],s.iconLabel=this.componentInstance.$t("global.couponLabel");break;case"Notification Template":s.headers=[{text:this.componentInstance.$t("titleLabel"),value:"title"},{text:this.componentInstance.$t("keywordLabel"),value:"keywordNames"},{text:this.componentInstance.$t("urlLabel"),value:"notificationURL"},{text:this.componentInstance.$t("noteLabel"),value:"note"},{text:this.componentInstance.$t("createdLabel"),value:"createdBy"}],s.iconLabel=this.componentInstance.$t("global.notifyLabel");break;case"Image":s.uploader=i,s.iconLabel=this.componentInstance.$t("global.imageLabel"),s.hasAction=!0;break;case"Voice Message":s.uploader=i,s.iconLabel=this.componentInstance.$t("global.voiceLabel"),s.hasAction=!0;break;case"Video":s.uploader=i,s.iconLabel=this.componentInstance.$t("global.videoLabel"),s.hasAction=!0;break;case"Mini Program Page":s.iconLabel=this.componentInstance.$t("global.miniProgramLabel");break;case"Structured Message":s.iconLabel=this.componentInstance.$t("global.strucLabel"),s.syncedTooltip=this.componentInstance.$t("global.syncedWithWeChatPlatform")}return s}createDataProvider(e){const t={wechatAccount:this.componentInstance.wechatAccount,pageName:this.componentInstance.pageName,structuredType:this.componentInstance.structuredType};switch(e){case"Text Message":t.success=()=>{this.componentInstance.$toast({content:this.componentInstance.$t("changeSavedNofity"),type:"success"})},t.error=e=>{this.componentInstance.$handleError(e)};break;case"Skill":t.formatter=e=>{var t;e.compoundRelatedTo={id:e.relatedTo?e.relatedTo.id:"",name:e.relatedTo?e.relatedTo.name:""},"Survey"===e.knowledgeSource&&e.relatedTo&&e.relatedTo.id?(e.compoundRelatedTo.href="javascript: void(0);",e.compoundRelatedTo.onClick=e=>{this.componentInstance.$router.push({name:"survey-editor",params:{surveyId:e.relatedTo.id}})}):e.relatedTo&&e.relatedTo.id&&(e.compoundRelatedTo.href="/".concat(e.relatedTo.id));const s=Object(L.e)(e.lastModifiedDate,this.componentInstance.$user.TimeZoneSidKey);return e.compoundLastModifiedBy=e.lastModifiedBy.name?k()(t="".concat(e.lastModifiedBy.name,", ")).call(t,s):s,e};break;case"Structured Message":t.formatter=e=>(e.localizedWeChatLastModifiedTime=Object(L.e)(e.weChatLastModifiedTime,this.componentInstance.$user.TimeZoneSidKey),e);break;case"Pass":t.formatter=e=>{var t;const s=Object(L.e)(e.createdDate,this.componentInstance.$user.TimeZoneSidKey);return e.compoundCreatedBy=k()(t="".concat(e.createdByUser,", ")).call(t,s),e.localizedStartTime=Object(L.e)(e.startTime,this.componentInstance.$user.TimeZoneSidKey),e.localizedEndTime=Object(L.e)(e.endTime,this.componentInstance.$user.TimeZoneSidKey),e};break;case"Coupon":const e=this.componentInstance.$t("to");t.formatter=t=>{var s,i;const n=Object(L.e)(t.beginDate,this.componentInstance.$user.TimeZoneSidKey),o=Object(L.e)(t.endDate,this.componentInstance.$user.TimeZoneSidKey);return t.expirationDate=k()(s=k()(i="".concat(n," ")).call(i,e," ")).call(s,o),t};break;case"Notification Template":t.formatter=e=>{var t;return e.localizedCreatedDate=Object(L.e)(e.createdDate,this.componentInstance.$user.TimeZoneSidKey),e.createdBy=k()(t="".concat(e.createdByUser,", ")).call(t,e.localizedCreatedDate),e};break;case"Voice Message":case"Video":t.formatter=e=>(e.localizedUpdateDateTime=Object(L.e)(e.updateDateTime,this.componentInstance.$user.TimeZoneSidKey),e)}return O.a.create(e,t)}},D=s("itEF"),B=s("wG3i"),R=s.n(B),F=s("FYrm"),Q=s("w+Ta"),E=s("hOMy"),M={props:{accountId:{type:String,default:()=>""}},components:{CreateWeChatPass:F.a,LdModal:E.LdModal},data:()=>({isSavingPass:!1}),methods:{onClickActivator(){this.$refs.Modal.open()},closeModal(e){this.$emit("close",e),this.$refs.Modal.close()},async saveNewPass(){const e=this.accountId||this.$route.params.accountId,t=this.$refs.pass.getPass();if(e&&t)try{this.isSavingPass=!0;const s=await Object(Q.f)(e,R()(t));if(s.ok){this.$router.app.$emit("open-toast-notification",{content:this.$t("passForApproval"),type:"success"});const e=s.data;this.$parent.$parent.$parent.$emit("new-pass-created"),this.closeModal(e)}else this.$refs.Modal.showError(s.error)}catch(e){const t=this.$parseErrorMessage(e);this.$refs.Modal.showError(t)}finally{this.isSavingPass=!1}}}},z=(s("nOmU"),s("KHd+")),q=s("Dk61"),H=Object(z.a)(M,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"new-pass-popup"},[s("span",{on:{click:e.onClickActivator}},[e._t("activator")],2),e._v(" "),s("ld-modal",{ref:"Modal",attrs:{title:e.$t("newPassTitle"),width:"auto","min-width":900,"max-width":"90%",persistent:e.isSavingPass}},[s("template",{slot:"content"},[s("create-we-chat-pass",{ref:"pass",attrs:{"acc-id":e.accountId,"is-popup":!0}})],1),e._v(" "),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:e.isSavingPass},on:{click:function(t){return e.closeModal()}}},[e._v(e._s(e.$t("global.cancelBtn")))]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:e.isSavingPass},on:{click:function(t){return e.saveNewPass()}}},[e._v(e._s(e.$t("global.saveBtn")))])])],2)],1)}),[],!1,null,"dcb5ef76",null);"function"==typeof q.default&&Object(q.default)(H);var U=H.exports,j=s("fb3H"),V=s("wbfU"),W={props:{accountId:String},components:{WechatNotification:j.a,NewNotificationPopup:V.a},data:()=>({isWeChatNotificationVisible:!1,isNewNotificationPopupVisible:!1,selectedWeChatNotification:null}),methods:{onClickActivator(){this.isWeChatNotificationVisible=!0},onWeChatNotificationClose(){this.isWeChatNotificationVisible=!1},onWeChatNotificationNext(e){this.selectedWeChatNotification=e,this.isWeChatNotificationVisible=!1,this.isNewNotificationPopupVisible=!0},onNewNotificationPopupClose(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")?this.$parent.$parent.$parent.$emit("new-notification-template-created"):this.isWeChatNotificationVisible=!0,this.isNewNotificationPopupVisible=!1}}},K=Object(z.a)(W,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isWeChatNotificationVisible?s("wechat-notification",{attrs:{"account-id":e.accountId},on:{close:e.onWeChatNotificationClose,next:e.onWeChatNotificationNext}}):e._e(),e._v(" "),e.isNewNotificationPopupVisible?s("new-notification-popup",{attrs:{"acc-id":e.accountId,notify:e.selectedWeChatNotification},on:{close:e.onNewNotificationPopupClose}}):e._e(),e._v(" "),s("div",{on:{click:e.onClickActivator}},[e._t("activator")],2)],1)}),[],!1,null,null,null).exports;const J=new p.a([["Mini Program",["Text Message","Image","Mini Program Page","Skill"]],["Subscription Account",["Text Message","Image","Structured Message","Voice Message","Video","Mini Program Page","Pass","Coupon","Skill"]],["Service Account",["Text Message","Image","Structured Message","Voice Message","Video","Mini Program Page","Notification Template","Pass","Coupon","Skill"]]]);var Y={components:{WechatResponseDesigner:h.WechatResponseDesigner,LdButton:v.LdButton,LdIcon:m.LdIcon,NewPassPopup:U,NotificationTemplateCreator:K},model:{prop:"value",event:"input"},props:{value:{type:Object,default:()=>({})},limitOfItems:{type:Number,default:999},wechatAccount:{type:Object,required:!0},choosers:{type:Array,required:!0},multiple:{type:Boolean,default:()=>!1},enableReplyMode:{type:[Boolean,String],default:()=>!1},pageName:{type:String,default:""},iconSize:{type:String,default:"small"},structuredType:{type:String,default:"news"}},data:()=>({helperInstance:null,wechatResponse:{},addSvg:g.a}),computed:{unifiedChoosers(){var e;return d()(e=this.choosers).call(e,e=>"string"==typeof e?{type:e}:e)},supportedChoosers(){var e;return this.wechatAccount.type?l()(e=this.unifiedChoosers).call(e,e=>{var t;let{type:s}=e;return a()(t=J.get(this.wechatAccount.type)).call(t,s)}):this.unifiedChoosers},chooserConfigs(){return this.helper.getChooserConfigs(this.supportedChoosers)},replyModeConfig(){return this.helper.getReplyModeConfig(this.enableReplyMode)},helper(){return this.helperInstance||(this.helperInstance=new A(this)),this.helperInstance},accountId(){return this.wechatAccount.id}},watch:{wechatResponse:{handler(e){if(e.isInternalChange&&this.value&&e.content===this.value.content)return;const t=this.multiple?D.a.from(e):D.a.createItem(e);this.$emit("input",t)},deep:!0},value:{deep:!0,immediate:!0,handler(e){this.wechatResponse=n()({isInternalChange:!0},e)}}},methods:{onClickNewStructuredMessage(){S.openRoute({wechatAccountId:this.$wechatAccount.id,path:"message/structured-messages/new"})}}},G=(s("Ek5D"),s("xswR")),Z=s("ItEM"),X=s("fOvr"),ee=s("1vOb"),te=s("4bTK"),se=s("DR4q"),ie=Object(z.a)(Y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("wechat-response-designer",{attrs:{choosers:e.chooserConfigs,multiple:e.multiple,"reply-mode-config":e.replyModeConfig,"limit-of-items":e.limitOfItems,"icon-size":e.iconSize},model:{value:e.wechatResponse,callback:function(t){e.wechatResponse=t},expression:"wechatResponse"}},[s("ld-button",{attrs:{slot:"structured-message-create-button",neutral:""},on:{click:e.onClickNewStructuredMessage},slot:"structured-message-create-button"},[s("ld-icon",{staticClass:"plus-icon",attrs:{size:"xx-small",color:"current",content:e.addSvg}})],1),e._v(" "),s("new-pass-popup",{attrs:{slot:"pass-create-button","account-id":e.accountId},slot:"pass-create-button"},[s("ld-button",{attrs:{slot:"activator",neutral:""},slot:"activator"},[e._v("\n      "+e._s(e.$t("global.newBtn"))+"\n    ")])],1),e._v(" "),s("notification-template-creator",{attrs:{slot:"notification-template-create-button","account-id":e.accountId},slot:"notification-template-create-button"},[s("ld-button",{attrs:{slot:"activator",neutral:""},slot:"activator"},[e._v("\n      "+e._s(e.$t("global.newBtn"))+"\n    ")])],1)],1)}),[],!1,null,"486a8157",null);"function"==typeof G.default&&Object(G.default)(ie),"function"==typeof Z.default&&Object(Z.default)(ie),"function"==typeof X.default&&Object(X.default)(ie),"function"==typeof ee.default&&Object(ee.default)(ie),"function"==typeof te.default&&Object(te.default)(ie),"function"==typeof se.default&&Object(se.default)(ie);var ne=ie.exports;t.a=ne},"3zWd":function(e,t,s){},"4Sxw":function(e,t,s){},"4bTK":function(e,t,s){"use strict";var i=s("t29s"),n=s.n(i);t.default=n.a},"62Qv":function(e,t,s){},"6KlO":function(e,t,s){"use strict";var i=s("wG3i"),n=s.n(i),o=s("+Bun"),a=s.n(o),r=s("oG9Y"),l=s.n(r),c=s("mdEO"),d=s("/B6M"),u=s("2GRW"),p=s("nGYt"),h=s.n(p),v=s("+dyS"),m=s.n(v),f=s("dUVM"),g=s.n(f),y=s("0G99"),b=s.n(y),w=s("8Vev"),_=s.n(w),C=s("Ip10"),S=s.n(C),x=s("kWsH"),k=s.n(x),I=s("rZkV"),T=s.n(I),L=s("06sA"),O=s.n(L),$=s("SLhn"),P=s.n($),N=s("iP86"),A=s.n(N),D=s("sI2A"),B=s.n(D),R=s("4LGG"),F=s.n(R),Q=s("pqUP"),E=s.n(Q),M=s("2ZOO"),z=s.n(M);function q(e){var t=e.iconClassList,s=e.title,i=e.desc,n=document.createElement("div");return n.className="weui-msg",n.innerHTML='\n    <div class="weui-msg__icon-area"><i class="'+t.join(" ")+'"></i></div>\n    <div class="weui-msg__text-area">\n      <h2 class="weui-msg__title">'+s+'</h2>\n      <div class="weui-msg__desc">'+i+"</div>\n    </div>\n  ",n}function H(e){if("string"!=typeof e)return e;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(function(e){return t[e]}))}function U(e,t,s){void 0===e&&(e=""),void 0===t&&(t=""),void 0===s&&(s="");var i=document.createElement("div");i.className="banner";var n="";return e&&(n+='<div class="banner-img-container"><img src="'+e+'" class="banner-pic"></div>'),t&&(n+='<div class="banner-title title">'+H(t)+"</div>"),s&&(n+='<article class="weui-article banner-description description charket-edui edui-init-style">'+s+"</article>"),i.innerHTML=n,i}function j(e,t){void 0===t&&(t={});var s=document.createElement("span"),i=t.ButtonBg||"",n=t.ButtonColor||"",o=t.ButtonFontSize||"";return s.innerHTML='\n    <a href="javascript:;" style="background-color: '+i+"; font-size: "+o+"; color: "+n+'" class="sure-btn weui-btn weui-btn_primary submit-button">'+(void 0!==e?H(e):"提交")+"</a>\n  ",s}function V(){var e,t;t=E()((function(){e=document.documentElement.scrollTop||document.body.scrollTop,e-=1,window.scrollTo(0,e),e+=1,window.scrollTo(0,e),clearInterval(t)}),1)}var W;function K(){var e=function(){var e=document.createElement("div");return e.innerHTML='\n    <div class="loading-mask weui-mask_transparent"></div>\n    <div class="loading-toast weui-toast">\n      <i class="weui-loading weui-icon_toast"></i>\n      <p class="weui-toast__content">正在保存</p>\n    </div>\n  ',e.style.display="none",e}();return{domElement:e,show:function(t){e.style.display=""},hide:function(){e.style.display="none"}}}function J(e){void 0===e&&(e={});var t=function(e){var t=document.createElement("div");return t.className="error-msg error-notify",t.style.backgroundColor=e.ErrorBg,t.style.color=e.ErrorColor,t.style.top="-30px",t}(e);return{domElement:t,showErrorMsg:function(e){var s=1500;t.style.top="0px",t.classList.remove("hide-ele"),t.textContent=e;var i=t.clientHeight;e.length>15&&(s=Math.min(e.length/10*1e3,5e3)),W&&window.clearTimeout(W),W=window.setTimeout((function(){t.style.top="-"+i+"px",t.classList.add("hide-ele")}),s)}}}var Y="连接超时, 请检查您的网络",G="无可用的网络连接";O()(String.prototype)||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=new Array(e/t.length+1).join(t)),T()(t).call(t,0,e)+String(this))});var Z={Notify:q,Heading:function(e,t,s,i){void 0===s&&(s={}),this.domElement=function(e,t,s,i){var n=document.createElement("div");n.className="header-title weui-cells__title "+(e||"")+" field-title hide-ele";var o=s.TitleFontSize||"",a=s.TitleColor||"",r=function(e){return{None:"","Red Asterisk":"#C23934",Asterisk:"#9FAAB5"}[e.RequiredIcon||"None"]}(s),l='<span style="color: '+r+'" class="require-icon-style hide-ele '+(e||"")+'">*</span>',c='<span style="font-size: '+o+"; color: "+a+';" class="label-value">'+(t||"")+"</span>";i&&r&&(c+=l);return n.innerHTML=c,n}(e,t,s,i)},MultipleChoice:function(e,t,s){void 0===s&&(s={}),this.domElement=function(e,t,s){var i,n=document.createElement("div");n.className=(e||"")+" hide-ele";var o=s.LabelFontSize,a=s.LabelColor,r=z()(i=t||[]).call(i,(function(t,s){return t+'\n      <label class="weui-cell weui-check__label charket-cell">\n        <div class="weui-cell__hd">\n          <input type="checkbox" id="'+(s.AnswerId||"")+'" name="'+(e||"")+'" class="weui-check" '+(s.checked?"checked":"")+'><i class="weui-icon-checked checkbox-icon-checked"></i>\n        </div>\n        <div class="weui-cell__bd '+(s.IsOther?"other-cell":"")+'">\n          <p style="font-size: '+o+"; color: "+a+'" class="field-value '+(s.IsOther?"other-value":"")+'">'+H(s.Choice)+'</p>\n          <div class="other-input-container '+(s.IsOther?"":"hide-ele")+'">\n            <input type="text" name="'+(s.AnswerId||"")+'" style="font-size: '+o+"; color: "+a+'" class="field-value weui-input multiple-input other-input" value="'+(s.otherValue||"")+'"/>\n          </div>  \n        </div>\n      </label>'}),"");return n.innerHTML='<div class="weui-cells weui-cells_checkbox charket-cells">'+r+"</div>",n}(e,t,s)},SingleChoice:function(e,t,s){void 0===s&&(s={}),this.domElement=function(e,t,s){var i=document.createElement("div");i.className=(e||"")+" hide-ele";var n=s.LabelFontSize,o=s.LabelColor,a=z()(t).call(t,(function(t,s){return s.IsOther?t+'<label class="weui-cell weui-check__label charket-cell">\n      <div class="weui-cell__bd '+(s.IsOther?"other-cell":"")+'">\n        <p style="font-size: '+n+"; color: "+o+'" class="other-value field-value">'+H(s.Choice||"")+'</p>\n        <div class="other-input-container '+(s.IsOther?"":"hide-ele")+'">\n          <input type="text" style="font-size: '+n+"; color: "+o+'" name="'+(s.AnswerId||"")+'" class="weui-input single-input other-input field-value" value="'+(s.otherValue||"")+'"/>\n        </div>\n      </div>\n      <div class="weui-cell__ft">\n        <input type="radio" class="weui-check" name="'+(e||"")+'" id="'+(s.AnswerId||"")+'" '+(s.checked?"checked":"")+'>\n        <span class="weui-icon-checked radio-icon-checked"></span>\n      </div>\n      </label>':t+'<label class="weui-cell weui-check__label charket-cell">\n      <div class="weui-cell__bd">\n        <p style="font-size: '+n+"; color: "+o+'" class="field-value">'+H(s.Choice||"")+'</p>\n      </div>\n      <div class="weui-cell__ft">\n          <input type="radio" class="weui-check" name="'+(e||"")+'" id="'+(s.AnswerId||"")+'" '+(s.checked?"checked":"")+'>\n          <span class="weui-icon-checked radio-icon-checked"></span>\n      </div>\n      </label>'}),"");return i.innerHTML='<div class="weui-cells weui-cells_radio charket-cells">'+a+"</div>",i}(e,t,s)},ShortText:function(e,t,s,i){void 0===i&&(i={}),this.domElement=function(e,t,s,i){var n=document.createElement("div");n.className="weui-cells "+(e||"")+" charket-cells hide-ele";var o=i.LabelFontSize,a=i.LabelColor;return n.innerHTML='\n    <div class="weui-cell charket-cell">\n      <div class="weui-cell__bd">\n        <input style="font-size: '+o+"; color: "+a+'" class="weui-input field-value" id="'+(e||"")+'" placeholder="'+(s||"")+'" value="'+(t||"")+'"/>\n      </div>\n    </div>\n  ',n}(e,t,s,i),this.inputElement=this.domElement.querySelector(".weui-input"),this.inputElement.addEventListener("blur",(function(){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&V()}))},LongText:function(e,t,s,i){void 0===i&&(i={}),this.domElement=function(e,t,s,i){var n=document.createElement("div");n.className=(e||"")+" hide-ele";var o=i.LabelFontSize,a=i.LabelColor;return n.innerHTML='\n    <div class="weui-cells charket-cells">\n      <div class="weui-cell charket-cell">\n        <div class="weui-cell__bd">\n          <textarea style="font-size: '+o+"; color: "+a+'" class="weui-textarea field-value"\n            rows="3" id="'+(e||"")+'" placeholder="'+(s||"")+'">'+(t||"")+"</textarea>\n        </div>\n      </div>\n    </div>",n}(e,t,s,i),this.textareaElement=this.domElement.querySelector(".weui-textarea"),this.textareaElement.addEventListener("blur",(function(){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&V()}))},Date:function(e,t,s,i){void 0===i&&(i={}),this.domElement=function(e,t,s,i){var n=document.createElement("div");n.className="weui-cells charket-cells "+t+" hide-ele";var o=i.LabelFontSize,a=i.LabelColor;return n.innerHTML='\n  <div class="weui-cell charket-cell">\n    <div class="weui-cell__bd">\n      <input style="font-size: '+o+"; color: "+a+'" class="weui-input field-value" id="'+t+'"  type="'+("Date"===e?"date":"datetime-local")+'" value="'+(s?function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;var t,s,i,n,o,a,r,l=60*(new Date).getTimezoneOffset()*1e3,c=F()(t=e.match(/(\d+)(?!\d)/g)).call(t,(function(e){return B()(e)}));c[1]--;var d=new Date(new(A()(Function.prototype).apply(Date,P()(s=[null]).call(s,c)))-l);return d.getFullYear()+"-"+O()(i=String(d.getMonth()+1)).call(i,2,"0")+"-"+O()(n=String(d.getDate())).call(n,2,"0")+"T"+O()(o=String(d.getHours())).call(o,2,"0")+":"+O()(a=String(d.getMinutes())).call(a,2,"0")+":"+O()(r=String(d.getSeconds())).call(r,2,"0")}(s):"")+'">\n    </div>\n  </div>\n  ',n}(e,t,s,i),this.inputElement=this.domElement.querySelector(".weui-input"),this.inputElement.addEventListener("blur",(function(){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&V()}))},Dropdown:function(e,t,s,i){void 0===i&&(i={}),this.domElement=function(e,t,s,i){var n,o=document.createElement("div");o.className="weui-cells "+(e||"")+" charket-cells hide-ele";var a=i.LabelFontSize,r=i.LabelColor,l=z()(n=t||[]).call(n,(function(e,t){return e+'<option value="'+(t.Choice||"")+'" id="'+(t.AnswerId||"")+'" '+(t.checked?"selected":"")+">"+H(t.Choice||"")+"</option>"}),"");return o.innerHTML='\n      <div class="weui-cell weui-cell_select weui-cell_select-after charket-cell">\n        <div class="weui-cell__bd">\n          <select id="'+(e||"")+'" style="font-size: '+a+"; color: "+r+'" class="weui-select field-value">\n            <option>'+(H(s)||"请选择")+"</option>\n            "+l+"\n          </select>\n        </div>\n      </div>\n    ",o}(e,t,s,i),this.selectElement=this.domElement.querySelector(".weui-select"),this.selectElement.addEventListener("blur",(function(){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&V()}))},Rating:function(e,t,s){void 0===s&&(s={}),this.domElement=function(e,t,s){var i=document.createElement("div");i.className="weui-cells "+(e||"")+" charket-cells hide-ele";var n='\n    <div class="weui-cell charket-cell">\n      <div class="weui-cell__bd">\n        <div class="rate unselect">\n            '+z()(t).call(t,(function(t,s){return t+'<input type="radio" id="'+(s.AnswerId||s.Order)+'" name="'+e+'" value="'+s.Choice+'" '+(s.checked?"checked":"")+'/><label for="'+(s.AnswerId||s.Order)+'"></label>'}),"")+"\n        </div>\n      </div>\n    </div>\n  ";return i.innerHTML=n,i}(e,t)}},X=["Multiple Choice","Single Choice"],ee=["Text","Long Text","Date","Datetime"],te={},se=[],ie=[],ne=[],oe=[],ae=[],re=[],le=[],ce=!1,de="",ue="";function pe(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=window.location.search.substr(1).match(t);return s?s[2]||"":[]}function he(e){return e.replace(/~/g,"%7E").replace(/!/g,"%21").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/\./g,"%2E")}function ve(e,t,s){var i=[],n={};return s&&(n=S()(e).call(e,(function(e){return e.SurveyQuestionId===s}))),F()(e).call(e,(function(e){a()(t).call(t,e.SurveyQuestionId)<0&&(s?e.Order>=n.Order&&i.push(e.SurveyQuestionId):i.push(e.SurveyQuestionId))})),i}function me(e,t,s,i,n,o){if(void 0===o&&(o=""),t&&t.length>0){var a=[],r=[],l=[],c=s.Answers;if(ae=_()(ae).call(ae,(function(e){return e.Conditions[0].QuestionId!==i})),b()(t).call(t,(function(e){var t=e.Conditions[0],s=e.Actions[0].Type;b()(c).call(c,(function(n){(document.getElementById(n.AnswerId).checked||n.AnswerId===o)&&("equals"===t.Op?i===t.QuestionId&&n.AnswerId===t.AnswerId&&("show"===s?r.push(e):"hide"===s&&l.push(e)):"not equals"===t.Op&&i===t.QuestionId&&n.AnswerId!==t.AnswerId&&("show"===s?r.push(e):"hide"===s&&l.push(e)))}))})),ae=P()(ae).call(ae,r),ae=P()(ae).call(ae,l),k()(ae).call(ae,(function(e,t){return t.Exp-e.Exp})),"checkbox"===n)if(l.length>0){var d;k()(l).call(l,(function(e,t){return t.Exp-e.Exp}));var u=l[0].Actions[0].QuestionIds;a=ve(e,u,i);var p=[],h=P()(d=[]).call(d,l);h.shift(),b()(h).call(h,(function(e){var t=e.Actions[0].QuestionIds;b()(t).call(t,(function(e){g()(p).call(p,e)||p.push(e)}))})),a=_()(a).call(a,(function(e){return!g()(p).call(p,e)}))}else b()(r).call(r,(function(e){var t=e.Actions[0].QuestionIds;F()(t).call(t,(function(e){S()(a).call(a,(function(t){return t===e}))||a.push(e)}))}));else if("radio"===n)if(l.length>0){var v=l[0].Actions[0].QuestionIds;a=ve(e,v,i)}else{var m=r[0];a=m.Actions[0].QuestionIds}var f=[],y=[];return b()(t).call(t,(function(t){var i=t.Conditions[0].QuestionId,n=t.Actions[0].QuestionIds,o=t.Actions[0].Type,a=S()(e).call(e,(function(e){return e.SurveyQuestionId===i})),r=S()(ae).call(ae,(function(e){return e.Exp===t.Exp}));a.Order<s.Order&&r&&("show"===o?b()(n).call(n,(function(t){var i=S()(e).call(e,(function(e){return e.SurveyQuestionId===t}));!g()(f).call(f,t)&&i.Order>s.Order&&f.push(t)})):"hide"===o&&b()(n).call(n,(function(t){var i=S()(e).call(e,(function(e){return e.SurveyQuestionId===t}));!g()(y).call(y,t)&&i.Order>s.Order&&y.push(t)})))})),a=_()(a).call(a,(function(e){return!g()(y).call(y,e)})),b()(f).call(f,(function(e){g()(a).call(a,e)||a.push(e)})),a}return[]}function fe(e,t,s,i){for(var n=0,o=function(o,r){var l=s[o],c=S()(t).call(t,(function(e){return e.SurveyQuestionId===l}));if(i.push(l),a()(X).call(X,c.Type)>-1){for(var d=c.Answers,u=!1,p=0,h=d.length;p<h;p++){var v=d[p].AnswerId;if(document.getElementById(v).checked)if(ye(e,l,v).length>0){u=!0;break}}if(u){var m="";m="Single Choice"===c.Type?"radio":"checkbox";var f=me(t,e,c,l,m);return f=be(t,f),(f=_()(f).call(f,(function(e){return e!==l}))).length>0?(fe(e,t,f,i),{v:i}):{v:i}}n++}else if("Dropdown"===c.Type){var g=document.getElementById(l),y=g[g.selectedIndex].id;if(y)if(ye(e,l,y).length>0){var b=me(t,e,c,l,"radio",y);return b=be(t,b),(b=_()(b).call(b,(function(e){return e!==l}))).length>0?(fe(e,t,b,i),{v:i}):{v:i}}n++}else n++},r=0,l=s.length;r<l;r++){var c=o(r);if(c)return c.v}if(n===s.length)return i}function ge(e,t,s){var i=[],n=[];F()(t).call(t,(function(t){S()(e).call(e,(function(e){return e.SurveyQuestionId===t})).IsHidden||(i=P()(i).call(i,l()(document.getElementsByClassName(t))))})),F()(e).call(e,(function(e){e.Order>s.Order&&a()(t).call(t,e.SurveyQuestionId)<0&&(n=P()(n).call(n,l()(document.getElementsByClassName(e.SurveyQuestionId))))})),b()(i).call(i,(function(e){e.classList.remove("hide-ele")})),b()(n).call(n,(function(e){e.classList.add("hide-ele")}))}function ye(e,t,s){var i=[];return F()(e).call(e,(function(e){var n=e.Conditions[0];if("not equals"===n.Op)n.QuestionId===t&&n.AnswerId!==s&&(S()(i).call(i,(function(t){return t.Exp===e.Exp}))||i.push(e.Exp));else if("equals"===n.Op){if(n.QuestionId===t&&n.AnswerId===s)S()(i).call(i,(function(t){return t.Exp===e.Exp}))||i.push(e.Exp)}})),i}function be(e,t){var s=[],i=[];return b()(t).call(t,(function(t){s.push(S()(e).call(e,(function(e){return e.SurveyQuestionId===t})))})),k()(s).call(s,(function(e,t){return e.Order-t.Order})),b()(s).call(s,(function(e){i.push(e.SurveyQuestionId)})),i}function we(e,t,s){var i=S()(e).call(e,(function(e){return e.SurveyQuestionId===t})),n=[],o=[];return b()(s).call(s,(function(t){n.push(S()(e).call(e,(function(e){return e.SurveyQuestionId===t})))})),k()(n).call(n,(function(e,t){return e.Order-t.Order})),b()(n).call(n,(function(e){e.Order<=i.Order&&o.push(e.SurveyQuestionId)})),o}function _e(e,t,s,i,n){if(e&&e.length>0){var o=S()(t).call(t,(function(e){return e.SurveyQuestionId===s}));if(ye(e,s,i).length>0){var a=[];a=fe(e,t,we(t,s,le),a),le=a,ge(t,a,o)}else if("radio"===n)if((ae=_()(ae).call(ae,(function(e){return e.Conditions[0].QuestionId!==s}))).length>0){var r=[];r=fe(e,t,we(t,s,le),r),le=r,ge(t,r,o)}else le=[],F()(t).call(t,(function(e){e.Order>o.Order?function(e,t){if(void 0===t&&(t="show"),!e.IsHidden){var s=l()(document.getElementsByClassName(e.SurveyQuestionId));"show"===t?F()(s).call(s,(function(e){e.classList.remove("hide-ele")})):"hide"===t&&F()(s).call(s,(function(e){e.classList.add("hide-ele")}))}}(e,"hide"):le.push(e.SurveyQuestionId)}))}}function Ce(e,t,s){var i=function(e,t){var s,i=S()(s=e.Answers).call(s,(function(e){return e.Choice===t}));i&&(i.checked=!0)},n=function(e,t){"Rating"===e.Type||"Dropdown"===e.Type||"Single Choice"===e.Type?i(s,t):t&&a()(t).call(t,";")>0?function(e,t){for(var i=function(e,i){var n,o=t[e];F()(n=s.Answers).call(n,(function(e){e.Choice===o&&(e.checked=!0)}))},n=0,o=t.length;n<o;n++)i(n)}(0,t.split(";")||[]):i(s,t)};if(re.length<=0){var o="";"URL Parameter"===s.PrefillType?(o=pe(he(encodeURIComponent(s.PrefillValue))),o=decodeURIComponent(o)):"Fixed Value"===s.PrefillType&&(o=s.PrefillValue),n(s,o)}else if("Fixed Value"===s.PrefillType){var r=s.PrefillValue;n(s,r)}else if(t&&t.length>0){k()(e).call(e,(function(e,t){return e.Order-t.Order}));var l=_()(t).call(t,(function(e){return e.SurveyQuestionId===s.SurveyQuestionId})),c=[],d="";F()(l).call(l,(function(e){e.Response&&(d=e.Response),c.push(e.SurveyAnswerId)})),b()(e).call(e,(function(e){a()(c).call(c,e.AnswerId)>-1&&(e.checked=!0),e.IsOther&&d&&(e.otherValue=d)}))}}function Se(e,t){if(re.length<=0){if("URL Parameter"===t.PrefillType)return pe(he(encodeURIComponent(t.PrefillValue)));if("Fixed Value"===t.PrefillType)return t.PrefillValue}else{if("Fixed Value"===t.PrefillType)return t.PrefillValue;if(e&&e.length>0){var s=S()(e).call(e,(function(e){return e.SurveyQuestionId===t.SurveyQuestionId}));if(s)return s.Response}}}function xe(e){var t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e))}catch(s){t.styleSheet.cssText=e}document.getElementsByTagName("head")[0].appendChild(t)}function ke(e,t,s,i,n,o){var r,l,c=document.getElementsByClassName(i)[0];return t?a()(r=c.className).call(r,"hide-ele")<0?s?(S()(oe).call(oe,(function(e){return e.id===i}))||oe.push({ele:c,id:i,order:n}),c.firstElementChild.style.color="#e64340",1):(oe=_()(oe).call(oe,(function(e){return e.id!==i})),c.firstElementChild.style.color=o.TitleColor,0):(e.IsHidden||a()(le).call(le,i)<0&&(ne=_()(ne).call(ne,(function(e){return e.SurveyQuestionId!==i}))),0):(e.IsHidden||a()(l=c.className).call(l,"hide-ele")>-1&&a()(le).call(le,i)<0&&(ne=_()(ne).call(ne,(function(e){return e.SurveyQuestionId!==i}))),0)}function Ie(e,t){var s=0;return ne=[],F()(e).call(e,(function(e){if("Fixed Value"===e.PrefillType)ne.push({SurveyQuestionId:e.SurveyQuestionId,SurveyAnswerId:"",Response:""});else if(a()(X).call(X,e.Type)>-1){var i,n,o=[],r=[],c="";F()(i=e.Answers).call(i,(function(e){e.IsOther||o.push(document.getElementById(e.AnswerId))}));var d=m()(o).call(o,(function(e){return e.checked})),u=S()(n=e.Answers).call(n,(function(e){return!!e.IsOther})),p=!1;u&&(r=l()(document.getElementsByName(u.AnswerId)),F()(r).call(r,(function(t){var s;a()(s=t.className).call(s,"hide-ele")<0&&t.value&&(document.getElementById(t.name).checked&&(p=!0,c=t.name,ne.push({SurveyQuestionId:e.SurveyQuestionId,SurveyAnswerId:c,Response:t.value})))}))),F()(o).call(o,(function(t){t.checked&&ne.push({SurveyQuestionId:e.SurveyQuestionId,SurveyAnswerId:t.id,Response:""})}));var h=d||!d&&p;s+=ke(e,e.IsRequired,!h,e.SurveyQuestionId,e.Order,t)}else if("Dropdown"===e.Type){var v=document.getElementById(e.SurveyQuestionId),f=v[v.selectedIndex].id,g=!!f;g&&ne.push({SurveyQuestionId:e.SurveyQuestionId,SurveyAnswerId:f,Response:""}),s+=ke(e,e.IsRequired,!g,e.SurveyQuestionId,e.Order,t)}else if(a()(ee).call(ee,e.Type)>-1){var y=document.getElementById(e.SurveyQuestionId),b=!!y.value;if(b){var w="";w="Datetime"===e.Type?function(e){var t,s,i,n,o,r="";r=(r=a()(e).call(e,".")>0?T()(e).call(e,0,a()(e).call(e,".")):e).replace(/-/g,"/").replace("T"," ");var l=new Date(r);return l.getUTCFullYear()+"-"+O()(t=String(l.getUTCMonth()+1)).call(t,2,"0")+"-"+O()(s=String(l.getUTCDate())).call(s,2,"0")+" "+O()(i=String(l.getUTCHours())).call(i,2,"0")+":"+O()(n=String(l.getUTCMinutes())).call(n,2,"0")+":"+O()(o=String(l.getUTCSeconds())).call(o,2,"0")}(y.value):y.value,ne.push({SurveyQuestionId:e.SurveyQuestionId,SurveyAnswerId:"",Response:w})}s+=ke(e,e.IsRequired,!b,e.SurveyQuestionId,e.Order,t)}else if("Rating"===e.Type){var _=l()(document.getElementsByName(e.SurveyQuestionId)),C=S()(_).call(_,(function(e){return e.checked}));C&&ne.push({SurveyQuestionId:e.SurveyQuestionId,SurveyAnswerId:C.id,Response:""}),s+=ke(e,e.IsRequired,!C,e.SurveyQuestionId,e.Order,t)}})),s}function Te(e){document.body.innerHTML="",document.body.appendChild(e),document.body.style.minHeight=""}var Le=function(e,t,s,i,o){var r,l;void 0===i&&(i=!1);var c=new q({iconClassList:["weui-icon-success","weui-icon_msg"],title:"提交成功",desc:t.ThankYouMessage});if(t&&"Archived"!==t.Status)if(!1!==window.isDisplaySurvey){var d,u,p;if(i)b()(d=t.Questions).call(d,(function(e){var t;(e.SurveyQuestionId||(e.SurveyQuestionId="question"+e.Order),e.Answers&&e.Answers.length>0)&&b()(t=e.Answers).call(t,(function(t){t.AnswerId||(t.AnswerId="answer"+e.Order+t.Order)}))}));if(te=t.Styles,(se=t.RuleSettings.Rules||[])&&se.length>0){var v=0;b()(se).call(se,(function(e){v++,e.Exp=v}))}ie=function(e){if(e&&e.length>0){var t=[];return F()(e).call(e,(function(e){var s;F()(s=e.Conditions).call(s,(function(e){S()(t).call(t,(function(t){return t===e.QuestionId}))||t.push(e.QuestionId)}))})),t}return[]}(se),u=t,k()(p=u.Questions).call(p,(function(e,t){return e.Order-t.Order}));var m=s.SurveyResponse;re=s.ResponseQuestionIds||[];var f=document.createDocumentFragment();f.appendChild(new U(t.Banner,t.Title,t.Description)),b()(r=t.Questions).call(r,(function(e){if(e.Question){var t=new Z.Heading(e.SurveyQuestionId,e.Question,te,e.IsRequired);if(f.appendChild(t.domElement),"Multiple Choice"===e.Type){Ce(e.Answers,m,e);var s=new Z.MultipleChoice(e.SurveyQuestionId,e.Answers,te);f.appendChild(s.domElement)}else if("Single Choice"===e.Type){Ce(e.Answers,m,e);var i=new Z.SingleChoice(e.SurveyQuestionId,e.Answers,te);f.appendChild(i.domElement)}else if("Text"===e.Type){var n=Se(m,e),o=new Z.ShortText(e.SurveyQuestionId,n,e.Placeholder,te);f.appendChild(o.domElement)}else if("Long Text"===e.Type){var a=Se(m,e),r=new Z.LongText(e.SurveyQuestionId,a,e.Placeholder,te);f.appendChild(r.domElement)}else if("Date"===e.Type||"Datetime"===e.Type){var l=Se(m,e),c=new Z.Date(e.Type,e.SurveyQuestionId,l,te);f.appendChild(c.domElement)}else if("Dropdown"===e.Type){Ce(e.Answers,m,e);var d=new Z.Dropdown(e.SurveyQuestionId,e.Answers,e.Placeholder,te);f.appendChild(d.domElement)}else if("Rating"===e.Type){var u;Ce(e.Answers,m,e),k()(u=e.Answers).call(u,(function(e,t){return t.Order-e.Order}));var p=new Z.Rating(e.SurveyQuestionId,e.Answers,te);f.appendChild(p.domElement)}}}));var g=new j(t.ButtonSettings.Label,te),y=g.querySelector("a");i&&(y.className=y.className+" weui-btn_disabled"),f.appendChild(g);var w=new K;f.appendChild(w.domElement);var C=new J(te),x=A()(l=C.showErrorMsg).call(l,C);if(e.appendChild(C.domElement),e.appendChild(f),m&&m.length>0){var I,T=[],L=[];F()(I=t.Questions).call(I,(function(e){a()(re).call(re,e.SurveyQuestionId)>-1&&T.push(e)})),k()(T).call(T,(function(e,t){return e.Order-t.Order})),F()(T).call(T,(function(e){L.push(e.SurveyQuestionId)}));var O=[];fe(se,t.Questions,L,O),le=O,ge(t.Questions,O,T[0])}else!function(e,t){var s=[];if(e&&e.length>0){var i=[];F()(e).call(e,(function(e){i=P()(i).call(i,e.Conditions[0].QuestionId)}));var n=_()(t).call(t,(function(e){return a()(i).call(i,e.SurveyQuestionId)>-1}));F()(t).call(t,(function(e){e.Order<=n[0].Order&&s.push(e.SurveyQuestionId)}))}else F()(t).call(t,(function(e){s.push(e.SurveyQuestionId)}));var o=[];fe(e||[],t,s,o),le=o,ge(t,o,t[0])}(se,t.Questions);var $="";$=i?document.getElementById("preview-form-container"):document.getElementById("app");var N=te.CheckedColor;xe(".weui-cells_checkbox .weui-check:checked+.weui-icon-checked:before{color: "+N+";}"),xe(".weui-cells_radio .weui-check:checked+.weui-icon-checked:before{color: "+N+";}"),xe(i?o:t.AdvancedStyles);var D=te.FormBg,B=te.PageFontFamily;D&&($.style.backgroundColor=D),B&&($.style.fontFamily=B);var R=window.navigator.platform.toLowerCase();if((a()(R).call(R,"win")>-1||a()(R).call(R,"mac")>-1)&&!i){$.style.padding="16px",$.style.marginTop="50px",$.style.marginBottom="50px",$.style.height="auto",$.style.overflow="auto";var Q=document.getElementsByTagName("body")[0];te.PageBg?Q.style.backgroundColor=te.PageBg:Q.style.backgroundColor="#e1e2e5",te.PageBgImage?(Q.style.backgroundImage="url("+te.PageBgImage+")",Q.style.backgroundRepeat="no-repeat",Q.style.backgroundSize="contain",Q.style.backgroundPosition="center"):Q.style.backgroundImage=""}window.addEventListener("click",(function(e){var s=e.target,i=["checkbox","radio"];if("input"===s.tagName.toLowerCase()&&"rate"!==s.name&&a()(i).call(i,s.type)>-1&&a()(ie).call(ie,s.name)>-1){var n=s.name,o=s.id;_e(se,t.Questions,n,o,s.type)}}),!1),window.addEventListener("change",(function(e){var s=e.target;if("select"===s.tagName.toLowerCase()){var i=s[s.selectedIndex];i.id&&a()(ie).call(ie,s.id)>-1&&_e(se,t.Questions,s.id,i.id,"radio")}})),window.addEventListener("input",(function(e){var s,i,n=e.target;if(a()(s=n.className).call(s,"multiple-input")>-1){var o=document.getElementById(n.name);o.checked=!0,a()(ie).call(ie,o.name)>-1&&_e(se,t.Questions,o.name,o.id,"checkbox")}else if(a()(i=n.className).call(i,"single-input")>-1){var r=document.getElementById(n.name);r.checked=!0,a()(ie).call(ie,r.name)>-1&&_e(se,t.Questions,r.name,r.id,"radio")}})),y.addEventListener("click",(function(){var s,i,o;le=P()(s=[]).call(s,new h.a(le));var r,l,d,u,p,v=[];if(F()(i=t.Questions).call(i,(function(e){a()(le).call(le,e.SurveyQuestionId)>-1&&v.push(e)})),k()(v).call(v,(function(e,t){return e.Order-t.Order})),F()(o=t.Questions).call(o,(function(e){e.Order<v[0].Order&&!e.IsHidden&&le.unshift(e.SurveyQuestionId)})),Ie(t.Questions,te)){x("请完成页面上的必填项"),k()(oe).call(oe,(function(e,t){return e.order-t.order}));var m=oe[0].ele.offsetTop;e.scrollTop=m-30}else{w.show(),t.Settings=t.Settings||{};var f={SurveyResponse:ne,ResponseQuestionIds:le},g=function(){if(w.hide(),t.RedirectURL){var e=t.RedirectURL;window.location.href=e}else Te(c)},y=function(){!function(e){var t=e.data,s=e.success,i=e.fail;Visualforce.remoting.Manager.invokeAction((window.namespace?window.namespace+".":"")+"SurveyController.sendCompletionResponses",n()(t),(function(e,t){200===t.statusCode?s():i()}),{escape:!0})}({data:{followerId:de,surveyTakenId:ue,messageIds:t.Settings.MessageIds,templateIds:t.Settings.TemplateIds},success:function(){g()},fail:function(){w.hide(),x("网络请求失败")}})};ce?y():(r={dataJSON:n()(f),surveyId:t.SurveyId,successCallback:function(e){ce=!0,ue=e.surveyTakenId,e.followerId?(de=e.followerId,y()):g()},failCallback:function(e){var t=e&&e[0]&&e[0].message;x(t||"提交失败"),w.hide()}},l=r.dataJSON,d=r.surveyId,u=r.successCallback,p=r.failCallback,Visualforce.remoting.Manager.invokeAction((window.namespace?window.namespace+".":"")+"SurveyController.submit",window.encryptOpenId,d,l,(function(e,t){null===e?t.xhr&&!0===t.xhr.isTimeout?p(Y):"onLine"in navigator&&!1===navigator.onLine?p(G):p():e.ok?u(JSON.parse(function(e){var t={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};if(null!=e)return(e=e.replace(/&#0?39;/gi,"'")).replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(e,s){return t[s]}))}(e.data))):p(e.error)}),{escape:!0,timeout:3e4}))}}))}else if(t.RedirectURL){var E=t.RedirectURL;window.location.href=E}else Te(c);else Te(new q({iconClassList:["weui-icon-warn","weui-icon_msg-primary"],title:"问卷已关闭",desc:"您访问的问卷已停止收集信息"}))};const Oe=d.a;var $e={components:{PhoneFrameCard:c.PhoneFrameCard},props:{previewInfo:{type:Object,default:()=>({})},type:{type:String,default:()=>""},isForm:{type:Boolean,default:()=>!0}},mounted(){this.initRenderDom()},beforeDestroy(){const e=l()(document.getElementsByTagName("style")),t=this.previewInfo.FormId||this.previewInfo.SurveyId;for(const s of e){const e=s.innerText;e&&a()(e).call(e,"#".concat(t))>-1&&document.head.removeChild(s)}},watch:{type:function(){this.$refs.previewPhone&&(this.$refs.previewPhone.innerHTML=""),this.$refs.previewDesktop&&(this.$refs.previewDesktop.innerHTML=""),this.$nextTick((function(){this.initRenderDom()}))}},methods:{initRenderDom(){let e="",t=document.getElementsByClassName("we-chat-form-preview-dialog")[0];if("PHONE"===this.type)e=this.$refs.previewPhone,t.style.backgroundColor="#fff",t.style.backgroundImage="",t.style.backgroundRepeat="",t.style.backgroundSize="",t.style.backgroundPosition="";else{e=this.$refs.previewDesktop,t.style.backgroundColor="#e1e2e5";const s=this.previewInfo.Styles||{};this.previewInfo,s.PageBgImage&&(t.style.backgroundImage="url(".concat(s.PageBgImage,")"),t.style.backgroundRepeat="no-repeat",t.style.backgroundSize="contain",t.style.backgroundPosition="center"),s.PageBg&&(t.style.backgroundColor=s.PageBg)}let s="";if(this.previewInfo.AdvancedStyles&&(s=this.previewInfo.AdvancedStyles.replace(/#app/g,"#".concat(this.previewInfo.FormId||this.previewInfo.SurveyId))),this.isForm){const t=JSON.parse(n()(this.previewInfo));Object(u.a)(e,t,{},"BuilderPreview",s,Oe,this.type.toLowerCase(),"preview-form-container")}else{const t=JSON.parse(n()(this.previewInfo));Le(e,t,{},"BuilderPreview",s)}}}},Pe=(s("ZKzn"),s("KHd+")),Ne=Object(Pe.a)($e,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-grid we-chat-form-preview-dialog",class:{"desktop-dialog":"DESKTOP"===e.type},attrs:{id:e.previewInfo.FormId||e.previewInfo.SurveyId}},["PHONE"===e.type?s("div",{staticClass:"slds-grid phone-section",attrs:{id:"phone-section"}},[s("phone-frame-card",{staticClass:"phone-model",attrs:{name:e.previewInfo.Title,"has-footer":!1}},[s("div",{attrs:{slot:"app-name"},slot:"app-name"},[e._v(e._s(e.$t("global.wechatLabel")))]),e._v(" "),s("span",{attrs:{slot:"back-label"},slot:"back-label"},[e._v(e._s(e.$t("global.backBtn")))]),e._v(" "),s("div",{staticClass:"slds-scrollable_y phone-content",attrs:{slot:"content"},slot:"content"},[s("div",{ref:"previewPhone",staticClass:"preview-phone preview-form",attrs:{id:"preview-form-container"}})])])],1):e._e(),e._v(" "),"DESKTOP"===e.type?s("div",{ref:"previewDesktop",staticClass:"preview-desktop preview-form",attrs:{id:"preview-form-container"}}):e._e()])}),[],!1,null,"4b2fd611",null);t.a=Ne.exports},"6YtS":function(e,t,s){"use strict";var i=s("G0YV"),n=s.n(i);t.default=n.a},"6Z06":function(e,t,s){"use strict";var i=s("RfgG"),n=s.n(i);t.default=n.a},"6mtQ":function(e,t,s){"use strict";var i=s("iQVG");s.n(i).a},"7wNg":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"other":"其他","bannerImage":"横幅图片","title":"标题","description":"描述"},"en":{"other":"Other","bannerImage":"Banner Image","title":"Title","description":"Description"}}'),delete e.options._Ctor}},"8YXT":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"selectNotificationTemplateLabel":"选择微信模板","newTemplateLabel":"在微信中添加一个新模板"},"en":{"selectNotificationTemplateLabel":"Select WeChat Template","newTemplateLabel":"Choose a new template from WeChat."}}'),delete e.options._Ctor}},"94pc":function(e,t,s){},A3YL:function(e,t,s){"use strict";var i=s("F5n2"),n=s.n(i);t.default=n.a},AScg:function(e,t,s){},Ak9N:function(e,t,s){var i=s("pevS"),n=s("SWit");i({target:"Number",stat:!0,forced:Number.parseFloat!=n},{parseFloat:n})},"D+DB":function(e,t,s){"use strict";var i=s("ypsP"),n=s.n(i);t.default=n.a},DR4q:function(e,t,s){"use strict";var i=s("hG8I"),n=s.n(i);t.default=n.a},Dk61:function(e,t,s){"use strict";var i=s("I0LH"),n=s.n(i);t.default=n.a},Ek5D:function(e,t,s){"use strict";var i=s("94pc");s.n(i).a},F5n2:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"weChatLabel":"微信","backLabel":"返回","detailsLabel":"详情","templateSettingLabel":"模板设置","urlLabel":"链接","informationLabel":"附加信息","noteLabel":"备注","placeholderLabel":"可选的"},"en":{"weChatLabel":"WeChat","backLabel":"Back","detailsLabel":"Details","templateSettingLabel":"Template Settings","urlLabel":"URL","informationLabel":"Additional Information","noteLabel":"NOTE","placeholderLabel":"Optional"}}'),delete e.options._Ctor}},F5n6:function(e,t,s){"use strict";var i={props:{paginations:{type:Array},pageNumber:{type:Number,default:1}},data:()=>({currentPageNumber:1}),created(){this.currentPageNumber=this.pageNumber},methods:{changePageNumber(e,t){this.currentPageNumber="pre"===t?this.currentPageNumber-1:"next"===t?this.currentPageNumber+1:e,this.$emit("target",this.currentPageNumber)}}},n=(s("hkfk"),s("KHd+")),o=s("k/9o"),a=Object(n.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.paginations.length>1?s("ul",{staticClass:"slds-grid slds-grid_align-center pagination"},[s("li",{staticClass:"page-turning-pre",attrs:{title:e.$t("preTitle")}},[e.currentPageNumber>1?s("a",{staticClass:"page-turning",attrs:{id:"previousPage"},on:{click:function(t){return e.changePageNumber("","pre")}}},[s("icon",{attrs:{name:"left","text-color":"default",size:"x-small","charket-icon":""}})],1):s("a",{staticClass:"disabled page-turning",attrs:{id:"previousPageDisabled",disabled:"true"}},[s("icon",{attrs:{name:"left","text-color":"default",size:"x-small","charket-icon":""}})],1)]),e._v(" "),e._l(e.paginations,(function(t){return s("li",{staticClass:"middle-page-number"},[0!==t.PageNumber?s("a",{class:{currentPage:t.PageNumber===e.currentPageNumber},on:{click:function(s){return e.changePageNumber(t.PageNumber)}}},[e._v(e._s(t.PageNumber))]):s("a",[e._v("...")])])})),e._v(" "),s("li",{staticClass:"page-turning-pre",attrs:{title:e.$t("nextTitle")}},[e.paginations[e.paginations.length-1].PageNumber!==e.currentPageNumber?s("a",{staticClass:"page-turning",attrs:{id:"nextPage"},on:{click:function(t){return e.changePageNumber("","next")}}},[s("icon",{attrs:{name:"right","text-color":"default",size:"x-small","charket-icon":""}})],1):s("a",{staticClass:"disabled page-turning",attrs:{id:"nextPageDisabled",disabled:"true"}},[s("icon",{attrs:{name:"right","text-color":"default",size:"x-small","charket-icon":""}})],1)])],2):e._e()}),[],!1,null,"430ba9bf",null);"function"==typeof o.default&&Object(o.default)(a);t.a=a.exports},Fblv:function(e,t,s){"use strict";var i=s("O2ea");s.n(i).a},G0YV:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"surveySubmitedAction":"提交后","relatedFormTip":"在进行这项问卷前，受访者须填写有关表单。","canEditLabel":"提交后可修改","limitToOneResponseLabel":"仅限1条回复","relatedFormLabel":"相关表单","editableTip":"如果该选项选中，微信用户可以通过重新打开此表单来编辑提交的信息。"},"en":{"surveySubmitedAction":"Submitted Action","relatedFormTip":"Respondents will be required to fill out the related Form before accessing this survey.","canEditLabel":"Editable after submitted","limitToOneResponseLabel":"Limit to 1 response","relatedFormLabel":"Related Form","editableTip":"If checked, WeChat users can edit the submitted information by reopening this form."}}'),delete e.options._Ctor}},GXIm:function(e,t,s){},"HA+Y":function(e,t,s){},HaPu:function(e,t,s){"use strict";var i=s("8YXT"),n=s.n(i);t.default=n.a},Hi2j:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"type":"类型","name":"名称","expirationDate":"过期日期","quantity":"数量","status":"状态","to":"至"},"en":{"type":"Type","name":"Name","expirationDate":"Expiration Date","quantity":"Quantity","status":"Status","to":"to"}}'),delete e.options._Ctor}},I0LH:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"newPassTitle":"新建凭证","passForApproval":"凭证已提交审批！"},"en":{"newPassTitle":"New Pass","passForApproval":"The pass was submitted for approval."}}'),delete e.options._Ctor}},Ie13:function(e,t,s){"use strict";var i=s("Pa/P");s.n(i).a},ItEM:function(e,t,s){"use strict";var i=s("tAMZ"),n=s.n(i);t.default=n.a},"Jc/9":function(e,t,s){e.exports=s("QFe3")},Jyzm:function(e,t,s){"use strict";var i=s("dUo5");s.n(i).a},Kcbq:function(e,t,s){"use strict";var i=s("fnW4"),n=s.n(i);t.default=n.a},Kmr5:function(e,t,s){!function(e,t){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)};function i(e,t,s,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var r=e.length-1;0<=r;r--)(n=e[r])&&(a=(o<3?n(a):3<o?n(t,s,a):n(t,s))||a);return 3<o&&a&&Object.defineProperty(t,s,a),a}function n(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var o,a=["top-left","top-right","bottom-left","bottom-right"],r=(function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(l,o=t.Vue),Object.defineProperty(l.prototype,"toggleMode",{get:function(){return!!this.$listeners.input},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"direction",{get:function(){return Object.keys(this.$attrs).filter((function(e){return a.includes(e)})).pop()||"top-right"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"popoverClass",{get:function(){return"slds-nubbin_"+new Map([["top-left","bottom-right"],["top-right","bottom-left"],["bottom-left","top-right"],["bottom-right","top-left"]]).get(this.direction)},enumerable:!0,configurable:!0}),l.prototype.created=function(){this.toggleMode&&(this.data.show=this.value,document.addEventListener("click",this.onClickDocument))},l.prototype.onMouseOver=function(){this.toggleMode||this.data.show||(this.data.show=!0)},l.prototype.onMouseLeave=function(){this.toggleMode||(this.data.show=!1)},l.prototype.onShow=function(e){var t=this;e&&this.$nextTick((function(){var e=t.$refs.activator.getBoundingClientRect();t.style.left=t.calculateLeft(e),t.style.top=t.calculateTop(e)}))},l.prototype.emitInputEvent=function(e){Array.isArray(this.$listeners.input)?this.$listeners.input.forEach((function(t){return t(e)})):this.$listeners.input(e)},l.prototype.calculateLeft=function(e){var t=this.$refs.popover;if(!t)return"";var s=e.left+e.width/2;return-1<this.direction.indexOf("left")?s-t.clientWidth+30+"px":s-30+"px"},l.prototype.calculateTop=function(e){var t=this.$refs.popover;return t?-1<this.direction.indexOf("top")?e.top-t.clientHeight-15+"px":e.bottom+15+"px":""},i([t.Prop({type:Boolean}),n("design:type",Boolean)],l.prototype,"value",void 0),i([t.Watch("data.show"),n("design:type",Function),n("design:paramtypes",[Boolean]),n("design:returntype",void 0)],l.prototype,"onShow",null),l=i([t.Component({})],l));function l(){var e=null!==o&&o.apply(this,arguments)||this;return e.model={prop:"value",event:"input"},e.data={show:!1},e.onClickDocument=function(s){var i=e.$refs.activator,n=e.$refs.popover;!e.data.show||i.contains(s.target)||n.contains(s.target)||(t.Vue.set(e.data,"show",!1),e.emitInputEvent(e.data.show))},e.style={left:"0px",top:"0px"},e.on={click:function(){e.toggleMode&&(t.Vue.set(e.data,"show",!e.value),e.emitInputEvent(e.data.show))}},e}var c,d="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase()),u={};function p(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"ld-tooltip"},[s("span",{ref:"activator",staticClass:"ld-tooltip__activator",on:{mouseover:function(t){return e.onMouseOver(t)},mouseout:function(t){return e.onMouseLeave(t)}}},[e._t("activator",null,{on:e.on})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.data.show,expression:"data.show"}],ref:"popover",staticClass:"slds-popover slds-popover_tooltip ld-tooltip__popover",class:e.popoverClass,style:e.style,attrs:{role:"tooltip"}},[s("div",{staticClass:"slds-popover__body"},[e._t("default")],2)])])}var h=r;p._withStripped=!0;var v=function(e,t,s,i,n,o,a,r,l,c){"boolean"!=typeof a&&(l=r,r=a,a=!1);var d,u="function"==typeof s?s.options:s;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),i&&(u._scopeId=i),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=d):t&&(d=a?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),d)if(u.functional){var p=u.render;u.render=function(e,t){return d.call(t),p(e,t)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,d):[d]}return s}({render:p,staticRenderFns:[]},(function(e){e&&e("data-v-6aa4a530_0",{source:".ld-tooltip__activator[data-v-6aa4a530] {\n  display: inline-block;\n}\n.ld-tooltip__popover[data-v-6aa4a530] {\n  position: fixed !important;\n}",map:void 0,media:void 0})}),h,"data-v-6aa4a530",!1,void 0,!1,(function(e){return function(e,t){return function(e,t){var s=d?t.media||"default":e,i=u[s]||(u[s]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);var n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),void 0===c&&(c=document.head||document.getElementsByTagName("head")[0]),c.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var o=i.ids.size-1,a=document.createTextNode(n),r=i.element.childNodes;r[o]&&i.element.removeChild(r[o]),r.length?i.element.insertBefore(a,r[o]):i.element.appendChild(a)}}}(e,t)}}),void 0,void 0);e.LdTooltip=v,e.default=function(e){e.component("LdTooltip",v)},Object.defineProperty(e,"__esModule",{value:!0})}(t,s("YKMj"))},O2ea:function(e,t,s){},OWFR:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"name":"名称","startDate":"开始日期","endDate":"结束日期","quantity":"数量","createdBy":"最后修改信息"},"en":{"name":"Name","startDate":"Start Date","endDate":"End Date","quantity":"Quantity","createdBy":"Created By"}}'),delete e.options._Ctor}},"Pa/P":function(e,t,s){},QFe3:function(e,t,s){s("Ak9N");var i=s("dktu");e.exports=i.Number.parseFloat},RGvt:function(e,t,s){"use strict";var i={components:{Icon:s("za7x").a},props:{pageTitle:String,hasNewButton:{type:Boolean,default:!0}},methods:{createNew(){this.$emit("create-new")},showNavBox(){this.$root.$emit("show-nav-box")}}},n=(s("zMKj"),s("KHd+")),o=Object(n.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-border_bottom header-tab"},[s("a",{staticClass:"down-btn",on:{click:e.showNavBox}},[s("icon",{attrs:{name:"menuIcon","class-name":"down-icon",width:"18px",height:"18px"}})],1),e._v(" "),s("span",{staticClass:"header-line"}),e._v(" "),s("span",{staticClass:"tab-value"},[e._v(e._s(e.pageTitle))]),e._v(" "),e.hasNewButton?s("div",{staticClass:"header-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:function(t){return e.createNew()}}},[e._v(e._s(e.$t("global.newBtn")))])]):e._e()])}),[],!1,null,"4381808b",null);t.a=o.exports},RNAD:function(e,t,s){"use strict";var i=s("Yo0a"),n=s.n(i);t.default=n.a},RfgG:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"cellQuestion":"问题","cellResponse":"响应","searchSurveys":"搜索问卷","surveyReplyHeader":"问卷","surveyReplyContent2":"这个问卷?","surveyNotify":"问卷已{0}。"},"en":{"cellQuestion":"Questions","cellResponse":"Responses","searchSurveys":"Search Surveys","surveyReplyHeader":" Survey","surveyReplyContent2":" this survey?","surveyNotify":"The survey was {0}."}}'),delete e.options._Ctor}},SyMb:function(e,t,s){"use strict";var i=s("GXIm");s.n(i).a},"TO/l":function(e,t,s){"use strict";var i=s("gBlF");s.n(i).a},"To+i":function(e,t,s){},"V+Hv":function(e,t,s){"use strict";s.r(t);var i=s("RGvt"),n=s("SLhn"),o=s.n(n),a=s("wG3i"),r=s.n(a),l=s("vQrK"),c=s.n(l),d=s("Yvyk"),u=s.n(d),p=s("692z"),h=s("w2Vt"),v=s("ngIk"),m=s("dcdS"),f=s("oWfJ"),g=s("F5n6"),y=s("L2JU"),b=s("00Ee");function w(e){return Object(b.a)({method:"SurveyRemoteActions.getSurvey",args:[e]})}function _(e,t){return Object(b.a)({method:"SurveyRemoteActions.cloneSurvey",args:[e,t]})}function C(e,t){return Object(b.a)({method:"SurveyRemoteActions.upsertSurvey",args:[e,t]})}var S=s("4B+h"),x=s("cybb"),k=s("LQ5e"),I=s.n(k),T={components:{NoRecord:p.a,LoadingSpinner:h.a,InputSelect:v.a,Dropdown:m.a,Pagination:g.a},mixins:[f.a],data(){return{surveysTotal:0,hasMoreSurveys:!1,surveysPagination:[],surveyList:[],isLoadingSurveys:!1,pageNum:1,pageSize:20,currentAction:"",currentEditSurvey:null,replyAction:null,statusOptionData:{options:[],currentOptions:[{Name:this.$t("all"),Value:"All"}]},orderOptionData:{options:[{Name:this.$t("alphabetically"),value:"Alphabetically"},{Name:this.$t("reverseAlphabetically"),value:"Reverse Alphabetically"},{Name:this.$t("lastModifiedDate"),value:"Last Modified Date"},{Name:this.$t("oldestModifiedDate"),value:"Oldest Modified Date"}],currentOptions:[{Name:this.$t("lastModifiedDate"),value:"Last Modified Date"}]},filterJson:{OrderBy:"Last Modified Date",SearchKey:"",Status:"All"}}},mounted(){u.a.all([this.getSurveyList(),this.getStatus()])},watch:{dropdownRefId:function(){"Status"===this.dropdownType?(this.dropdownOptionData.options=this.statusOptionData.options,this.dropdownOptionData.currents=this.statusOptionData.currentOptions,this.hasSortBy=!1):"Order"===this.dropdownType&&(this.dropdownOptionData.options=this.orderOptionData.options,this.dropdownOptionData.currents=this.orderOptionData.currentOptions,this.hasSortBy=!0)}},computed:c()({},Object(y.c)({currentUser:"user/currentUser"}),{showNoRecord(){return 0===this.surveyList.length}}),methods:{async getStatus(){try{const e=await Object(b.a)({method:"SurveyRemoteActions.getSurveyStatus",args:[]});if(e.ok){const t=JSON.parse(I.a.unescape(e.data));this.statusOptionData.options=t.SurveyStatus,this.statusOptionData.options.unshift({Name:this.$t("all"),Value:"All"})}else Object(S.f)(e)}catch(e){Object(S.f)(e)}},formatDatetimeFilter:()=>x.e,async getSurveyList(){this.isLoadingSurveys=!0;const e=r()(this.filterJson);try{const n=await(t=this.pageNum,s=this.pageSize,i=e,Object(b.a)({method:"SurveyRemoteActions.getSurveys",args:[t,s,i]}));if(this.isLoadingSurveys=!1,n.ok){const e=JSON.parse(I.a.unescape(n.data));this.surveyList=e.SurveyInfos,this.surveysPagination=e.Pages,this.surveysTotal=e.Total.Count,this.hasMoreSurveys=e.Total.HasMore}else Object(S.f)(n)}catch(e){this.isLoadingSurveys=!1,Object(S.f)(e)}var t,s,i},goToTargetPage(e){this.pageNum=e,this.getSurveyList(),document.getElementsByClassName("scroll-content")[0].scrollTop=0},selectPicklist(e){"Status"===this.dropdownType?(this.filterJson.Status=e[0].Value,this.statusOptionData.currentOptions=e,this.pageNum=1,this.getSurveyList()):"Order"===this.dropdownType&&(this.filterJson.OrderBy=e[0].value,this.orderOptionData.currentOptions=e,this.getSurveyList()),this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1},async setSurveyStatus(e,t){const s={Archived:"Published",Published:"Archived"},i="Published"===e.Status.Value?this.$t("actionLabel1"):this.$t("actionLabel2");try{const a=await(n=e.SurveyId,o=s[e.Status.Value],Object(b.a)({method:"SurveyRemoteActions.setStatus",args:[n,o]}));t.close(),a.ok?(this.$root.$emit("open-toast-notification",{content:this.$t("surveyNotify",[i]),type:"success"}),this.getSurveyList()):Object(S.f)(a)}catch(e){Object(S.f)(e),t.close()}var n,o},async deleteSurvey(e,t){try{const i=await(s=e.SurveyId,Object(b.a)({method:"SurveyRemoteActions.deleteSurvey",args:[s]}));if(t.close(),i.ok){const e=this.$t("actionLabel3");this.$root.$emit("open-toast-notification",{content:this.$t("surveyNotify",[e]),type:"success"}),this.getSurveyList()}else Object(S.f)(i)}catch(e){Object(S.f)(e),t.close()}var s},editSurvey(e,t,s){this.$emit("edit-survey",e,t,s)},getMenuItems(e){const t=[{value:"delete",label:this.$t("global.deleteBtn"),target:e}];return"Archived"===e.Status.Value?t.unshift({value:"clone",label:this.$t("clone"),target:e},{value:"publish",label:this.$t("publish"),target:e}):t.unshift({value:"preview",label:this.$t("global.previewBtn"),target:e},{value:"clone",label:this.$t("clone"),target:e},{value:"edit",label:this.$t("global.editBtn"),target:e},{value:"archive",label:this.$t("archive"),target:e}),t},onClickMenuItem(e){const{value:t,target:s}=e;"preview"===t?this.$emit("edit-survey",s,!0):"edit"===t?this.$emit("edit-survey",s,!1):"clone"===t?this.$emit("clone-survey",s):this.openReplyModal(s,t)},openReplyModal(e,t){var s,i,n;"archive"===t?(this.currentAction=this.$t("archive"),this.replyAction=this.setSurveyStatus):"publish"===t?(this.currentAction=this.$t("publish"),this.replyAction=this.setSurveyStatus):"delete"===t&&(this.currentAction=this.$t("global.deleteBtn"),this.replyAction=this.deleteSurvey),this.currentEditSurvey=e;const a=this.$confirm({title:o()(s="".concat(this.currentAction)).call(s,this.$t("surveyReplyHeader")),content:o()(i=o()(n="".concat(this.$t("modalContent1"))).call(n,this.currentAction.toLowerCase())).call(i,this.$t("surveyReplyContent2"))});a.$on("ok",async()=>{this.replyAction(this.currentEditSurvey,a)})},searchSurveys(){this.getSurveyList()},clearSearchKey(){this.filterJson.SearchKey="",this.getSurveyList()}}},L=(s("pfD2"),s("KHd+")),O=s("dD3m"),$=s("6Z06"),P=Object(L.a)(T,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"survey-list-page"},[s("div",{staticClass:"slds-border_bottom slds-grid slds-grid_vertical-align-start list-filter"},[s("span",{staticClass:"forms-count"},[e._v(e._s(e._f("addSeparators")(e.surveysTotal))),e.hasMoreSurveys?s("i",{staticClass:"show-plus-sign"},[e._v("+")]):e._e(),e._v("\n      "+e._s(e.surveysTotal>1?e.$tc("global.itemLabel",2):e.$tc("global.itemLabel",1))+"\n    ")]),e._v(" "),s("div",{staticClass:"forms-pick-list"},[s("input-select",{attrs:{currents:e.statusOptionData.currentOptions,type:"Status"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-end slds-col"},[s("div",{staticClass:"forms-search"},[s("search-input",{attrs:{placeholder:e.$t("searchSurveys")},on:{search:e.searchSurveys,clear:e.clearSearchKey},model:{value:e.filterJson.SearchKey,callback:function(t){e.$set(e.filterJson,"SearchKey",t)},expression:"filterJson.SearchKey"}})],1),e._v(" "),s("div",{staticClass:"forms-order"},[s("input-select",{attrs:{currents:e.orderOptionData.currentOptions,type:"Order"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.surveyList.length>0,expression:"surveyList.length > 0"}],staticClass:"slds-table--header-fixed_container survey-list-content"},[s("div",{staticClass:"slds-scrollable_y scroll-content"},[s("table",{staticClass:"slds-table slds-table_bordered slds-no-row-hover slds-table--header-fixed survey-table",attrs:{role:"grid"}},[s("thead",[s("tr",{staticClass:"slds-line-height_reset"},[s("th",{staticClass:"slds-is-sortable slds-is-resizable form-tab",attrs:{focusable:"true",scope:"col"}},[s("span",{staticClass:"slds-truncate slds-cell-fixed",attrs:{title:e.$t("cellName")}},[e._v(e._s(e.$t("cellName")))])]),e._v(" "),s("th",{staticClass:"slds-is-sortable slds-is-resizable form-tab form-tab-status",attrs:{focusable:"true",scope:"col"}},[s("span",{staticClass:"slds-truncate slds-cell-fixed",attrs:{title:e.$t("cellStatus")}},[e._v(e._s(e.$t("cellStatus")))])]),e._v(" "),s("th",{staticClass:"slds-is-sortable slds-is-resizable form-tab-num",attrs:{focusable:"true",scope:"col"}},[s("span",{staticClass:"slds-truncate slds-cell-fixed",attrs:{title:e.$t("cellQuestion")}},[e._v(e._s(e.$t("cellQuestion")))])]),e._v(" "),s("th",{staticClass:"slds-is-sortable slds-is-resizable form-tab-num",attrs:{focusable:"true",scope:"col"}},[s("span",{staticClass:"slds-truncate slds-cell-fixed",attrs:{title:e.$t("cellResponse")}},[e._v(e._s(e.$t("cellResponse")))])]),e._v(" "),s("th",{staticClass:"slds-is-sortable slds-is-resizable",attrs:{focusable:"true",scope:"col"}},[s("span",{staticClass:"slds-truncate slds-cell-fixed",attrs:{title:e.$t("cellNote")}},[e._v(e._s(e.$t("cellNote")))])]),e._v(" "),s("th",{staticClass:"slds-is-sortable slds-is-resizable form-tab-modify",attrs:{focusable:"true",scope:"col"}},[s("span",{staticClass:"slds-truncate slds-cell-fixed",attrs:{title:e.$t("cellLastModify")}},[e._v(e._s(e.$t("cellLastModify")))])]),e._v(" "),s("th",{staticStyle:{width:"54px"},attrs:{scope:"col"}})])]),e._v(" "),s("tbody",{attrs:{id:"survey-table-content"}},e._l(e.surveyList,(function(t){return s("tr",{staticClass:"slds-hint-parent"},[s("th",{attrs:{scope:"row"}},[s("div",{staticClass:"slds-truncate other-color-item"},[s("a",{attrs:{href:"javascript:void(0);",title:t.Name},on:{click:function(s){return e.editSurvey(t,!1,!0)}}},[e._v(e._s(t.Name))])])]),e._v(" "),s("td",{attrs:{role:"gridcell"}},[s("div",{staticClass:"slds-truncate"},[s("span",{attrs:{title:t.Status.Label}},[e._v(e._s(t.Status.Label))])])]),e._v(" "),s("td",{attrs:{role:"gridcell"}},[s("div",{staticClass:"slds-truncate"},[s("span",{attrs:{title:t.Questions}},[e._v(e._s(t.QuestionCount))])])]),e._v(" "),s("td",{attrs:{role:"gridcell"}},[s("div",{staticClass:"slds-truncate"},[s("a",{attrs:{href:"/"+t.SurveyId,title:t.Responses,target:"_blank"}},[e._v(e._s(t.ResponseCount))])])]),e._v(" "),s("td",{attrs:{role:"gridcell"}},[s("div",[s("div",{staticClass:"slds-truncate"},[s("span",{attrs:{title:t.Note}},[e._v(e._s(t.Note))])])])]),e._v(" "),s("td",{attrs:{role:"gridcell"}},[s("div",{staticClass:"slds-truncate"},[t.LastModifiedByUser?s("span",{attrs:{title:t.LastModifiedByUser+", "+e.formatDatetimeFilter()(t.LastModifiedDate,e.currentUser.TimeZoneSidKey)}},[e._v(e._s(t.LastModifiedByUser)+", "+e._s(e._f("formatDatetimeFilter")(t.LastModifiedDate,e.currentUser.TimeZoneSidKey)))]):s("span",{attrs:{title:e.formatDatetimeFilter()(t.LastModifiedDate,e.currentUser.TimeZoneSidKey)}},[e._v(e._s(e._f("formatDatetimeFilter")(t.LastModifiedDate,e.currentUser.TimeZoneSidKey)))])])]),e._v(" "),s("td",{staticClass:"td-position",staticStyle:{width:"3.25rem"},attrs:{role:"gridcell"}},[s("div",{staticClass:"btn-position"},[s("ld-action-menu",{attrs:{items:e.getMenuItems(t)},on:{click:function(t){return e.onClickMenuItem(t)}}})],1)])])})),0)]),e._v(" "),e.isLoadingSurveys?e._e():s("pagination",{attrs:{paginations:e.surveysPagination,"page-number":e.pageNum},on:{target:e.goToTargetPage}})],1)]),e._v(" "),e.showNoRecord&&!e.isLoadingSurveys?s("no-record",{attrs:{"custom-style":"top: 90px;"}}):e._e(),e._v(" "),s("loading-spinner",{attrs:{"is-loading":e.isLoadingSurveys}}),e._v(" "),e.showDropdown?s("dropdown",{attrs:{options:e.dropdownOptionData.options,currents:e.dropdownOptionData.currents,left:e.dropdownLeft,top:e.dropdownTop,width:e.dropdownWidth,"has-sort-by":e.hasSortBy},on:{"select-option":e.selectPicklist,close:e.closeDropdown}}):e._e()],1)}),[],!1,null,"4c9462ee",null);"function"==typeof O.default&&Object(O.default)(P),"function"==typeof $.default&&Object($.default)(P);var N=P.exports,A=s("+dyS"),D=s.n(A),B=s("WE60"),R=s.n(B),F=s("3O4B"),Q=s.n(F),E=s("Ip10"),M=s.n(E),z=s("autp"),q=s.n(z),H=s("6KlO"),U=s("za7x"),j={props:{question:Object,questionIndex:Number},computed:{$_mixinQuestion(){return this.question}},watch:{$_mixinQuestion:{deep:!0,handler(e){this.$emit("update:question",e)}}},components:{Icon:U.a},data:()=>({}),methods:{$_mixinDragAction(e){this.$emit("drag",e,this.question)},$_mixinIconFilter:e=>({Text:"formText","Long Text":"formTextarea",Dropdown:"formPicklist","Single Choice":"formRadio","Multiple Choice":"formCheckbox",Date:"formDate",Datetime:"formTime",Rating:"formRating",Heading:"formHeading"})[e],$_mixinQuestionEnterAction(){if(this.$_mixinQuestion.Answers.length>0){var e;const t=0,s=this.$_mixinQuestion.Answers[t].Choice;this.$_mixinQuestion.Answers[t].Choice="",document.getElementById(o()(e="".concat(this.questionIndex,"surveyChoice")).call(e,t)).focus(),this.$_mixinQuestion.Answers[t].Choice=s}else this.$emit("add-single-choice",this.questionIndex)},$_mixinSetCurrentQuestion(){this.$emit("set-current-question",this.question,this.questionIndex)},$_mixinCheckToProperty(){this.$emit("check-to-property",this.question,this.questionIndex)}}},V={mixins:[j],methods:{addSameQuestion(){this.$emit("add-same-type-question",this.questionIndex)}}},W=(s("hEcC"),s("jz2B")),K=Object(L.a)(V,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-grid survey-text-item",on:{click:function(t){return e.$_mixinSetCurrentQuestion()}}},[s("span",{staticClass:"survey-text-icon",on:{click:function(t){return t.stopPropagation(),e.$_mixinCheckToProperty()}}},[s("icon",{attrs:{name:e.$_mixinIconFilter(e.$_mixinQuestion.Type),width:"21px",heigth:"24px","fill-color":"#706e6b"}})],1),e._v(" "),s("span",{staticClass:"slds-grid slds-col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.$_mixinQuestion.Question,expression:"$_mixinQuestion.Question"}],staticClass:"question-input",style:{color:e.$_mixinQuestion.IsHidden?"#b2b2b2":""},attrs:{placeholder:"Heading"===e.question.Type?e.$t("typeHeading"):e.$t("typeQuestion"),type:"text"},domProps:{value:e.$_mixinQuestion.Question},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSameQuestion(t)},input:function(t){t.target.composing||e.$set(e.$_mixinQuestion,"Question",t.target.value)}}})])])}),[],!1,null,"0f018d86",null);"function"==typeof W.default&&Object(W.default)(K);var J=K.exports,Y=s("GfEe"),G=s.n(Y),Z={mixins:[j],methods:{choiceEnter(e){if(this.$_mixinQuestion.Answers[e].Choice.length>0){var t;Q()(t=this.$_mixinQuestion.Answers).call(t,e+1,0,{Choice:"",IsOther:!1,Order:1}),this.updateOrder(),this.$nextTick(()=>{var t;document.getElementById(o()(t="".concat(this.questionIndex,"surveyChoice")).call(t,e+1)).focus()})}else{var s;if(this.$_mixinQuestion.Answers.length>=2)Q()(s=this.$_mixinQuestion.Answers).call(s,e,1);this.$emit("add-same-type-question",this.questionIndex)}},deleteChoice(e,t,s){var i;0===s.Choice.length&&this.$_mixinQuestion.Answers.length>1&&(Q()(i=this.$_mixinQuestion.Answers).call(i,t,1),e.preventDefault(),this.$nextTick(()=>{var e;const s=this.$_mixinQuestion.Answers[t]?t:t-1,i=this.$_mixinQuestion.Answers[s].Choice;this.$_mixinQuestion.Answers[s].Choice="",document.getElementById(o()(e="".concat(this.questionIndex,"surveyChoice")).call(e,s)).focus(),this.$_mixinQuestion.Answers[s].Choice=i}))},updateOrder(){for(const[t,s]of G()(e=this.$_mixinQuestion.Answers).call(e)){var e;s.Order=t+1}}}},X=(s("0+6n"),s("RNAD")),ee=Object(L.a)(Z,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-grid slds-grid_vertical survey-choices-item",on:{click:function(t){return e.$_mixinSetCurrentQuestion()}}},[s("div",{staticClass:"slds-grid survey-question-area"},[s("span",{staticClass:"survey-choices-icon",on:{click:function(t){return t.stopPropagation(),e.$_mixinCheckToProperty()}}},[s("icon",{attrs:{name:e.$_mixinIconFilter(e.$_mixinQuestion.Type),width:"21px",heigth:"24px","fill-color":"#706e6b"}})],1),e._v(" "),s("span",{staticClass:"slds-grid slds-col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.$_mixinQuestion.Question,expression:"$_mixinQuestion.Question"}],staticClass:"question-input",style:{color:e.$_mixinQuestion.IsHidden?"#b2b2b2":""},attrs:{placeholder:e.$t("typeQuestion"),type:"text"},domProps:{value:e.$_mixinQuestion.Question},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$_mixinQuestionEnterAction()},input:function(t){t.target.composing||e.$set(e.$_mixinQuestion,"Question",t.target.value)}}})])]),e._v(" "),s("ul",{staticClass:"slds-grid slds-grid_vertical"},e._l(e.$_mixinQuestion.Answers,(function(t,i){return s("li",{key:i,staticClass:"slds-grid survey-answer-item"},[s("span",{staticClass:"choice-icon"},[e._v("-")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Choice,expression:"choice.Choice"}],staticClass:"slds-col answer-input",attrs:{id:e.questionIndex+"surveyChoice"+i,placeholder:e.$t("choice"),readonly:t.IsOther,type:"text"},domProps:{value:t.Choice},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.choiceEnter(i)},function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"delete",[8,46],s.key,["Backspace","Delete","Del"])?null:e.deleteChoice(s,i,t)}],input:function(s){s.target.composing||e.$set(t,"Choice",s.target.value)}}})])})),0)])}),[],!1,null,"7d012653",null);"function"==typeof X.default&&Object(X.default)(ee);var te=ee.exports,se=s("+Bun"),ie=s.n(se),ne=s("4LGG"),oe=s.n(ne),ae=s("dUVM"),re=s.n(ae),le=s("0G99"),ce=s.n(le),de=s("ejTr"),ue=s.n(de),pe=s("XmpP"),he=s("2AFw"),ve=s("3nmp"),me=s("4IgH"),fe=s("jkSJ"),ge=s("4MOm"),ye={mixins:[f.a,pe.a],components:{InputSelect:v.a,Dropdown:m.a,Lookup:he.a,WechatResponse:ve.a},props:{survey:{type:Object,default:()=>({})}},computed:c()({},Object(y.c)({accountList:"sidebar/wechatAccounts"}),{isLimitToOneResponse:{get:function(){return this.survey.ResponseLimit&&1===this.survey.ResponseLimit},set:function(e){this.survey.ResponseLimit=e?1:0}},wechatAccount(){return this.accounts.currentOptions[0]?{id:this.accounts.currentOptions[0].Id,type:this.accounts.currentOptions[0].Type}:{id:"",type:""}},condition(){var e;const t=ge.a.getQualifiedName("WeChatAccount__c");return o()(e="".concat(t," = '")).call(e,this.survey.WeChatAccountId,"'")}}),created(){for(const e of ue()(this.accountList)){const t=this.accountList[e];"Service Account"===t.Type&&this.accounts.options.push(JSON.parse(r()(t)))}if(this.survey.WeChatAccountId){var e;const t=M()(e=this.accounts.options).call(e,e=>e.Id===this.survey.WeChatAccountId);this.accounts.currentOptions=[t]}this.survey.Settings.Submit.RedirectRule.DefaultUrl&&(this.thanksMsgData.currentOptions=[{Name:this.$t("redirectTo"),value:"Redirect To"}]),this.survey.Settings.RelatedFormId&&this.selectForm({id:this.survey.Settings.RelatedFormId})},mounted(){if(this.survey.Settings){const e=this.survey.Settings.MessageIds,t=this.survey.Settings.TemplateIds,s=this.survey.Settings.SkillId;this.getResponseItems({messageIds:e,notificationTemplateIds:t,skillId:s})}},watch:{dropdownRefId(){"thanks"===this.dropdownType?(this.isNone=!1,this.isChoosingAccount=!1,this.dropdownOptionData.options=this.thanksMsgData.options,this.dropdownOptionData.currents=this.thanksMsgData.currentOptions):"accounts"===this.dropdownType&&(this.isChoosingAccount=!0,this.dropdownOptionData.options=this.accounts.options,this.dropdownOptionData.currents=this.accounts.currentOptions,this.dropdownOptionData.options?this.isNone=!0:this.isNone=!1)},survey:{handler(e){this.$emit("update:survey",e)},deep:!0},"survey.IsEditable":function(e){e&&!this.isLimitToOneResponse&&(this.isLimitToOneResponse=!0)},isLimitToOneResponse(e){!e&&this.survey.IsEditable&&(this.survey.IsEditable=!1)},"response.items":function(e){this.survey.Settings.MessageIds=[],this.survey.Settings.TemplateIds=[],this.survey.Settings.SkillId=null,ce()(e).call(e,e=>{var t;re()(t=["Text Message","Image","WeChat Structured Message","Link Structured Message","Voice Message","Video","Mini Program Page"]).call(t,e.type)?this.survey.Settings.MessageIds.push(e.id):"Notification Template"===e.type?this.survey.Settings.TemplateIds.push(e.id):"Skill"===e.type&&(this.survey.Settings.SkillId=e.id)})}},data(){return{currentLookUpItem:null,thanksMsgData:{options:[{Name:this.$t("redirectTo"),value:"Redirect To"},{Name:this.$t("showThankMsg"),value:"Show Thank You Message"}],currentOptions:[{Name:this.$t("showThankMsg"),value:"Show Thank You Message"}]},accounts:{options:[],currentOptions:[]},isSaving:!1,isNone:!1,formMetadata:{name:"Form__c",label:this.$tc("form",1),labelPural:this.$tc("form",2),icon:"custom.forms",linkField:{name:"Name",label:this.$t("relatedFormLabel")},fields:[],newObjectLink:"Self Link"},response:{items:[]}}},methods:{openUeditorPopup(){this.$emit("open-ueditor",this.survey.ThankYouMessage)},async getWeChatMessages(e){if(!e||0===e.length)return[];const t=await fe.k.getMessagesById(e);return oe()(t).call(t,e=>(e.updateDateTime?e.localizedUpdateDateTime=Object(x.e)(e.updateDateTime,this.$user.TimeZoneSidKey):e.weChatLastModifiedTime&&(e.localizedWeChatLastModifiedTime=Object(x.e)(e.weChatLastModifiedTime,this.$user.TimeZoneSidKey)),e))},async getNotificationTemplates(e){if(!e||0===e.length)return[];const t=await fe.m.getByIds(e);return oe()(t).call(t,e=>(e.localizedCreatedDate=Object(x.e)(e.createdDate,this.$user.TimeZoneSidKey),e))},async getSkill(e){if(!e)return[];return[await fe.r.getSkill(e)]},getResponseItems(e){let{messageIds:t,notificationTemplateIds:s,skillId:i}=e;this.$try(async()=>{const[e,n,o]=await u.a.all([this.getWeChatMessages(t),this.getNotificationTemplates(s),this.getSkill(i)]);this.response.items.push(...e,...n,...o)})},setThanksMsg(e){this.survey.ThankYouMessage=e},selectMergeField(e){this.survey.Settings.Submit.RedirectRule.DefaultUrl+=e,this.closeMergeField()},selectPicklist(e){if("thanks"===this.dropdownType)"Redirect To"===e[0].value&&this.thanksMsgData.currentOptions[0]&&"Redirect To"!==this.thanksMsgData.currentOptions[0]?this.survey.ThankYouMessage="":"Show Thank You Message"===e[0].value&&this.thanksMsgData.currentOptions[0]&&"Redirect To"===this.thanksMsgData.currentOptions[0].value&&(this.survey.Settings.Submit.RedirectRule.DefaultUrl=""),this.thanksMsgData.currentOptions=e;else if("accounts"===this.dropdownType){const t=this.survey.WeChatAccountId;this.accounts.currentOptions=e,this.survey.WeChatAccountId=e[0]&&e[0].Id?e[0].Id:"",this.survey.IsWeChatAuthenticationEnabled=!!this.survey.WeChatAccountId,this.isLimitToOneResponse=!!this.survey.WeChatAccountId,this.survey.IsEditable=!!this.survey.WeChatAccountId,t!==this.survey.WeChatAccountId&&this.survey.Settings.RelatedFormId&&this.$refs.formLookup.remove(),t!==this.survey.WeChatAccountId&&(this.response.items=[])}this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1},goToFormList(){const e=window.location.href,t=ie()(e).call(e,"#");if(t>-1){const s=e.substring(0,t+1);window.open("".concat(s,"/forms"),"","",!1)}},searchSelectForm(e){var t;const s=ge.a.getQualifiedName("Form__c"),i=o()(t="select Id, Name from ".concat(s," where Id = '")).call(t,e,"'");return Object(me.c)(i)},async selectForm(e){const t=e?e.id:"";if(this.survey.Settings.RelatedFormId=t,t)try{const e=await this.searchSelectForm(t),s=JSON.parse(I.a.unescape(e.data))[0];e.ok?this.currentLookUpItem={id:t,name:s.Name}:Object(S.f)(e)}catch(e){Object(S.f)(e)}},removeForm(e){this.survey.Settings.RelatedFormId="",this.currentLookUpItem=null}}},be=(s("rRKh"),s("f2JA")),we=s("6YtS"),_e=Object(L.a)(ye,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-settings-page"},[s("div",{staticClass:"slds-box slds-grid slds-grid_vertical form-settings-area"},[s("div",{staticClass:"slds-grid form-setting-item"},[s("label",{staticClass:"form-setting-label form-label",attrs:{for:""}},[e._v(e._s(e.$t("surveySubmitedAction")))]),e._v(" "),s("div",{staticClass:"slds-col form-setting-content"},[s("div",{staticClass:"thanks-msg-select"},[s("input-select",{attrs:{currents:e.thanksMsgData.currentOptions,type:"thanks"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)])]),e._v(" "),e.thanksMsgData.currentOptions[0]&&"Redirect To"===e.thanksMsgData.currentOptions[0].value?s("div",{staticClass:"slds-grid form-setting-item"},[s("label",{staticClass:"form-setting-label form-label",attrs:{for:""}},[e._v(e._s(e.$t("redirectUrl")))]),e._v(" "),s("div",{staticClass:"slds-col form-setting-content"},[s("div",{staticClass:"slds-grid slds-grid_vertical"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.survey.Settings.Submit.RedirectRule.DefaultUrl,expression:"survey.Settings.Submit.RedirectRule.DefaultUrl"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:e.survey.Settings.Submit.RedirectRule.DefaultUrl},on:{input:function(t){t.target.composing||e.$set(e.survey.Settings.Submit.RedirectRule,"DefaultUrl",t.target.value)}}}),e._v(" "),s("div",{staticClass:"merge-field-icon"},[s("span",{attrs:{title:"Insert merge field"},on:{click:function(t){return e.openMergeField()}}},[s("icon",{staticClass:"link-icon",attrs:{name:"insertTag",width:"16px",height:"16px","charket-icon":""}})],1)])])])]):s("div",{staticClass:"slds-grid form-setting-item"},[s("label",{staticClass:"form-setting-label",attrs:{for:""}},[e._v(e._s(e.$t("thankyouMessage")))]),e._v(" "),s("div",{staticClass:"slds-col form-setting-content"},[s("div",{staticClass:"slds-box thanks-msg-area charket-edui edui-init-style",domProps:{innerHTML:e._s(e.survey.ThankYouMessage)},on:{click:e.openUeditorPopup}})])]),e._v(" "),s("div",{staticClass:"settings-middle-title"},[e._v("\n      "+e._s(e.$t("wechatSettings"))+"\n    ")]),e._v(" "),s("div",{staticClass:"slds-grid form-setting-item"},[s("label",{staticClass:"form-setting-label form-label",attrs:{for:""}},[e._v(e._s(e.$t("wechatAccount")))]),e._v(" "),s("div",{staticClass:"slds-col form-setting-content"},[s("div",{staticClass:"thanks-msg-select"},[s("input-select",{attrs:{currents:e.accounts.currentOptions,type:"accounts"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid form-setting-item"},[s("label",{staticClass:"form-setting-label form-label",attrs:{for:""}},[e._v(e._s(e.$t("wechatResponse")))]),e._v(" "),s("div",{staticClass:"slds-col form-setting-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.survey.WeChatAccountId,expression:"!survey.WeChatAccountId"}],staticClass:"setting-disabled-cover"}),e._v(" "),s("wechat-response",{attrs:{"page-name":"Survey","wechat-account":e.wechatAccount,choosers:["Notification Template","Text Message","Image","Structured Message","Voice Message","Video","Mini Program Page","Skill"],multiple:""},model:{value:e.response,callback:function(t){e.response=t},expression:"response"}}),e._v(" "),s("div",{staticClass:"prefill-form-checkbox"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("span",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.survey.IsWeChatAuthenticationEnabled,expression:"survey.IsWeChatAuthenticationEnabled"}],attrs:{type:"checkbox",name:"options",id:"checkbox-1"},domProps:{checked:Array.isArray(e.survey.IsWeChatAuthenticationEnabled)?e._i(e.survey.IsWeChatAuthenticationEnabled,null)>-1:e.survey.IsWeChatAuthenticationEnabled},on:{change:function(t){var s=e.survey.IsWeChatAuthenticationEnabled,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=e._i(s,null);i.checked?o<0&&e.$set(e.survey,"IsWeChatAuthenticationEnabled",s.concat([null])):o>-1&&e.$set(e.survey,"IsWeChatAuthenticationEnabled",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.survey,"IsWeChatAuthenticationEnabled",n)}}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox-1"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$t("onlyAccessible")))])])])])])]),e._v(" "),s("div",{staticClass:"prefill-form-checkbox"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("span",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isLimitToOneResponse,expression:"isLimitToOneResponse"}],ref:"limitToOneResponseCheckbox",attrs:{type:"checkbox",name:"options",id:"checkbox-2"},domProps:{checked:Array.isArray(e.isLimitToOneResponse)?e._i(e.isLimitToOneResponse,null)>-1:e.isLimitToOneResponse},on:{change:function(t){var s=e.isLimitToOneResponse,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=e._i(s,null);i.checked?o<0&&(e.isLimitToOneResponse=s.concat([null])):o>-1&&(e.isLimitToOneResponse=s.slice(0,o).concat(s.slice(o+1)))}else e.isLimitToOneResponse=n}}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox-2"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$t("limitToOneResponseLabel")))])])])])])]),e._v(" "),s("div",{staticClass:"prefill-form-checkbox"},[s("div",{staticClass:"slds-form-element"},[s("div",{staticClass:"slds-form-element__control"},[s("span",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.survey.IsEditable,expression:"survey.IsEditable"}],attrs:{type:"checkbox",name:"options",id:"checkbox-3"},domProps:{checked:Array.isArray(e.survey.IsEditable)?e._i(e.survey.IsEditable,null)>-1:e.survey.IsEditable},on:{change:function(t){var s=e.survey.IsEditable,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=e._i(s,null);i.checked?o<0&&e.$set(e.survey,"IsEditable",s.concat([null])):o>-1&&e.$set(e.survey,"IsEditable",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.survey,"IsEditable",n)}}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"checkbox-3"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$t("canEditLabel")))]),e._v(" "),s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("editableTip")},expression:"{content: $t('editableTip')}"}],staticClass:"down-btn"},[s("icon",{attrs:{name:"info","class-name":"down-icon",width:"14px",height:"14px"}})],1)])])])])])],1)]),e._v(" "),s("div",{staticClass:"slds-grid form-setting-item"},[s("label",{staticClass:"form-setting-label form-label",attrs:{for:""}},[e._v(e._s(e.$t("relatedFormLabel")))]),e._v(" "),s("div",{staticClass:"slds-col form-setting-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.survey.WeChatAccountId,expression:"!survey.WeChatAccountId"}],staticClass:"setting-disabled-cover"}),e._v(" "),s("div",{staticClass:"slds-form-element__control form-input"},[s("lookup",{ref:"formLookup",attrs:{"ld-selected-item":e.currentLookUpItem,"ld-metadatas":e.formMetadata,condition:e.condition},on:{select:function(t){return e.selectForm(t)},remove:function(t){return e.removeForm(t)},"self-link":e.goToFormList}})],1),e._v(" "),s("div",{staticClass:"select-form-tip"},[e._v("\n          "+e._s(e.$t("relatedFormTip"))+"\n        ")])])])]),e._v(" "),e.showDropdown?s("dropdown",{attrs:{options:e.dropdownOptionData.options,currents:e.dropdownOptionData.currents,left:e.dropdownLeft,top:e.dropdownTop,width:e.dropdownWidth,"default-label":e.isChoosingAccount,none:e.isNone},on:{"select-option":e.selectPicklist,close:e.closeDropdown}}):e._e(),e._v(" "),e.showMergeField?s("select-field",{attrs:{"page-name":"Survey"},on:{"close-merge-field":function(t){return e.closeMergeField()},"select-merge-field":e.selectMergeField}}):e._e()],1)}),[],!1,null,"0e15192b",null);"function"==typeof be.default&&Object(be.default)(_e),"function"==typeof we.default&&Object(we.default)(_e);var Ce=_e.exports,Se={props:{surveyId:{type:String,default:""}},mounted(){this.surveyId,this.surveyId&&this.getSurveyUrl()},data:()=>({surveyUrl:""}),methods:{async getSurveyUrl(){try{const t=await(e=this.surveyId,Object(b.a)({method:"SurveyRemoteActions.getSurveyUrl",args:[e]}));t.ok?this.surveyUrl=I.a.unescape(t.data):Object(S.f)(t)}catch(e){Object(S.f)(e)}var e}}},xe=(s("TO/l"),s("XP+o")),ke=Object(L.a)(Se,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-publish-page"},[s("div",{staticClass:"publish-content-area"},[s("div",{staticClass:"publish-title"},[e._v("\n      "+e._s(e.$t("surveyLink"))+"\n    ")]),e._v(" "),s("div",{staticClass:"publish-info"},[e._v("\n      "+e._s(e.$t("surveyLinkTip"))+"\n    ")]),e._v(" "),s("div",{staticClass:"slds-box publish-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.surveyUrl,expression:"surveyUrl"}],staticClass:"slds-textarea",attrs:{readonly:"readonly",name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.surveyUrl},on:{input:function(t){t.target.composing||(e.surveyUrl=t.target.value)}}}),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand copy-link-button",on:{click:function(t){e.$_charket_copyText(e.surveyUrl,e.$t("copySuccess"),e.$t("copyFailed"))}}},[e._v(e._s(e.$t("copyLinkBtn")))])])])])}),[],!1,null,"16d33145",null);"function"==typeof xe.default&&Object(xe.default)(ke);var Ie=ke.exports,Te={props:{survey:Object,currentQuestionIndex:Number},computed:{currentSurvey(){return this.survey}},components:{Icon:U.a},mounted(){this.setCheckboxColor(this.currentSurvey.Styles.CheckedColor)},data:()=>({customStyleNode:null}),watch:{currentQuestionIndex(e){this.$nextTick(()=>{if(this.$refs.questionArea.children[e]){const t=this.$refs.questionArea.children[e].offsetTop-20;this.$emit("scroll-intoview",t)}})},"currentSurvey.Styles.CheckedColor"(e){this.setCheckboxColor(e)}},methods:{setCheckboxColor(e){e="none"===e?"#09bb07":e,this.customStyleNode||(this.customStyleNode=document.createElement("style"),document.head.appendChild(this.customStyleNode)),this.customStyleNode.innerHTML=".weui-check:checked + .weui-icon-checked::before{content: '\\EA06';color:".concat(e," !important}")},selectRate(e,t){e.isSelected=!0;let s=!0;for(const i of t)e.isSelected&&(i.isSelected=s,i===e&&(s=!1))},selectOther(e){const t=document.getElementById(e);t.checked||(t.checked=!0)},setBtn(){this.$emit("set-btn")}},beforeDestroy(){document.head.removeChild(this.customStyleNode)}},Le=(s("fOtD"),s("/X08")),Oe=Object(L.a)(Te,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-box slds-grid slds-grid_vertical survey-preview-page",style:{"background-color":"none"===e.currentSurvey.Styles.FormBg?"#efeef4":e.currentSurvey.Styles.FormBg}},[s("div",{staticClass:"banner-image-area"},[e.currentSurvey.BannerImageUrl?e._e():s("div",{staticClass:"slds-grid slds-grid_vertical banner-image"},[s("icon",{attrs:{name:"image",width:"28px",height:"28px","fill-color":"#706e6b"}}),e._v(" "),s("span",[e._v(e._s(e.$t("bannerImage")))])],1),e._v(" "),e.currentSurvey.BannerImageUrl?s("img",{attrs:{src:e.currentSurvey.BannerImageUrl,alt:""}}):e._e()]),e._v(" "),s("div",{staticClass:"survey-title-area",class:{"survey-title-nocontent":!e.currentSurvey.Title},style:{"font-family":e.currentSurvey.Styles.PageFontFamily},domProps:{textContent:e._s(e.currentSurvey.Title?e.currentSurvey.Title:e.$t("title"))}}),e._v(" "),s("div",{staticClass:"survey-description-area charket-edui edui-init-style",class:{"survey-description-nocontent":!e.currentSurvey.Description},style:{"font-family":e.currentSurvey.Styles.PageFontFamily},domProps:{innerHTML:e._s(e.currentSurvey.Description?e.currentSurvey.Description:e.$t("description"))}}),e._v(" "),s("ul",{ref:"questionArea",staticClass:"survey-questions-area",style:{"font-family":e.currentSurvey.Styles.PageFontFamily}},e._l(e.currentSurvey.Questions,(function(t,i){return s("li",{key:i,staticClass:"survey-question"},[t.IsRequired&&"None"===e.currentSurvey.Styles.RequiredIcon?s("span",{staticClass:"item-require-icon"},[e._v("*")]):e._e(),e._v(" "),"Single Choice"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells weui-cells_radio"},e._l(t.Answers,(function(t,n){return s("label",{key:n,staticClass:"weui-cell weui-check__label",style:{"font-size":e.currentSurvey.Styles.LabelFontSize,color:"none"===e.currentSurvey.Styles.LabelColor?"#000000":e.currentSurvey.Styles.LabelColor},attrs:{for:i+"surveyQuestionPreview"+n}},[s("div",{staticClass:"weui-cell__bd"},[t.IsOther?s("div",{staticClass:"slds-grid survey-choice-other"},[s("span",{staticClass:"other-padding"},[e._v(e._s(t.Choice))]),e._v(" "),s("div",{staticClass:"slds-col choice-other-wrapper"},[s("input",{staticClass:"choice-other-input",attrs:{type:"text"},on:{keydown:function(t){return e.selectOther(i+"surveyQuestionPreview"+n)}}})])]):s("p",[e._v(e._s(t.Choice))])]),e._v(" "),s("div",{staticClass:"weui-cell__ft"},[s("input",{staticClass:"weui-check",attrs:{type:"radio",name:i+"surveyQuestionPreviewRadio",id:i+"surveyQuestionPreview"+n}}),e._v(" "),s("span",{staticClass:"weui-icon-checked"})])])})),0)]):e._e(),e._v(" "),"Multiple Choice"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells weui-cells_checkbox"},e._l(t.Answers,(function(t,n){return s("label",{key:n,staticClass:"weui-cell weui-check__label",style:{"font-size":e.currentSurvey.Styles.LabelFontSize,color:"none"===e.currentSurvey.Styles.LabelColor?"#000000":e.currentSurvey.Styles.LabelColor},attrs:{for:i+"surveyQuestionPreview"+n}},[s("div",{staticClass:"weui-cell__hd"},[s("input",{staticClass:"weui-check",attrs:{type:"checkbox",id:i+"surveyQuestionPreview"+n}}),e._v(" "),s("i",{staticClass:"weui-icon-checked"})]),e._v(" "),s("div",{staticClass:"weui-cell__bd"},[t.IsOther?s("div",{staticClass:"slds-grid survey-choice-other"},[s("span",{staticClass:"other-padding"},[e._v(e._s(t.Choice))]),e._v(" "),s("div",{staticClass:"slds-col choice-other-wrapper"},[s("input",{staticClass:"choice-other-input",attrs:{type:"text"},on:{keydown:function(t){return e.selectOther(i+"surveyQuestionPreview"+n)}}})])]):s("p",[e._v(e._s(t.Choice))])])])})),0)]):e._e(),e._v(" "),"Dropdown"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells"},[s("div",{staticClass:"weui-cell weui-cell_select"},[s("div",{staticClass:"weui-cell__bd",style:{"font-size":e.currentSurvey.Styles.LabelFontSize,color:"none"===e.currentSurvey.Styles.LabelColor?"#000000":e.currentSurvey.Styles.LabelColor}},[s("select",{staticClass:"weui-select",attrs:{name:"select1"}},[t.Placeholder?s("option",{attrs:{selected:"selected",value:""}},[e._v(e._s(t.Placeholder))]):e._e(),e._v(" "),e._l(t.Answers,(function(t,i){return s("option",{key:i,attrs:{value:"1"}},[e._v(e._s(t.Choice))])}))],2)])])])]):e._e(),e._v(" "),"Text"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells"},[s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__bd"},[s("input",{staticClass:"weui-input",style:{"font-size":e.currentSurvey.Styles.LabelFontSize,color:"none"===e.currentSurvey.Styles.LabelColor?"#000000":e.currentSurvey.Styles.LabelColor},attrs:{type:"text",placeholder:t.Placeholder}})])])])]):e._e(),e._v(" "),"Long Text"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells weui-cells_form"},[s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__bd",style:{"font-size":e.currentSurvey.Styles.LabelFontSize,color:"none"===e.currentSurvey.Styles.LabelColor?"#000000":e.currentSurvey.Styles.LabelColor}},[s("textarea",{staticClass:"weui-textarea",attrs:{placeholder:t.Placeholder,rows:"3"}})])])])]):e._e(),e._v(" "),"Date"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells weui-cells_form"},[s("div",{staticClass:"weui-cell"},[e._m(0,!0),e._v(" "),s("div",{staticClass:"weui-cell__bd"},[s("input",{staticClass:"weui-input",style:{"font-size":e.currentSurvey.Styles.LabelFontSize,color:"none"===e.currentSurvey.Styles.LabelColor?"#000000":e.currentSurvey.Styles.LabelColor},attrs:{type:"date",placeholder:t.Placeholder,value:""}})])])])]):e._e(),e._v(" "),"Datetime"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells weui-cells_form"},[s("div",{staticClass:"weui-cell"},[e._m(1,!0),e._v(" "),s("div",{staticClass:"weui-cell__bd datetime-input-cell"},[s("input",{staticClass:"weui-input",style:{"font-size":e.currentSurvey.Styles.LabelFontSize,color:"none"===e.currentSurvey.Styles.LabelColor?"#000000":e.currentSurvey.Styles.LabelColor},attrs:{type:"datetime-local",placeholder:t.Placeholder,value:""}})])])])]):e._e(),e._v(" "),"Rating"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n          "),"None"!==e.currentSurvey.Styles.RequiredIcon&&t.IsRequired?s("span",{style:{color:"Asterisk"===e.currentSurvey.Styles.RequiredIcon?"#9faab5":"#c23934"}},[e._v("*")]):e._e()]),e._v(" "),s("div",{staticClass:"weui-cells"},[s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__bd"},[s("div",{staticClass:"slds-grid"},e._l(t.Answers,(function(n,o){return s("label",{key:o,staticClass:"rate-not-select",class:{"rate-has-select":n.isSelected},attrs:{for:i+"rating"+o},on:{click:function(s){return e.selectRate(n,t.Answers)}}})})),0)])])])]):e._e(),e._v(" "),"Heading"===t.Type?s("div",{staticClass:"survey-choice-radio"},[s("div",{staticClass:"weui-cells__title",style:{"font-size":e.currentSurvey.Styles.TitleFontSize,color:t.IsHidden?"#b2b2b2":"none"===e.currentSurvey.Styles.TitleColor?"#999999":e.currentSurvey.Styles.TitleColor}},[e._v("\n          "+e._s(t.Question?t.Question:"...")+"\n        ")])]):e._e()])})),0),e._v(" "),s("a",{staticClass:"weui-btn weui-btn_primary custom-btn",style:{"background-color":"none"===e.currentSurvey.Styles.ButtonBg?"#1aad19":e.currentSurvey.Styles.ButtonBg,color:"none"===e.currentSurvey.Styles.ButtonColor?"#fff":e.currentSurvey.Styles.ButtonColor,"font-size":e.currentSurvey.Styles.ButtonFontSize},attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.setBtn()}}},[e._v(e._s(e.currentSurvey.ButtonSettings?e.currentSurvey.ButtonSettings.Label:""))])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label",attrs:{for:""}},[this._v("日期")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"weui-cell__hd"},[t("label",{staticClass:"weui-label",attrs:{for:""}},[this._v("日期")])])}],!1,null,"0b28469b",null);"function"==typeof Le.default&&Object(Le.default)(Oe);var $e=Oe.exports,Pe=s("Kmr5"),Ne={mixins:[f.a],components:{InputSelect:v.a,Dropdown:m.a,LdTooltip:Pe.LdTooltip},created(){this.question,this.items;for(const e of this.items)this.questions.options.push({Name:e.Label,value:e.Question}),this.question&&this.question.Type===e.Question.Type&&(this.questions.currentOptions.push({Name:e.Label,value:e.Question}),"URL Parameter"===this.question.PrefillType?this.parameterOptionData.currentOptions=[{Name:this.$t("urlParameterLabel"),value:"URL Parameter"}]:"Fixed Value"===this.question.PrefillType?this.parameterOptionData.currentOptions=[{Name:this.$t("fixedValueLabel"),value:"Fixed Value"}]:"None"===this.question.PrefillType?this.parameterOptionData.currentOptions=[{Name:this.$t("global.noneLabel"),value:"None"}]:this.parameterOptionData.currentOptions=[]);this.dropdownOptionData.options=this.questions.options,this.dropdownOptionData.currents=this.questions.currentOptions},props:{question:Object,items:Array,submit:String,showBtnProperties:Boolean},data(){return{questions:{options:[],currentOptions:[]},parameterOptionData:{options:[{Name:this.$t("global.noneLabel"),value:"None"},{Name:this.$t("urlParameterLabel"),value:"URL Parameter"},{Name:this.$t("fixedValueLabel"),value:"Fixed Value"}],currentOptions:[]},isParameter:!1}},computed:{commonItems(){return[...this.items]},submitBtn:{get(){return this.submit},set(e){this.$emit("update:submit",e)}},currentQuestion:{get(){if(this.question){var e;let s=M()(e=this.items).call(e,e=>e.Question.Type===this.question.Type);if(this.questions.currentOptions=[{Name:s.Label,value:this.question.Question}],"URL Parameter"===this.question.PrefillType)this.parameterOptionData.currentOptions=[{Name:this.$t("urlParameterLabel"),value:"URL Parameter"}],this.question.IsHidden=!0;else if("Fixed Value"===this.question.PrefillType){var t;this.parameterOptionData.currentOptions=[{Name:this.$t("fixedValueLabel"),value:"Fixed Value"}],this.question.IsHidden=!0,M()(t=this.question.Answers).call(t,e=>e.IsOther)&&this.question.Answers.pop()}else"None"===this.question.PrefillType?this.parameterOptionData.currentOptions=[{Name:this.$t("global.noneLabel"),value:"None"}]:this.parameterOptionData.currentOptions=[]}return this.question},set(e){this.$emit("set-question",e)}},scales(){const e={options:[{Name:"2",value:2},{Name:"3",value:3},{Name:"4",value:4},{Name:"5",value:5},{Name:"6",value:6},{Name:"7",value:7},{Name:"8",value:8},{Name:"9",value:9},{Name:"10",value:10}],currentOptions:[{Name:"5",value:5}]};return"Rating"===this.currentQuestion.Type&&(e.currentOptions=[{Name:String(this.currentQuestion.Answers.length),value:this.currentQuestion.Answers.length}]),e},otherOption:{get(){var e;return M()(e=this.currentQuestion.Answers).call(e,e=>e.IsOther)},set(e){if(e){const e=this.currentQuestion.Answers.length+1,t={Id:"",Choice:this.$t("other"),IsOther:!0,Order:e};this.currentQuestion.Answers.push(t)}else{var t;M()(t=this.currentQuestion.Answers).call(t,e=>e.IsOther)&&this.currentQuestion.Answers.pop()}}},hasPlaceholderText(){return"Text"===this.currentQuestion.Type||"Long Text"===this.currentQuestion.Type},isSingleOrMultiple(){return"Single Choice"===this.currentQuestion.Type||"Multiple Choice"===this.currentQuestion.Type},isPrefillValueDisabled(){return!this.parameterOptionData.currentOptions[0]||"None"===this.question.PrefillType}},watch:{dropdownRefId(){"questions"===this.dropdownType?(this.dropdownOptionData.options=this.questions.options,this.dropdownOptionData.currents=this.questions.currentOptions,this.isParameter=!1):"scale"===this.dropdownType?(this.dropdownOptionData.options=this.scales.options,this.dropdownOptionData.currents=this.scales.currentOptions,this.isParameter=!1):"prefill"===this.dropdownType&&(this.dropdownOptionData.options=this.parameterOptionData.options,this.dropdownOptionData.currents=this.parameterOptionData.currentOptions,this.isParameter=!0),this.dropdownOptionData.options,this.dropdownOptionData.options?this.isNone=!0:this.isNone=!1}},methods:{selectPicklist(e){if("questions"===this.dropdownType){this.questions.currentOptions=e;const t=this.currentQuestion.Order;let s=JSON.parse(r()(e[0].value));s.Order=t,s.Question=this.currentQuestion.Question,s.SurveyQuestionId=this.currentQuestion.SurveyQuestionId;const i=["Single Choice","Multiple Choice","Dropdown"],n=D()(i).call(i,e=>e===this.currentQuestion.Type)&&D()(i).call(i,e=>e===s.Type);s.Answers=n?this.currentQuestion.Answers:s.Answers,this.currentQuestion=s}else if("scale"===this.dropdownType){this.scales.currentOptions=e;const t=[];let s=this.scales.currentOptions[0].value;for(;s;){const e={Choice:s,IsOther:!1,Order:s--,isSelected:!1};t.unshift(e)}this.currentQuestion.Answers=t}else"prefill"===this.dropdownType&&(this.parameterOptionData.currentOptions=e,this.currentQuestion.PrefillType=e[0]?e[0].value:"",this.currentQuestion.PrefillValue=e[0]?this.currentQuestion.PrefillValue:"");this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1},switchHidden(e){"Fixed Value"===e.PrefillType&&e.IsHidden&&(e.PrefillType="",e.PrefillValue="",this.parameterOptionData.currentOptions=[]),e.IsHidden=!e.IsHidden}}},Ae=(s("SyMb"),s("wfdH")),De=Object(L.a)(Ne,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"survey-properties-page"},[e.question||e.showBtnProperties?e._e():s("div",{staticClass:"no-properties"},[e._v("\n    "+e._s(e.$t("noProperties"))+"\n  ")]),e._v(" "),!e.question&&e.showBtnProperties?s("div",{staticClass:"slds-grid slds-grid_vertical"},[s("label",{staticClass:"place-holder-label",attrs:{for:""}},[e._v(e._s(e.$t("btnLabel")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.submitBtn,expression:"submitBtn"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:e.submitBtn},on:{input:function(t){t.target.composing||(e.submitBtn=t.target.value)}}})]):e._e(),e._v(" "),e.question?s("div",{staticClass:"slds-grid slds-grid_vertical"},[s("div",{staticClass:"survey-properties-header"},[s("input-select",{attrs:{currents:e.questions.currentOptions,type:"questions"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical"},["Rating"===e.currentQuestion.Type?s("div",{staticClass:"slds-grid slds-grid_vertical place-holder-area"},[s("label",{staticClass:"place-holder-label",attrs:{for:""}},[e._v(e._s(e.$t("scaleLabel")))]),e._v(" "),s("input-select",{attrs:{currents:e.scales.currentOptions,type:"scale"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1):e._e(),e._v(" "),"Dropdown"===e.currentQuestion.Type?s("div",{staticClass:"slds-grid slds-grid_vertical place-holder-area"},[s("label",{staticClass:"place-holder-label",attrs:{for:""}},[e._v(e._s(e.$t("placeHolderChoice")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentQuestion.Placeholder,expression:"currentQuestion.Placeholder"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:e.currentQuestion.Placeholder},on:{input:function(t){t.target.composing||e.$set(e.currentQuestion,"Placeholder",t.target.value)}}})]):e._e(),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical place-holder-area"},[s("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[s("label",{staticClass:"place-holder-label",attrs:{for:""}},[e._v(e._s(e.$t("preFillTypeLabel")))]),e._v(" "),s("ld-tooltip",{staticClass:"down-btn prefill-type-tooltip"},[s("p",{domProps:{innerHTML:e._s(e.$t("prefillTypeTooltip"))}}),e._v(" "),s("icon",{attrs:{slot:"activator",name:"info","class-name":"slds-icon_xx-small down-icon"},slot:"activator"})],1)],1),e._v(" "),s("div",{staticClass:"slds-grid choose-pre-fill-type"},[s("div",{staticClass:"pre-fill-dropdown"},[s("input-select",{attrs:{currents:e.parameterOptionData.currentOptions,type:"prefill"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1),e._v(" "),s("div",{staticClass:"slds-col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentQuestion.PrefillValue,expression:"currentQuestion.PrefillValue"}],staticClass:"slds-input",attrs:{disabled:e.isPrefillValueDisabled,type:"text",maxlength:"255"},domProps:{value:e.currentQuestion.PrefillValue},on:{input:function(t){t.target.composing||e.$set(e.currentQuestion,"PrefillValue",t.target.value)}}})])])]),e._v(" "),e.hasPlaceholderText?s("div",{staticClass:"slds-grid slds-grid_vertical place-holder-area"},[s("label",{staticClass:"place-holder-label",attrs:{for:""}},[e._v(e._s(e.$t("placeHolderText")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentQuestion.Placeholder,expression:"currentQuestion.Placeholder"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:e.currentQuestion.Placeholder},on:{input:function(t){t.target.composing||e.$set(e.currentQuestion,"Placeholder",t.target.value)}}})]):e._e(),e._v(" "),s("span",{staticClass:"slds-checkbox check-box-area"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentQuestion.IsRequired,expression:"currentQuestion.IsRequired"}],attrs:{type:"checkbox",name:"options",id:"survey-properties-checkbox-1"},domProps:{checked:Array.isArray(e.currentQuestion.IsRequired)?e._i(e.currentQuestion.IsRequired,null)>-1:e.currentQuestion.IsRequired},on:{change:function(t){var s=e.currentQuestion.IsRequired,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=e._i(s,null);i.checked?o<0&&e.$set(e.currentQuestion,"IsRequired",s.concat([null])):o>-1&&e.$set(e.currentQuestion,"IsRequired",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.currentQuestion,"IsRequired",n)}}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"survey-properties-checkbox-1"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$t("requiredLabel")))])])]),e._v(" "),s("span",{staticClass:"slds-checkbox check-box-area"},[s("input",{attrs:{type:"checkbox",name:"options",id:"survey-properties-checkbox-3"},domProps:{checked:e.currentQuestion.IsHidden},on:{click:function(t){return e.switchHidden(e.currentQuestion)}}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"survey-properties-checkbox-3"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$t("hiddenLabel")))])])]),e._v(" "),e.isSingleOrMultiple?s("span",{staticClass:"slds-checkbox check-box-area"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.otherOption,expression:"otherOption"}],attrs:{type:"checkbox",name:"options",id:"survey-properties-checkbox-2",disabled:"Fixed Value"===e.currentQuestion.PrefillType},domProps:{checked:Array.isArray(e.otherOption)?e._i(e.otherOption,null)>-1:e.otherOption},on:{change:function(t){var s=e.otherOption,i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=e._i(s,null);i.checked?o<0&&(e.otherOption=s.concat([null])):o>-1&&(e.otherOption=s.slice(0,o).concat(s.slice(o+1)))}else e.otherOption=n}}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"survey-properties-checkbox-2"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$t("addOtherOption")))])])]):e._e(),e._v(" "),e.otherOption&&e.isSingleOrMultiple?s("span",{staticClass:"slds-grid slds-grid_vertical check-box-area"},[s("label",{staticClass:"other-text-label",attrs:{for:""}},[e._v(e._s(e.$t("otherText")))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.otherOption.Choice,expression:"otherOption.Choice"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:e.otherOption.Choice},on:{input:function(t){t.target.composing||e.$set(e.otherOption,"Choice",t.target.value)}}})]):e._e()]),e._v(" "),e.showDropdown?s("dropdown",{attrs:{options:e.dropdownOptionData.options,currents:e.dropdownOptionData.currents,"default-label":e.isParameter,left:e.dropdownLeft,top:e.dropdownTop,width:e.dropdownWidth,none:e.isNone},on:{"select-option":e.selectPicklist,close:e.closeDropdown}}):e._e()],1):e._e()])}),[],!1,null,"68b290e3",null);"function"==typeof Ae.default&&Object(Ae.default)(De);var Be=De.exports,Re={props:{survey:{type:Object,default:()=>({})},errorIndex:Number},mixins:[f.a],mounted(){this.dropdownHasNone=!1;for(const e of this.survey.Questions){const t={Name:e.Question,value:e.SurveyQuestionId};({Dropdown:!0,"Single Choice":!0,"Multiple Choice":!0})[e.Type]&&!e.IsHidden&&this.filteredQuestionOptions.push(t)}this.dropdownHasNone=0===this.filteredQuestionOptions.length},components:{Icon:U.a,InputSelect:v.a,Dropdown:m.a},computed:{rules:{get(){return this.survey.RuleSettings.Rules},set(e){this.survey.RuleSettings.Rules=e}}},data(){return{isSingleSelection:!0,dropdownHasNone:!1,conditionChoices:[{Name:this.$t("is"),value:"equals"},{Name:this.$t("isNot"),value:"not equals"}],actionChoices:[{Name:this.$t("hide"),value:"hide"},{Name:this.$t("show"),value:"show"}],filteredQuestionOptions:[]}},watch:{dropdownType(){var e,t,s,i,n;if(this.isSingleSelection=!0,ie()(e=this.dropdownType).call(e,"conditionQuestion")>-1){this.dropdownOptionData.options=this.filteredQuestionOptions;const e=this.dropdownType.split("conditionQuestion"),t=this.rules[e[0]].Conditions[e[1]];this.dropdownOptionData.currents=this.conditionOptionFilter("question",t)}else if(ie()(t=this.dropdownType).call(t,"conditionChoice")>-1){this.dropdownOptionData.options=this.conditionChoices;const e=this.dropdownType.split("conditionChoice"),t=this.rules[e[0]].Conditions[e[1]];this.dropdownOptionData.currents=this.conditionOptionFilter("choice",t)}else if(ie()(s=this.dropdownType).call(s,"conditionAnswer")>-1){const e=this.dropdownType.split("conditionAnswer");this.dropdownOptionData.options=this.conditionAnswersFilter(this.rules[e[0]].Conditions[e[1]].QuestionId);const t=this.rules[e[0]].Conditions[e[1]];this.dropdownOptionData.currents=this.conditionOptionFilter("answer",t)}else if(ie()(i=this.dropdownType).call(i,"actionChoice")>-1){this.dropdownOptionData.options=this.actionChoices;const e=this.dropdownType.split("actionChoice"),t=this.rules[e[0]].Actions[e[1]];this.dropdownOptionData.currents=this.actionOptionFilter("choice",t)}else if(ie()(n=this.dropdownType).call(n,"actionQuestion")>-1){this.isSingleSelection=!1;const e=this.dropdownType.split("actionQuestion"),t=()=>{const t=this.rules[e[0]].Conditions[0].QuestionId,s=[];if(t){var i;this.dropdownHasNone=!1;const e=M()(i=this.survey.Questions).call(i,e=>e.SurveyQuestionId===t).Order;for(const t of this.survey.Questions)t.Order>e&&!t.IsHidden&&s.push({Name:t.Question,value:t.SurveyQuestionId})}return this.dropdownHasNone=0===s.length,s};this.dropdownOptionData.options=t();const s=this.rules[e[0]].Actions[e[1]];this.dropdownOptionData.currents=this.actionOptionFilter("question",s)}},survey:{handler(e){this.$emit("update:survey",e)},deep:!0}},methods:{addRule(){var e;Q()(e=this.rules).call(e,0,0,{Exp:"",Conditions:[{Id:1,QuestionId:"",Op:"equals",AnswerId:""}],Actions:[{Type:"hide",QuestionIds:[]}]})},conditionAnswersFilter(e){var t;this.dropdownHasNone=!1;const s=M()(t=this.survey.Questions).call(t,t=>t.SurveyQuestionId===e),i=[];if(s)for(const e of s.Answers)i.push({Name:e.Choice,value:e.AnswerId});return this.dropdownHasNone=0===i.length,i},conditionOptionFilter(e,t){var s;const i=M()(s=this.survey.Questions).call(s,e=>e.SurveyQuestionId===t.QuestionId);if("question"===e)return i?[{Name:i.Question,value:i.SurveyQuestionId}]:[{Name:this.$t("selectAQuestion"),value:null}];if("choice"===e){return[{Name:{equals:this.$t("is"),"not equals":this.$t("isNot")}[t.Op],value:t.Op}]}if("answer"===e){if(i){var n;const e=M()(n=i.Answers).call(n,e=>e.AnswerId===t.AnswerId);return e?[{Name:e.Choice,value:e.AnswerId}]:[{Name:this.$t("selectAnAnswer")}]}return[{Name:this.$t("selectAnAnswer"),value:null}]}},actionOptionFilter(e,t){if("choice"===e){return[{Name:{hide:this.$t("hide"),show:this.$t("show")}[t.Type],value:t.Type}]}if("question"===e){const e=[];for(const i of t.QuestionIds){var s;const t=M()(s=this.survey.Questions).call(s,e=>e.SurveyQuestionId===i);e.push({Name:t.Question,value:t.SurveyQuestionId})}return e}},selectPicklist(e){var t,s,i,n,o;if(ie()(t=this.dropdownType).call(t,"conditionQuestion")>-1){const t=this.dropdownType.split("conditionQuestion"),s=t[0],i=t[1];this.rules[s].Conditions[i].QuestionId=e[0].value,this.showDropdown=!1}else if(ie()(s=this.dropdownType).call(s,"conditionChoice")>-1){const t=this.dropdownType.split("conditionChoice"),s=t[0],i=t[1];this.rules[s].Conditions[i].Op=e[0].value,this.showDropdown=!1}else if(ie()(i=this.dropdownType).call(i,"conditionAnswer")>-1){const t=this.dropdownType.split("conditionAnswer"),s=t[0],i=t[1];this.rules[s].Conditions[i].AnswerId=e[0].value,this.showDropdown=!1}else if(ie()(n=this.dropdownType).call(n,"actionChoice")>-1){const t=this.dropdownType.split("actionChoice"),s=t[0],i=t[1];this.rules[s].Actions[i].Type=e[0].value,this.showDropdown=!1}else if(ie()(o=this.dropdownType).call(o,"actionQuestion")>-1){const t=this.dropdownType.split("actionQuestion"),s=t[0],i=t[1];this.rules[s].Actions[i].QuestionIds=(()=>{const t=[];for(const s of e)t.push(s.value);return t})()}this.$root.$emit("close-other-dropdown",null)},removeCondition(e,t){var s,i;const n=R()(s=this.rules[e].Conditions).call(s,e=>t===e);var o;(Q()(i=this.rules[e].Conditions).call(i,n,1),0===this.rules[e].Conditions.length)&&Q()(o=this.rules).call(o,e,1)},removeActionQuestion(e,t,s){this.rules[t].Actions[s].QuestionIds=(()=>{const t=[];for(const s of e)t.push(s.value);return t})()}}},Fe=(s("Ie13"),s("aX87")),Qe=Object(L.a)(Re,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"survey-rules-page"},[s("div",{staticClass:"slds-box survey-rules-content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.errorIndex>-1,expression:"errorIndex > -1"}],staticClass:"survey-error-tip"},[e._v("\n      "+e._s(e.$t("reviewPage"))+"\n    ")]),e._v(" "),s("div",{staticClass:"rules-content-header"},[s("div",{staticClass:"slds-grid slds-grid_align-center rules-add-btn",on:{click:function(t){return e.addRule()}}},[s("span",{staticClass:"rules-add-icon"},[s("icon",{attrs:{name:"add",width:"14px",height:"14px","fill-color":"#706e6b"}})],1),e._v(" "),s("span",{staticClass:"rules-add-text"},[e._v(e._s(e.$t("addRuleBtn")))])])]),e._v(" "),s("ul",{staticClass:"rules-content-list"},e._l(e.rules,(function(t,i){return s("li",{key:i,staticClass:"slds-box rules-list-item",class:{"error-border":e.errorIndex===i}},[s("div",{staticClass:"rules-set-area"},[e._l(t.Conditions,(function(t,n){return s("div",{key:n,staticClass:"slds-grid rules-set-item"},[s("label",{staticClass:"rules-set-label",attrs:{for:""}},[e._v(e._s(e.$t("if")))]),e._v(" "),s("div",{staticClass:"set-select-area"},[s("div",{staticClass:"slds-grid slds-grid_align-spread"},[s("div",{staticClass:"select-top-question"},[s("input-select",{attrs:{currents:e.conditionOptionFilter("question",t),type:i+"conditionQuestion"+n},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1),e._v(" "),s("div",{staticClass:"select-top-condition"},[s("input-select",{attrs:{currents:e.conditionOptionFilter("choice",t),type:i+"conditionChoice"+n},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid select-bottom"},[s("div",{staticClass:"select-bottom-answer"},[s("input-select",{attrs:{currents:e.conditionOptionFilter("answer",t),type:i+"conditionAnswer"+n},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1),e._v(" "),s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("remove")},expression:"{content: $t('remove')}"}],staticClass:"select-bottom-icon",on:{click:function(s){return e.removeCondition(i,t)}}},[s("icon",{attrs:{name:"error",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])])])})),e._v(" "),e._l(t.Actions,(function(t,n){return s("div",{key:n,staticClass:"slds-grid rules-set-item rules-set-item-then"},[s("label",{staticClass:"rules-set-label",attrs:{for:""}},[e._v(e._s(e.$t("then")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread"},[s("div",{staticClass:"select-action-left"},[s("input-select",{attrs:{currents:e.actionOptionFilter("choice",t),type:i+"actionChoice"+n},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1),e._v(" "),s("div",{staticClass:"select-action-right"},[s("input-select",{attrs:{currents:e.actionOptionFilter("question",t),type:i+"actionQuestion"+n},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown,"remove-option":function(t){return e.removeActionQuestion(t,i,n)}}})],1)])])}))],2)])})),0)]),e._v(" "),e.showDropdown?s("dropdown",{attrs:{options:e.dropdownOptionData.options,currents:e.dropdownOptionData.currents,left:e.dropdownLeft,top:e.dropdownTop,width:e.dropdownWidth,"is-single-selection":e.isSingleSelection,none:e.dropdownHasNone},on:{"select-option":e.selectPicklist,close:e.closeDropdown}}):e._e()],1)}),[],!1,null,"751e1ac8",null);"function"==typeof Fe.default&&Object(Fe.default)(Qe);var Ee=Qe.exports,Me=s("aF8D"),ze=s("mmw4"),qe=s("oG9Y"),He=s.n(qe),Ue=s("hnm1"),je=s.n(Ue),Ve=s("kWsH"),We=s.n(Ve);let Ke=[];function Je(e){let t=[];if(e.children.length>0)for(const s of e.children)1===s.nodeType&&t.push(s.getBoundingClientRect().top+s.offsetHeight/2);return t}function Ye(e,t,s){if(0===e.children.length)e.appendChild(t);else{var i;const n=We()(i=[...Ke]).call(i,(e,t)=>Math.abs(e-s)-Math.abs(t-s))[0],o=R()(Ke).call(Ke,e=>e===n);e.children[o]!==t&&(s-Ke[o]>=0?e.insertBefore(t,e.children[o+1]):e.insertBefore(t,e.children[o]),Ke=Je(e))}}var Ge=function(e,t,s,i){let{dragType:n,dragEl:o,targetEl:a,dragStartAction:l,dragingAction:c,dragEndAction:d,removeAction:u,setPositionBox:p}=t;const h=new Date;e.preventDefault(),Ke=Je(a);const v=o.parentNode.style.zIndex;o.parentNode.style.zIndex=9e3;const m=o.cloneNode(!0),f=window.getComputedStyle(o),g=f.borderLeftWidth,y=je()(g.substring(0,g.length-2));m.style.height=f.height,m.style.width=f.width,m.style.position="fixed",o.parentNode.appendChild(m);const b=o.getBoundingClientRect(),w=b.left,_=b.top,C=o.offsetWidth,S=e.clientX,x=e.clientY,k=e.offsetX+y,I=e.offsetY+y,T=a.getBoundingClientRect().left,L=a.offsetWidth,O=e.clientX-k-w,$=e.clientY-I-_;m.style.left=w+"px",m.style.top=_+"px",p||(p=document.createElement("DIV"),p.style.height=Math.max(50,o.offsetHeight)+"px",p.style.border="1px dashed #d8dde6");let P=!1;const N=e=>w+C+e.clientX-S>=T&&w+C+e.clientX-S<=T+L+C;if(N(e)){const t=e.clientY;Ye(a,p,t)}else p.parentNode===a&&a.removeChild(p);l&&l(o);const A=e=>{if(e.preventDefault(),P=!0,m.style.left=e.clientX-k-O+"px",m.style.top=e.clientY-I-$+"px",N(e)){const t=e.clientY;Ye(a,p,t)}else p.parentNode===a&&a.removeChild(p);c&&c(o)},D=e=>{const t=JSON.parse(r()(s)),l=e.clientX,c=e.clientY,f=new Date-h,g=Math.sqrt(Math.pow(l-S,2)+Math.pow(c-x,2)),y=!(P&&(f>=350||g>=5))&&!N(e);if(y)Q()(i).call(i,i.length,0,t);else if(p.parentNode===a){var b;const e=R()(b=He()(a.children)).call(b,e=>e===p);if(Q()(i).call(i,e,0,t),a.removeChild(p),"order"===n){const e=R()(i).call(i,e=>e===s);Q()(i).call(i,e,1)}}else"order"===n&&P&&!s.IsDatabaseRequired&&u&&u();d&&d(o,t,y),o.parentNode.style.zIndex=v,m.parentNode.removeChild(m),window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",D)};window.addEventListener("mousemove",A),window.addEventListener("mouseup",D)};var Ze={components:{CharketPreview:H.a,SurveyText:J,SurveyChoices:te,SurveySetting:Ce,SurveyShare:Ie,SurveyPreview:$e,SurveyProperties:Be,SurveyRules:Ee,LoadingSpinner:h.a,UeditorPopup:Me.a,FormStyle:ze.a},props:{isClone:Boolean,isPreview:Boolean},data(){return{survey:{Name:this.$t("untitledSurvey"),Note:"",Title:"",SurveyId:"",Description:"",BannerImageUrl:"",ThankYouMessage:"",IsWeChatAuthenticationEnabled:!1,RuleSettings:{Rules:[]},Settings:{TemplateIds:[],MessageIds:[],SkillId:"",Submit:{RedirectRule:{DefaultUrl:""}},RelatedFormId:""},ButtonSettings:{Label:this.$t("global.submitBtn")},WeChatAccountId:"",IsEditable:!1,ResponseLimit:1,Questions:[],Styles:{PageFontFamily:"Default",PageBg:"#ffffff",PageBgImage:"",FormBg:"#efeef4",ErrorBg:"#e64340",ErrorColor:"#ffffff",RequiredIcon:"None",TitleFontSize:"14px",TitleColor:"#999999",LabelFontSize:"16px",LabelColor:"#000",CheckedColor:"#09bb07",ButtonBg:"#1aad19",ButtonColor:"#fff",ButtonFontSize:"18px"},AdvancedStyles:""},leaveConfirmTitle:this.$t("leaveConfirm"),sourceSurvey:null,isLoading:!1,ueditorType:"description",showDescriptionEditor:!1,currentHeaderItem:"banner",currentQuestionInfo:{index:null,question:null},isEdittingName:!1,ruleErrorIndex:-1,surveyBuildTab:[{Label:this.$t("editor"),Value:"Editor"},{Label:this.$t("rules"),Value:"Rules"},{Label:this.$t("settings"),Value:"Settings"},{Label:this.$t("share"),Value:"Share"}],leftBuildTab:"Build",leftBuildTabs:[{Label:this.$t("build"),Value:"Build"},{Label:this.$t("properties"),Value:"Properties"},{Label:this.$t("style"),Value:"Style"}],commonItems:[{Label:this.$t("shortText"),Icon:"formText",Question:{Question:"",Type:"Text",Placeholder:"",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[]}},{Label:this.$t("longText"),Icon:"formTextarea",Question:{Question:"",Type:"Long Text",Placeholder:"",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[]}},{Label:this.$t("dropdown"),Icon:"formPicklist",Question:{Question:"",Type:"Dropdown",Placeholder:"",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[{Choice:"",IsOther:!1,Order:1}]}},{Label:this.$t("singleChoice"),Icon:"formRadio",Question:{Question:"",Type:"Single Choice",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[{Choice:"",IsOther:!1,Order:1}]}},{Label:this.$t("multipleChoice"),Icon:"formCheckbox",Question:{Question:"",Type:"Multiple Choice",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[{Choice:"",IsOther:!1,Order:1}]}},{Label:this.$t("date"),Icon:"formDate",Question:{Question:"",Type:"Date",Placeholder:"",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[]}},{Label:this.$t("dateTime"),Icon:"formTime",Question:{Question:"",Type:"Datetime",Placeholder:"",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[]}},{Label:this.$t("rating"),Icon:"formRating",Question:{Question:"",Type:"Rating",IsRequired:!1,IsHidden:!1,PrefillValue:"",PrefillType:"",Order:1,Answers:[{Choice:1,IsOther:!1,Order:1,isSelected:!1},{Choice:2,IsOther:!1,Order:2,isSelected:!1},{Choice:3,IsOther:!1,Order:3,isSelected:!1},{Choice:4,IsOther:!1,Order:4,isSelected:!1},{Choice:5,IsOther:!1,Order:5,isSelected:!1}]}},{Label:this.$t("heading"),Icon:"formHeading",Question:{Type:"Heading",Question:"",IsRequired:!1,Order:1}}],currentPreviewLabel:"PHONE",isShowPreview:!1,showBtnProperties:!1}},computed:{surveyId(){return this.$route.params.surveyId},currentBuildTab(){return{"survey-editor":"Editor","survey-rules":"Rules","survey-settings":"Settings","survey-share":"Share"}[this.$route.name]},ueditorTitle(){return"description"===this.ueditorType?this.$t("ueditorDescriptionTitle"):this.$t("ueditorThankyouTitle")}},mounted(){this.editSurvey(this.isClone,this.isPreview)},methods:{ueditorReady(){},descriptionFilter(e){const t=document.createElement("DIV");return t.innerHTML=e,t.textContent},chooseHeaderItem(e){this.currentHeaderItem=e,this.currentQuestionInfo={index:null,question:null},this.showBtnProperties=!1},itemComponentFilter:e=>({Text:"SurveyText","Long Text":"SurveyText",Date:"SurveyText",Datetime:"SurveyText",Rating:"SurveyText",Dropdown:"SurveyChoices","Single Choice":"SurveyChoices","Multiple Choice":"SurveyChoices",Heading:"SurveyText"})[e.Type],initSurvey(){this.survey.RuleSettings&&this.survey.RuleSettings.Rules||(this.survey.RuleSettings={Rules:[]}),this.survey.AdvancedStyles=this.survey.AdvancedStyles||"",this.survey.Styles=this.survey.Styles||{PageFontFamily:"Default",PageBg:"#ffffff",PageBgImage:"",FormBg:"#efeef4",ErrorBg:"#e64340",ErrorColor:"#ffffff",RequiredIcon:"None",TitleFontSize:"14px",TitleColor:"#999999",LabelFontSize:"16px",LabelColor:"#000",CheckedColor:"#09bb07",ButtonBg:"#1aad19",ButtonColor:"#fff",ButtonFontSize:"18px"},this.survey.ButtonSettings||(this.survey.ButtonSettings={Label:this.$t("global.submitBtn")})},backToList(){this.$emit("back-to-list")},editSurveyNameData(){this.isEdittingName=!0,this.$nextTick((function(){this.$refs.editSurveyNameInput.focus()}));const e=()=>{this.isEdittingName=!1,window.removeEventListener("click",e)};q()(()=>{window.addEventListener("click",e)},0)},async changeSurveyName(){try{const s=await(e=this.surveyId,t=this.survey.Name,Object(b.a)({method:"SurveyRemoteActions.editSurveyName",args:[e,t]}));s.ok||Object(S.f)(s)}catch(e){Object(S.f)(e)}var e,t},chooseBuildTab(e){const t={Editor:"survey-editor",Settings:"survey-settings",Rules:"survey-rules",Share:"survey-share"}[e],s={surveyId:this.surveyId};this.$router.replace({name:t,params:s})},chooseLeftBuildTab(e){this.leftBuildTab=e},openUeditorPopup(e,t){this.ueditorType=t,this.showDescriptionEditor=!0,this.$refs.descriptionEditor.updateContent(e)},updateEditedContent(e){"description"===this.ueditorType?this.survey.Description=e:this.survey.ThankYouMessage=e,this.closeDescriptionEditor()},closeDescriptionEditor(){this.showDescriptionEditor=!1},setCurrentQuestion(e){this.$set(this.survey.Questions,this.currentQuestionInfo.index,e),this.currentQuestionInfo.question=e,this.showBtnProperties=!1,this.currentHeaderItem=""},getCurrentQuestion(e,t){this.currentQuestionInfo.index=t,this.currentQuestionInfo.question=e,this.currentHeaderItem="",this.showBtnProperties=!1},updateCurrentQuestion(){null!==this.currentQuestionInfo.index&&this.survey.Questions[this.currentQuestionInfo.index]&&(this.currentQuestionInfo.question=this.survey.Questions[this.currentQuestionInfo.index])},addSameTypeQuestion(e){var t,s;const i=e+1,n=this.survey.Questions[e].Type,o=M()(t=this.commonItems).call(t,e=>e.Question.Type===n).Question,a=JSON.parse(r()(o));this.getCurrentQuestion(a,i),Q()(s=this.survey.Questions).call(s,i,0,a),this.$nextTick(()=>{const e=this.$refs["surveyQuestion".concat(i)][0].$el;this.questionScrollIntoView(e),e.querySelector(".question-input").focus()}),this.updateOrder()},questionScrollIntoView(e){const t=e.parentElement,s=t.getBoundingClientRect(),i=s.top<50,n=window.document.documentElement.clientHeight-s.bottom<80;(i||n)&&(t.scrollIntoView(!1),this.$el.querySelector(".build-content-middle").scrollTop+=80)},deleteQuestion(e){var t,s;const i=R()(t=this.survey.Questions).call(t,t=>e===t);Q()(s=this.survey.Questions).call(s,i,1);let n=i;n>0&&n--,this.survey.Questions.length>0?(this.currentQuestionInfo.index=n,this.currentQuestionInfo.question=this.survey.Questions[n]):(this.currentQuestionInfo.index=null,this.currentQuestionInfo.question=null),this.showBtnProperties=!1},updateOrder(){let e=1;for(const t of this.survey.Questions)t.Order=e,e++;this.survey.Questions},startDragItem(e,t){e.target.parentNode;Ge(e,{dragEl:e.target.parentNode,targetEl:this.$refs.questionArea,dragEndAction:(e,t,s)=>{var i;this.updateOrder();const n=R()(i=this.survey.Questions).call(i,e=>e===t);this.getCurrentQuestion(t,n),s&&this.$nextTick(()=>{this.$refs.buildContentMiddle.scrollTop=this.$refs.buildContentMiddle.scrollHeight})}},t,this.survey.Questions)},startDragQuestion(e,t){const s=e=>{e.style.display="block",this.updateOrder()},i=e=>{e.style.display="none"},n=e=>{e.style.display="none"},o=e.target.parentNode;o&&Ge(e,{dragEl:o,dragType:"order",targetEl:this.$refs.questionArea,dragStartAction:n,dragEndAction:s,dragingAction:i},t,this.survey.Questions)},checkRules(){var e;const t=R()(e=this.survey.RuleSettings.Rules).call(e,e=>{var t,s;const i=D()(t=e.Conditions).call(t,e=>!e.QuestionId||!e.AnswerId),n=D()(s=e.Actions).call(s,e=>0===e.QuestionIds.length);return i||n});this.ruleErrorIndex=t},async saveSurvey(){this.isLoading=!0;try{const s=await(e=this.surveyId,t=r()(this.survey),Object(b.a)({method:"SurveyRemoteActions.saveSurvey",args:[e,t]}));if(s.ok){const e=JSON.parse(I.a.unescape(s.data));this.$root.$emit("open-toast-notification",{content:this.$t("surveySaved"),type:"success"}),this.survey=e.Survey,this.initSurvey(),this.updateCurrentQuestion(),this.sourceSurvey=JSON.parse(r()(this.survey))}else Object(S.f)(s);this.isLoading=!1}catch(e){Object(S.f)(e),this.isLoading=!1}var e,t},async editSurvey(e,t){this.isLoading=!0;const s=e?_:w;try{const e=await s(this.surveyId);if(e.ok){const s=JSON.parse(I.a.unescape(e.data));this.survey=s.Survey,this.isShowPreview=t;const i=this.$route.name;this.$router.replace({name:i,params:{surveyId:this.survey.SurveyId}}),this.initSurvey(),this.updateCurrentQuestion(),this.sourceSurvey=JSON.parse(r()(this.survey))}else Object(S.f)(e);this.isLoading=!1}catch(e){Object(S.f)(e),this.isLoading=!1}},async setSettings(){this.isLoading=!0;const e=this.survey.SurveyId;try{const t=await function(e,t){return Object(b.a)({method:"SurveyRemoteActions.setSettings",args:[e,t]})}(e,r()(this.survey));t.ok?(this.sourceSurvey=JSON.parse(r()(this.survey)),this.$root.$emit("open-toast-notification",{content:this.$t("settingsSaved"),type:"success"})):Object(S.f)(t),this.isLoading=!1}catch(e){Object(S.f)(e),this.isLoading=!1}},async setRuleSettings(){if(this.checkRules(),this.ruleErrorIndex>-1){const e=this.$watch("survey.RuleSettings.Rules",()=>{this.ruleErrorIndex=-1,e()},{deep:!0});return!1}{this.isLoading=!0;const e=this.survey.SurveyId,t=this.survey.RuleSettings?this.survey.RuleSettings:{};try{const s=await function(e,t){return Object(b.a)({method:"SurveyRemoteActions.setRuleSettings",args:[e,t]})}(e,r()(t));s.ok?(this.sourceSurvey=JSON.parse(r()(this.survey)),this.$root.$emit("open-toast-notification",{content:this.$t("rulesSaved"),type:"success"})):Object(S.f)(s),this.isLoading=!1}catch(e){Object(S.f)(e),this.isLoading=!1}}},saveAction(){"Editor"===this.currentBuildTab?this.saveSurvey():"Settings"===this.currentBuildTab?this.setSettings():"Rules"===this.currentBuildTab&&this.setRuleSettings()},cancelToSaveSurvey(){this.$emit("cancelSaveSurvey"),this.$refs.leaveConfirm.close()},stayOnThisPage(){this.$refs.leaveConfirm.close()},closeLeaveConfirm(){this.$emit("stayOnThisPage")},updateStyles(e,t){"customize"===t?this.survey.Styles=e:this.survey.AdvancedStyles=e},routeLeaveAction(e,t,s){const i=(e,t)=>{!Object(S.a)(e,t)?(this.$refs.leaveConfirm.open(),this.$on("stayOnThisPage",()=>{s(!1),this.$off("stayOnThisPage"),this.$off("cancelSaveSurvey")}),this.$on("cancelSaveSurvey",()=>{this.survey=JSON.parse(r()(this.sourceSurvey)),s(),this.$off("stayOnThisPage"),this.$off("cancelSaveSurvey")})):s()};if("survey-editor"===t.name){const e={Title:this.survey.Title,Description:this.survey.Description,BannerImageUrl:this.survey.BannerImageUrl,Questions:this.survey.Questions,Styles:this.survey.Styles,AdvancedStyles:this.survey.AdvancedStyles};i({Title:this.sourceSurvey.Title,Description:this.sourceSurvey.Description,BannerImageUrl:this.sourceSurvey.BannerImageUrl,Questions:this.sourceSurvey.Questions,Styles:this.sourceSurvey.Styles,AdvancedStyles:this.sourceSurvey.AdvancedStyles},e)}else if("survey-rules"===t.name)i(this.sourceSurvey.RuleSettings,this.survey.RuleSettings);else if("survey-settings"===t.name){i({ThankYouMessage:this.sourceSurvey.ThankYouMessage,IsWeChatAuthenticationEnabled:this.sourceSurvey.IsWeChatAuthenticationEnabled,Settings:this.sourceSurvey.Settings,WeChatAccountId:this.sourceSurvey.WeChatAccountId,IsEditable:this.sourceSurvey.IsEditable},{ThankYouMessage:this.survey.ThankYouMessage,IsWeChatAuthenticationEnabled:this.survey.IsWeChatAuthenticationEnabled,Settings:this.survey.Settings,WeChatAccountId:this.survey.WeChatAccountId,IsEditable:this.survey.IsEditable})}else s()},previewSurvey(){this.isShowPreview=!0},closePreviewSurvey(){this.isShowPreview=!1},switchPreviewType(e){this.currentPreviewLabel=e},checkToProperty(e,t){this.getCurrentQuestion(e,t),this.chooseLeftBuildTab("Properties")},scrollQuestionIntoview(e){this.$refs.previewRight.scrollTop=e},setSubmitBtn(){this.showBtnProperties=!0,this.currentQuestionInfo.index=null,this.currentQuestionInfo.question=null,this.chooseLeftBuildTab("Properties")}}},Xe=(s("YewM"),s("Kcbq")),et=Object(L.a)(Ze,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"survey-edit-page"},[s("div",{staticClass:"slds-border_bottom slds-grid slds-grid_align-spread survey-edit-header"},[s("div",{staticClass:"slds-grid header-left"},[s("div",{staticClass:"back-icon down-btn",on:{click:function(t){return e.backToList()}}},[s("icon",{attrs:{name:"back","class-name":"down-icon",width:"20px",height:"20px","charket-icon":""}})],1),e._v(" "),s("span",{staticClass:"page-title-line"}),e._v(" "),s("div",{staticClass:"survey-name-area",class:{"show-input-left":e.isEdittingName},on:{click:function(t){return e.editSurveyNameData()}}},[s("input",{directives:[{name:"show",rawName:"v-show",value:e.isEdittingName,expression:"isEdittingName"},{name:"model",rawName:"v-model",value:e.survey.Name,expression:"survey.Name"}],ref:"editSurveyNameInput",staticClass:"survey-name-input",attrs:{type:"text"},domProps:{value:e.survey.Name},on:{click:function(e){e.stopPropagation()},change:function(t){return e.changeSurveyName()},input:function(t){t.target.composing||e.$set(e.survey,"Name",t.target.value)}}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdittingName,expression:"!isEdittingName"}],staticClass:"slds-truncate survey-name-area-span"},[e._v(e._s(e.survey.Name))]),e._v(" "),e.isEdittingName?e._e():s("span",{staticClass:"down-btn"},[s("icon",{attrs:{name:"editReplyIcon","class-name":"down-icon",width:"14px",height:"14px","charket-icon":""}})],1)])]),e._v(" "),e.isShowPreview?s("div",{staticClass:"slds-grid preview-header-center"},[s("div",{staticClass:"slds-grid slds-grid_align-center slds-grid_vertical-align-center header-type",class:{"preview-type-phone":"PHONE"===e.currentPreviewLabel},on:{click:function(t){return e.switchPreviewType("PHONE")}}},["PHONE"===e.currentPreviewLabel?s("span",[s("icon",{attrs:{name:"phone","fill-color":"#004487",width:"18px",height:"26px","charket-icon":""}})],1):e._e(),e._v(" "),"PHONE"!==e.currentPreviewLabel?s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"phone","fill-color":"#706e6b",width:"18px",height:"26px","charket-icon":""}})],1):e._e(),e._v(" "),s("p",{staticClass:"value",class:{"preview-active-value":"PHONE"===e.currentPreviewLabel}},[e._v(e._s(e.$t("global.phoneLabel")))])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-center slds-grid_vertical-align-center header-type desktop",class:{"preview-type-desktop":"DESKTOP"===e.currentPreviewLabel},on:{click:function(t){return e.switchPreviewType("DESKTOP")}}},["DESKTOP"===e.currentPreviewLabel?s("span",[s("icon",{attrs:{name:"desktop","fill-color":"#004487",width:"18px",height:"26px","charket-icon":""}})],1):e._e(),e._v(" "),"DESKTOP"!==e.currentPreviewLabel?s("span",{staticClass:"desktop-icon"},[s("icon",{attrs:{name:"desktop","fill-color":"#706e6b",width:"18px",height:"26px","charket-icon":""}})],1):e._e(),e._v(" "),s("p",{staticClass:"value",class:{"preview-active-value":"DESKTOP"===e.currentPreviewLabel}},[e._v(e._s(e.$t("global.desktopLabel")))])])]):e._e(),e._v(" "),e.isShowPreview?s("div",{staticClass:"preview-header-right"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.closePreviewSurvey}},[e._v(e._s(e.$t("global.closeBtn")))])]):e._e(),e._v(" "),e.isShowPreview?e._e():s("ul",{staticClass:"slds-grid header-middle"},e._l(e.surveyBuildTab,(function(t,i){return s("li",{key:i,staticClass:"survey-build-item",class:{"item-active":e.currentBuildTab===t.Value,"slds-border_left":e.currentBuildTab===t.Value,"slds-border_right":e.currentBuildTab===t.Value},on:{click:function(s){return e.chooseBuildTab(t.Value)}}},[e._v(e._s(t.Label))])})),0),e._v(" "),e.isShowPreview?e._e():s("div",{staticClass:"slds-grid"},[s("span",[s("button",{staticClass:"slds-button slds-button_neutral build-preview-button",on:{click:e.previewSurvey}},[e._v(e._s(e.$t("global.previewBtn")))])]),e._v(" "),s("span",[s("button",{staticClass:"slds-button slds-button_brand",on:{click:function(t){return e.saveAction()}}},[e._v(e._s(e.$t("global.saveBtn")))])])])]),e._v(" "),"Editor"===e.currentBuildTab?s("div",{staticClass:"slds-grid survey-build-content"},[s("div",{staticClass:"slds-border_right build-content-left slds-scrollable_y"},[s("div",{staticClass:"slds-tabs_default"},[s("ul",{staticClass:"slds-tabs_default__nav",attrs:{role:"tablist"}},e._l(e.leftBuildTabs,(function(t,i){return s("li",{key:i,staticClass:"slds-tabs_default__item",class:{"slds-is-active":e.leftBuildTab===t.Value},on:{click:function(s){return e.chooseLeftBuildTab(t.Value)}}},[s("a",{staticClass:"slds-tabs_default__link",attrs:{href:"javascript:void(0);"}},[e._v("\n              "+e._s(t.Label)+"\n            ")])])})),0)]),e._v(" "),"Build"===e.leftBuildTab?s("div",{staticClass:"slds-grid choose-item-title"},[s("span",{staticClass:"arrow-icon"},[s("icon",{attrs:{name:"chevronright","fill-color":"#0070d2",width:"15px",height:"15px","charket-icon":""}})],1),e._v("\n        "+e._s(e.$t("commonItems"))+"\n      ")]):e._e(),e._v(" "),"Build"===e.leftBuildTab?s("ul",{staticClass:"common-item-list"},e._l(e.commonItems,(function(t,i){return s("li",{key:i,staticClass:"common-item"},[s("div",{staticClass:"slds-truncate slds-box slds-grid common-item-container"},[s("div",{staticClass:"drag-cover",on:{mousedown:function(s){return e.startDragItem(s,t.Question)}}}),e._v(" "),s("span",{staticClass:"common-item-icon"},[s("icon",{attrs:{name:t.Icon,"fill-color":"#706e6b",width:"21px",height:"24px","charket-icon":""}})],1),e._v("\n            "+e._s(t.Label)+"\n          ")])])})),0):e._e(),e._v(" "),"Properties"===e.leftBuildTab?s("survey-properties",{attrs:{items:e.commonItems,question:e.currentQuestionInfo.question,submit:e.survey.ButtonSettings.Label,"show-btn-properties":e.showBtnProperties},on:{"update:submit":function(t){return e.$set(e.survey.ButtonSettings,"Label",t)},"set-question":function(t){return e.setCurrentQuestion(t)}}}):e._e(),e._v(" "),"Style"===e.leftBuildTab?s("div",{staticClass:"survey-style-area"},[s("form-style",{attrs:{"styles-type":"survey","customize-styles":e.survey.Styles,advanced:e.survey.AdvancedStyles},on:{"update-styles":e.updateStyles}})],1):e._e()],1),e._v(" "),s("div",{ref:"buildContentMiddle",staticClass:"slds-col build-content-middle slds-scrollable_y"},[s("div",{staticClass:"slds-grid slds-grid_vertical"},[s("div",{staticClass:"slds-grid survey-header-item survey-header-settings",class:{"active-header-item":"banner"===e.currentHeaderItem},on:{click:function(t){return e.chooseHeaderItem("banner")}}},[s("span",{staticClass:"survey-text-icon"},[s("icon",{attrs:{name:"formBanner",width:"21px",heigth:"24px","fill-color":"#706e6b"}})],1),e._v(" "),s("span",{staticClass:"slds-grid slds-col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.survey.BannerImageUrl,expression:"survey.BannerImageUrl"}],staticClass:"question-input",attrs:{type:"text",placeholder:e.$t("bannerImageUrl")},domProps:{value:e.survey.BannerImageUrl},on:{input:function(t){t.target.composing||e.$set(e.survey,"BannerImageUrl",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"slds-grid survey-header-item survey-header-settings",class:{"active-header-item":"title"===e.currentHeaderItem},on:{click:function(t){return e.chooseHeaderItem("title")}}},[s("span",{staticClass:"survey-text-icon"},[s("icon",{attrs:{name:"formTitle",width:"21px",heigth:"24px","fill-color":"#706e6b"}})],1),e._v(" "),s("span",{staticClass:"slds-grid slds-col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.survey.Title,expression:"survey.Title"}],staticClass:"question-input",attrs:{type:"text",placeholder:e.$t("addATitle")},domProps:{value:e.survey.Title},on:{input:function(t){t.target.composing||e.$set(e.survey,"Title",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"slds-grid survey-header-item",class:{"active-header-item":"description"===e.currentHeaderItem},on:{click:function(t){return e.chooseHeaderItem("descriptionr")}}},[s("span",{staticClass:"survey-text-icon"},[s("icon",{attrs:{name:"formDescription",width:"21px",heigth:"24px","fill-color":"#706e6b"}})],1),e._v(" "),s("span",{staticClass:"slds-grid slds-col"},[e.survey.Description?s("div",{staticClass:"slds-truncate slds-col description-content",domProps:{textContent:e._s(e.descriptionFilter(e.survey.Description))},on:{click:function(t){return e.openUeditorPopup(e.survey.Description,"description")}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.survey.Description,expression:"survey.Description"}],staticClass:"question-input survey-header-settings",attrs:{type:"text",placeholder:e.$t("description"),readonly:"readonly"},domProps:{value:e.survey.Description},on:{click:function(t){return e.openUeditorPopup(e.survey.Description,"description")},input:function(t){t.target.composing||e.$set(e.survey,"Description",t.target.value)}}})])]),e._v(" "),s("ul",{ref:"questionArea",staticClass:"slds-col survey-question-list"},e._l(e.survey.Questions,(function(t,i){return s("li",{key:i,staticClass:"survey-question-item",class:{"question-active":e.currentQuestionInfo.question===t}},[s("div",{staticClass:"survey-question-container"},[s("div",{staticClass:"question-drag-area",on:{mousedown:function(s){return e.startDragQuestion(s,t)}}}),e._v(" "),s(e.itemComponentFilter(t),{ref:"surveyQuestion"+i,refInFor:!0,tag:"component",attrs:{"question-index":i,question:t},on:{"update:question":function(e){t=e},"set-current-question":e.getCurrentQuestion,"check-to-property":e.checkToProperty,"add-same-type-question":e.addSameTypeQuestion}}),e._v(" "),e.currentQuestionInfo.question===t?s("div",{staticClass:"question-delete-icon",on:{click:function(s){return e.deleteQuestion(t)}}},[s("span",{staticClass:"delete-icon-covered"}),e._v(" "),s("icon",{attrs:{name:"customDelete",width:"14px",height:"14px","fill-color":"#706e6b"}})],1):e._e()],1)])})),0)])]),e._v(" "),s("div",{ref:"previewRight",staticClass:"slds-border_left build-content-right slds-scrollable_y"},[s("div",{staticClass:"preview-phone-area"},[s("survey-preview",{attrs:{"current-question-index":e.currentQuestionInfo.index,survey:e.survey},on:{"set-btn":e.setSubmitBtn,"scroll-intoview":e.scrollQuestionIntoview}})],1)])]):e._e(),e._v(" "),s("loading-spinner",{attrs:{"is-loading":e.isLoading}}),e._v(" "),"Rules"!==e.currentBuildTab||e.isLoading?e._e():s("div",{staticClass:"survey-rules-area"},[s("survey-rules",{attrs:{survey:e.survey,"error-index":e.ruleErrorIndex},on:{"update:survey":function(t){e.survey=t}}})],1),e._v(" "),"Settings"!==e.currentBuildTab||e.isLoading?e._e():s("div",{staticClass:"survey-settings-area"},[s("survey-setting",{ref:"surveySetting",attrs:{survey:e.survey},on:{"update:survey":function(t){e.survey=t},"open-ueditor":function(t){return e.openUeditorPopup(t,"thankyouMessage")}}})],1),e._v(" "),"Share"!==e.currentBuildTab||e.isLoading?e._e():s("div",{staticClass:"survey-share-area"},[s("survey-share",{attrs:{"survey-id":e.survey.SurveyId}})],1),e._v(" "),s("ld-modal",{ref:"leaveConfirm",attrs:{title:e.leaveConfirmTitle},on:{close:e.closeLeaveConfirm},scopedSlots:e._u([{key:"content",fn:function(){return[s("p",{staticClass:"slds-p-around_medium text-align-center"},[e._v(e._s(e.$t("global.unsavedLabel")))])]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{neutral:""},on:{click:function(t){return e.cancelToSaveSurvey()}}},[e._v("\n        "+e._s(e.$t("discardChangeLabel"))+"\n      ")]),e._v(" "),s("ld-button",{attrs:{brand:""},on:{click:function(t){return e.stayOnThisPage()}}},[e._v("\n        "+e._s(e.$t("stayPageLabel"))+"\n      ")])]},proxy:!0}])}),e._v(" "),s("ueditor-popup",{directives:[{name:"show",rawName:"v-show",value:e.showDescriptionEditor,expression:"showDescriptionEditor"}],ref:"descriptionEditor",attrs:{"ueditor-title":e.ueditorTitle},on:{ready:function(t){return e.ueditorReady()},"close-editor":function(t){return e.closeDescriptionEditor()},"update-description":e.updateEditedContent}}),e._v(" "),e.isShowPreview?s("charket-preview",{attrs:{"preview-info":e.survey,type:e.currentPreviewLabel,"is-form":!1}}):e._e()],1)}),[],!1,null,"5fe06ca0",null);"function"==typeof Xe.default&&Object(Xe.default)(et);var tt=et.exports,st={mixins:[f.a],components:{Icon:U.a,InputSelect:v.a,Dropdown:m.a,LoadingSpinner:h.a},props:{isClone:{type:Boolean,default:!1},survey:{type:Object,default:()=>({})}},data:()=>({newSurvey:{Name:"",WeChatAccountId:null,Note:""},isSubmitSave:!1,Accounts:{options:[],currentOptions:[]}}),computed:c()({},Object(y.c)({accountList:"sidebar/wechatAccounts"}),{canSave(){return this.newSurvey.Name},surveyTitle(){return this.survey.SurveyId?this.isClone?this.$t("newSurveyLabel"):this.$t("editSurveyLabel"):this.$t("newSurveyLabel")},objectTypeIsDisabled(){return!!this.survey.SurveyId}}),created(){for(const e of ue()(this.accountList)){const t=this.accountList[e];"Service Account"===t.Type&&this.Accounts.options.push(JSON.parse(r()(t)))}if(this.survey.SurveyId){if(this.survey.WeChatAccountId){var e;let t=M()(e=this.Accounts.options).call(e,e=>e.Id===this.survey.WeChatAccountId);this.Accounts.currentOptions=[t]}this.newSurvey.Name=this.survey.Name,this.newSurvey.Note=this.survey.Note,this.newSurvey.WeChatAccountId=this.survey.WeChatAccountId}},methods:{async createNewSurvey(){this.isSubmitSave=!0;const e=this.isClone?_:C;let t=this.survey.SurveyId||"";try{const s=await e(t,r()(this.newSurvey));if(s.ok){const e=JSON.parse(I.a.unescape(s.data));this.$emit("close-new-survey",e.SurveyId)}else Object(S.f)(s)}catch(e){Object(S.f)(e)}},closeNewSurveyPopup(){this.$emit("close-new-survey")},selectPicklist(e){this.newSurvey.WeChatAccountId=e[0]?e[0].Id:"",this.Accounts.currentOptions=e,this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1}}},it=(s("xIgP"),s("wiWi")),nt=Object(L.a)(st,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"slds-modal slds-modal_large slds-fade-in-open",attrs:{"aria-hidden":"false",role:"dialog"}},[s("div",{staticClass:"slds-modal__container show-selected-container new-width",attrs:{role:"document",tabindex:"0"}},[s("div",{staticClass:"slds-modal__header"},[s("button",{staticClass:"slds-button slds-button_icon-inverse slds-modal__close",on:{click:function(t){return e.closeNewSurveyPopup()}}},[s("icon",{attrs:{name:"close",category:"utility","class-name":"slds-button__icon slds-button__icon_large"}}),e._v(" "),s("span",{staticClass:"slds-assistive-text"},[e._v("Close")])],1),e._v(" "),s("h2",{staticClass:"slds-text-heading_medium"},[e._v(e._s(e.surveyTitle))])]),e._v(" "),s("div",{staticClass:"slds-modal__content slds-p-around_medium new-height modal-content"},[s("div",{staticClass:"new-line"},[s("div",{staticClass:"slds-form-element form-element-label"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"text-input-name"}},[s("abbr",{staticClass:"slds-required"},[e._v("* ")]),e._v(e._s(e.$t("nameLabel")))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newSurvey.Name,expression:"newSurvey.Name"}],staticClass:"slds-input",attrs:{id:"text-input-name",required:"",type:"text"},domProps:{value:e.newSurvey.Name},on:{input:function(t){t.target.composing||e.$set(e.newSurvey,"Name",t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"new-line"},[s("div",{staticClass:"account-title"},[s("div",{staticClass:"slds-form-element form-account-label"},[s("label",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$t("accountLabel")))])]),e._v(" "),s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("surveyAccountTip")},expression:"{content: $t('surveyAccountTip')}"}],staticClass:"account-icon down-btn"},[s("icon",{attrs:{name:"info",width:"18px",height:"18px","class-name":"down-icon"}})],1)]),e._v(" "),s("div",{staticClass:"new-line-picklist"},[s("input-select",{attrs:{currents:e.Accounts.currentOptions},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)]),e._v(" "),s("div",{staticClass:"new-line"},[s("div",{staticClass:"slds-form-element form-element-label"},[s("label",{staticClass:"slds-form-element__label",attrs:{for:"note-label"}},[e._v(e._s(e.$t("noteLabel")))]),e._v(" "),s("div",{staticClass:"slds-form-element__control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newSurvey.Note,expression:"newSurvey.Note"}],staticClass:"slds-textarea new-textarea",attrs:{id:"note-label",name:"name",rows:"8",cols:"80"},domProps:{value:e.newSurvey.Note},on:{input:function(t){t.target.composing||e.$set(e.newSurvey,"Note",t.target.value)}}})])])]),e._v(" "),s("loading-spinner",{attrs:{"is-loading":e.isSubmitSave}})],1),e._v(" "),s("div",{staticClass:"slds-modal__footer"},[s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:e.isSubmitSave},on:{click:function(t){return e.closeNewSurveyPopup()}}},[e._v(e._s(e.$t("global.cancelBtn")))]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:!e.canSave||e.isSubmitSave},on:{click:function(t){return e.createNewSurvey()}}},[e._v(e._s(e.$t("global.saveBtn")))])])])]),e._v(" "),s("div",{staticClass:"slds-backdrop slds-backdrop_open"}),e._v(" "),e.showDropdown?s("dropdown",{attrs:{"default-label":!0,options:e.Accounts.options,currents:e.Accounts.currentOptions,left:e.dropdownLeft,top:e.dropdownTop,width:e.dropdownWidth,"has-sort-by":!1},on:{"select-option":e.selectPicklist,close:e.closeDropdown}}):e._e()],1)}),[],!1,null,"46d2c7dc",null);"function"==typeof it.default&&Object(it.default)(nt);var ot=nt.exports,at={components:{CommonPageHeader:i.a,SurveyList:N,SurveyEdit:tt,NewSurveyPopup:ot},data:()=>({isClone:!1,isPreview:!1,showNewSurveyPopup:!1,survey:{}}),computed:{showSurveyEditor(){return"survey"!==this.$route.name}},methods:{newSurvey(){this.showNewSurveyPopup=!0},closeNewSurveyPopup(e){this.survey={},this.showNewSurveyPopup=!1,this.isClone=!1,e&&this.$router.replace({name:"survey-editor",params:{surveyId:e}})},closeEditSurvey(){this.$router.replace({name:"survey"})},editSurvey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isClone=!1,this.isPreview=t,t||s?this.$router.replace({name:"survey-editor",params:{surveyId:e.SurveyId}}):(this.survey=e,this.newSurvey())},cloneSurvey(e){this.isClone=!0,this.survey=e,this.newSurvey()}},beforeRouteLeave(e,t,s){this.$refs.surveyEditor?this.$refs.surveyEditor.routeLeaveAction(e,t,s):s()}},rt=(s("Jyzm"),s("D+DB")),lt=Object(L.a)(at,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-grid slds-grid_vertical charket-survey-page"},[e.showSurveyEditor?e._e():s("common-page-header",{attrs:{"page-title":e.$t("surveys")},on:{"create-new":function(t){return e.newSurvey()}}}),e._v(" "),e.showSurveyEditor?e._e():s("div",{staticClass:"survey-page-content"},[s("survey-list",{on:{"edit-survey":e.editSurvey,"clone-survey":e.cloneSurvey}})],1),e._v(" "),e.showSurveyEditor?s("survey-edit",{ref:"surveyEditor",attrs:{"is-clone":e.isClone,"is-preview":e.isPreview},on:{"back-to-list":function(t){return e.closeEditSurvey()}}}):e._e(),e._v(" "),e.showNewSurveyPopup?s("new-survey-popup",{attrs:{isClone:e.isClone,survey:e.survey},on:{"close-new-survey":e.closeNewSurveyPopup}}):e._e()],1)}),[],!1,null,"1df4e3ec",null);"function"==typeof rt.default&&Object(rt.default)(lt);t.default=lt.exports},WUmD:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"scaleLabel":"范围","placeHolderChoice":"占位选项","placeHolderText":"占位文本","requiredLabel":"必填","other":"其他","addOtherOption":"添加“其他”选项","otherText":"其他选项文本","noProperties":"没有属性","btnLabel":"按钮标签","preFillTypeLabel":"预填充类型","urlParameterLabel":"链接参数","fixedValueLabel":"固定值","hiddenLabel":"隐藏","prefillTypeTooltip":"• 固定值: 使用固定值填写当前字段。字段需要设置成隐藏。<br/>• 链接参数: 使用 URL 参数填写当前字段的默认值。字段需要设置成隐藏。"},"en":{"scaleLabel":"Scale","placeHolderChoice":"Placeholder Choice","placeHolderText":"Placeholder Text","requiredLabel":"Required","other":"Other","addOtherOption":"Add \\"Other\\" Option","otherText":"Other Option Text","noProperties":"No Properties","btnLabel":"Button Label","preFillTypeLabel":"Pre-fill Type","urlParameterLabel":"URL Parameter","fixedValueLabel":"Fixed Value","hiddenLabel":"Hidden","prefillTypeTooltip":"• Fixed Value: populate the value of this field with a fixed value. The field must be hidden.<br/>• URL Parameter: populate the value of this field with the value of a URL parameter. The field must be hidden."}}'),delete e.options._Ctor}},Whuh:function(e,t,s){},"XP+o":function(e,t,s){"use strict";var i=s("/qZ2"),n=s.n(i);t.default=n.a},YewM:function(e,t,s){"use strict";var i=s("q3jV");s.n(i).a},Yo0a:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"typeQuestion":"请输入问题","typeHeading":"请输入标题","choice":"选项","other":"其他"},"en":{"typeQuestion":"Type question here","typeHeading":"Type heading here","choice":"Choice","other":"Other"}}'),delete e.options._Ctor}},ZKzn:function(e,t,s){"use strict";var i=s("To+i");s.n(i).a},aF8D:function(e,t,s){"use strict";var i=s("dOfv"),n=s("UZn8"),o={mixins:[i.a],components:{SetTextLink:n.a},props:{descriptionData:{type:String,defualt:""},ueditorTitle:{type:String,default(){return this.$t("descriptionEditor")}}},mounted(){this.$on("ready",()=>{this.editorReady=!0})},data:()=>({editorReady:!1,showSetUrlBox:!1,customImageUrl:""}),watch:{descriptionData(){this.descriptionData&&this.editorReady&&this.editor.setContent(this.descriptionData)}},methods:{closeEditor(){this.$refs.SetTextLink.close(),this.$emit("close-editor")},saveEdit(){const e=this.getContent();this.$emit("update-description",e)},openSetUrlBox(){this.showSetUrlBox=!0},setCustomUrlImage(){this.editor.iframe.focus();const e='<p><img src="'.concat(this.customImageUrl,'" /></p>');this.editor.execCommand("inserthtml",e),this.closeSetImageUrlBox()},onClickInsertLink(e){this.editor.selection.getRange().select();const t=this.editor.selection.getText();this.$refs.SetTextLink.open({text:t,type:"Normal Link",el:e.currentTarget,position:"right-bottom"})},onClickTextLinkOk(e){let{text:t,url:s}=e;this.editor.iframe.focus(),this.editor.execCommand("link",{href:s,target:"_blank",textValue:t,style:"color: #006dcc; text-decoration: none;"}),this.$refs.SetTextLink.close()},closeSetImageUrlBox(){this.showSetUrlBox=!1,this.customImageUrl=""}}},a=(s("iiLD"),s("KHd+")),r=s("rxPh"),l=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-description-area"},[s("div",{staticClass:"slds-modal slds-modal_large slds-fade-in-open",attrs:{"aria-hidden":"false",role:"dialog"}},[s("div",{staticClass:"slds-modal__container form-description-container",attrs:{role:"document",tabindex:"0"}},[s("div",{staticClass:"slds-modal__header"},[s("button",{staticClass:"slds-button slds-button_icon-inverse slds-modal__close",on:{click:function(t){return e.closeEditor()}}},[s("icon",{attrs:{name:"close",category:"utility","class-name":"slds-button__icon slds-button__icon_large"}}),e._v(" "),s("span",{staticClass:"slds-assistive-text"},[e._v(e._s(e.$t("global.closeBtn")))])],1),e._v(" "),s("h2",{staticClass:"slds-text-heading_medium"},[e._v(e._s(e.ueditorTitle))])]),e._v(" "),s("div",{staticClass:"slds-modal__content slds-p-around_medium modal-content-custom"},[s("div",{staticClass:"slds-grid slds-grid_vertical editor-toolbar"},[s("div",{staticClass:"slds-grid top-bar"},[s("div",{staticClass:"slds-grid re-undo"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onUndo()}}},[s("icon",{attrs:{name:"undo",width:"17px",height:"17px","fill-color":0!==e.toolStates.undo?"#d0d0d0":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onRedo()}}},[s("icon",{attrs:{name:"redo",width:"17px",height:"17px","fill-color":0!==e.toolStates.redo?"#d0d0d0":"#aaa","charket-icon":""}})],1)]),e._v(" "),s("a",{staticClass:"slds-grid font-size",attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openFontSizeList()}}},[s("div",{staticClass:"font-size-value"},[e._v("\n                "+e._s(e.toolValues.fontsize)+"\n              ")]),e._v(" "),s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.showFontSizeList,expression:"showFontSizeList"}],staticClass:"font-size-list"},e._l(e.fontSizeList,(function(t){return s("li",{style:{fontSize:t},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.onFontsizeChange(t)}}},[e._v(e._s(t))])})),0)],1),e._v(" "),s("div",{staticClass:"slds-grid quot-dash"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onBlockquote()}}},[s("icon",{attrs:{name:"quot",width:"17px",height:"17px","fill-color":e.toolStates.blockquote?"#5268ee":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onHorizontal()}}},[s("icon",{attrs:{name:"dash",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid clear-or-brush"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onRemoveFormat()}}},[s("icon",{attrs:{name:"clearFormat",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onFormatmatch()}}},[s("icon",{attrs:{name:"brushFormat",width:"17px",height:"17px","fill-color":e.toolStates.formatmatch?"#5268ee":"#aaa","charket-icon":""}})],1)]),e._v(" "),s("div",{staticClass:"insert-link"},[s("span",{on:{click:function(t){return t.preventDefault(),e.onClickInsertLink(t)}}},[s("icon",{attrs:{name:"textLink",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}})],1)]),e._v(" "),s("div",{staticClass:"insert-image"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.openSetUrlBox()}}},[s("icon",{attrs:{name:"image",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),e.showSetUrlBox?s("div",{staticClass:"set-image-url"},[s("div",{staticClass:"set-image-main"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.customImageUrl,expression:"customImageUrl"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:e.customImageUrl},on:{input:function(t){t.target.composing||(e.customImageUrl=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-end set-image-footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:function(t){return e.closeSetImageUrlBox()}}},[e._v(e._s(e.$t("global.cancelBtn")))]),e._v(" "),s("button",{staticClass:"slds-button slds-button_neutral slds-button_brand",on:{click:function(t){return e.setCustomUrlImage()}}},[e._v(e._s(e.$t("global.confirmBtn")))])])]):e._e()])]),e._v(" "),s("div",{staticClass:"slds-grid bottom-bar"},[s("div",{staticClass:"slds-grid slds-wrap font-style"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onBold()}}},[s("icon",{attrs:{name:"bold",width:"19px",height:"19px","fill-color":e.toolStates.bold?"#5268ee":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onItalic()}}},[s("icon",{attrs:{name:"italic",width:"19px",height:"19px","fill-color":e.toolStates.italic?"#5268ee":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onUnderline()}}},[s("icon",{attrs:{name:"underline",width:"19px",height:"19px","fill-color":e.toolStates.underline?"#5268ee":"#aaa","charket-icon":""}})],1),e._v(" "),s("div",{staticClass:"slds-grid font-color"},[s("a",{staticClass:"slds-grid slds-grid_vertical",attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onFontColor(e.recentForeColor.hex)}}},[s("icon",{attrs:{name:"textColor",width:"14px",height:"14px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("div",{staticClass:"color-bar",style:{backgroundColor:e.recentForeColor.hex}})],1),e._v(" "),s("button",{attrs:{name:"button",type:"button",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openFontColorList()}}},[s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("color-picker",{ref:"colorList",attrs:{value:e.recentForeColor.hex?e.recentForeColor:e.defaultColor},on:{"get-color":e.onFontColor}})],1),e._v(" "),s("div",{staticClass:"slds-grid bg-color"},[s("a",{staticClass:"slds-grid slds-grid_vertical",attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onBgColor(e.recentBackColor.hex)}}},[s("icon",{attrs:{name:"text",width:"15px",height:"15px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("div",{staticClass:"color-bar",style:{backgroundColor:e.recentBackColor.hex}})],1),e._v(" "),s("button",{attrs:{name:"button",type:"button",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openBgColorList()}}},[s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("color-picker",{ref:"bgColorList",attrs:{value:e.recentBackColor.hex?e.recentBackColor:e.defaultColor},on:{"get-color":e.onBgColor}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid style-paragraph"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.onParagraphStyle("indent")}}},[s("icon",{attrs:{name:"textIndent",width:"17px",height:"17px","fill-color":e.toolStates.indent?"#5268ee":"#aaa","charket-icon":""}})],1),e._v(" "),e._l(e.paragraphStyle,(function(t){return s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(s){return s.preventDefault(),e.onParagraphStyle(t.value)}}},[s("icon",{attrs:{name:t.label,width:"17px",height:"17px","fill-color":e.toolValues.justify===t.value?"#5268ee":"#aaa","charket-icon":""}})],1)}))],2),e._v(" "),s("div",{staticClass:"slds-grid style-list"},[s("div",{staticClass:"ol-list"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openOlList()}}},[s("icon",{attrs:{name:"olList",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("button",{attrs:{type:"button",name:"button",tabindex:"-1"}},[s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}})],1)],1),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.showOlList,expression:"showOlList"}]},e._l(e.toolOptions.orderedlist,(function(t){return s("li",{staticClass:"slds-grid check-list",on:{click:function(s){return e.setListStyle("ol",t.value)}}},[s("div",{staticClass:"list-icon"},[s("icon",{directives:[{name:"show",rawName:"v-show",value:e.toolValues.insertunorderedlist===t.value,expression:"toolValues.insertunorderedlist === style.value"}],attrs:{name:"check",width:"14px",height:"14px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{staticClass:"slds-col",attrs:{href:"#",tabindex:"-1"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(t.label))])])})),0)]),e._v(" "),s("div",{staticClass:"ul-list"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openUlList()}}},[s("icon",{attrs:{name:"ulList",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("button",{attrs:{type:"button",name:"button",tabindex:"-1"}},[s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}})],1)],1),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.showUlList,expression:"showUlList"}]},e._l(e.toolOptions.unorderedlist,(function(t){return s("li",{staticClass:"slds-grid check-list",on:{click:function(s){return e.setListStyle("ul",t.value)}}},[s("div",{staticClass:"list-icon"},[s("icon",{directives:[{name:"show",rawName:"v-show",value:e.toolValues.insertunorderedlist===t.value,expression:"toolValues.insertunorderedlist === style.value"}],attrs:{name:"check",width:"14px",height:"14px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{staticClass:"slds-col",attrs:{href:"#",tabindex:"-1"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(t.label))])])})),0)])]),e._v(" "),s("div",{staticClass:"slds-grid paragraph-line-space"},[s("div",{staticClass:"line-height-list"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openLineHeightList()}}},[s("icon",{attrs:{name:"lineHeight",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("button",{attrs:{type:"button",name:"button",tabindex:"-1"}},[s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}})],1)],1),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.showLineHeightList,expression:"showLineHeightList"}]},e._l(e.toolOptions.lineheight,(function(t){return s("li",{staticClass:"slds-grid check-list",on:{click:function(s){return e.onLineHeight(t.value)}}},[s("div",{staticClass:"list-icon"},[s("icon",{directives:[{name:"show",rawName:"v-show",value:e.toolValues.lineheight===t.value,expression:"toolValues.lineheight === val.value"}],attrs:{name:"check",width:"14px",height:"14px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{staticClass:"slds-col",attrs:{href:"#",tabindex:"-1"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(t.label))])])})),0)]),e._v(" "),s("div",{staticClass:"spacing-top-list"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openSpacingTopList()}}},[s("icon",{attrs:{name:"pMarginTop",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("button",{attrs:{type:"button",name:"button",tabindex:"-1"}},[s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}})],1)],1),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.showSpacingTopList,expression:"showSpacingTopList"}]},e._l(e.toolOptions.rowspacing,(function(t){return s("li",{staticClass:"slds-grid check-list",on:{click:function(s){return e.onRowSpacing(t.value,"top")}}},[s("div",{staticClass:"list-icon"},[s("icon",{directives:[{name:"show",rawName:"v-show",value:e.toolValues.rowspacingtop===t.value,expression:"toolValues.rowspacingtop === val.value"}],attrs:{name:"check",width:"14px",height:"14px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{staticClass:"slds-col",attrs:{href:"#",tabindex:"-1"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(t.label))])])})),0)]),e._v(" "),s("div",{staticClass:"spacing-bottom-list"},[s("a",{attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.openSpacingBottomList()}}},[s("icon",{attrs:{name:"pMarginBottom",width:"17px",height:"17px","fill-color":"#aaa","charket-icon":""}}),e._v(" "),s("button",{attrs:{type:"button",name:"button",tabindex:"-1"}},[s("icon",{attrs:{name:"down",width:"8px",height:"8px","fill-color":"#aaa","charket-icon":""}})],1)],1),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.showSpacingBottomList,expression:"showSpacingBottomList"}]},e._l(e.toolOptions.rowspacing,(function(t){return s("li",{staticClass:"slds-grid check-list",on:{click:function(s){return e.onRowSpacing(t.value,"bottom")}}},[s("div",{staticClass:"list-icon"},[s("icon",{directives:[{name:"show",rawName:"v-show",value:e.toolValues.rowspacingbottom===t.value,expression:"toolValues.rowspacingbottom === val.value"}],attrs:{name:"check",width:"14px",height:"14px","fill-color":"#aaa","charket-icon":""}})],1),e._v(" "),s("a",{staticClass:"slds-col",attrs:{href:"#",tabindex:"-1"},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(t.label))])])})),0)])])])]),e._v(" "),s("div",{staticClass:"editor-container"},[s("div",{ref:"editor"})])]),e._v(" "),s("div",{staticClass:"slds-modal__footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:function(t){return e.closeEditor()}}},[e._v(e._s(e.$t("global.cancelBtn")))]),e._v(" "),e._t("negative",[s("button",{staticClass:"slds-button slds-button_neutral slds-button_brand",on:{click:function(t){return e.saveEdit()}}},[e._v(e._s(e.$t("global.confirmBtn")))])])],2)])]),e._v(" "),s("div",{staticClass:"slds-backdrop slds-backdrop_open"}),e._v(" "),s("set-text-link",{ref:"SetTextLink",on:{ok:e.onClickTextLinkOk}})],1)}),[],!1,null,"2ca67452",null);"function"==typeof r.default&&Object(r.default)(l);t.a=l.exports},aX87:function(e,t,s){"use strict";var i=s("3LAo"),n=s.n(i);t.default=n.a},bisE:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"cellName":"名称","cellStatus":"状态","cellObjectLabel":"关联对象","cellNote":"备注","cellLastModify":"上次修改人","publish":"发布","archive":"存档","clone":"复制","searchForms":"搜索表单","all":"全部","alphabetically":"字母升序","reverseAlphabetically":"字母降序","lastModifiedDate":"最近修改日期","oldestModifiedDate":"最早修改日期","modalHeader":"表单","modalContent1":"你确定要","modalContent2":"这个表单?","actionLabel1":"存档","actionLabel2":"发布","actionLabel3":"删除","notifyContent":"表单已{0}。","statusLabel":"状态","objectsLabel":"对象"},"en":{"cellName":"Name","cellStatus":"Status","cellObjectLabel":"Salesforce Object","cellNote":"Note","cellLastModify":"Last Modified By","publish":"Publish","archive":"Archive","clone":"Clone","searchForms":"Search Forms","all":"All","alphabetically":"Alphabetically","reverseAlphabetically":"Reverse Alphabetically","lastModifiedDate":"Last Modified Date","oldestModifiedDate":"First Modified Date","modalHeader":" Form","modalContent1":"Are you sure you want to ","modalContent2":" this form?","actionLabel1":"archived","actionLabel2":"published","actionLabel3":"deleted","notifyContent":"The form was {0}.","statusLabel":"Status","objectsLabel":"Objects"}}'),delete e.options._Ctor}},bvdj:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"customizeLabel":"定制","advancedLabel":"高级","addBtn":"添加","pageLabel":"页面","fontLabel":"字体","pageBgLabel":"页面背景","bgImgLabel":"背景图","formLabel":"表单","formBgLabel":"背景","errorBackground":"错误背景色","errorTextColor":"错误文字颜色","itemsLabel":"项目","requiredIcon":"必填的图标","headingFontSize":"标题字体大小","headingTextColor":"标题文字颜色","labelFontSize":"字段标题字号","labelTextColor":"字段标题颜色","checkedColor":"复选框和单选框选中颜色","buttonLabel":"按钮","buttonBackground":"按钮背景","buttonFontColor":"按钮文字颜色","buttonFontSize":"按钮字体大小","cssStyle":"CSS样式","addBgImgHeader":"添加背景图","editBgImgHeader":"修改背景图","urlLabel":"链接","defaultLabel":"默认","noneLabel":"无","asteriskLabel":"星号","redAsteriskLabel":"红色星号","surveyLabel":"问卷","questionFontSize":"问题字体大小","questionTextColor":"问题文字颜色","answerFontSize":"答案字体大小","answerTextColor":"答案文字颜色","choiceCheckedColor":"选项选中颜色"},"en":{"customizeLabel":"Customize","advancedLabel":"Advanced","addBtn":"Add","pageLabel":"Page","fontLabel":"Font","pageBgLabel":"Background","bgImgLabel":"Background Image","formLabel":"Form","formBgLabel":"Background","errorBackground":"Error Background","errorTextColor":"Error Text Color","itemsLabel":"Items","requiredIcon":"Required Icon","headingFontSize":"Heading Font Size","headingTextColor":"Heading Text Color","labelFontSize":"Label Font Size","labelTextColor":"Label Text Color","checkedColor":"Checkbox & Radio Button Checked Color","buttonLabel":"Button","buttonBackground":"Button Background","buttonFontColor":"Button Font Color","buttonFontSize":"Button Font Size","cssStyle":"CSS style","addBgImgHeader":"Add Background Image","editBgImgHeader":"Edit Background Image","urlLabel":"URL","defaultLabel":"Default","noneLabel":"None","asteriskLabel":"Asterisk","redAsteriskLabel":"Red Asterisk","surveyLabel":"Survey","questionFontSize":"Question Font Size","questionTextColor":"Question Text Color","answerFontSize":"Answer Font Size","answerTextColor":"Answer Text Color","choiceCheckedColor":"Choice Checked Color"}}'),delete e.options._Ctor}},dD3m:function(e,t,s){"use strict";var i=s("bisE"),n=s.n(i);t.default=n.a},dOfv:function(e,t,s){"use strict";var i=s("rZkV"),n=s.n(i),o=s("+Bun"),a=s.n(o),r=s("ejTr"),l=s.n(r),c=s("autp"),d=s.n(c),u=s("vkTm");t.a={components:{ColorPicker:u.a},mounted(){this.$nextTick(()=>{this.$refs.editor.id=this.id,this.editor=this.UE.getEditor(this.id,this.config),this.editor.ready(()=>{this.bindContentChange(),this.bindSelectionChange(),this.bindPaste(),this.bindFocusBlur(),this.editor.setContent(this.$t("defaultContent")),this.$emit("ready")})})},data(){return{id:"charket_editor"+Math.random(10),UE:window.UE||null,showFontSizeList:!1,showOlList:!1,showUlList:!1,showLineHeightList:!1,showSpacingTopList:!1,showSpacingBottomList:!1,editor:null,recentForeColor:{hex:null},recentBackColor:{hex:null},defaultColor:{hex:"#194d33"},fontSizeList:["12px","14px","15px","16px","18px","20px","24px"],paragraphStyle:[{label:"alignLeft",value:"left"},{label:"alignCenter",value:"center"},{label:"alignRight",value:"right"}],toolStates:{undo:-1,redo:-1,blockquote:0,horizontal:0,removeformat:0,formatmatch:0,bold:0,italic:0,underline:0,indent:0},toolValues:{fontsize:"16px",forecolor:"#ffffff",backcolor:"#ffffff",justify:"",imagefloat:"",lineheight:"",rowspacing:"",rowspacingtop:"",rowspacingbottom:"",insertorderedlist:"",insertunorderedlist:""},toolOptions:{rowspacing:[{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"20",value:"20"},{label:"25",value:"25"}],lineheight:[{label:"1",value:"1"},{label:"1.5",value:"1.5"},{label:"1.75",value:"1.75"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"}],orderedlist:[{label:"1,2,3...",value:"decimal"},{label:"a,b,c...",value:"lower-alpha"},{label:"i,ii,iii...",value:"lower-roman"},{label:"A,B,C...",value:"upper-alpha"},{label:"Ⅰ,Ⅱ,Ⅲ...",value:"upper-roman"}],unorderedlist:[{label:"○ "+this.$t("global.ueditor.circle"),value:"circle"},{label:"● "+this.$t("global.ueditor.disc"),value:"disc"},{label:"■ "+this.$t("global.ueditor.square"),value:"square"}]},listVisible:!0,toolbarMaskVisible:!1,imagefloatvisible:!1,config:{toolbars:[[]],enableAutoSave:!1,initialFrameWidth:null,initialFrameHeight:400,autoHeightEnabled:!0,imagePopup:!1,imageScaleEnabled:!1}}},methods:{closeAllList(){this.showFontSizeList=!1,this.showOlList=!1,this.showUlList=!1,this.showLineHeightList=!1,this.showSpacingTopList=!1,this.showSpacingBottomList=!1,this.$refs.colorList.close(),this.$refs.bgColorList.close()},openFontColorList(){this.closeAllList(),this.$refs.colorList.open()},openBgColorList(){this.closeAllList(),this.$refs.bgColorList.open()},openFontSizeList(){this.closeAllList(),this.showFontSizeList=!this.showFontSizeList;const e=()=>{this.showFontSizeList=!1,window.removeEventListener("click",e)};d()(()=>{window.addEventListener("click",e)},100)},openOlList(e){this.closeAllList(),this.showOlList=!this.showOlList;const t=()=>{this.showOlList=!1,window.removeEventListener("click",t)};d()(()=>{window.addEventListener("click",t)},200)},openUlList(){this.closeAllList(),this.showUlList=!this.showUlList;const e=()=>{this.showUlList=!1,window.removeEventListener("click",e)};d()(()=>{window.addEventListener("click",e)},200)},openLineHeightList(){this.closeAllList(),this.showLineHeightList=!0;const e=()=>{this.showLineHeightList=!1,window.removeEventListener("click",e)};d()(()=>{window.addEventListener("click",e)},200)},openSpacingTopList(){this.closeAllList(),this.showSpacingTopList=!0;const e=()=>{this.showSpacingTopList=!1,window.removeEventListener("click",e)};d()(()=>{window.addEventListener("click",e)},200)},openSpacingBottomList(){this.closeAllList(),this.showSpacingBottomList=!0;const e=()=>{this.showSpacingBottomList=!1,window.removeEventListener("click",e)};d()(()=>{window.addEventListener("click",e)},200)},bindContentChange(){this.editor.addListener("contentChange",()=>{this.$emit("onchange",this.getContent())})},bindSelectionChange(){this.editor.addListener("selectionchange",()=>{const e=l()(this.toolStates),t=l()(this.toolValues),s=e.length,i=t.length;for(let t=0;t<s;t++)this.toolStates[e[t]]=this.editor.queryCommandState(e[t]);for(let e=0;e<i;e++){var n;a()(n=t[e]).call(n,"rowspacing")>-1?this.toolValues[t[e]]=this.editor.queryCommandValue("rowspacing",t[e].replace("rowspacing","")):this.toolValues[t[e]]=this.editor.queryCommandValue(t[e])+""}const o=this.editor.selection.getRange().getClosedNode();o&&"IMG"===o.tagName?this.imagefloatvisible=!0:this.imagefloatvisible=!1})},bindPaste(){this.editor.addListener("beforepaste",(e,t)=>{const s=document.createElement("div");s.innerHTML=t.html;let i=null,o=0;i=(e=>{const t={};const s=e=>{if(e.childNodes.length>0)for(const i of e.childNodes)if("IMG"===i.nodeName)i.src&&(i.id="transUrl"+o,o++,t[i.id]=i.src);else if(1===i.nodeType){if(i.style.backgroundImage){i.id="transUrl"+o,o++;let e=i.style.backgroundImage;t[i.id]=n()(e).call(e,5,-2)}s(i)}};return s(e),t})(s),this.replaceImgUrl(i),t.html=s.innerHTML})},replaceImgUrl(e){},bindFocusBlur(){this.editor.addListener("focus",()=>{this.$emit("editorFocus"),this.closeAllList(),this.toolbarMaskVisible=!1,this.listVisible=!1;const e=this.editor.getContent();a()(e).call(e,'id="initContent"')>-1&&(this.editor.execCommand("cleardoc"),this.editor.reset())}),this.editor.addListener("blur",()=>{this.listVisible=!0,d()(()=>{var e;const t=this.editor.hasContents(["span","strong","hr","ul","ol","blockquote","em"]),s=a()(e=this.editor.body.innerHTML).call(e,'style="')>-1;t||s||this.editor.setContent(this.$t("defaultContent"))},100)})},onUndo(){this.editor.execCommand("undo")},onRedo(){this.editor.execCommand("redo")},onFontsize(e){this.checkPlaceHolder(),this.editor.execCommand("fontsize",e),this.showFontSizeList=!1},onBlockquote(){this.checkPlaceHolder(),this.editor.execCommand("blockquote")},onHorizontal(){this.checkPlaceHolder(),this.editor.execCommand("horizontal")},onRemoveFormat(){this.editor.execCommand("removeformat"),this.editor.iframe.focus()},onFormatmatch(){this.checkPlaceHolder(),this.editor.execCommand("formatmatch")},onBold(){this.checkPlaceHolder(),this.editor.execCommand("bold")},onItalic(){this.checkPlaceHolder(),this.editor.execCommand("italic")},onUnderline(){this.checkPlaceHolder(),this.editor.execCommand("underline")},onIndent(){this.checkPlaceHolder(),this.editor.execCommand("indent"),this.editor.iframe.focus()},onJustify(e){this.checkPlaceHolder(),this.editor.execCommand("justify",e),this.editor.iframe.focus()},onLineHeight(e){this.checkPlaceHolder(),this.editor.execCommand("lineheight",e),this.editor.iframe.focus()},onRowSpacing(e,t){this.checkPlaceHolder(),this.editor.execCommand("rowspacing",e,t),this.editor.iframe.focus()},onMaskShow(){this.toolbarMaskVisible=!0},onFontsizeChange(e){this.checkPlaceHolder(),this.toolValues.fontsize=e,this.showFontSizeList=!1,this.onFontsize(e),this.$refs.editor.focus()},onFontColor(e){this.checkPlaceHolder(),e&&("none"===e?this.editor.execCommand("removeformat","span","color"):(this.editor.execCommand("forecolor",e),this.recentForeColor={hex:e},this.editor.iframe.focus()))},onBgColor(e){this.checkPlaceHolder(),e&&("none"===e?this.editor.execCommand("removeformat","span","background-color"):(this.editor.execCommand("backcolor",e),this.recentBackColor={hex:e},this.editor.iframe.focus()))},onRemoveFormatColor(e,t,s){this.editor.execCommand("removeformat",t)},onParagraphStyle(e){this.checkPlaceHolder(),"indent"===e?this.editor.execCommand("indent"):(this.editor.execCommand("justify",e),this.toolValues.justify=e)},setListStyle(e,t){this.checkPlaceHolder(),this.editor.execCommand("insertunorderedlist",t),this.editor.iframe.focus()},onImageFloat(e){this.imagefloatvisible&&(this.editor.execCommand("imagefloat",e),this.toolValues.imagefloat=e)},inputImage(e){this.editor.iframe.focus();const t='<p><img src="'.concat(e,'" /></p>');this.editor.execCommand("inserthtml",t)},getImages(){this.$emit("getImages")},updateContent(e){e?this.editor.setContent(e):(this.editor.reset(),this.editor.setContent(this.$t("defaultContent")))},checkPlaceHolder(){var e;a()(e=this.editor.body.innerHTML).call(e,'id="initContent"')>-1&&this.editor.execCommand("cleardoc")},getContent(){return this.editor.getContent(()=>{var e;return!(a()(e=this.editor.body.innerHTML).call(e,'id="initContent"')>-1||!this.editor.hasContents(["span","strong","hr","ul","ol","blockquote","em"]))})}}}},dUo5:function(e,t,s){},f2JA:function(e,t,s){"use strict";var i=s("js9Q"),n=s.n(i);t.default=n.a},fGFX:function(e,t,s){},fOtD:function(e,t,s){"use strict";var i=s("62Qv");s.n(i).a},fOvr:function(e,t,s){"use strict";var i=s("OWFR"),n=s.n(i);t.default=n.a},fb3H:function(e,t,s){"use strict";var i=s("w2Vt"),n=s("zUtI"),o=s("4B+h"),a=s("LQ5e"),r=s.n(a),l={props:{accountId:String,default:()=>""},components:{LoadingSpinner:i.a},data:()=>({notifies:[],isNotifyLoading:!1,selectedNotify:{}}),created(){this.isNotifyLoading=!0,this.fetchNotifies()},methods:{async fetchNotifies(){try{const e=await Object(n.g)(this.accountId||this.$route.params.accountId);if(e.ok){this.isNotifyLoading=!1,this.notifies=JSON.parse(r.a.unescape(e.data));for(let e of this.notifies)this.$set(e,"type","example"),this.$set(e,"isSelectedShow",!1);this.$nextTick((function(){this.renderGrid()}))}else this.isNotifyLoading=!1,Object(o.f)(e)}catch(e){Object(o.f)(e)}},closeNotify(){this.$emit("close")},renderGrid(){const e=document.getElementsByClassName("template-item");let t,s,i=0;for(let n=0;n<e.length;n++)n>0&&(e[n-3]&&(t=e[n-3].offsetTop+e[n-3].offsetHeight+20,e[n].style.top=t+"px"),n%3>0&&(s=e[n-1].offsetLeft+e[n-1].offsetWidth+20,e[n].style.left=s+"px")),i=Math.max(i,e[n].offsetTop+e[n].offsetHeight+60);const n=document.getElementsByClassName("template-content")[0];n&&(n.style.height=i-35+"px");for(let t=0;t<e.length;t++)e[t].style.height=e[t].offsetHeight+10+"px"},selectNotify(e,t){t.isSelectedShow=!t.isSelectedShow;for(let e of this.notifies)e.TemplateId!==t.TemplateId&&(e.isSelectedShow=!1);this.selectedNotify=t.isSelectedShow?t:{}},switchTemplate(e,t){e.type=t},goToWeChatPlatform(){this.$emit("close"),window.open("https://mp.weixin.qq.com")},next(){this.$emit("next",this.selectedNotify)}}},c=(s("vyV3"),s("KHd+")),d=s("HaPu"),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"wechat-notification-list"}},[s("div",{staticClass:"slds-modal slds-modal_large slds-fade-in-open",attrs:{"aria-hidden":"false",role:"dialog"}},[s("div",{staticClass:"slds-modal__container container-width",attrs:{role:"document",tabindex:"0"}},[s("div",{staticClass:"slds-modal__header"},[s("button",{staticClass:"slds-button slds-button_icon-inverse slds-modal__close",on:{click:function(t){return e.closeNotify()}}},[s("icon",{attrs:{name:"close",category:"utility","class-name":"slds-button__icon slds-button__icon_large"}}),e._v(" "),s("span",{staticClass:"slds-assistive-text"},[e._v("Close")])],1),e._v(" "),s("h2",{staticClass:"slds-text-heading_medium"},[e._v(e._s(e.$t("selectNotificationTemplateLabel")))])]),e._v(" "),e.isNotifyLoading?e._e():s("div",{staticClass:"slds-modal__content"},[s("div",{staticClass:"template-content"},[s("ul",{staticClass:"select-template-list"},[e._l(e.notifies,(function(t){return s("li",{staticClass:"slds-box template-item",on:{click:function(s){return s.stopPropagation(),e.selectNotify(s,t)}}},[s("div",{staticClass:"template-container"},[s("div",{staticClass:"slds-grid template-section"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"example"===t.type&&t.Example,expression:"notify.type === 'example' && notify.Example"}]},[s("span",{staticClass:"slds-text-heading_small title"},[e._v(e._s(t.Title))]),e._v(" "),s("pre",{staticClass:"slds-text-body_regular content"},[e._v(e._s(t.Example))])]),e._v(" "),s("div",[s("span",{staticClass:"slds-text-heading_small title"},[e._v(e._s(t.Title))]),e._v(" "),s("pre",{staticClass:"slds-text-body_regular content"},[e._v(e._s(t.Content))])])])]),e._v(" "),s("div",{staticClass:"switch-section"},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.Example,expression:"notify.Example"}],staticClass:"left",class:{selected:"example"===t.type},on:{click:function(s){return s.stopPropagation(),e.switchTemplate(t,"example")}}}),e._v(" "),s("p",{class:{selected:"content"===t.type||!t.Example},on:{click:function(s){return s.stopPropagation(),e.switchTemplate(t,"content")}}})]),e._v(" "),t.isSelectedShow?s("div",{staticClass:"selected-notify"},[s("div",{staticClass:"selected-bg"}),e._v(" "),s("div",{staticClass:"selected-icon"},[s("icon",{attrs:{name:"check","fill-color":"white",width:"48px",height:"48px"}})],1)]):e._e()])})),e._v(" "),s("li",{staticClass:"slds-box template-item default"},[s("span",{staticClass:"default-icon down-btn",on:{click:function(t){return e.goToWeChatPlatform()}}},[s("icon",{attrs:{name:"add","class-name":"down-icon",width:"32px",height:"32px"}})],1),e._v(" "),s("p",{staticClass:"default-value"},[e._v(e._s(e.$t("newTemplateLabel")))])])],2)])]),e._v(" "),s("loading-spinner",{attrs:{"is-loading":e.isNotifyLoading,"custom-style":"position: relative;padding: 40px;background-color: white"}}),e._v(" "),s("div",{staticClass:"slds-modal__footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:function(t){return e.closeNotify()}}},[e._v(e._s(e.$t("global.cancelBtn")))]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:!e.selectedNotify.TemplateId},on:{click:function(t){return e.next()}}},[e._v(e._s(e.$t("global.nextBtn")))])])],1)]),e._v(" "),s("div",{staticClass:"slds-backdrop slds-backdrop_open"})])])}),[],!1,null,"1a576594",null);"function"==typeof d.default&&Object(d.default)(u);t.a=u.exports},fnW4:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"editor":"编辑器","rules":"规则","settings":"设置","share":"分享","build":"构建","properties":"属性","style":"样式","commonItems":"通用组件","shortText":"文本","longText":"文本域","dropdown":"下拉选择","singleChoice":"单项选择","multipleChoice":"多项选择","date":"日期","dateTime":"时间","rating":"评价","heading":"标题","bannerImageUrl":"横幅图片地址","addATitle":"添加一个标题","description":"描述","leaveConfirm":"编辑问卷","discardChangeLabel":"丢弃改变","stayPageLabel":"停留在当前页面","surveySaved":"问卷已保存。","settingsSaved":"设置已保存。","rulesSaved":"规则已保存。","ueditorDescriptionTitle":"编辑描述","ueditorThankyouTitle":"编辑感谢消息","untitledSurvey":"未命名问卷"},"en":{"editor":"EDITOR","rules":"RULES","settings":"SETTINGS","share":"SHARE","build":"Build","properties":"Properties","style":"Style","commonItems":"Common Items","shortText":"Short Text","longText":"Long Text","dropdown":"Dropdown","singleChoice":"Single Choice","multipleChoice":"Multiple Choice","date":"Date","dateTime":"Date/Time","rating":"Rating","heading":"Heading","bannerImageUrl":"Banner Image URL","addATitle":"Add a Title","description":"Description","leaveConfirm":"Edit Survey","discardChangeLabel":"Discard Changes","stayPageLabel":"Stay on this Page","surveySaved":"The survey was saved.","settingsSaved":"Settings were saved.","rulesSaved":"Rules were saved.","ueditorDescriptionTitle":"Edit Description","ueditorThankyouTitle":"Edit Thank You Message","untitledSurvey":"Untitled Survey"}}'),delete e.options._Ctor}},gBlF:function(e,t,s){},hEcC:function(e,t,s){"use strict";var i=s("2G2i");s.n(i).a},hG8I:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"newTextMessage":"新建文本消息","textMessages":"文本消息","designer":{"linkIcon":"添加链接","miniProgramIcon":"添加小程序链接","actionIcon":"添加动作","mergeFieldIcon":"插入合并字段","changeBtn":"更改","removeBtn":"删除","linkUrl":"链接网址","illegalUrl":"不合法的网址","appId":"App ID","pagePath":"页面路径","name":"名称","value":"值","selectAField":"选择一个字段","fieldTitle":"你已选择以下字段","findObjectPlaceholder":"查找对象...","labelFilterPlaceholder":"键入以过滤列表...","type":"类型","apiName":"API名","currentSelection":"当前选择","noMatchesFound":"没有发现匹配项"}},"en":{"newTextMessage":"New Text Message","textMessages":"Text Messages","designer":{"linkIcon":"Add link","miniProgramIcon":"Add mini program link","actionIcon":"Add action","mergeFieldIcon":"Insert merge field","changeBtn":"Change","removeBtn":"Remove","linkUrl":"Link URL","illegalUrl":"Invalid URL","appId":"App ID","pagePath":"Page Path","name":"Name","value":"Value","selectAField":"Select A Field","fieldTitle":"You have selected the following field","findObjectPlaceholder":"Find An Object...","labelFilterPlaceholder":"Type here to filter the list...","type":"Type","apiName":"API Name","currentSelection":"Current Selection","noMatchesFound":"No matches found"}}}'),delete e.options._Ctor}},hkfk:function(e,t,s){"use strict";var i=s("fGFX");s.n(i).a},hnm1:function(e,t,s){e.exports=s("Jc/9")},iQVG:function(e,t,s){},iiLD:function(e,t,s){"use strict";var i=s("3zWd");s.n(i).a},js9Q:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"submitAction":"表单提交后","showThankMsg":"显示提示文字","redirectTo":"打开其他网页","redirectUrl":"网页地址","thankyouMessage":"提示文字","wechatSettings":"微信设置","wechatAccount":"微信公众号","wechatResponse":"微信响应","onlyAccessible":"只可通过微信应用程序访问","prefillForm":"预先填充表单","prefilledTip":"只有微信关注者的信息和关联的联系人或者潜在客户的信息能够被预填充。","related":"相关","form":"表单","Lead":"潜在客户","Contact":"联系人","contactTip":"当微信关注者与联系人或个人客户记录相关联时，将打开相关的联系人表单。","leadTip":"一旦一位微信关注者被关联到一条潜在客户记录，那么相关联的潜在客户表单就会被打开。","formNameLabel":"表单名","salesforceObjLabel":"Salesforce 对象","recordTypeLabel":"记录类型","noteLabel":"备注","notifyContent":"设置已保存。","editableChoice":"提交后可编辑","pardotSettings":"Pardot 设置","enablePardotIntegration":"启用 Pardot 集成","confirmTitle":"保存表单","noEmailFailedContent":"当前表单不包含 Email 字段，可能会导致 Pardot 集成失效。确定要保存吗？","noRequiredEmailFailedContent":"当前表单包含的 Email 字段不是必填，可能会导致 Pardot 集成失效。确定要保存吗？","editableTip":"如果该选项选中，微信用户可以通过重新打开此表单来编辑提交的信息。"},"en":{"submitAction":"Form Submitted Action","showThankMsg":"Show Thank You Message","redirectTo":"Redirect To","redirectUrl":"Redirect URL","thankyouMessage":"Thank You Message","wechatSettings":"WeChat Settings","wechatAccount":"WeChat Account","wechatResponse":"WeChat Response(s)","onlyAccessible":"Only accessible by the WeChat app","prefillForm":"Pre-fill form","prefilledTip":"Only WeChat follower information and related lead or contact information can be pre-filled.","related":"Related","form":"Form | Forms","Lead":" Lead ","Contact":" Contact ","contactTip":"The related Contact Form will be opened when a WeChat follower is associated with a Contact or Person Account record.","leadTip":"The related Lead Form will be opened when a WeChat follower is associated with a Lead record.","formNameLabel":"Form Name","salesforceObjLabel":"Salesforce Object","recordTypeLabel":"Record Type","noteLabel":"Note","notifyContent":"Settings were saved.","editableChoice":"Editable after submitted","pardotSettings":"Pardot Settings","enablePardotIntegration":"Enable Pardot integration","confirmTitle":"Save Form","noEmailFailedContent":"The form being saved does not include the Email field. The Pardot integration may not work for this form. Are you sure you want to save it?","noRequiredEmailFailedContent":"The form being saved does not include the required Email field. The Pardot integration may not work for this form. Are you sure you want to save it?","editableTip":"If checked, WeChat users can edit the submitted information by reopening this form."}}'),delete e.options._Ctor}},jz2B:function(e,t,s){"use strict";var i=s("zoBN"),n=s.n(i);t.default=n.a},"k/9o":function(e,t,s){"use strict";var i=s("qVZU"),n=s.n(i);t.default=n.a},lNHh:function(e,t,s){"use strict";var i=s("svHN"),n=s.n(i);t.default=n.a},mmw4:function(e,t,s){"use strict";var i=s("SLhn"),n=s.n(i),o=s("Ip10"),a=s.n(o),r=s("wG3i"),l=s.n(r),c=s("ngIk"),d=s("dcdS"),u=s("oWfJ"),p=s("za7x"),h=s("vkTm"),v={components:{Icon:p.a,ColorPicker:h.a,InputSelect:c.a,Dropdown:d.a},mixins:[u.a],props:{stylesType:{type:String,default:"form"},customizeStyles:{type:Object,default:()=>({})},advanced:{type:String,default:""}},data(){return{showCustomize:!0,showAdvanced:!1,customizedBoxHeight:null,currentColorEL:null,colorPickerPosition:"",colorType:"",showColorPicker:!1,pageFontFamilyOption:{options:[{Name:"Default",value:"Default"},{Name:"Arial",value:"Arial"},{Name:"Courier New",value:"Courier New"},{Name:"Helvetica",value:"Helvetica"},{Name:"Tahoma",value:"Tahoma"},{Name:"Times New Roman",value:"Times New Roman"},{Name:"Trebuchet MS",value:"Trebuchet MS"},{Name:"Verdana",value:"Verdana"},{Name:"黑体",value:"黑体"},{Name:"宋体",value:"宋体"},{Name:"楷体",value:"楷体"}],currentOptions:[{Name:"Default",value:"Default"}]},requiredIconOption:{options:[{Name:this.$t("noneLabel"),value:"None"},{Name:this.$t("asteriskLabel"),value:"Asterisk"},{Name:this.$t("redAsteriskLabel"),value:"Red Asterisk"}],currentOptions:[{Name:this.$t("noneLabel"),value:"None"}]},fontSizeOption:{options:[{Name:"10px",value:"10px"},{Name:"11px",value:"11px"},{Name:"12px",value:"12px"},{Name:"13px",value:"13px"},{Name:"14px",value:"14px"},{Name:"16px",value:"16px"},{Name:"17px",value:"17px"},{Name:"18px",value:"18px"},{Name:"20px",value:"20px"},{Name:"24px",value:"24px"},{Name:"30px",value:"30px"}]},titleFontSizeOption:{currentOptions:[{Name:"14px",value:"14px"}]},labelFontSizeOption:{currentOptions:[{Name:"17px",value:"17px"}]},buttonFontSizeOption:{currentOptions:[{Name:"18px",value:"18px"}]},bgImg:"",styles:{PageFontFamily:"Default",PageBg:"#ffffff",PageBgImage:"",FormBg:"#efeef4",ErrorBg:"#e64340",ErrorColor:"#ffffff",RequiredIcon:"None",TitleFontSize:"14px",TitleColor:"#999999",LabelFontSize:"16px",LabelColor:"#000",CheckedColor:"#09bb07",ButtonBg:"#1aad19",ButtonColor:"#fff",ButtonFontSize:"18px"},advancedStyles:"",pageBgImgHeader:this.$t("addBgImgHeader")}},inject:["showErrorImg"],created(){if(this.customizeStyles){var e;if(this.styles=JSON.parse(l()(this.customizeStyles)),this.customizeStyles.PageFontFamily&&(this.pageFontFamilyOption.currentOptions=[{Name:this.customizeStyles.PageFontFamily,value:this.customizeStyles.PageFontFamily}]),this.customizeStyles.RequiredIcon)this.requiredIconOption.currentOptions[0]=a()(e=this.requiredIconOption.options).call(e,e=>e.value===this.customizeStyles.RequiredIcon);this.customizeStyles.TitleFontSize&&(this.titleFontSizeOption.currentOptions=[{Name:this.customizeStyles.TitleFontSize,value:this.customizeStyles.TitleFontSize}]),this.customizeStyles.LabelFontSize&&(this.labelFontSizeOption.currentOptions=[{Name:this.customizeStyles.LabelFontSize,value:this.customizeStyles.LabelFontSize}]),this.customizeStyles.ButtonFontSize&&(this.buttonFontSizeOption.currentOptions=[{Name:this.customizeStyles.ButtonFontSize,value:this.customizeStyles.ButtonFontSize}])}this.advanced&&(this.advancedStyles=this.advanced)},mounted(){this.setCustomizedBoxHeight()},watch:{dropdownRefId:function(){"pageFontFamily"===this.dropdownType?(this.dropdownOptionData.options=this.pageFontFamilyOption.options,this.dropdownOptionData.currentOptions=this.pageFontFamilyOption.currentOptions):"requiredIcon"===this.dropdownType?(this.dropdownOptionData.options=this.requiredIconOption.options,this.dropdownOptionData.currentOptions=this.requiredIconOption.currentOptions):"titleFontSize"===this.dropdownType?(this.dropdownOptionData.options=this.fontSizeOption.options,this.dropdownOptionData.currentOptions=this.titleFontSizeOption.currentOptions):"labelFontSize"===this.dropdownType?(this.dropdownOptionData.options=this.fontSizeOption.options,this.dropdownOptionData.currentOptions=this.labelFontSizeOption.currentOptions):"buttonFontSize"===this.dropdownType&&(this.dropdownOptionData.options=this.fontSizeOption.options,this.dropdownOptionData.currentOptions=this.buttonFontSizeOption.currentOptions)},showCustomize:function(){this.showCustomize?this.setCustomizedBoxHeight():this.customizedBoxHeight="0px"}},methods:{setCustomizedBoxHeight(){this.$nextTick(()=>{const e=this.$refs.wrapper.offsetHeight;this.customizedBoxHeight=e-38-52+"px"})},toggleChooseBox(e){"customize"===e?(this.showCustomize=!this.showCustomize,this.showCustomize&&(this.showAdvanced=!1)):(this.showAdvanced=!this.showAdvanced,this.showAdvanced&&(this.showCustomize=!1))},addBgImg(){this.styles.PageBgImage?(this.pageBgImgHeader=this.$t("editBgImgHeader"),this.bgImg=this.styles.PageBgImage):this.pageBgImgHeader=this.$t("addBgImgHeader"),this.$refs.addBgImgModal.open()},cancelAddBgImg(){this.bgImg="",this.$refs.addBgImgModal.close()},saveBgImg(){this.$refs.addBgImgModal.close(),this.styles.PageBgImage=this.bgImg,this.bgImg="",this.$emit("update-styles",this.styles,"customize")},selectOption(e){"pageFontFamily"===this.dropdownType?(this.pageFontFamilyOption.currentOptions=e,this.styles.PageFontFamily=e[0].value):"requiredIcon"===this.dropdownType?(this.requiredIconOption.currentOptions=e,this.styles.RequiredIcon=e[0].value):"titleFontSize"===this.dropdownType?(this.titleFontSizeOption.currentOptions=e,this.styles.TitleFontSize=e[0].value):"labelFontSize"===this.dropdownType?(this.labelFontSizeOption.currentOptions=e,this.styles.LabelFontSize=e[0].value):"buttonFontSize"===this.dropdownType&&(this.buttonFontSizeOption.currentOptions=e,this.styles.ButtonFontSize=e[0].value),this.$refs.bgColorList.close(),this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1,this.$emit("update-styles",this.styles,"customize")},onColorSelected(e){this.styles[this.colorType]=e,this.styles,this.$emit("update-styles",this.styles,"customize")},colorPickerShow(e){this.showColorPicker=e},setColorPickerPosition(){var e;let t=0;const s=this.currentColorEl.offsetHeight,i=this.currentColorEl.getBoundingClientRect().top;t=(()=>{let e=0;return e=document.body.clientHeight&&document.documentElement.clientHeight?document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight:document.body.clientHeight>document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight,e})()-i-s>300?i+s-22:i-300-22,this.colorPickerPosition=n()(e="z-index: 1200; position: fixed; left: ".concat(54,"px; top: ")).call(e,t,"px;")},styleListScroll(e){this.showColorPicker&&(this.setColorPickerPosition(),e.currentTarget.scrollTop>this.currentColorEl.offsetTop&&this.$refs.bgColorList.close())},openColorPicker(e,t){this.currentColorEl=e.currentTarget,this.showDropdown=!1,this.$root.$emit("close-other-dropdown",null),this.$refs.bgColorList.close(),this.setColorPickerPosition(),this.colorType=t,this.$refs.bgColorList.open()},addAdvancedStyles(){this.$emit("update-styles",this.advancedStyles,"advanced")}}},m=(s("6mtQ"),s("KHd+")),f=s("+O6Z"),g=Object(m.a)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"charket-form-style"},[s("div",{staticClass:"form-choose-items"},[s("div",{staticClass:"choose-items-header",class:{"choosed-field":e.showCustomize},on:{click:function(t){return e.toggleChooseBox("customize")}}},[s("span",{staticClass:"arrow-icon",class:{"arrow-down":e.showCustomize}},[s("icon",{attrs:{name:"chevronright","fill-color":"#0070d2",width:"15px",height:"15px","charket-icon":""}})],1),e._v("\n      "+e._s(e.$t("customizeLabel"))+"\n    ")]),e._v(" "),s("div",{ref:"styleItemList",staticClass:"choose-items-content",style:{height:e.customizedBoxHeight},on:{scroll:function(t){return e.styleListScroll(t)}}},[s("div",{staticClass:"form-section"},[s("div",{staticClass:"slds-border_bottom form-title"},[e._v(e._s(e.$t("pageLabel")))]),e._v(" "),s("div",{staticClass:"form-items-content"},[s("div",{staticClass:"slds-grid slds-grid_align-spread form-item"},[s("span",[e._v(e._s(e.$t("fontLabel")))]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("input-select",{attrs:{currents:e.pageFontFamilyOption.currentOptions,type:"pageFontFamily"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread form-item"},[s("span",[e._v(e._s(e.$t("pageBgLabel")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"PageBg")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.PageBg?"#ffffff":e.styles.PageBg}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread form-item"},[s("span",[e._v(e._s(e.$t("bgImgLabel")))]),e._v(" "),e.styles.PageBgImage?s("div",{staticClass:"bg-img-content",on:{click:e.addBgImg}},[s("img",{attrs:{src:e._f("imgFilter")(e.styles.PageBgImage)},on:{error:function(t){return e.showErrorImg(t)}}})]):s("button",{staticClass:"slds-button slds-button_neutral btn-size",on:{click:e.addBgImg}},[e._v(e._s(e.$t("addBtn")))])])])]),e._v(" "),s("div",{staticClass:"form-section"},[s("div",{staticClass:"slds-border_bottom form-title"},[e._v(e._s("survey"===e.stylesType?e.$t("surveyLabel"):e.$t("formLabel")))]),e._v(" "),s("div",{staticClass:"form-items-content"},[s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s(e.$t("formBgLabel")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"FormBg")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.FormBg?"#ffffff":e.styles.FormBg}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s(e.$t("errorBackground")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"ErrorBg")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.ErrorBg?"#ffffff":e.styles.ErrorBg}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s(e.$t("errorTextColor")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"ErrorColor")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.ErrorColor?"#ffffff":e.styles.ErrorColor}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])])])]),e._v(" "),s("div",{staticClass:"form-section"},[s("div",{staticClass:"slds-border_bottom form-title"},[e._v(e._s(e.$t("itemsLabel")))]),e._v(" "),s("div",{staticClass:"form-items-content"},[s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s(e.$t("requiredIcon")))]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("input-select",{attrs:{currents:e.requiredIconOption.currentOptions,type:"requiredIcon"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s("survey"===e.stylesType?e.$t("questionFontSize"):e.$t("headingFontSize")))]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("input-select",{attrs:{"default-label":e.$t("defaultLabel"),currents:e.titleFontSizeOption.currentOptions,type:"titleFontSize"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s("survey"===e.stylesType?e.$t("questionTextColor"):e.$t("headingTextColor")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"TitleColor")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.TitleColor?"#ffffff":e.styles.TitleColor}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s("survey"===e.stylesType?e.$t("answerFontSize"):e.$t("labelFontSize")))]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("input-select",{attrs:{"default-label":e.$t("defaultLabel"),currents:e.labelFontSizeOption.currentOptions,type:"labelFontSize"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s("survey"===e.stylesType?e.$t("answerTextColor"):e.$t("labelTextColor")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"LabelColor")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.LabelColor?"#ffffff":e.styles.LabelColor}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s("survey"===e.stylesType?e.$t("choiceCheckedColor"):e.$t("checkedColor")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"CheckedColor")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.CheckedColor?"#ffffff":e.styles.CheckedColor}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])])])]),e._v(" "),s("div",{staticClass:"form-section"},[s("div",{staticClass:"slds-border_bottom form-title"},[e._v(e._s(e.$t("buttonLabel")))]),e._v(" "),s("div",{staticClass:"form-items-content"},[s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s(e.$t("buttonBackground")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"ButtonBg")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.ButtonBg?"#ffffff":e.styles.ButtonBg}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s(e.$t("buttonFontColor")))]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread select-box",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(t,"ButtonColor")}}},[s("div",{staticClass:"current-color",style:{"background-color":"none"===e.styles.ButtonColor?"#ffffff":e.styles.ButtonColor}}),e._v(" "),s("span",{staticClass:"icon"},[s("icon",{attrs:{name:"down",width:"14px",height:"14px","fill-color":"#706e6b"}})],1)])]),e._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-spread slds-grid_vertical-align-center form-item"},[s("span",[e._v(e._s(e.$t("buttonFontSize")))]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("input-select",{attrs:{"default-label":e.$t("defaultLabel"),currents:e.buttonFontSizeOption.currentOptions,type:"buttonFontSize"},on:{"open-dropdown":e.openDropdown,"close-dropdown":e.closeDropdown,resize:e.resizeDropdown}})],1)])])]),e._v(" "),s("div",{style:e.colorPickerPosition},[s("color-picker",{ref:"bgColorList",attrs:{value:""},on:{"get-color":e.onColorSelected,"update-showing-status":function(t){return e.colorPickerShow(t)}}})],1)])]),e._v(" "),s("div",{staticClass:"form-choose-items form-choose-items-none"},[s("div",{staticClass:"choose-items-header",class:{"choosed-field":e.showAdvanced,"choose-items-bottom":e.showCustomize},on:{click:function(t){return e.toggleChooseBox("commonItems")}}},[s("span",{staticClass:"arrow-icon",class:{"arrow-down":e.showAdvanced}},[s("icon",{attrs:{name:"chevronright","fill-color":"#0070d2",width:"15px",height:"15px","charket-icon":""}})],1),e._v("\n      "+e._s(e.$t("advancedLabel"))+"\n    ")]),e._v(" "),s("transition",{attrs:{name:"expand"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanced,expression:"showAdvanced"}],staticClass:"choose-items-content advance-choose-section"},[s("div",{staticClass:"choose-items-content-padding"},[s("div",{staticClass:"advanced-title"},[e._v(e._s(e.$t("cssStyle")))]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.advancedStyles,expression:"advancedStyles"}],staticClass:"slds-textarea advanced-content",domProps:{value:e.advancedStyles},on:{keyup:function(t){return e.addAdvancedStyles()},input:function(t){t.target.composing||(e.advancedStyles=t.target.value)}}})])])])],1),e._v(" "),e.showDropdown?s("dropdown",{attrs:{options:e.dropdownOptionData.options,currents:e.dropdownOptionData.currentOptions,left:e.dropdownLeft,top:e.dropdownTop,width:e.dropdownWidth},on:{"select-option":e.selectOption,close:e.closeDropdown}}):e._e(),e._v(" "),s("ld-modal",{ref:"addBgImgModal",attrs:{title:e.pageBgImgHeader,width:"50%"},scopedSlots:e._u([{key:"content",fn:function(){return[s("div",{staticClass:"slds-p-around_medium"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-content-title"},[e._v(e._s(e.$t("urlLabel")))]),e._v(" "),s("div",{staticClass:"modal-content-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.bgImg,expression:"bgImg"}],staticClass:"slds-input",attrs:{type:"text"},domProps:{value:e.bgImg},on:{input:function(t){t.target.composing||(e.bgImg=t.target.value)}}})])])])]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{neutral:""},on:{click:function(t){return e.cancelAddBgImg()}}},[e._v("\n        "+e._s(e.$t("global.cancelBtn"))+"\n      ")]),e._v(" "),s("ld-button",{attrs:{brand:""},on:{click:function(t){return e.saveBgImg()}}},[e._v("\n        "+e._s(e.$t("global.saveBtn"))+"\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"43ca6134",null);"function"==typeof f.default&&Object(f.default)(g);t.a=g.exports},nOmU:function(e,t,s){"use strict";var i=s("yWOo");s.n(i).a},pUDi:function(e,t,s){"use strict";var i=s("SLhn"),n=s.n(i),o=s("3O4B"),a=s.n(o),r=s("WE60"),l=s.n(r),c=s("wG3i"),d=s.n(c),u=s("Ip10"),p=s.n(u),h=s("+Bun"),v=s.n(h),m=s("0G99"),f=s.n(m),g=s("vQrK"),y=s.n(g),b=s("mdEO"),w=s("TDue"),_=s("vkTm"),C=s("ngIk"),S=s("dcdS"),x=s("oWfJ"),k=s("L2JU"),I={components:{SelectField:w.a,ColorPicker:_.a,InputSelect:C.a,Dropdown:S.a,PhoneFrameCard:b.PhoneFrameCard},mixins:[x.a],props:{notify:{type:Object,default:()=>({contentTemplate:{keywords:[]}})},selectedMiniProgram:{type:Object,default:function(){return{}}},wechatAccountId:{type:String,default:()=>""}},data(){return{colorPickerPosition:"",newNotify:{},notifyColor:{first:"#000000",keywords:[],remark:"#000000"},colorType:"",mergeFieldType:"",keywords:[],notificationURL:"",note:"",showMergeField:!1,notifyFirst:"",notifyRemark:"",showFirst:"",showRemark:"",fieldObj:{},redirectOptionData:{options:[{Name:this.$t("urlLabel"),Value:"URL"},{Name:this.$t("global.miniProgramLabel"),Value:"Mini Program Page"}],currents:[{Name:this.$t("urlLabel"),Value:"URL"}]},selectedMiniProgramPage:{}}},computed:y()({},Object(k.c)({currentAccount:"sidebar/currentAccount"}),{isRedirectToURL(){return"URL"===this.redirectOptionData.currents[0].Value},isShowDetail(){return this.notificationURL||this.selectedMiniProgramPage.messageId}}),created(){this.newNotify=this.notify,this.notificationURL=this.newNotify.NotificationURL||"";let e=this.newNotify.Content.split(/{{.*?}}/gm),t=this.newNotify.Content.match(/{{.*?}}/gm),s=[];if(f()(e).call(e,(e,i)=>{s.push({name:e,value:t[i],key:t[i],color:"#000000"})}),this.$set(this.newNotify,"contentTemplate",s),this.notify.Id){var i,n;this.fieldObj=this.newNotify.mergeFieldObject;let e=p()(i=this.newNotify.contentTemplate).call(i,e=>{var t;return e.key&&0===v()(t=e.key).call(t,"{{first.")}),s=p()(n=this.newNotify.contentTemplate).call(n,e=>{var t;return e.key&&0===v()(t=e.key).call(t,"{{remark.")});e&&(e.color=this.newNotify.ContentMapping.first.color,e.value=this.newNotify.ContentMapping.first.value,this.notifyFirst=this.newNotify.ContentMapping.first.value,this.notifyColor.first=this.newNotify.ContentMapping.first.color),s&&(s.color=this.newNotify.ContentMapping.remark.color,s.value=this.newNotify.ContentMapping.remark.value,this.notifyRemark=this.newNotify.ContentMapping.remark.value,this.notifyColor.remark=this.newNotify.ContentMapping.remark.color),f()(t).call(t,(e,t)=>{if(0===v()(e).call(e,"{{first."))this.showFirst=e;else if(0===v()(e).call(e,"{{remark."))this.showRemark=e;else{var s;let t=e.match(/({{=?)(\S*)(?=.DATA)/g);const i=t[0].substr(2,t[0].length-1);this.keywords.push({label:i,value:this.newNotify.ContentMapping[i].value}),this.notifyColor.keywords.push(this.newNotify.ContentMapping[i].color);let n=p()(s=this.newNotify.contentTemplate).call(s,e=>e.key.replace(/{{/,"").replace(/.DATA}}/,"")===i);n.value=this.newNotify.ContentMapping[i].value,n.color=this.newNotify.ContentMapping[i].color}}),this.notificationURL=this.newNotify.ContentMapping.url||this.notificationURL}else f()(t).call(t,(e,t)=>{if(0===v()(e).call(e,"{{first."))this.showFirst=e;else if(0===v()(e).call(e,"{{remark."))this.showRemark=e;else{let t=e.match(/({{=?)(\S*)(?=.DATA)/g);this.keywords.push({label:t[0].substr(2,t[0].length-1),value:""}),this.notifyColor.keywords.push("#000000")}});this.note=this.newNotify.Note||"",this.selectedMiniProgram.messageId&&(this.redirectOptionData.currents=[{Name:this.$t("global.miniProgramLabel"),Value:"Mini Program Page"}],this.selectedMiniProgramPage=JSON.parse(d()(this.selectedMiniProgram)))},methods:{changeFirst(e){var t;p()(t=this.newNotify.contentTemplate).call(t,e=>{var t;return 0===v()(t=e.key).call(t,"{{first.")}).value=this.notifyFirst},changeRemark(){var e;p()(e=this.newNotify.contentTemplate).call(e,e=>{var t;return 0===v()(t=e.key).call(t,"{{remark.")}).value=this.notifyRemark},changeKey(e,t,s){var i;p()(i=this.newNotify.contentTemplate).call(i,e=>e.key.replace(/{{/,"").replace(/.DATA}}/,"")===s).value=e.target.value,this.keywords[t].value=e.target.value},onBgColor(e){if("first"===this.colorType){var t;this.notifyColor.first=e,p()(t=this.newNotify.contentTemplate).call(t,e=>{var t;return 0===v()(t=e.key).call(t,"{{first.")}).color=e}else if("remark"===this.colorType){var s;this.notifyColor.remark=e,p()(s=this.newNotify.contentTemplate).call(s,e=>{var t;return 0===v()(t=e.key).call(t,"{{remark.")}).color=e}else{var i,n,o;const t=l()(i=this.keywords).call(i,e=>e.label===this.colorType);a()(n=this.notifyColor.keywords).call(n,t,1,e),p()(o=this.newNotify.contentTemplate).call(o,e=>e.key.replace(/{{/,"").replace(/.DATA}}/,"")===this.colorType).color=e}},openColorPicker(e,t,s){var i;this.$refs.bgColorList.close(),this.colorType=s,this.colorPickerPosition=n()(i="position: absolute; left: ".concat(t,"px; top: ")).call(i,e,"px;"),this.$refs.bgColorList.open()},openSelectField(e){this.showMergeField=!0,this.mergeFieldType=e},closeSelectFiled(){this.showMergeField=!1},selectMergeField(e,t){if(this.fieldObj.label!==t.label&&(this.fieldObj=JSON.parse(d()(t))),"first"===this.mergeFieldType){var s;p()(s=this.newNotify.contentTemplate).call(s,e=>{var t;return 0===v()(t=e.key).call(t,"{{first.")}).value=this.notifyFirst+e,this.notifyFirst=this.notifyFirst+e}else if("remark"===this.mergeFieldType){var i;p()(i=this.newNotify.contentTemplate).call(i,e=>{var t;return 0===v()(t=e.key).call(t,"{{remark.")}).value=this.notifyRemark+e,this.notifyRemark=this.notifyRemark+e}else if("url"===this.mergeFieldType)this.notificationURL=e;else{var n,o;let t=p()(n=this.newNotify.contentTemplate).call(n,e=>{var t;return v()(t=e.key).call(t,this.mergeFieldType)>=0});const s=l()(o=this.keywords).call(o,e=>e.label===this.mergeFieldType);t.value=this.keywords[s].value,t.value=t.value+e,this.keywords[s].value=this.keywords[s].value+e}this.showMergeField=!1},prepareUpdatedData(){var e,t;let s={ContentMapping:{}};return s.Note=this.note,s.Title=this.newNotify.Title,this.showFirst&&(s.ContentMapping.first={value:this.notifyFirst,color:this.notifyColor.first}),f()(e=this.keywords).call(e,(e,t)=>{s.ContentMapping[e.label]={value:e.value,color:this.notifyColor.keywords[t]}}),this.showRemark&&(s.ContentMapping.remark={value:this.notifyRemark,color:this.notifyColor.remark}),this.isRedirectToURL?(s.NotificationURL=this.notificationURL,this.selectedMiniProgramPage={}):(this.notificationURL="",s.MiniProgramPageId=this.selectedMiniProgramPage.messageId||""),v()(t=this.notificationURL).call(t,"{!")>=0&&(s.NotificationURL="",s.ContentMapping.url=this.notificationURL),s},prepareCreatedData(){let e=this.prepareUpdatedData();return e.Content=this.newNotify.Content,this.newNotify.Industry&&(e.Industry=this.newNotify.Industry),this.newNotify.Sample&&(e.Sample=this.newNotify.Sample),e.TemplateId=this.newNotify.TemplateId,e},onChangeRedirectTo(e){this.redirectOptionData.currents=e,this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1},onMiniProgramChanged(e){this.selectedMiniProgramPage=e}}},T=(s("Fblv"),s("KHd+")),L=s("A3YL"),O=Object(T.a)(I,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slds-grid slds-grid_vertical-align-start new-notification-page"},[s("phone-frame-card",{staticClass:"phone-model-outer",attrs:{name:e.currentAccount.Name}},[s("div",{attrs:{slot:"app-name"},slot:"app-name"},[e._v(e._s(e.$t("global.wechatLabel")))]),e._v(" "),s("span",{attrs:{slot:"back-label"},slot:"back-label"},[e._v(e._s(e.$t("global.backBtn")))]),e._v(" "),s("div",{staticClass:"phone-model-body",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"slds-box template-container"},[s("div",{staticClass:"template-section",class:{"has-padding":!e.isShowDetail}},[s("span",{staticClass:"slds-text-heading_small title",class:{"key-title":!e.showFirst}},[e._v(e._s(e.newNotify.Title))]),e._v(" "),e._l(e.newNotify.contentTemplate,(function(t){return[t.name?s("pre",{staticClass:"keyword"},[e._v(e._s(t.name))]):e._e(),e._v(" "),t.value?s("pre",{staticClass:"keyword",style:{color:t.color}},[e._v(e._s(t.value))]):e._e()]})),e._v(" "),e.isShowDetail?s("div",{staticClass:"detail-section",class:{"mini-program-detail":!e.isRedirectToURL}},[e.isRedirectToURL?e._e():s("icon",{staticClass:"mini-program-icon",attrs:{name:"miniProIcon",width:"16px",height:"16px","fill-color":"#706e6b","charket-icon":""}}),e._v(" "),e.isRedirectToURL?s("span",{staticClass:"slds-text-body_regular detail-value"},[e._v("\n              "+e._s(e.$t("detailsLabel"))+"\n            ")]):e._e(),e._v(" "),s("span",{staticClass:"detail-icon"},[s("icon",{attrs:{name:"chevronright","fill-color":"#b0adab",width:"14px",height:"14px"}})],1)],1):e._e()],2)])]),e._v(" "),s("div",{staticClass:"slds-col phone-model-footer",attrs:{slot:"action"},slot:"action"},[s("icon",{attrs:{name:"add","fill-color":"slds-icon_container slds-icon-text-default",width:"20px",height:"20px"}})],1)]),e._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"right-content"},[s("span",{staticClass:"slds-text-heading_small content-title"},[e._v(e._s(e.$t("templateSettingLabel")))]),e._v(" "),e.showFirst?s("div",{staticClass:"input-section"},[s("label",[e._v("First")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.notifyFirst,expression:"notifyFirst"}],staticClass:"slds-textarea value first",style:{color:e.notifyColor.first},domProps:{value:e.notifyFirst},on:{keyup:function(t){return e.changeFirst(t)},input:function(t){t.target.composing||(e.notifyFirst=t.target.value)}}}),e._v(" "),s("span",{staticClass:"insert-icon down-btn",on:{click:function(t){return t.stopPropagation(),e.openSelectField("first")}}},[s("icon",{attrs:{name:"insertTag","class-name":"down-icon",width:"15px",height:"15px"}})],1),e._v(" "),s("span",{staticClass:"color-icon down-btn",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(100,755,"first")}}},[s("icon",{attrs:{name:"colorSelect","class-name":"down-icon",width:"15px",height:"15px"}})],1)]):e._e(),e._v(" "),e._l(e.keywords,(function(t,i){return s("div",{staticClass:"input-section"},[s("label",[e._v(e._s(t.label))]),e._v(" "),s("input",{staticClass:"slds-input value",style:{color:e.notifyColor.keywords[i]},attrs:{type:"text"},domProps:{value:t.value},on:{keyup:function(s){return e.changeKey(s,i,t.label)}}}),e._v(" "),s("span",{staticClass:"insert-icon short-icon down-btn",on:{click:function(s){return s.stopPropagation(),e.openSelectField(t.label)}}},[s("icon",{attrs:{name:"insertTag","class-name":"down-icon",width:"15px",height:"15px"}})],1),e._v(" "),e.showFirst?s("span",{staticClass:"color-icon short-icon down-btn",on:{click:function(s){return s.stopPropagation(),e.openColorPicker(212+70*i,755,t.label)}}},[s("icon",{attrs:{name:"colorSelect","class-name":"down-icon",width:"15px",height:"15px"}})],1):e._e(),e._v(" "),e.showFirst?e._e():s("span",{staticClass:"color-icon short-icon down-btn",on:{click:function(s){return s.stopPropagation(),e.openColorPicker(110+70*i,755,t.label)}}},[s("icon",{attrs:{name:"colorSelect","class-name":"down-icon",width:"15px",height:"15px"}})],1)])})),e._v(" "),e.showRemark?s("div",{staticClass:"input-section"},[s("label",[e._v("Remark")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.notifyRemark,expression:"notifyRemark"}],staticClass:"slds-textarea value",style:{color:e.notifyColor.remark},domProps:{value:e.notifyRemark},on:{keyup:function(t){return e.changeRemark()},input:function(t){t.target.composing||(e.notifyRemark=t.target.value)}}}),e._v(" "),s("span",{staticClass:"insert-icon down-btn",on:{click:function(t){return t.stopPropagation(),e.openSelectField("remark")}}},[s("icon",{attrs:{name:"insertTag","class-name":"down-icon",width:"15px",height:"15px"}})],1),e._v(" "),e.showFirst?s("span",{staticClass:"color-icon down-btn",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(204+70*e.keywords.length,755,"remark")}}},[s("icon",{attrs:{name:"colorSelect","class-name":"down-icon",width:"15px",height:"15px"}})],1):e._e(),e._v(" "),e.showFirst?e._e():s("span",{staticClass:"color-icon down-btn",on:{click:function(t){return t.stopPropagation(),e.openColorPicker(102+70*e.keywords.length,755,"remark")}}},[s("icon",{attrs:{name:"colorSelect","class-name":"down-icon",width:"15px",height:"15px"}})],1)]):e._e(),e._v(" "),s("div",{staticClass:"input-section"},[s("label",[e._v("Redirect To")]),e._v(" "),s("div",{staticClass:"redirect-section"},[s("input-select",{staticClass:"redirect-section__picklist",attrs:{currents:e.redirectOptionData.currents},on:{"close-dropdown":e.closeDropdown,"open-dropdown":e.openDropdown,resize:e.resizeDropdown}}),e._v(" "),e.isRedirectToURL?s("div",{staticClass:"redirect-section__content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.notificationURL,expression:"notificationURL"}],staticClass:"slds-input",attrs:{type:"text",placeholder:e.$t("placeholderLabel")},domProps:{value:e.notificationURL},on:{input:function(t){t.target.composing||(e.notificationURL=t.target.value)}}}),e._v(" "),s("span",{staticClass:"insert-icon down-btn",on:{click:function(t){return e.openSelectField("url")}}},[s("icon",{attrs:{name:"insertTag","class-name":"down-icon",width:"15px",height:"15px"}})],1)]):s("div",{staticClass:"redirect-section__content"},[s("mini-program-selector",{attrs:{selected:e.selectedMiniProgramPage,"wechat-account-id":e.wechatAccountId},on:{changed:function(t){return e.onMiniProgramChanged(t)}}})],1)],1)]),e._v(" "),s("span",{staticClass:"slds-text-heading_small content-title"},[e._v(e._s(e.$t("informationLabel")))]),e._v(" "),s("div",{staticClass:"input-section"},[s("label",[e._v(e._s(e.$t("noteLabel")))]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"note"}],staticClass:"slds-textarea value note",attrs:{placeholder:e.$t("placeholderLabel")},domProps:{value:e.note},on:{input:function(t){t.target.composing||(e.note=t.target.value)}}})])],2)]),e._v(" "),s("div",{style:e.colorPickerPosition},[s("color-picker",{ref:"bgColorList",attrs:{value:""},on:{"get-color":e.onBgColor}})],1),e._v(" "),e.showMergeField?s("select-field",{attrs:{"title-name":"Campaigin Members","field-obj":e.fieldObj,"primary-disabled":!!e.notify.Id},on:{"close-merge-field":function(t){return e.closeSelectFiled()},"select-merge-field":e.selectMergeField}}):e._e(),e._v(" "),e.showDropdown?s("dropdown",{attrs:{options:e.redirectOptionData.options,currents:e.redirectOptionData.currents,left:e.dropdownLeft,top:e.dropdownTop,width:e.dropdownWidth},on:{"select-option":function(t){return e.onChangeRedirectTo(t)},close:function(t){return e.closeDropdown()}}}):e._e()],1)}),[],!1,null,"57709f2e",null);"function"==typeof L.default&&Object(L.default)(O);t.a=O.exports},pfD2:function(e,t,s){"use strict";var i=s("v3Fx");s.n(i).a},q3jV:function(e,t,s){},qVZU:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"preTitle":"上一页","nextTitle":"下一页"},"en":{"preTitle":"Previous Page","nextTitle":"Next Page"}}'),delete e.options._Ctor}},rEsM:function(e,t,s){"use strict";var i=s("HA+Y");s.n(i).a},rRKh:function(e,t,s){"use strict";var i=s("xloz");s.n(i).a},rxPh:function(e,t,s){"use strict";var i=s("1MG1"),n=s.n(i);t.default=n.a},svHN:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"newNotifyLabel":"新建通知","saveNotifyLabel":"模板消息保存成功！"},"en":{"newNotifyLabel":"New Notification","saveNotifyLabel":"The notification was saved."}}'),delete e.options._Ctor}},t29s:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"urlLabel":"跳转链接","titleLabel":"标题","createdLabel":"创建人","keywordLabel":"关键字","noteLabel":"备注"},"en":{"urlLabel":"Notification URL","titleLabel":"Title","createdLabel":"Created By","keywordLabel":"Keywords","noteLabel":"Note"}}'),delete e.options._Ctor}},tAMZ:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"selectSkillLabel":"选择技能","nameLabel":"技能名称","knowledgeSourceLabel":"知识源","relatedToLabel":"相关项","descriptionLabel":"描述","validForLabel":"有效时间(分钟)","displayInLiveChatLabel":"在 Live Chat 中显示","internalLabel":"内部","lastModifiedByLabel":"上次修改人"},"en":{"selectSkillLabel":"Select Skill","nameLabel":"Name","knowledgeSourceLabel":"Knowledge Source","relatedToLabel":"Related To","descriptionLabel":"Description","validForLabel":"Valid For (mins)","displayInLiveChatLabel":"Display in Live Chat","internalLabel":"Internal","lastModifiedByLabel":"Last Modified By"}}'),delete e.options._Ctor}},"uq+9":function(e,t,s){},v3Fx:function(e,t,s){},vyV3:function(e,t,s){"use strict";var i=s("AScg");s.n(i).a},wbfU:function(e,t,s){"use strict";var i=s("wG3i"),n=s.n(i),o=s("pUDi"),a=s("zUtI"),r=s("4B+h"),l={props:{notify:{type:Object,default:()=>({contentTemplate:{keywords:[]}})},accId:{type:String,default:()=>""}},components:{NewNotification:o.a},data:()=>({isSaveNotify:!1}),methods:{closeModal(e){this.$emit("close",e)},async saveNotify(){const e=this.accId||this.$route.params.accountId,t=this.$refs.newNotifyPage.prepareCreatedData();if(e)try{this.isSaveNotify=!0;const s=await Object(a.a)(e,n()(t));s.ok?(this.$router.app.$emit("open-toast-notification",{content:this.$t("saveNotifyLabel"),type:"success"}),this.closeModal(s),this.isSaveNotify=!1):(Object(r.f)(s),this.isSaveNotify=!1)}catch(e){Object(r.f)(e),this.isSaveNotify=!1}}}},c=(s("rEsM"),s("KHd+")),d=s("lNHh"),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"new-notification-popup"},[s("section",{staticClass:"slds-modal slds-fade-in-open",attrs:{role:"dialog",tabindex:"-1","aria-labelledby":"modal-heading-01","aria-modal":"true","aria-describedby":"modal-content-id-1"}},[s("div",{staticClass:"slds-modal__container notify-width"},[s("header",{staticClass:"slds-modal__header"},[s("button",{staticClass:"slds-button slds-button_icon slds-modal__close slds-button_icon-inverse",attrs:{disabled:e.isSaveNotify},on:{click:function(t){return e.closeModal()}}},[s("icon",{attrs:{name:"close",category:"utility","class-name":"slds-button__icon slds-button__icon_large"}}),e._v(" "),s("span",{staticClass:"slds-assistive-text"},[e._v("Close")])],1),e._v(" "),s("h2",{staticClass:"slds-text-heading_medium slds-hyphenate",attrs:{id:"modal-heading-01"}},[e._v(e._s(e.$t("newNotifyLabel")))])]),e._v(" "),s("div",{staticClass:"slds-modal__content slds-p-around_medium modal-content-custom",attrs:{id:"modal-content-id-1"}},[s("new-notification",{ref:"newNotifyPage",attrs:{notify:e.notify,"wechat-account-id":e.accId}})],1),e._v(" "),s("footer",{staticClass:"slds-modal__footer"},[s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:e.isSaveNotify},on:{click:function(t){return e.closeModal()}}},[e._v(e._s(e.$t("global.cancelBtn")))]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:e.isSaveNotify},on:{click:function(t){return e.saveNotify()}}},[e._v(e._s(e.$t("global.saveBtn")))])])])]),e._v(" "),s("div",{staticClass:"slds-backdrop slds-backdrop_open"})])}),[],!1,null,"5fadaa67",null);"function"==typeof d.default&&Object(d.default)(u);t.a=u.exports},wfdH:function(e,t,s){"use strict";var i=s("WUmD"),n=s.n(i);t.default=n.a},wiWi:function(e,t,s){"use strict";var i=s("1+VO"),n=s.n(i);t.default=n.a},xIgP:function(e,t,s){"use strict";var i=s("Whuh");s.n(i).a},xloz:function(e,t,s){},xncO:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"replyModeLabel":"回复模式","replyModeAll":"全部","replyModeRandom":"随机","nameLabel":"名称","changeSavedNofity":"修改已保存。","uploader":{"imageTitle":"上传图片","videoTitle":"上传视频","voiceTitle":"上传音频","titleLabel":"标题","descriptionLabel":"说明","cancelBtn":"取消","uploadBtn":"上传","uploadingBtn":"上传中","tooLarge":"最大文件大小为 2 MB。"},"exclusive":{"skillAddTitle":"移除已添加回复","skillAddContent":"技能无法和其他类型自动回复同时运行。添加当前技能会移除已添加回复。确定吗？","skillRemoveTitle":"移除已添加技能","skillRemoveContent":"技能无法和其他类型自动回复同时运行。添加当前回复会移除已添加技能。确定吗？"}},"en":{"replyModeLabel":"Reply Mode","replyModeAll":"All","replyModeRandom":"Random","nameLabel":"Name","changeSavedNofity":"Your changes are saved.","uploader":{"imageTitle":"Upload Image","videoTitle":"Upload Video","voiceTitle":"Upload Voice Clip","titleLabel":"Title","descriptionLabel":"Description","cancelBtn":"Cancel","uploadBtn":"Upload","uploadingBtn":"Uploading","tooLarge":"The maximum file size is 2 MB."},"exclusive":{"skillAddTitle":"Remove Added Responses","skillAddContent":"A skill cannot be executed along with any other auto responses. Adding this skill response removes all other auto responses. Are you sure?","skillRemoveTitle":"Remove Added Skill","skillRemoveContent":"A skill cannot be executed along with any other auto responses. Adding this auto response removes the previously added skill response. Are you sure?"}}}'),delete e.options._Ctor}},xswR:function(e,t,s){"use strict";var i=s("xncO"),n=s.n(i);t.default=n.a},yWOo:function(e,t,s){},ypsP:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"surveys":"问卷"},"en":{"surveys":"Surveys"}}'),delete e.options._Ctor}},zMKj:function(e,t,s){"use strict";var i=s("4Sxw");s.n(i).a},zUtI:function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"e",(function(){return o})),s.d(t,"g",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return l})),s.d(t,"h",(function(){return c})),s.d(t,"a",(function(){return d})),s.d(t,"f",(function(){return u}));var i=s("00Ee");function n(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object(i.a)({method:"NotificationTemplateRemoteActions.getNotificationTemplates",args:[e,t,s,n]})}function o(e,t,s,n){return Object(i.a)({method:"NotificationTemplateRemoteActions.getTemplates",args:[e,t,s,n]})}function a(e){return Object(i.a)({method:"NotificationTemplateRemoteActions.getWeChatPrivateTemplates",args:[e]})}function r(e){return Object(i.a)({method:"NotificationTemplateRemoteActions.getTemplate",args:[e]})}function l(e){return Object(i.a)({method:"NotificationTemplateRemoteActions.deleteTemplate",args:[e]})}function c(e,t){return Object(i.a)({method:"NotificationTemplateRemoteActions.updateTemplate",args:[e,t]})}function d(e,t){return Object(i.a)({method:"NotificationTemplateRemoteActions.createTemplate",args:[e,t]})}function u(e){return Object(i.a)({method:"NotificationTemplateRemoteActions.getWeChatNotifications",args:[e]})}},zoBN:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"cn":{"typeQuestion":"请输入问题","typeHeading":"请输入标题","choice":"选项","other":"其他"},"en":{"typeQuestion":"Type question here","typeHeading":"Type heading here","choice":"Choice","other":"Other"}}'),delete e.options._Ctor}}}]);