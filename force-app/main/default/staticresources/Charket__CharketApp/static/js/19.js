(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0T+q":function(t,e,s){"use strict";s.r(e);var a=s("Ip10"),o=s.n(a),i=s("dUVM"),l=s.n(i),n=s("SLhn"),r=s.n(n),c=s("8Vev"),d=s.n(c),u=s("4LGG"),h=s.n(u),p=s("0G99"),g=s.n(p),f=s("ejTr"),w=s.n(f),b=s("wG3i"),m=s.n(b),v=s("Yvyk"),T=s.n(v),C=s("vQrK"),y=s.n(C),_=s("692z"),k=s("F5n6"),F=s("ngIk"),L=s("V9RP"),S=s("dcdS"),A=s("oWfJ"),$=s("WE60"),O=s.n($),N=s("kWsH"),D=s.n(N),I=s("nGYt"),P=s.n(I),B=s("+dyS"),x=s.n(B),M=s("4Wlx"),E=s("UX+f"),V={data(){return{isEditingAlias:!1,followerLastAlias:"",followerAlias:this.follower.Alias,isLoading:!1}},props:{follower:{type:Object,default:function(){return{}}},isUnfollowed:{type:Boolean,default:!1}},watch:{"follower.Alias":function(){this.followerAlias=this.follower.Alias,this.clearAlias()},"follower.Id":function(){this.followerAlias=this.follower.Alias,this.clearAlias()}},components:{CktLink:E.a},methods:{editAlias(){!1===this.isEditingAlias?(this.followerAlias=this.follower.Alias,this.isEditingAlias=!0):this.isEditingAlias=!1},saveAlias(t,e){this.isLoading=!0,M.l(t=>{t.ok?this.$emit("update-alias",{Id:this.follower.Id,Alias:e,Nickname:this.follower.Nickname}):this.$router.app.$emit("open-toast-notification",{content:t.error,type:"error"}),this.followerAlias=e,this.isEditingAlias=!1,this.isLoading=!1},t,e)},clearAlias(){this.followerAlias="",this.isEditingAlias=!1}}},U=(s("4f8s"),s("ZFJN"),s("KHd+")),W=Object(U.a)(V,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"name-alias-bar-padding"},[s("ckt-link",{directives:[{name:"show",rawName:"v-show",value:!t.isEditingAlias,expression:"!isEditingAlias"}],attrs:{href:"/"+t.follower.Id,label:t.follower.Alias||t.follower.Nickname,"is-console-tab-active":!0,"console-primary-tab-name":t.follower.Id}}),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.follower.Nickname&&t.follower.Alias&&!t.isEditingAlias,expression:"follower.Nickname && follower.Alias && (!isEditingAlias)"}],staticClass:"follower-alias-name"},[t._v("Â "+t._s("("+t.follower.Nickname+")"))]),t._v(" "),s("div",{staticClass:"slds-grid follower-alias-outer"},[s("input",{directives:[{name:"show",rawName:"v-show",value:t.isEditingAlias,expression:"isEditingAlias"},{name:"model",rawName:"v-model",value:t.followerAlias,expression:"followerAlias"}],staticClass:"slds-input slds-m-right_xx-small alias-input",attrs:{type:"text"},domProps:{value:t.followerAlias},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveAlias(t.follower.Id,t.followerAlias)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clearAlias()}],input:function(e){e.target.composing||(t.followerAlias=e.target.value)}}}),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:t.isEditingAlias&&!t.isLoading,expression:"isEditingAlias && !isLoading"}],staticClass:"clear",on:{click:function(e){return t.clearAlias()}}},[s("icon",{attrs:{name:"close",width:"15px",height:"15px","fill-color":"#706e6b"}})],1),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:t.isEditingAlias&&!t.isLoading,expression:"isEditingAlias && !isLoading"}],staticClass:"confirm",on:{click:function(e){return t.saveAlias(t.follower.Id,t.followerAlias)}}},[s("icon",{attrs:{name:"check",width:"15px",height:"15px","fill-color":"#0070d2"}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"alias-loading slds-m-left_small"},[s("ld-loading",{attrs:{size:"x-small"}})],1)]),t._v(" "),t.isEditingAlias?t._e():s("a",{staticClass:"edit",on:{click:function(e){return t.editAlias(e)}}},[s("icon",{directives:[{name:"show",rawName:"v-show",value:!t.isUnfollowed,expression:"!isUnfollowed"}],attrs:{name:"editReplyIcon","class-name":"edit-icon",width:"14px",height:"14px","charket-icon":""}})],1)],1)}),[],!1,null,"189a6ac9",null).exports,j=s("j2po"),R=s("4B+h"),G=s("LQ5e"),H=s.n(G);var z={mixins:[j.a],props:{follower:{type:Object,default:()=>({})}},data:()=>({isShowMore:!1,hasMoreTags:!1,minHeight:30,editIconPostion:""}),computed:{noWeChatTags(){return!this.follower.WeChatTags||0===this.follower.WeChatTags.length}},mounted(){this.updateFollowerListLayout(),this.updateEditIconPostion(),this.$root.$on("update-follower-list-layout",()=>{this.isShowMore=!1,this.updateFollowerListLayout(),this.updateEditIconPostion()})},methods:{updateFollowerListLayout(){this.$nextTick(()=>{let t=document.querySelector(".".concat(this.follower.Id));this.hasMoreTags=t&&t.clientHeight>this.minHeight})},updateEditIconPostion(){this.$nextTick(()=>{const t=document.querySelector(".".concat(this.follower.Id));if(t){const e=t.lastElementChild;let s=e.offsetWidth+e.offsetLeft+8;if(this.isShowMore)this.editIconPostion="position: absolute; bottom: 2px; left: ".concat(s,"px;");else{if(this.hasMoreTags){s=0;const e=t.childNodes;for(let t=0;t<e.length;t++){const a=e[t];if(!(s+a.offsetWidth+8<=200))break;s+=a.offsetWidth+8}}this.editIconPostion="position: absolute; top: 2px; left: ".concat(s,"px;")}}})},showMoreTags(){this.isShowMore=!0,this.updateEditIconPostion()},toggleAddTagsPopup(t,e){if(e.IsFollowing){let s=this.$refs[e.Id];s.style.left="".concat(t.currentTarget.offsetLeft,"px"),s.style.top="".concat(t.currentTarget.offsetTop+t.currentTarget.offsetHeight,"px"),this.toggle()}else this.$root.$emit("open-toast-notification",{content:this.$t("notifyContent"),type:"normal"})},async onUpdateFollowerTags(t,e){var s;this.assignTagsPicklistBtnDisabled=!0;const a=h()(s=this.follower.WeChatTags).call(s,t=>t.Id),o=d()(t).call(t,t=>!l()(a).call(a,t));if(0===o.length&&0===e.length)return this.assignTagsPicklistBtnDisabled=!1,void this.closeAssignTagsPicklist();try{const t=await Object(M.n)([this.follower.Id],o,e);if(t.ok){this.closeAssignTagsPicklist();const e=JSON.parse(H.a.unescape(t.data));this.$emit("refresh-follower-tags",e)}else Object(R.f)(t)}catch(t){Object(R.f)(t)}finally{this.assignTagsPicklistBtnDisabled=!1}}},beforeDestroy(){this.$root.$off("update-follower-list-layout")}},K=(s("Ogyo"),s("OuLJ"),s("m53b")),J=Object(U.a)(z,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"follower-tag-list"},[t.noWeChatTags?s("div",{staticClass:"tags-content"},[s("span",{staticClass:"slds-box down-btn tag-item edit-item",on:{click:function(e){return e.stopPropagation(),t.toggleAddTagsPopup(e,t.follower)}}},[s("icon",{attrs:{name:"add","class-name":"down-icon",width:"10px",height:"10px"}}),t._v(" "),s("span",[t._v(t._s(t.$t("addTagLabel")))])],1)]):s("div",{staticClass:"tags-content"},[s("div",{staticClass:"tags-container"},[s("div",{staticClass:"tag-list",class:{"list-content":!t.isShowMore}},[s("div",{class:t.follower.Id},t._l(t.follower.WeChatTags,(function(e,a){return s("span",{key:a,staticClass:"slds-box tag-item"},[t._v("\n            "+t._s(e.Name)+"\n          ")])})),0),t._v(" "),s("span",{staticClass:"down-btn toggle-span edit-icon",style:t.editIconPostion,on:{click:function(e){return e.stopPropagation(),t.toggleAddTagsPopup(e,t.follower)}}},[s("icon",{attrs:{name:"editReplyIcon","class-name":"edit-icon",width:"15px",height:"15px","charket-icon":""}})],1)])]),t._v(" "),t.hasMoreTags&&!t.isShowMore?s("div",[t.isShowMore?t._e():s("span",{staticClass:"toggle-span",on:{click:function(e){return t.showMoreTags()}}},[s("span",{staticClass:"total-info"},[t._v("Total of "+t._s(t.follower.WeChatTags.length)+" tags")]),t._v(" "),s("span",{staticClass:"down-btn"},[s("icon",{attrs:{name:"down","class-name":"down-icon",width:"13px",height:"13px"}})],1)])]):t._e()]),t._v(" "),s("div",{ref:t.follower.Id,staticClass:"picklist-content"},[t.assignTagsPicklistVisible?s("assign-tags-picklist",{attrs:{tags:t.tagList,"button-disabled":t.assignTagsPicklistBtnDisabled,"selected-follower-list":[t.follower]},on:{save:t.onUpdateFollowerTags,cancel:t.closeAssignTagsPicklist}}):t._e()],1)])}),[],!1,null,"bfc39622",null);"function"==typeof K.default&&Object(K.default)(J);var Q=J.exports,q=s("cybb"),Z=s("jkSJ"),X=s("L2JU"),Y={computed:y()({},Object(X.c)("sidebar",["currentAccount"]),{isMiniProgramAcc(){return"Mini Program"===this.currentAccount.Type}}),props:{currentAccountFollowers:{type:Object,default:function(){return{}}},currentFollowerTab:{type:String,default:"Following"},waitingThreads:{type:Array,default:()=>[]},currentUser:{type:Object,default:()=>({})},selectedFollowerList:{type:Array,default:()=>[]},showActivityTime:{type:Boolean,default:!1},isCheckAll:{type:Boolean,default:!1}},watch:{currentAccountFollowers:function(){this.fetchData()},selectedFollowerList:function(){this.selectedFollowerList.length<200?this.isDisabled=!1:this.isDisabled=!0}},mounted(){this.$root.$on("unread-count-updated",this.updateFollowerNewMessageCount)},inject:["showErrorImg"],data:()=>({followers:{},blockingFollowerId:"",unblockingFollowerId:"",savedIndex:null,isDisabled:!1}),created(){this.fetchData()},components:{WeChatFollowerAlias:W,FollowerTagListButton:Q},methods:{checkInWaitingThreads(t){var e;return x()(e=this.waitingThreads).call(e,e=>t===e.Id)},handleAnonymousUserPhoto(t){if(t){const e=t.substring(0,t.length-3);return Object(R.c)(e)}return{Name:"A",BgColor:"#29a49c"}},fetchData(){let t=JSON.parse(m()(this.currentAccountFollowers));if(t){for(let s in t){var e;delete t[s].isSelected;const a=o()(e=this.selectedFollowerList).call(e,e=>e.Id===t[s].Id);this.selectedFollowerList.length<200?(a?this.$set(t[s],"isSelected",!0):this.$set(t[s],"isSelected",!1),this.isDisabled=!1):(this.isDisabled=!0,a?this.$set(t[s],"isSelected",!0):this.$set(t[s],"isSelected",!1)),this.$set(t[s],"formatLastActivityDate",Object(q.e)(t[s].LastActivityTime,this.currentUser.TimeZoneSidKey)),"Following"===this.currentFollowerTab||"Blocked"===this.currentFollowerTab?this.$set(t[s],"formatedDate",Object(q.e)(t[s].SubscriptionDate,this.currentUser.TimeZoneSidKey)):"AuthorizationGranted"===this.currentFollowerTab?this.$set(t[s],"formatedDate",Object(q.e)(t[s].GrantedDate,this.currentUser.TimeZoneSidKey)):this.$set(t[s],"formatedDate",Object(q.e)(t[s].UnsubscriptionDate,this.currentUser.TimeZoneSidKey))}this.followers=t,this.followers}},updateFollowerAlias(t){this.followers[t.Id].Alias=t.Alias,t.Alias?this.followers[t.Id].Name=t.Alias:this.followers[t.Id].Name=this.followers[t.Id].DisplayName,this.$emit("update-alias",t)},checkFollower(t,e,s){t.isSelected=!t.isSelected,document.getSelection().removeAllRanges();let a=w()(this.followers),o=new P.a;const i=this.savedIndex;if(this.savedIndex=this.getObjectKeyIndex(a,s),null!==i&&e.shiftKey){var l;const[e,s]=D()(l=[this.savedIndex,i]).call(l,(t,e)=>t-e);for(let o=e;o<=s;o++)this.followers[a[o]].isSelected=t.isSelected}for(let t of a)this.followers[t].isSelected&&o.add(t);this.$emit("selected-follower",o)},getObjectKeyIndex(t,e){let s=0;for(let a of t){if(a===e)return s;s++}return null},getMenuItems(t){const e=[];return t.IsBlocked?e.push({value:"Unblock",label:this.$t("unblockFollowerBtn"),target:t}):e.push({value:"Block",label:this.$t("blockFollowerBtn"),target:t}),e},onClickMenuItem(t){const{value:e,target:s}=t;"Block"===e?this.openBlockPopup(s.Id):"Unblock"===e&&this.openUnblockPopup(s.Id)},openBlockPopup(t){this.blockingFollowerId=t;const e=""===this.blockingFollowerId&&this.selectedFollowerList.length>1,s=this.$confirm({title:e?this.$tc("blockFollowerHeader",2):this.$tc("blockFollowerHeader",1),content:e?this.$tc("blockFollowerContent",2):this.$tc("blockFollowerContent",1),ok:this.$t("blockFollowerBtn")});s.$on("ok",async()=>{try{if(""!==this.blockingFollowerId)await Z.f.block(this.currentAccount.Id,[this.blockingFollowerId]);else{let t=[];for(let e of this.selectedFollowerList)e.IsBlocked||t.push(e.Id);await Z.f.block(this.currentAccount.Id,t)}this.$emit("loading"),this.$emit("reload-follower",this.getIsBlockAll()),this.$emit("block-follower-success"),e?this.$toast({content:this.$tc("blockFollowerNotify",2),type:"success"}):this.$toast({content:this.$tc("blockFollowerNotify",1),type:"success"}),this.blockingFollowerId="",this.clearCheckbox(),s.close()}catch(t){this.$handleError(t),s.resume()}})},openUnblockPopup(t){this.unblockingFollowerId=t;const e=""===this.unblockingFollowerId&&this.selectedFollowerList.length>1,s=this.$confirm({title:e?this.$tc("unblockFollowerHeader",2):this.$tc("unblockFollowerHeader",1),content:e?this.$tc("unblockFollowerContent",2):this.$tc("unblockFollowerContent",1),ok:this.$t("unblockFollowerBtn")});s.$on("ok",async()=>{try{if(""!==this.unblockingFollowerId)await Z.f.unblock(this.currentAccount.Id,[this.unblockingFollowerId]);else{let t=[];for(let e of this.selectedFollowerList)t.push(e.Id);await Z.f.unblock(this.currentAccount.Id,t)}this.$emit("loading"),this.$emit("reload-follower",this.getIsBlockAll()),this.$emit("block-follower-success"),e?this.$toast({content:this.$tc("unblockFollowerNotify",2),type:"success"}):this.$toast({content:this.$tc("unblockFollowerNotify",1),type:"success"}),this.unblockingFollowerId="",this.clearCheckbox(),s.close()}catch(t){this.$handleError(t),s.resume()}})},getIsBlockAll(){let t,e=w()(this.followers).length;return t=""!==this.blockingFollowerId?1===e:this.isCheckAll,t},getIsUnblockAll(){let t,e=w()(this.followers).length;return t=""!==this.unblockingFollowerId?1===e:this.isCheckAll,t},clearCheckbox(){for(let t in this.followers)this.followers[t].isSelected&&(this.followers[t].isSelected=!1);this.$emit("clear-selected-followers")},updateFollowerNewMessageCount(t){this.followers[t]&&(this.followers[t].NewMessageCount+=1)},formatDate:t=>t?Object(q.f)(t):"",goToLiveChat(t){var e;let s=-1===O()(e=this.waitingThreads).call(e,e=>e.Id===t)?"chat-follower":"chat-waiting-follower";this.$router.replace({name:s,params:{followerId:t}})},refreshFollowerTags(t){this.$emit("refresh-follower-tags",t)}}},tt=(s("7nBR"),s("qPYy"),s("p3RT")),et=Object(U.a)(Y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"followers-list"},t._l(t.followers,(function(e,a){return s("li",{key:e.Id,staticClass:"slds-border_bottom slds-grid slds-grid_align-spread followers-list-item",class:{"list-unfollowing":"Unfollowed"===t.currentFollowerTab,"list-blocked":"Blocked"===t.currentFollowerTab,"list-granted":"AuthorizationGranted"===t.currentFollowerTab,"following-style":"Following"===t.currentFollowerTab}},[s("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-col fundamental-info"},["Following"===t.currentFollowerTab||"Blocked"===t.currentFollowerTab&&t.currentUser.Permissions.Buttons.BlockFollower?s("div",{staticClass:"checkbox-div"},[s("label",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"follower",id:"multy_"+e.Id,disabled:t.isDisabled&&!e.isSelected},domProps:{checked:e.isSelected},on:{click:function(s){return s.stopPropagation(),t.checkFollower(e,s,a)}}}),t._v(" "),s("span",{staticClass:"slds-checkbox_faux"})])]):t._e(),t._v(" "),e.PhotoUrl?s("img",{staticClass:"follower-avatar",class:{"unfollowing-avatar":"Unfollowed"===t.currentFollowerTab},attrs:{src:t._f("imgFilter")(e.PhotoUrl)},on:{error:function(e){return t.showErrorImg(e)}}}):s("div",{staticClass:"text-avatar",style:{"background-color":t.handleAnonymousUserPhoto(e.Id).BgColor}},[s("span",[t._v(t._s(t.handleAnonymousUserPhoto(e.Id).Name))])]),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical slds-grid_vertical-align-start follower-property"},["Following"===t.currentFollowerTab?s("div",{staticClass:"slds-grid name-edit-hover"},[s("we-chat-follower-alias",{ref:e.Id,refInFor:!0,attrs:{follower:e,"is-unfollowed":"Unfollowed"===t.currentFollowerTab},on:{"update-alias":function(e){return t.updateFollowerAlias(e)}}}),t._v(" "),e.IsBlocked&&"Following"===t.currentFollowerTab?s("span",{staticClass:"slds-badge blocked-status"},[t._v(t._s(t.$t("blockedStatus")))]):t._e()],1):s("we-chat-follower-alias",{ref:e.Id,refInFor:!0,attrs:{follower:e,"is-unfollowed":"Unfollowed"===t.currentFollowerTab},on:{"update-alias":function(e){return t.updateFollowerAlias(e)}}}),t._v(" "),s("span",{staticClass:"address-span"},[e.Gender?s("p",{staticClass:"gender"},[t._v(t._s(t.$t(e.Gender)))]):t._e(),t._v(" "),e.City||e.State||e.Country?s("icon",{attrs:{name:"address","text-color":"default","class-name":"address-icon",height:"14px",width:"14px","charket-icon":""}}):t._e(),t._v(" "),e.City||e.State||e.Country?s("span",{staticClass:"address-content"},[t._v(t._s(e.City)+" "+t._s(e.State)+" "+t._s(e.Country))]):t._e(),t._v(" "),e.Lead&&e.Lead.Id?s("icon",{staticClass:"lead-contact",attrs:{name:"leadGray","text-color":"default",height:"23px",width:"23px","charket-icon":""}}):t._e(),t._v(" "),e.Lead&&e.Lead.Id?s("a",{staticClass:"lead-link",attrs:{href:"/"+e.Lead.Id,target:"_blank"}},[t._v(t._s(e.Lead.Name))]):t._e(),t._v(" "),e.Contact&&e.Contact.Id?s("icon",{staticClass:"lead-contact contact-icon",attrs:{name:"contact","text-color":"default",height:"23px",width:"23px","charket-icon":""}}):t._e(),t._v(" "),e.Contact&&e.Contact.Id?s("a",{staticClass:"contact-link",attrs:{href:"/"+e.Contact.Id,target:"_blank"}},[t._v(t._s(e.Contact.Name))]):t._e()],1),t._v(" "),"Following"===t.currentFollowerTab?s("follower-tag-list-button",{attrs:{follower:e},on:{"refresh-follower-tags":function(e){return t.refreshFollowerTags(e)}}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center follow-info",class:{"unfollowing-info":"Unfollowed"===t.currentFollowerTab}},[s("div",{staticClass:"slds-grid slds-grid_vertical slds-grid_align-center info-message-container"},["Following"===t.currentFollowerTab?s("div",{staticClass:"slds-grid slds-grid_align-end"},[s("span",[t._v(t._s(t._f("addSeparators")(e.ActivityCount)))]),t._v(" "),0===e.ActivityCount?s("span",{staticClass:"message-count"},[t._v("\n            "+t._s(t.$tc("ActivityCount",1))+"\n          ")]):s("span",{staticClass:"message-count"},[t._v("\n            "+t._s(t.$tc("ActivityCount",e.ActivityCount))+"\n          ")]),t._v(" "),t.currentAccount.LiveChatEnabled?s("span",{staticClass:"slds-grid message-link",class:{"has-unread":e.NewMessageCount>0},on:{click:function(s){return t.goToLiveChat(e.Id)}}},[s("icon",{staticClass:"message-icon",attrs:{"fill-color":e.NewMessageCount>0?"#ff6d60":"#706e6b","hover-color":e.NewMessageCount>0?"#ff5141":"#004487",name:"messages","text-color":"default",height:"14px",width:"14px"}}),t._v(" "),e.NewMessageCount>0?s("p",{staticClass:"unread-msg-count"},[t._v("\n              "+t._s(t._f("addSeparators")(e.NewMessageCount))+"\n            ")]):s("p",{staticClass:"unread-msg-count"},[t._v("\n              0\n            ")])],1):t._e()]):t._e(),t._v(" "),("AuthorizationGranted"===t.currentFollowerTab||"AnonymousUser"===t.currentFollowerTab)&&t.isMiniProgramAcc&&t.showActivityTime?s("div",{staticClass:"slds-grid slds-grid_align-end"},[s("span",[t._v(t._s(t._f("addSeparators")(e.ActivityCount)))]),t._v(" "),0===e.ActivityCount?s("span",{staticClass:"message-count"},[t._v(t._s(t.$tc("ActivityCount",1)))]):s("span",{staticClass:"message-count"},[t._v(t._s(t.$tc("ActivityCount",e.ActivityCount)))]),t._v(" "),s("router-link",{staticClass:"slds-grid message-link",class:{"has-unread":e.NewMessageCount>0},attrs:{tag:"span",to:{name:t.waitingThreads&&t.waitingThreads[e.Id]?"chat-waiting-follower":"chat-follower",params:{followerId:e.Id}}}},[s("icon",{staticClass:"message-icon",attrs:{"fill-color":e.NewMessageCount>0?"#ff6d60":"#706e6b","hover-color":e.NewMessageCount>0?"#ff5141":"#004487",name:"messages","text-color":"default",height:"14px",width:"14px"}}),t._v(" "),e.NewMessageCount>0?s("p",{staticClass:"unread-msg-count"},[t._v(t._s(t._f("addSeparators")(e.NewMessageCount)))]):s("p",{staticClass:"unread-msg-count"},[t._v("0")])],1)],1):t._e(),t._v(" "),"Following"!==t.currentFollowerTab&&"AuthorizationGranted"!==t.currentFollowerTab&&"AnonymousUser"!==t.currentFollowerTab?s("div",{class:{blocked:"Blocked"===t.currentFollowerTab,unfollowed:"Unfollowed"===t.currentFollowerTab}},[s("span",[t._v(t._s(t._f("addSeparators")(e.ActivityCount)))]),t._v(" "),0===e.ActivityCount?s("span",{staticClass:"message-count"},[t._v(t._s(t.$tc("ActivityCount",1)))]):s("span",{staticClass:"message-count"},[t._v(t._s(t.$tc("ActivityCount",e.ActivityCount)))])]):t._e(),t._v(" "),t.showActivityTime?t._e():s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.formatedDate},expression:"{content: follower.formatedDate}"}],class:{blocked:"Blocked"===t.currentFollowerTab,unfollowed:"Unfollowed"===t.currentFollowerTab}},[e.IsFollowing&&!e.SubscriptionDate?[s("span",[t._v(t._s(t.$t("followedLabel")))])]:t._e(),t._v(" "),e.IsFollowing&&e.SubscriptionDate?[s("span",[t._v(t._s(t.$t("followedDateLabel",[t.formatDate(e.SubscriptionDate)])))])]:t._e(),t._v(" "),!e.IsFollowing&&e.UnsubscriptionDate?[s("span",[t._v(t._s(t.$t("unfollowedDateLabel",[t.formatDate(e.UnsubscriptionDate)])))])]:t._e(),t._v(" "),e.SubscriptionDate||e.UnsubscriptionDate||!e.GrantedDate?t._e():[s("span",[t._v(t._s(t.$t("grantedDateLabel",[t.formatDate(e.GrantedDate)])))])]],2),t._v(" "),t.showActivityTime?s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.formatLastActivityDate},expression:"{content: follower.formatLastActivityDate}"}]},[s("span",[t._v(t._s(t.$t("lastActivityLabel",[t.formatDate(e.LastActivityTime)])))])]):t._e()]),t._v(" "),"Blocked"===t.currentFollowerTab&&t.currentUser.Permissions.Buttons.BlockFollower?s("div",{staticClass:"unblock-container"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:function(s){return t.openUnblockPopup(e.Id)}}},[t._v(t._s(t.$t("unblockFollowerBtn")))])]):t._e(),t._v(" "),"Following"===t.currentFollowerTab&&t.currentUser.Permissions.Buttons.BlockFollower?s("div",{staticClass:"slds-grid slds-grid_vertical-align-center operation-container",attrs:{role:"gridcell"}},[s("ld-action-menu",{attrs:{items:t.getMenuItems(e)},on:{click:function(e){return t.onClickMenuItem(e)}}})],1):t._e()])])})),0)}),[],!1,null,"0698dcb5",null);"function"==typeof tt.default&&Object(tt.default)(et);var st=et.exports,at=s("2AFw"),ot={props:{tagOptions:{type:Array,default:()=>[]},customerOptions:{type:Array,default:()=>[]},activityOptions:{type:Array,default:()=>[]},lookupCurrentItem:{default:()=>null}},components:{InputSelect:F.a,Lookup:at.a},data(){return{campaignMetadata:{name:"Campaign",label:this.$tc("global.campaignName",1),labelPural:this.$tc("global.campaignName",2),icon:"campaign",linkField:{name:"Name",label:this.$tc("global.campaignName",1)},fields:[],newObjectLink:"/701/e"},filtration:{Tag:{Ids:[],IsNoTag:!1},RelatedTo:"",CampaignId:"",ActivityTime:{Days:null,Operator:">"}},filtersLabel:{tagNames:[],customer:"",campaignName:""}}},created(){this.lookupCurrentItem&&(this.filtration.CampaignId=this.lookupCurrentItem.id,this.filtersLabel.campaignName=this.lookupCurrentItem.name);const t=e=>{this.$el&&!this.$el.contains(e.target)&&(this.$emit("close-follower-filters"),window.removeEventListener("click",t))};window.addEventListener("click",t)},methods:{selectCampaign(t){this.filtration.CampaignId=t?t.id:"",this.filtersLabel.campaignName=t?t.name:"",this.$emit("set-lookup-current",t)},removeCampaign(){this.filtration.CampaignId="",this.filtersLabel.campaignName="",this.$emit("set-lookup-current",null)},applyFilters(){let t=null,e=[],s=[];if(1===this.tagOptions.length&&"No Tag"===this.tagOptions[0].Name)t="No Tag",this.filtration.Tag.IsNoTag=!0;else for(let t of this.tagOptions)e.push(t.Id),s.push(t.Name);for(let t of this.activityOptions)this.filtration.ActivityTime.Days=t.Value||null;for(let t of this.customerOptions)this.filtration.RelatedTo=t.Value,this.filtersLabel.customer=t.Value;this.filtration.Tag.Ids=e,this.filtersLabel.tagNames=s,this.$emit("select-filters",this.filtration,this.filtersLabel,t,!1)},resetFilters(){this.filtration={Tag:{Ids:[],IsNoTag:!1},RelatedTo:"",CampaignId:"",ActivityTime:{Days:null,Operator:">"}},this.filtersLabel={tagNames:[],customer:"",campaignName:""},this.$emit("select-filters",this.filtration,this.filtersLabel,null,!0)},closeDropdown(){this.$emit("close-dropdown")},openDropdown(t,e,s,a){this.$emit("open-dropdown",t,e,s,a)},openTagDropdown(t,e,s){this.$emit("open-tag-dropdown",t,e,s)},resizeDropdown(t,e,s){this.$emit("resize-dropdown",t,e,s)},removeOption(t){this.$emit("remove-option",t)}}},it=(s("Epmv"),s("t2Vl")),lt=Object(U.a)(ot,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slds-box select-filter-section"},[s("div",{staticClass:"picklist-section"},[s("input-select",{attrs:{"default-label":t.$t("defaultTagsLabel"),currents:t.tagOptions},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openTagDropdown,resize:t.resizeDropdown,"remove-option":t.removeOption}})],1),t._v(" "),s("div",{staticClass:"picklist-section"},[s("input-select",{attrs:{"default-label":t.$t("defaultLeadOrContactLabel"),currents:t.customerOptions,type:"Customer"},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openDropdown,resize:t.resizeDropdown}})],1),t._v(" "),s("div",{staticClass:"picklist-section"},[s("lookup",{attrs:{"ld-selected-item":t.lookupCurrentItem,"ld-metadatas":t.campaignMetadata},on:{select:function(e){return t.selectCampaign(e)},remove:function(e){return t.removeCampaign()}}})],1),t._v(" "),s("div",{staticClass:"picklist-section"},[s("input-select",{attrs:{"default-label":t.$t("defaultActivityTimeLabel"),currents:t.activityOptions,type:"Activity"},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openDropdown,resize:t.resizeDropdown}})],1),t._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:function(e){return t.applyFilters()}}},[t._v(t._s(t.$t("applyBtn")))]),t._v(" "),s("div",{staticClass:"select-reset-filter",on:{click:function(e){return t.resetFilters()}}},[t._v("\n    "+t._s(t.$t("resetBtn"))+"\n  ")])])}),[],!1,null,"448cf961",null);"function"==typeof it.default&&Object(it.default)(lt);var nt=lt.exports,rt=s("3O4B"),ct=s.n(rt),dt=s("M2K/"),ut=s.n(dt),ht=s("BXKR"),pt=s("00Ee");var gt={mixins:[A.a],mounted(){this.$store.dispatch("tag/getTagTypes"),this.$root.$on("open-new-tag-popup",()=>{this.isShowTagPopup=!0,this.tagPopupTitle=this.$t("createTagLabel",[this.$t(this.currentTagTab)]),this.tagName="",this.tagId=""}),this.$root.$on("open-sync-tag",()=>{this.isShowTagPopup=!0,this.tagPopupTitle=this.syncTagPopupHeader})},components:{LimitedInput:ht.a,NoRecord:_.a,Pagination:k.a,InputSelect:F.a,Dropdown:S.a},computed:y()({},Object(X.c)({enabledTypes:"tag/enabledTypes",currentUser:"user/currentUser"}),{filterTags:function(){return this.isShowWeChatTags&&this.$root.$emit("account-tags-count",this.tags.length),this.tags},convertMessage:function(){return this.isShowWeChatTags?{convertHeader:this.$t("convertWeChatHeader"),convertMain:this.$t("convertWeChatMain")}:{convertHeader:this.$t("convertCharketHeader"),convertMain:this.$t("convertCharketMain")}},isCharketTagEnabled(){var t;return l()(t=this.enabledTypes).call(t,"Charket")},isShowWeChatTags(){return"WeChat"===this.currentTagTab},wechatTagCount(){if(this.isTagLoading)return"-";const t=this.tagsCount.WeChat.Count?this.tagsCount.WeChat.Count:0;return"".concat(t,"/100")},charketTagCount(){return this.isTagLoading?"-":this.tagsCount.Charket.Count?this.tagsCount.Charket.Count:0},isPlusSignVisible(){return this.hasMoreCharketTags&&!this.isTagLoading}}),data(){return{accountId:"",tagOptionData:{options:[{Name:this.$t("alphabeticallyLabel"),value:"Alphabetically"},{Name:this.$t("reverseAlphabeticallyLabel"),value:"Reverse Alphabetically"},{Name:this.$t("mostFollowersLabel"),value:"Most Followers"},{Name:this.$t("fewestFollowersLabel"),value:"Least Followers"}],currentOptions:[{Name:this.$t("mostFollowersLabel"),value:"Most Followers"}]},isShowTagPopup:!1,tags:[],tagPopupTitle:"",filterName:this.$t("mostFollowersLabel"),tagName:"",tagId:null,syncTagPopupContent:this.$t("SyncTagPopupContent"),syncTagPopupHeader:this.$t("syncTagsLabel"),canSyncTag:!0,canSave:!0,waitSyncTagConfirm:this.$t("waitSyncTagConfirm"),deleteTagPopupContent:this.$t("deleteTagPopupContent"),deleteTagPopupHeader:this.$t("deleteTagLabel"),canDeleteTag:!0,needToDeletedTag:null,isTagLoading:!1,currentTagTab:"WeChat",currentPageNumber:1,pageSize:100,currentTagListPagination:[],tagFilter:{OrderBy:"Most Followers",SearchKey:"",Type:"WeChat"},tagsCount:{Charket:{},WeChat:{}},isOverrideTag:!1,isConverting:!0,convertConfirmMain:"",convertStatus:"",tagsTotal:{Charket:{Count:0},WeChat:{Count:0}},activeMenuActions:[{value:"Edit",label:this.$t("global.editBtn")},{value:"Delete",label:this.$t("global.deleteBtn")},{value:"Convert",label:this.$t("convertBtn")},{value:"CopyID",label:this.$t("global.copyIDLabel")}],inactiveMenuActions:[{value:"Edit",label:this.$t("global.editBtn")},{value:"Delete",label:this.$t("global.deleteBtn")},{value:"CopyID",label:this.$t("global.copyIDLabel")}],hasMoreCharketTags:!1}},async created(){this.accountId=this.$route.params.accountId,this.switchAccount({wechatAccountId:this.accountId,router:this.$router}),await T.a.all([this.fetchTags(),this.getTagCountData(),this.checkConvert()])},beforeDestroy(){this.$root.$off("open-new-tag-popup"),this.$root.$off("open-sync-tag")},methods:y()({},Object(X.b)("sidebar",["switchAccount"]),Object(X.b)("tag",["getWeChatTags","updateTagList","deleteTag"]),{async getTagCountData(){try{const e=await(t=this.accountId,Object(pt.a)({method:"TagRemoteActions.getTagCount",args:[t]}));if(e.ok){const t=JSON.parse(H.a.unescape(e.data));this.tagsCount=t,t.Charket&&(this.tagsTotal.Charket.Count=t.Charket.Count,this.hasMoreCharketTags=t.Charket.HasMore),t.WeChat&&(this.tagsTotal.WeChat.Count=t.WeChat.Count)}else Object(R.f)(e)}catch(t){Object(R.f)(t)}var t},fetchTags:async function(){this.isTagLoading=!0;try{let t=await async function(t,e,s,a){try{return await Object(pt.a)({method:"TagRemoteActions.getTags",args:[t,e,s,a]})}catch(t){}}(this.accountId,this.currentPageNumber,this.pageSize,m()(this.tagFilter));this.isTagLoading=!1;const e=JSON.parse(H.a.unescape(t.data));this.tagsCount[this.currentTagTab].Count=e.Total.Count,"Charket"===this.tagFilter.Type&&(this.hasMoreCharketTags=e.Total.HasMore),this.currentTagListPagination=e.Pages,this.tags=e.Tags}catch(t){}},selectPicklist(t){this.tagOptionData.currentOptions=[...t],this.filterName=t[0].Name,this.tagFilter.OrderBy=t[0].value,this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1,this.fetchTags()},closeTagPopup(){this.isShowTagPopup=!1},confirmToSyncTag(){this.canSyncTag=!1,async function(t,e){try{t(await Object(pt.a)({method:"TagRemoteActions.syncTagsFromWeChat",args:[e]}))}catch(t){}}(t=>{t.ok?(this.canSyncTag=!0,this.getWeChatTags(this.accountId),this.$refs.waitSyncTagConfirm.open()):(this.canSyncTag=!0,this.$router.app.$emit("open-toast-notification",{content:t.error,type:"error"})),this.isShowTagPopup=!1},this.accountId)},editTag(t){this.isShowTagPopup=!0,this.tagPopupTitle=this.$t("editTagLabel"),this.tagName=t.Name,this.tagId=t.Id},saveTag(){var t,e;(this.canSave=!1,this.tagId)?async function(t,e,s){try{t(await Object(pt.a)({method:"TagRemoteActions.updateTag",args:[e,s]}))}catch(t){}}(t=>{if(t.ok){let e=JSON.parse(H.a.unescape(t.data));for(let t of this.tags)if(t.Id===e.Id){t.Name=e.Name;break}this.isShowTagPopup=!1,this.$router.app.$emit("open-toast-notification",{content:this.$t("saveTagSuccessNotification"),type:"success"}),this.isShowWeChatTags&&this.updateTagList(e)}else this.$router.app.$emit("open-toast-notification",{content:t.error,type:"error"});this.canSave=!0},this.tagId,ut()(t=this.tagName).call(t)):Object(M.c)(t=>{t.ok?(this.isShowTagPopup=!1,this.$router.app.$emit("open-toast-notification",{content:this.$t("createTagSuccessNotification"),type:"success"}),this.isShowWeChatTags&&this.updateTagList(JSON.parse(H.a.unescape(t.data))),this.fetchTags()):this.$router.app.$emit("open-toast-notification",{content:t.error,type:"error"}),this.canSave=!0},ut()(e=this.tagName).call(e),this.accountId,this.isShowWeChatTags)},closeWaitTagConfirm(){this.$refs.waitSyncTagConfirm.close()},openSureToDeleteConfirm(t){this.needToDeletedTag=t,this.$refs.sureToDeleteTagPopup.open()},confirmToDeleteTag(){this.canDeleteTag=!1,async function(t,e,s){try{t(await Object(pt.a)({method:"TagRemoteActions.deleteTag",args:[e,s]}))}catch(t){}}(t=>{if(t.ok){var e,s;this.canDeleteTag=!0,this.$refs.sureToDeleteTagPopup.close();const t=O()(e=this.tags).call(e,(t,e)=>t.Id===this.needToDeletedTag.Id);ct()(s=this.tags).call(s,t,1),this.$router.app.$emit("account-tags-count",this.tags.length),this.isShowWeChatTags&&this.deleteTag(this.needToDeletedTag.Id),this.fetchTags(),this.needToDeletedTag=null,this.$router.app.$emit("open-toast-notification",{content:this.$t("deleteTagSuccessNotification"),type:"success"})}else this.canDeleteTag=!0,this.$refs.sureToDeleteTagPopup.close(),this.needToDeletedTag=null,this.$router.app.$emit("open-toast-notification",{content:t.error,type:"error"})},this.accountId,this.needToDeletedTag.Id)},jumpToFollowerList(t){this.isShowWeChatTags&&this.$emit("clickTag",t)},formatedText(t){this.tagName=t},changeTagTab(t){this.currentTagTab=t,this.tagFilter.Type=t,this.tagFilter.SearchKey="",this.isWeChatTab(t)?(this.tagOptionData={options:[{Name:this.$t("alphabeticallyLabel"),value:"Alphabetically"},{Name:this.$t("reverseAlphabeticallyLabel"),value:"Reverse Alphabetically"},{Name:this.$t("mostFollowersLabel"),value:"Most Followers"},{Name:this.$t("fewestFollowersLabel"),value:"Least Followers"}]},this.tagOptionData.currentOptions=[{Name:this.$t("mostFollowersLabel"),value:"Most Followers"}],this.filterName=this.$t("mostFollowersLabel"),this.tagFilter.OrderBy="Most Followers"):this.isCharketTab(t)&&(this.tagOptionData={options:[{Name:this.$t("alphabeticallyLabel"),value:"Alphabetically"},{Name:this.$t("reverseAlphabeticallyLabel"),value:"Reverse Alphabetically"}]},this.tagOptionData.currentOptions=[{Name:this.$t("alphabeticallyLabel"),value:"Alphabetically"}],this.filterName=this.$t("alphabeticallyLabel"),this.tagFilter.OrderBy="Alphabetically"),this.fetchTags(),this.$emit("check-charket-tab")},searchTags(t){this.tagFilter.SearchKey=t,this.currentPageNumber=1,this.fetchTags()},clearSearchKey(){this.tagFilter.SearchKey="",this.fetchTags()},target(t){this.currentPageNumber=t,this.fetchTags(),document.getElementsByClassName("right-page-section")[0].scrollTop=0},convertTag(t){this.convertStatus||(this.isOverrideTag=!1,this.$refs.convertModal.open(),this.tagId=t.Id)},async convertConfirm(){this.isConverting=!1;try{const s=await(t=this.tagId,e=this.isOverrideTag,Object(pt.a)({method:"TagRemoteActions.convertTag",args:[t,e]}));this.isOverrideTag=!1,s.ok?(this.$refs.convertModal.close(),await T.a.all([this.fetchTags(),this.getTagCountData()]),this.convertConfirmMain=s.data,this.$refs.convertConfirmModal.open()):this.$refs.convertModal.showError(s.error)}catch(t){const e=this.$parseErrorMessage(t);this.$refs.convertModal.showError(e)}finally{this.isConverting=!0}var t,e},onClickConvertConfirmCancel(){this.$refs.convertModal.close()},async checkConvert(){try{const t=await Object(pt.a)({method:"TagRemoteActions.getTagConvertBatchJobStatus",args:[]});if(t.ok)this.convertStatus="";else{const e=JSON.parse(H.a.unescape(t.error)),s=Object(q.e)(e.CreatedDate,this.currentUser.TimeZoneSidKey);this.convertStatus=this.$t("convertNotify",[e.CreatedByUser,s])}}catch(t){this.convertStatus="",Object(R.f)(t)}},closeConvertConfirm(){this.$refs.convertConfirmModal.close(),this.checkConvert()},isWeChatTab:t=>"WeChat"===t,isCharketTab:t=>"Charket"===t,onClickDeleteTagCancel(){this.$refs.sureToDeleteTagPopup.close()}})},ft=(s("4lQI"),s("brcG"),s("irDv")),wt=Object(U.a)(gt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tag-list-outer"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isTagLoading,expression:"isTagLoading"}],staticClass:"slds-spinner_container tag-list-outer__loading"},[s("ld-loading",{attrs:{size:"medium",type:"brand"}})],1),t._v(" "),t.isTagLoading||0!==t.tags.length?t._e():s("no-record",{attrs:{"custom-style":"top: 80px;"}}),t._v(" "),s("div",{staticClass:"tag-list-page"},[s("div",{staticClass:"slds-border_bottom operation"},[s("div",{staticClass:"slds-grid slds-grid_vertical-align-center tag-tab"},[t._l(t.enabledTypes,(function(e){return s("div",{key:e,staticClass:"tag-tab-item slds-tabs_default__item",class:{"slds-active":t.currentTagTab===e},on:{click:function(s){return t.changeTagTab(e)}}},[s("a",{staticClass:"slds-tabs_default__link",attrs:{href:"javascript:void(0);"}},[t._v("\n            "+t._s(t.$t(e))+"\n            "),t.isWeChatTab(e)?s("span",{staticClass:"slds-badge tag-count-badge"},[t._v("\n              "+t._s(t.wechatTagCount)+"\n            ")]):t._e(),t._v(" "),t.isCharketTab(e)?s("span",{staticClass:"slds-badge tag-count-badge"},[t._v("\n              "+t._s(t._f("addSeparators")(t.charketTagCount))+"\n              "),t.isPlusSignVisible?s("i",{staticClass:"show-plus-sign"},[t._v("+")]):t._e()]):t._e()])])})),t._v(" "),s("search-input",{staticClass:"slds-col_bump-left",attrs:{placeholder:t.$t("tagSearchPlaceholder")},on:{search:function(e){return t.searchTags(e)},clear:t.clearSearchKey}}),t._v(" "),s("div",{staticClass:"tag-order"},[s("input-select",{attrs:{currents:t.tagOptionData.currentOptions},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openDropdown,resize:t.resizeDropdown}})],1)],2)]),t._v(" "),t.convertStatus?s("div",{staticClass:"convert-status"},[s("div",{staticClass:"slds-notify slds-notify--toast slds-theme--warning",attrs:{role:"alert"}},[s("div",{staticClass:"slds-notify__content slds-grid"},[s("icon",{staticClass:"notify-right",attrs:{name:"warning",width:"24px",height:"24px"}}),t._v(" "),s("div",{staticClass:"slds-col slds-align-middle"},[s("h2",{staticClass:"slds-text-heading--small"},[t._v(t._s(t.convertStatus))])])],1)])]):t._e(),t._v(" "),s("div",{staticClass:"tag-list-content slds-scrollable_y"},[t.isTagLoading?t._e():s("div",{staticClass:"slds-grid slds-wrap tag-outer-div"},t._l(t.filterTags,(function(e){return s("div",{key:e.Id,staticClass:"every-tag-outer"},[s("div",{staticClass:"every-tag",class:{"wechat-tag":"WeChat"===t.currentTagTab}},[s("div",{staticClass:"slds-box tag-info down-btn",on:{click:function(s){return t.jumpToFollowerList(e)}}},[s("span",{staticClass:"tag-outer"},[s("icon",{attrs:{name:"tagGrey",width:"12px",height:"12px","class-name":"down-icon","charket-icon":""}})],1),t._v(" "),s("span",{staticClass:"slds-truncate tag-name"},[t._v(t._s(e.Name))]),t._v(" "),"WeChat"===t.currentTagTab?s("span",{staticClass:"tag-count"},[t._v(t._s(t._f("addSeparators")(e.FollowerCount)))]):t._e()]),t._v(" "),s("action-menu",{attrs:{"custom-style":"width: 26px; border-radius: 0 4px 4px 0; borderLeft: none; height: 29px;",actions:t.isCharketTagEnabled?t.activeMenuActions:t.inactiveMenuActions,item:e},on:{edit:t.editTag,delete:t.openSureToDeleteConfirm,convert:t.convertTag,copyid:function(s){t.$_charket_copyText(e.Id,t.$t("global.copySuccess"),t.$t("global.copyFailed"))}}})],1)])})),0),t._v(" "),t.isTagLoading?t._e():s("pagination",{attrs:{paginations:t.currentTagListPagination,"page-number":t.currentPageNumber},on:{target:t.target}})],1)]),t._v(" "),s("div",[s("div",{staticClass:"slds-modal slds-modal_large",class:{"slds-fade-in-open":t.isShowTagPopup},attrs:{id:"tagPopup","aria-hidden":"false",role:"dialog"}},[s("div",{staticClass:"slds-modal__container show-selected-container preview-width",attrs:{role:"document",tabindex:"0"}},[s("div",{staticClass:"slds-modal__header"},[s("button",{staticClass:"slds-button slds-button_icon-inverse slds-modal__close preview-close-btn",on:{click:function(e){return t.closeTagPopup()}}},[s("icon",{attrs:{name:"close",category:"utility","class-name":"slds-button__icon slds-button__icon_large"}}),t._v(" "),s("span",{staticClass:"slds-assistive-text"},[t._v("Close")])],1),t._v(" "),s("h2",{staticClass:"slds-text-heading_medium"},[t._v(t._s(t.tagPopupTitle))])]),t._v(" "),s("div",{staticClass:"slds-modal__content slds-p-around_medium",class:{"preview-middle-height":t.tagPopupTitle!==t.$t("syncTagsLabel")}},[t.tagPopupTitle!==t.$t("syncTagsLabel")?s("div",{staticClass:"create-tag-name"},[s("div",[s("span",[t._v("*")]),t._v(" "+t._s(t.$t("NameLabel")))]),t._v(" "),s("div",{staticClass:"create-section"},[s("limited-input",{attrs:{content:t.tagName,sum:20},on:{"formated-text":function(e){return t.formatedText(e)}}})],1)]):t._e(),t._v(" "),t.tagPopupTitle===t.$t("syncTagsLabel")?s("div",{staticClass:"sync-content-value"},[t._v("\n            "+t._s(this.syncTagPopupContent)+"\n          ")]):t._e()]),t._v(" "),s("div",{staticClass:"slds-modal__footer"},[s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:!t.canSave||!t.canSyncTag},on:{click:function(e){return t.closeTagPopup()}}},[t._v(t._s(t.$t("global.cancelBtn")))]),t._v(" "),t.tagPopupTitle!==t.$t("syncTagsLabel")?s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:t.tagName.length<=0||!t.canSave},on:{click:function(e){return t.saveTag()}}},[t._v(t._s(t.$t("global.saveBtn")))]):t._e(),t._v(" "),t.tagPopupTitle===t.$t("syncTagsLabel")?s("button",{staticClass:"slds-button slds-button_neutral slds-button_brand",attrs:{disabled:!t.canSyncTag},on:{click:function(e){return t.confirmToSyncTag()}}},[t._v(t._s(t.$t("global.syncBtn")))]):t._e()])])]),t._v(" "),s("div",{staticClass:"slds-backdrop",class:{"slds-backdrop_open":t.isShowTagPopup},attrs:{id:"ShowPreview"}})]),t._v(" "),s("ld-modal",{ref:"sureToDeleteTagPopup",attrs:{title:t.deleteTagPopupHeader},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticClass:"slds-p-around_medium slds-align_absolute-center"},[t._v(t._s(t.deleteTagPopupContent))])]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{neutral:"",disabled:!t.canDeleteTag},on:{click:function(e){return t.onClickDeleteTagCancel()}}},[t._v("\n        "+t._s(t.$t("global.cancelBtn"))+"\n      ")]),t._v(" "),s("ld-button",{attrs:{brand:"",disabled:!t.canDeleteTag},on:{click:function(e){return t.confirmToDeleteTag()}}},[t._v("\n        "+t._s(t.$t("global.deleteBtn"))+"\n      ")])]},proxy:!0}])}),t._v(" "),s("ld-modal",{ref:"waitSyncTagConfirm",attrs:{title:t.syncTagPopupHeader},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticClass:"slds-p-around_medium slds-align_absolute-center"},[t._v(t._s(t.waitSyncTagConfirm))])]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{brand:""},on:{click:function(e){return t.closeWaitTagConfirm()}}},[t._v("\n        "+t._s(t.$t("global.confirmBtn"))+"\n      ")])]},proxy:!0}])}),t._v(" "),s("ld-modal",{ref:"convertModal",attrs:{title:t.convertMessage.convertHeader,isNegativeButtonDisabled:!t.isConverting},scopedSlots:t._u([{key:"content",fn:function(){return[s("div",{staticClass:"main-content slds-p-around_medium"},[s("p",[t._v(t._s(t.convertMessage.convertMain))]),t._v(" "),"Charket"===t.currentTagTab?s("div",{staticClass:"new-line"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isOverrideTag,expression:"isOverrideTag"}],staticClass:"new-line-checkbox",attrs:{type:"checkbox",id:"checkbox-follower"},domProps:{checked:Array.isArray(t.isOverrideTag)?t._i(t.isOverrideTag,null)>-1:t.isOverrideTag},on:{change:function(e){var s=t.isOverrideTag,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.isOverrideTag=s.concat([null])):i>-1&&(t.isOverrideTag=s.slice(0,i).concat(s.slice(i+1)))}else t.isOverrideTag=o}}}),t._v(" "),s("label",{staticClass:"new-title new-line-checkbox-title",attrs:{for:"checkbox-follower"}},[t._v(t._s(t.$t("overwriteTagLabel")))])]):t._e()])]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{disabled:!t.isConverting,neutral:""},on:{click:function(e){return t.onClickConvertConfirmCancel()}}},[t._v("\n        "+t._s(t.$t("global.cancelBtn"))+"\n      ")]),t._v(" "),s("ld-button",{attrs:{disabled:!t.isConverting,brand:""},on:{click:function(e){return t.convertConfirm()}}},[t._v("\n        "+t._s(t.$t("global.confirmBtn"))+"\n      ")])]},proxy:!0}])}),t._v(" "),s("ld-modal",{ref:"convertConfirmModal",attrs:{title:t.convertMessage.convertHeader},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticClass:"slds-p-around_medium slds-align_absolute-center"},[t._v(t._s(t.convertConfirmMain))])]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{brand:""},on:{click:function(e){return t.closeConvertConfirm()}}},[t._v("\n        "+t._s(t.$t("global.confirmBtn"))+"\n      ")])]},proxy:!0}])}),t._v(" "),t.showDropdown?s("dropdown",{attrs:{options:t.tagOptionData.options,currents:t.tagOptionData.currentOptions,left:t.dropdownLeft,top:t.dropdownTop,width:t.dropdownWidth,"has-sort-by":!0},on:{"select-option":t.selectPicklist,close:t.closeDropdown}}):t._e()],1)}),[],!1,null,"7fe0934c",null);"function"==typeof ft.default&&Object(ft.default)(wt);var bt=wt.exports,mt=s("4IgH"),vt={mixins:[A.a],props:{followers:{type:Array,default:()=>[]}},components:{Lookup:at.a,InputSelect:F.a,Dropdown:S.a},data(){return{campaignMetadata:{name:"Campaign",label:this.$tc("global.campaignName",1),labelPural:this.$tc("global.campaignName",2),icon:"campaign",linkField:{name:"Name",label:this.$tc("global.campaignName",1)},fields:[],newObjectLink:"/701/e"},currentItem:null,campaignId:"",campaignMemberStatus:"",isSubmit:!1,model:"keep",statusOptionData:{options:[],currentOptions:[]}}},computed:{canSubmit:function(){return this.campaignId&&this.campaignMemberStatus}},watch:{dropdownRefId:async function(){if(this.statusOptionData.options.length<=0)try{let t=await Object(mt.b)(this.campaignId);if(t=JSON.parse(H.a.unescape(t.data)),t.campaignMemberStatus.length>0)for(const e of t.campaignMemberStatus)this.statusOptionData.options.push({Name:e,Value:e})}catch(t){Object(R.f)(t)}}},methods:{open(){this.$refs.Modal.open()},close(){this.$refs.Modal.close()},selectCampaign(t){this.campaignId=t?t.id:""},removeCampaign(){this.campaignId="",this.campaignMemberStatus="",this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1,this.statusOptionData.options=[],this.statusOptionData.currentOptions=[]},selectType(t){this.model=t},addFollowers(){this.isSubmit=!0;let t=[];for(const e of this.followers)t.push(e.Id);Object(M.a)(t,this.campaignId,this.campaignMemberStatus,this.model).then(t=>{this.isSubmit=!1,t.ok?(this.$router.app.$emit("open-toast-notification",{content:t.data,type:"success"}),this.close()):this.$refs.Modal.showError(t.error)})},selectPicklist(t){this.statusOptionData.currentOptions=t,this.campaignMemberStatus=t[0]?t[0].Value:"",this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1}}},Tt=(s("oqIK"),s("Xzh4")),Ct=Object(U.a)(vt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ld-modal",{ref:"Modal",staticClass:"add-to-campaign-modal",attrs:{width:640,title:t.$t("addToCampaignHeader")},scopedSlots:t._u([{key:"content",fn:function(){return[s("div",{staticClass:"add-section"},[s("span",{staticClass:"add-section-header"},[t._v(t._s(t.followers.length)+" "+t._s(t.$tc("followerSelectedCountLabel",t.followers.length)))]),t._v(" "),s("div",{staticClass:"line-section"},[s("div",{staticClass:"line-section-title"},[s("span",[t._v("*")]),t._v(" "+t._s(t.$tc("global.campaignName",1)))]),t._v(" "),s("lookup",{attrs:{"ld-selected-item":t.currentItem,"ld-metadatas":t.campaignMetadata},on:{select:function(e){return t.selectCampaign(e)},remove:function(e){return t.removeCampaign(e)}}})],1),t._v(" "),s("div",{staticClass:"line-section"},[s("div",{staticClass:"line-section-title"},[s("span",[t._v("*")]),t._v(" "+t._s(t.$t("campaignMemberStatusLabel")))]),t._v(" "),s("input-select",{attrs:{currents:t.statusOptionData.currentOptions,"is-disabled":!t.campaignId},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openDropdown,resize:t.resizeDropdown}})],1),t._v(" "),s("div",{staticClass:"checkbox-section"},[s("div",{staticClass:"checkbox-section-title"},[t._v(t._s(t.$t("existingCampaignMemberLabel")))]),t._v(" "),s("div",{staticClass:"checkbox-section-value"},[s("input",{attrs:{type:"radio",name:"notify-radio"},domProps:{checked:"keep"===t.model},on:{click:function(e){return t.selectType("keep")}}}),t._v(" "),s("span",{on:{click:function(e){return t.selectType("keep")}}},[t._v(t._s(t.$t("keepMemberLabel")))])]),t._v(" "),s("div",{staticClass:"checkbox-section-value"},[s("input",{attrs:{type:"radio",name:"notify-radio"},domProps:{checked:"update"===t.model},on:{click:function(e){return t.selectType("update")}}}),t._v(" "),s("span",{on:{click:function(e){return t.selectType("update")}}},[t._v(t._s(t.$t("updateMemberLabel")))])])])]),t._v(" "),t.showDropdown?s("dropdown",{attrs:{options:t.statusOptionData.options,currents:t.statusOptionData.currentOptions,left:t.dropdownLeft,top:t.dropdownTop,width:t.dropdownWidth},on:{"select-option":t.selectPicklist,close:t.closeDropdown}}):t._e()]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{attrs:{disabled:t.isSubmit,neutral:""},on:{click:function(e){return t.close()}}},[t._v("\n      "+t._s(t.$t("global.cancelBtn"))+"\n    ")]),t._v(" "),s("ld-button",{attrs:{disabled:t.isSubmit||!t.canSubmit,brand:""},on:{click:function(e){return t.addFollowers()}}},[t._v("\n      "+t._s(t.$t("global.submitBtn"))+"\n    ")])]},proxy:!0}])})}),[],!1,null,"971eaede",null);"function"==typeof Tt.default&&Object(Tt.default)(Ct);var yt=Ct.exports;const _t={Tag:{Ids:[],IsNoTag:!1},RelatedTo:"",CampaignId:"",ActivityTime:{Days:null,Operator:">"}},kt={tagNames:[],customer:"",campaignName:""};var Ft={mixins:[A.a,j.a],mounted(){this.$root.$on("account-tags-count",t=>{this.tagsCount=t})},computed:y()({},Object(X.e)("followers",["followerTypeCount"]),Object(X.c)("followers",["currentAccountFollowers","currentFollowersPagination"]),Object(X.c)({currentUser:"user/currentUser",currentAccountTags:"tag/tagList",waitingThreads:"livechat/waitingThreads",currentAccount:"sidebar/currentAccount"}),{isMiniProgramAcc(){return"Mini Program"===this.currentAccount.Type},tabs(){return this.isMiniProgramAcc?[{name:"FOLLOWERS",label:this.$t("FOLLOWERS")}]:[{name:"FOLLOWERS",label:this.$t("FOLLOWERS")},{name:"TAGS",label:this.$t("TAGS")}]},showActivityTime:function(){return this.isMiniProgramAcc?"GrantedDate"!==this.sortBy.Field:!!this.filtration.ActivityTime.Days||"ActivityTime"===this.sortBy.Field&&"DESC"===this.sortBy.Order},checkedAll:function(){const t=this.getCurrentFollowersLength();return 0!==t[0]&&t[0]===t[1]},disabledAll:function(){const t=this.getCurrentFollowersLength();return t[0]-t[1]+this.selectedFollowerList.length>200},halfChecked:function(){const t=this.getCurrentFollowersLength();return 0!==t[1]&&t[0]!==t[1]},activityTimeContent:function(){const t=this.filtration.ActivityTime.Days||0;return 1===t||2===t?this.$t("lastHourLabel",[24*t]):this.$t("lastDayLabel",[t])},sortBy(){const t=this.orderOptionData.currents[0];return{Field:t.Value,Order:t.Order}},hasFilters(){return this.filtration.Tag.Ids.length>0||this.filtration.RelatedTo||this.filtration.CampaignId||this.filtration.ActivityTime.Days||this.noTagString},isCheckAllButtonVisible(){return"Following"===this.currentFollowerTab||"Blocked"===this.currentFollowerTab&&this.currentUser.Permissions.Buttons.BlockFollower}}),watch:{filtration:{handler(){this.pageNumber=1,this.fetchFollowers()},deep:!0},dropdownRefId:function(){"Customer"===this.dropdownType?(this.dropdownOptionData.options=this.customerOptionData.options,this.dropdownOptionData.currents=this.customerOptionData.currentOptions,this.dropdownHasDefaultLabel=!0,this.hasSortBy=!1):"Activity"===this.dropdownType?(this.dropdownOptionData.options=this.activityTimeOptionData.options,this.dropdownOptionData.currents=this.activityTimeOptionData.currentOptions,this.dropdownHasDefaultLabel=!0,this.hasSortBy=!1):"Order"===this.dropdownType&&(this.dropdownOptionData.options=this.orderOptionData.options,this.dropdownOptionData.currents=this.orderOptionData.currents,this.dropdownHasDefaultLabel=!1,this.hasSortBy=!0)}},async created(){this.accountId=this.$route.params.accountId;const t=this.$route.path;t==="/".concat(this.accountId,"/followers")?(this.switchAccount({wechatAccountId:this.accountId,router:this.$router}),this.currentFollowerTab=this.isMiniProgramAcc?"AuthorizationGranted":"Following",await T.a.all([this.getWeChatTags(this.accountId),this.fetchFollowers()])):t==="/".concat(this.accountId,"/tags")&&(this.getWeChatTags(this.accountId),this.currentTab="TAGS",this.hideLoadingSpinner())},data(){return{currentTab:"FOLLOWERS",followerTabs:[{label:"Following",count:0,hasMore:!1},{label:"Unfollowed",count:0,hasMore:!1},{label:"Blocked",count:0,hasMore:!1},{label:"AuthorizationGranted",count:0,hasMore:!1}],miniProgramTabs:[{label:"AuthorizationGranted",count:0,hasMore:!1},{label:"AnonymousUser",count:0,hasMore:!1}],sortyByOption:{followerStatus:{options:[{Name:this.$t("alphabeticallyLabel"),Order:"ASC",Value:"Name",Type:"Order"},{Name:this.$t("reverseAlphabeticallyLabel"),Order:"DESC",Value:"Name",Type:"Order"},{Name:this.$t("lastSubscriptionLabel"),Order:"DESC",Value:"SubscriptionDate",Type:"Order"},{Name:this.$t("oldestSubscriptionLabel"),Order:"ASC",Value:"SubscriptionDate",Type:"Order"},{Name:this.$t("lastActivityTimeLabel"),Order:"DESC",Value:"ActivityTime",Type:"Order"},{Name:this.$t("oldestActivityTimeLabel"),Order:"ASC",Value:"ActivityTime",Type:"Order"}],default:[{Name:this.$t("lastSubscriptionLabel"),Order:"DESC",Value:"SubscriptionDate",Type:"Order"}]},unfollowed:{options:[{Name:this.$t("alphabeticallyLabel"),Order:"ASC",Value:"Name",Type:"Order"},{Name:this.$t("reverseAlphabeticallyLabel"),Order:"DESC",Value:"Name",Type:"Order"},{Name:this.$t("lastUnsubscriptionLabel"),Order:"DESC",Value:"UnsubscriptionDate",Type:"Order"},{Name:this.$t("oldestUnsubscriptionLabel"),Order:"ASC",Value:"UnsubscriptionDate",Type:"Order"},{Name:this.$t("lastActivityTimeLabel"),Order:"DESC",Value:"ActivityTime",Type:"Order"},{Name:this.$t("oldestActivityTimeLabel"),Order:"ASC",Value:"ActivityTime",Type:"Order"}],default:[{Name:this.$t("lastUnsubscriptionLabel"),Order:"DESC",Value:"UnsubscriptionDate",Type:"Order"}]},authorizationGranted:{options:[{Name:this.$t("alphabeticallyLabel"),Order:"ASC",Value:"Name",Type:"Order"},{Name:this.$t("reverseAlphabeticallyLabel"),Order:"DESC",Value:"Name",Type:"Order"},{Name:this.$t("lastGrantedLabel"),Order:"DESC",Value:"GrantedDate",Type:"Order"},{Name:this.$t("oldestGrantedLabel"),Order:"ASC",Value:"GrantedDate",Type:"Order"}],default:[{Name:this.$t("lastGrantedLabel"),Order:"DESC",Value:"GrantedDate",Type:"Order"}]},miniProgramAuthorization:{options:[{Name:this.$t("alphabeticallyLabel"),Order:"ASC",Value:"Name",Type:"Order"},{Name:this.$t("reverseAlphabeticallyLabel"),Order:"DESC",Value:"Name",Type:"Order"},{Name:this.$t("lastGrantedLabel"),Order:"DESC",Value:"GrantedDate",Type:"Order"},{Name:this.$t("oldestGrantedLabel"),Order:"ASC",Value:"GrantedDate",Type:"Order"},{Name:this.$t("lastActivityTimeLabel"),Order:"DESC",Value:"ActivityTime",Type:"Order"},{Name:this.$t("oldestActivityTimeLabel"),Order:"ASC",Value:"ActivityTime",Type:"Order"}],default:[{Name:this.$t("lastActivityTimeLabel"),Order:"DESC",Value:"ActivityTime",Type:"Order"}]},anonymousUser:{options:[{Name:this.$t("alphabeticallyLabel"),Order:"ASC",Value:"Name",Type:"Order"},{Name:this.$t("reverseAlphabeticallyLabel"),Order:"DESC",Value:"Name",Type:"Order"},{Name:this.$t("lastActivityTimeLabel"),Order:"DESC",Value:"ActivityTime",Type:"Order"},{Name:this.$t("oldestActivityTimeLabel"),Order:"ASC",Value:"ActivityTime",Type:"Order"}],default:[{Name:this.$t("lastActivityTimeLabel"),Order:"DESC",Value:"ActivityTime",Type:"Order"}]}},currentFollowerTab:"Following",Modal:{mainContent:this.$t("SyncFollowerPopupMainContent"),headerContent:this.$t("SyncFollowerPopupHeader"),isCancelButtonDisabled:!1,isSyncButtonDisabled:!1,isSyncButtonViewed:!0,negativeButtonContent:"Cancel"},isNeedReLoadData:!0,selectedFollowerList:[],isLoadingFollowerList:!0,searchKey:"",orderOptionData:{options:[],currents:[{Name:this.$t("lastSubscriptionLabel"),Order:"DESC",Value:"SubscriptionDate",Type:"Order"}]},activityTimeLabels:[{Name:this.$t("lastActivityTimeLabel"),Value:"desc",Type:"Order"},{Name:this.$t("oldestActivityTimeLabel"),Value:"asc",Type:"Order"}],showSelectFilter:!1,showNoRecords:!1,tagsCount:0,filtration:JSON.parse(m()(_t)),filtersLabel:JSON.parse(m()(kt)),noTagString:null,accountId:"",lookupCurentItem:null,dropdownHasDefaultLabel:!1,hasSortBy:!1,tagOptions:[],customerOptionData:{options:[{Name:this.$t("No Related"),Value:"No Related",Type:"Customer"},{Name:this.$t("Lead"),Value:"Lead",Type:"Customer"},{Name:this.$t("Contact"),Value:"Contact",Type:"Customer"}],currentOptions:[]},activityTimeOptionData:{options:[{Name:this.$t("lastHourLabel",[24]),Value:1,Type:"Activity"},{Name:this.$t("lastHourLabel",[48]),Value:2,Type:"Activity"},{Name:this.$t("lastDayLabel",[7]),Value:7,Type:"Activity"},{Name:this.$t("lastDayLabel",[30]),Value:30,Type:"Activity"}],currentOptions:[]},isCharketTab:!1,pageNumber:1}},methods:y()({},Object(X.b)("followers",["getFollowers","clearFollowersList","updateFollowersAlias","updateCurrentAccountFollowersTags"]),Object(X.b)("sidebar",["switchAccount"]),Object(X.b)("tag",["getWeChatTags"]),{async fetchFollowers(){this.isLoadingFollowerList=!0,this.showNoRecords=!1,this.switchSortByOptions(this.currentFollowerTab);try{await this.getFollowers({wechatAccountId:this.accountId,type:this.currentFollowerTab,searchKey:this.searchKey,filter:this.filtration,sortBy:this.sortBy,pageNumber:this.pageNumber}),this.setFollowerTypeCount(this.followerTabs,this.followerTypeCount),this.setFollowerTypeCount(this.miniProgramTabs,this.followerTypeCount);const t=0===w()(this.currentAccountFollowers).length;this.showNoRecords=t,this.selectedFollowerList=[]}catch(t){this.$handleError(t)}finally{this.hideLoadingSpinner()}},setFollowerTypeCount(t,e){g()(t).call(t,t=>{const s=e[t.label];t.count=s.Count,t.hasMore=s.HasMore})},updateSelectedFollowersTags(t){this.updateCurrentAccountFollowersTags(t),g()(t).call(t,t=>{var e;this.$refs.followerList.followers[t.Id].WeChatTags=t.WeChatTags,g()(e=this.selectedFollowerList).call(e,e=>{e.Id===t.Id&&(e.WeChatTags=t.WeChatTags)})})},async onUpdateFollowerTags(t,e){var s;const a=h()(s=this.selectedFollowerList).call(s,t=>t.Id);if(this.assignTagsPicklistBtnDisabled=!0,0===t.length&&0===e.length)return this.assignTagsPicklistBtnDisabled=!1,void this.closeAssignTagsPicklist();try{const s=await Object(M.n)(a,t,e);if(s.ok){this.closeAssignTagsPicklist();const t=JSON.parse(H.a.unescape(s.data));this.assignTagSuccess(t)}else Object(R.f)(s)}catch(t){Object(R.f)(t)}finally{this.assignTagsPicklistBtnDisabled=!1}},assignTagSuccess(t){this.updateSelectedFollowersTags(t),this.assignTagNotification(),this.refreshTagFilterFollowers(),this.$root.$emit("update-follower-list-layout")},checkCharketTab(){this.$refs.tagListComponent&&"Charket"===this.$refs.tagListComponent.currentTagTab?this.isCharketTab=!0:this.isCharketTab=!1},async target(t){this.pageNumber=t,await this.fetchFollowers(),document.getElementsByClassName("follower-list-wrapper")[0].scrollTop=0},openModal(){this.$refs.modalpopup.open(),this.Modal.negativeButtonContent="Cancel"},closeModal(){this.$refs.modalpopup.close(),this.Modal.isSyncButtonViewed=!0,this.Modal.mainContent=this.$t("SyncFollowerPopupMainContent")},selectAllFollowers(t){let e=t.target,s=this.$refs.followerList.followers,a=[];if(e.checked&&!this.halfChecked){var o;for(let t in this.currentAccountFollowers){var i;a.push(this.currentAccountFollowers[t]),this.selectedFollowerList=d()(i=this.selectedFollowerList).call(i,e=>e.Id!==this.currentAccountFollowers[t].Id)}this.selectedFollowerList=r()(o=this.selectedFollowerList).call(o,a);for(let t of this.selectedFollowerList)s[t.Id]&&this.$set(s[t.Id],"isSelected",!0)}else for(let t in s){var l;this.selectedFollowerList=d()(l=this.selectedFollowerList).call(l,e=>e.Id!==s[t].Id),this.$set(s[t],"isSelected",!1)}},clearSearchText(){this.searchKey="",this.pageNumber=1,this.fetchFollowers()},searchEnter(){this.pageNumber=1,this.fetchFollowers()},openNotification(t,e){let s;s="error"===e||"custom"===e||"success"===e?e:"normal",this.$router.app.$emit("open-toast-notification",{content:t,type:s})},syncFollowerAction(t){this.changeSyncModalButtonStatus(!0),Object(M.j)(t=>{t?(this.Modal.negativeButtonContent="",this.changeSyncModalButtonStatus(!1),this.Modal.mainContent=this.$t("SyncFollowerPopupSuccessMainContent"),this.Modal.isSyncButtonViewed=!1):(this.changeSyncModalButtonStatus(!1),this.openNotification(this.$t("SyncFollowerFailedNotification"),"error"))},t)},changeSyncModalButtonStatus(t){this.Modal.isCancelButtonDisabled=t,this.Modal.isSyncButtonDisabled=t},hideLoadingSpinner(){this.isLoadingFollowerList=!1,this.isNeedReLoadData=!1},assignTagNotification(){this.openNotification(this.$t("tagAssignmentSuccess"),"success")},clearCheckBox(){document.querySelector('input[name="all"]').checked=!1},clearDataVariable(){for(let t in this.currentAccountFollowers)this.$refs[t]&&1===this.$refs[t].length&&this.$refs[t][0].isEditingAlias&&(this.$refs[t][0].isEditingAlias=!1)},async changeTab(t){this.currentTab=t,"FOLLOWERS"===t?(this.clearFollowersList(),this.resetFilters(),this.pageNumber=1,this.$router.replace({path:"/".concat(this.$route.params.accountId,"/followers")})):"TAGS"===t&&(this.$refs.tagListComponent&&(this.$refs.tagListComponent.tagFilter.SearchKey="",await T.a.all([this.$refs.tagListComponent.fetchTags(),this.$refs.tagListComponent.getTagCountData(),this.$refs.tagListComponent.checkConvert()]),this.checkCharketTab()),this.$router.replace({path:"/".concat(this.$route.params.accountId,"/tags")}))},changeFollowerTab(t){this.currentFollowerTab=t,this.resetFilters(),this.clearFollowersList(),this.pageNumber=1},switchSortByOptions(t){const e=this.getSortByKeyValue(t);this.orderOptionData.options=this.sortyByOption[e].options,this.getCurrentSortByOption(this.sortyByOption[e].default)},getSortByKeyValue(t){const e=["Following","Blocked"];return this.isMiniProgramAcc?"AuthorizationGranted"===t?"miniProgramAuthorization":"anonymousUser":l()(e).call(e,t)?"followerStatus":"AuthorizationGranted"===t?"authorizationGranted":"unfollowed"},getCurrentSortByOption(t){var e;const s=this.orderOptionData.currents[0].Name;o()(e=this.orderOptionData.options).call(e,t=>t.Name===s)||(this.orderOptionData.currents=t)},openNewTagPopup(){this.$root.$emit("open-new-tag-popup")},openSyncTag(){this.$root.$emit("open-sync-tag")},resetFilters(){this.initPicklistFiltersData(),this.filtration=JSON.parse(m()(_t)),this.filtersLabel=JSON.parse(m()(kt)),this.noTagString=null},getClickedTag(t){this.currentTab="FOLLOWERS",this.$router.replace({path:"/".concat(this.$route.params.accountId,"/followers")}),this.clearFollowersList(),this.isLoadingFollowerList=!0,this.resetFilters(),this.currentFollowerTab="Following",this.switchSortByOptions(this.currentFollowerTab),this.tagOptions.push({Name:t.Name,Value:t.Name,Id:t.Id}),this.filtration.Tag.Ids=[t.Id],this.filtersLabel.tagNames=[t.Name]},updateFollowerAlias(t){this.updateFollowersAlias(t)},checkAddTags(t){var e;let s=[];for(let e in this.currentAccountFollowers){var a;t.has(e)&&s.push(this.currentAccountFollowers[e]),this.selectedFollowerList=d()(a=this.selectedFollowerList).call(a,t=>t.Id!==this.currentAccountFollowers[e].Id)}this.selectedFollowerList=r()(e=this.selectedFollowerList).call(e,s)},blockFollowerSuccess(t){this.selectedFollowerList=[]},openBatchBlockPopup(t){"Following"===this.currentFollowerTab?this.$refs.followerList.openBlockPopup(""):"Blocked"===this.currentFollowerTab&&this.$refs.followerList.openUnblockPopup("")},async reloadFollower(t){t&&"Following"!==this.currentFollowerTab&&(this.pageNumber>1?this.pageNumber=this.pageNumber-1:this.pageNumber=1),this.fetchFollowers()},loading(){this.isLoadingFollowerList=!0},clearSelectedFollowers(){this.selectedFollowerList=[]},openAddCampaignModal(){this.$refs.AddToCampaign.open()},getCurrentFollowersLength(){let t=[];for(let e in this.currentAccountFollowers)t.push(this.currentAccountFollowers[e]);let e=0;for(let a of t){var s;o()(s=this.selectedFollowerList).call(s,t=>t.Id===a.Id)&&e++}return[t.length,e]},showSelectFilters(t){this.showSelectFilter=!this.showSelectFilter,this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1,this.showTagDropdown=!1},closeSelectFilters(){this.showSelectFilter=!1},refreshTagFilterFollowers(){0!==this.filtration.Tag.Ids.length&&(this.pageNumber=1,this.fetchFollowers())},selectFilters(t,e,s,a){this.noTagString=s,this.filtration=JSON.parse(m()(t)),this.filtersLabel=JSON.parse(m()(e)),this.showSelectFilter=a,a&&this.initPicklistFiltersData()},initPicklistFiltersData(){this.tagOptions=[],this.customerOptionData.currentOptions=[],this.activityTimeOptionData.currentOptions=[],this.lookupCurentItem=null===this.lookupCurentItem?"":null},setLookupCurrentItem(t){this.lookupCurentItem=t?{id:t.id,name:t.name}:null===this.lookupCurentItem?"":null,this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1},selectTags(t,e){this.tagOptions=t,this.tagOptions=e?[{Name:e,Value:e}]:t},removeOption(t){this.tagOptions=t},selectPicklist(t,e){t.length>0?"Customer"===t[0].Type?(this.customerOptionData.currentOptions=t,"Following"!==this.currentFollowerTab&&(this.filtration.RelatedTo=t[0].Value,this.filtersLabel.customer=t[0].Value)):"Activity"===t[0].Type?this.activityTimeOptionData.currentOptions=t:"Order"===t[0].Type&&(this.orderOptionData.currents=t,this.fetchFollowers()):"Customer"===this.dropdownType?(this.customerOptionData.currentOptions=[],"Following"!==this.currentFollowerTab&&(this.filtration.RelatedTo="",this.filtersLabel.customer="")):"Activity"===this.dropdownType&&(this.activityTimeOptionData.currentOptions=[]),this.$root.$emit("close-other-dropdown",null),this.showDropdown=!1},getTabCount(t){return this.isLoadingFollowerList?"-":t},getIsPlusSignVisible(t){return!this.isLoadingFollowerList&&t}}),components:{NoRecord:_.a,Pagination:k.a,InputSelect:F.a,TagDropdown:L.a,Dropdown:S.a,TagList:bt,AddToCampaign:yt,FollowerList:st,FollowerFilters:nt}},Lt=(s("lPmX"),s("S7FQ"),s("BeT8")),St=Object(U.a)(Ft,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slds-tabs_scoped followers-tab followers-component"},[s("scoped-tabs",{attrs:{tabs:t.tabs,"current-tab-name":t.currentTab},on:{switch:t.changeTab}},[s("template",{slot:"button-group"},["FOLLOWERS"!==t.currentTab||t.isMiniProgramAcc?t._e():s("button",{staticClass:"slds-button slds-button_brand",on:{click:function(e){return t.openModal()}}},[t._v(t._s(t.$t("OpenSyncFollowerPopupBtn")))]),t._v(" "),"TAGS"!==t.currentTab||t.isCharketTab?t._e():s("button",{staticClass:"slds-button slds-button_brand tag-list-btn",on:{click:function(e){return t.openSyncTag()}}},[t._v(t._s(t.$t("SyncFollowerBtn")))]),t._v(" "),"TAGS"===t.currentTab?s("button",{staticClass:"slds-button slds-button_neutral tag-list-btn",attrs:{disabled:t.tagsCount>=100&&!t.isCharketTab},on:{click:function(e){return t.openNewTagPopup()}}},[t._v(t._s(t.$t("global.newBtn")))]):t._e()])],2),t._v(" "),s("div",{staticClass:"follower slds-tabs_scoped__content slds-show",attrs:{id:"tab-scoped-1",role:"tabpanel","aria-labelledby":"tab-scoped-1__item"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"FOLLOWERS"===t.currentTab,expression:"currentTab === 'FOLLOWERS'"}],staticClass:"followers-list-div"},[s("div",{staticClass:"operation slds-border_bottom"},[s("div",{staticClass:"slds-grid follower-tab slds-border_bottom"},[t.isMiniProgramAcc?t._e():t._l(t.followerTabs,(function(e){return s("div",{key:e.label,staticClass:"slds-grid slds-grid_vertical-align-center follower-tab-item slds-tabs_default__item",class:{"slds-active":t.currentFollowerTab===e.label},on:{click:function(s){return t.changeFollowerTab(e.label)}}},[s("a",{staticClass:"slds-tabs_default__link",attrs:{href:"javascript:void(0);"}},[t._v("\n                  "+t._s(t.$t(e.label))+"\n                ")]),t._v(" "),s("span",{staticClass:"slds-badge follower-count-badge"},[t._v("\n                  "+t._s(t._f("addSeparators")(t.getTabCount(e.count)))+"\n                  "),t.getIsPlusSignVisible(e.hasMore)?s("i",{staticClass:"show-plus-sign"},[t._v("+")]):t._e()])])})),t._v(" "),t.isMiniProgramAcc?t._l(t.miniProgramTabs,(function(e,a){return s("div",{key:a,staticClass:"slds-grid slds-grid_vertical-align-center follower-tab-item slds-tabs_default__item",class:{"slds-active":t.currentFollowerTab===e.label},on:{click:function(s){return t.changeFollowerTab(e.label)}}},[s("a",{staticClass:"slds-tabs_default__link",attrs:{href:"javascript:void(0);"}},[t._v("\n                  "+t._s(t.$t(e.label))+"\n                ")]),t._v(" "),s("span",{staticClass:"slds-badge follower-count-badge"},[t._v("\n                  "+t._s(t._f("addSeparators")(t.getTabCount(e.count)))+"\n                  "),t.getIsPlusSignVisible(e.hasMore)?s("i",{staticClass:"show-plus-sign"},[t._v("+")]):t._e()])])})):t._e(),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-end slds-grid_vertical-align-center slds-col follower-forms"},[s("search-input",{staticClass:"followers-search-input",attrs:{placeholder:t.$t("FollowerSearchPlaceholder")},on:{search:t.searchEnter,clear:t.clearSearchText},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)],2),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_vertical-align-center follower-filter-bar"},[s("div",{staticClass:"picklist-content"},[t.assignTagsPicklistVisible?s("assign-tags-picklist",{attrs:{"is-multy":!0,tags:t.tagList,"button-disabled":t.assignTagsPicklistBtnDisabled,"selected-follower-list":t.selectedFollowerList},on:{save:t.onUpdateFollowerTags,cancel:t.closeAssignTagsPicklist}}):t._e()],1),t._v(" "),t.isCheckAllButtonVisible&&!t.halfChecked?s("label",{staticClass:"slds-checkbox"},[s("input",{attrs:{type:"checkbox",name:"all",id:"checkbox-top",disabled:t.disabledAll},domProps:{checked:t.checkedAll},on:{change:function(e){return t.selectAllFollowers(e)}}}),t._v(" "),s("span",{staticClass:"slds-checkbox_faux"})]):t._e(),t._v(" "),t.isCheckAllButtonVisible&&t.halfChecked?s("label",{staticClass:"slds-checkbox slds-is-indeterminate"},[s("input",{attrs:{type:"checkbox",name:"all",id:"checkbox-top",disabled:t.disabledAll},on:{change:function(e){return t.selectAllFollowers(e)}}}),t._v(" "),s("span",{staticClass:"slds-checkbox_faux"})]):t._e(),t._v(" "),"Blocked"===t.currentFollowerTab&&t.currentUser.Permissions.Buttons.BlockFollower?[s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:0===t.selectedFollowerList.length},on:{click:function(e){return t.openBatchBlockPopup(t.currentFollowerTab)}}},[t._v(t._s(t.$t("UnblockBtn")))])]:t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"Following"===t.currentFollowerTab,expression:"currentFollowerTab === 'Following'"}],staticClass:"slds-button-group btn-group",attrs:{role:"group"}},[s("button",{staticClass:"slds-button slds-button_neutral multy-button",attrs:{disabled:0===t.selectedFollowerList.length},on:{click:t.toggle}},[t._v(t._s(t.$t("AddTagsBtn")))]),t._v(" "),t.currentUser.Permissions.Buttons.BlockFollower?s("button",{staticClass:"slds-button slds-button_neutral multy-button",attrs:{disabled:0===t.selectedFollowerList.length},on:{click:function(e){return t.openBatchBlockPopup(t.currentFollowerTab)}}},[t._v(t._s(t.$t("BlockBtn")))]):t._e(),t._v(" "),s("button",{staticClass:"slds-button slds-button_neutral multy-button",attrs:{disabled:0===t.selectedFollowerList.length},on:{click:function(e){return t.openAddCampaignModal()}}},[t._v(t._s(t.$t("AddToCampaignBtn")))])]),t._v(" "),"Following"===t.currentFollowerTab?s("div",{staticClass:"follower-filter-tag"},[s("input",{staticClass:"slds-lookup__search-input slds-input select-filter-input",attrs:{type:"search",placeholder:t.$t("FilterLabel"),readonly:"true"},on:{click:function(e){return e.stopPropagation(),t.showSelectFilters(e)}}}),t._v(" "),s("span",{staticClass:"select-filter-btn down-btn",on:{click:function(e){return e.stopPropagation(),t.showSelectFilters(e)}}},[s("icon",{attrs:{name:"down","class-name":"down-icon",width:".8125rem",height:".8125rem"}})],1),t._v(" "),t.showSelectFilter?s("follower-filters",{attrs:{"tag-options":t.tagOptions,"customer-options":t.customerOptionData.currentOptions,"activity-options":t.activityTimeOptionData.currentOptions,"lookup-current-item":t.lookupCurentItem},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openDropdown,"open-tag-dropdown":t.openTagDropdown,"resize-dropdown":t.resizeDropdown,"set-lookup-current":t.setLookupCurrentItem,"select-filters":t.selectFilters,"close-follower-filters":t.closeSelectFilters,"remove-option":t.removeOption}}):t._e()],1):t._e(),t._v(" "),"Following"!==t.currentFollowerTab?s("div",{staticClass:"follower-filter-lead"},[s("input-select",{attrs:{"default-label":t.$t("Lead")+"/"+t.$t("Contact"),currents:t.customerOptionData.currentOptions,type:"Customer"},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openDropdown,resize:t.resizeDropdown}})],1):t._e(),t._v(" "),"Unfollowed"!==t.currentFollowerTab&&0!==t.selectedFollowerList.length?s("div",{staticClass:"selected-followers-num"},[t._v(t._s(t.selectedFollowerList.length)+"\n              "),t.selectedFollowerList.length<=1?s("span",[t._v(t._s(t.$tc("global.itemLabel",1)))]):s("span",[t._v(t._s(t.$tc("global.itemLabel",2)))]),t._v(" "),s("span",[t._v(t._s(t.$t("selectedLabel")))])]):t._e(),t._v(" "),s("div",{staticClass:"slds-grid slds-grid_align-end slds-col follower-order"},[s("input-select",{attrs:{currents:t.orderOptionData.currents,type:"Order"},on:{"close-dropdown":t.closeDropdown,"open-dropdown":t.openDropdown,resize:t.resizeDropdown}})],1)],2),t._v(" "),t.hasFilters?s("div",{staticClass:"filter-list-section"},[s("span",{staticClass:"reset-filter-icon",on:{click:function(e){return t.resetFilters()}}},[s("icon",{attrs:{name:"close","text-color":"default",width:"13px",height:"13px"}})],1),t._v(" "),s("span",{staticClass:"reset-filter-title"},[t._v(t._s(t.$t("filteredByLabel"))+"Â ")]),t._v(" "),t.filtration.Tag.Ids.length>0?s("span",{staticClass:"reset-filter-value"},[t._v(t._s(t.$t("tagFilterValue"))+"Â \n              "),t._l(t.filtersLabel.tagNames,(function(e,a){return s("span",{key:a},[t._v(t._s(e))])}))],2):t._e(),t._v(" "),t.noTagString?s("span",{staticClass:"reset-filter-value"},[t._v(t._s(t.$t("tagFilterValue"))+"Â "+t._s(t.$t(t.noTagString))+".")]):t._e(),t._v(" "),t.filtration.RelatedTo?s("span",{staticClass:"reset-filter-value"},[t._v(t._s(t.$t("leadOrContactFilterValue"))+"Â "+t._s(t.$t(t.filtersLabel.customer))+".")]):t._e(),t._v(" "),t.filtration.CampaignId?s("span",{staticClass:"reset-filter-value"},[t._v(t._s(t.$t("campaignFilterValue"))+"Â "+t._s(t.filtersLabel.campaignName)+".")]):t._e(),t._v(" "),t.filtration.ActivityTime.Days?s("span",{staticClass:"reset-filter-value"},[t._v(t._s(t.$t("activityTimeFilterValue"))+"Â "+t._s(t.activityTimeContent)+".")]):t._e()]):t._e()]),t._v(" "),s("div",{staticClass:"follower-list-wrapper slds-scrollable_y",class:{"has-filter-list":t.hasFilters}},[t.isLoadingFollowerList?t._e():s("follower-list",{ref:"followerList",attrs:{"is-check-all":t.checkedAll,"current-account-followers":t.currentAccountFollowers,"current-follower-tab":t.currentFollowerTab,"selected-follower-list":t.selectedFollowerList,"waiting-threads":t.waitingThreads,"current-user":t.currentUser,"show-activity-time":t.showActivityTime},on:{"update-alias":function(e){return t.updateFollowerAlias(e)},"selected-follower":function(e){return t.checkAddTags(e)},"block-follower-success":function(e){return t.blockFollowerSuccess(e)},"reload-follower":function(e){return t.reloadFollower(e)},loading:function(e){return t.loading()},"clear-selected-followers":function(e){return t.clearSelectedFollowers()},"refresh-follower-tags":function(e){return t.assignTagSuccess(e)}}}),t._v(" "),t.isLoadingFollowerList?t._e():s("pagination",{attrs:{paginations:t.currentFollowersPagination,"page-number":t.pageNumber},on:{target:t.target}}),t._v(" "),t.showNoRecords?s("no-record"):t._e()],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoadingFollowerList,expression:"isLoadingFollowerList"}],staticClass:"slds-spinner_container followers-tab__loading"},[s("ld-loading",{attrs:{size:"medium",type:"brand"}})],1),t._v(" "),"TAGS"===t.currentTab?s("tag-list",{ref:"tagListComponent",on:{clickTag:function(e){return t.getClickedTag(e)},"check-charket-tab":t.checkCharketTab}}):t._e()],1),t._v(" "),s("ld-modal",{ref:"modalpopup",attrs:{title:t.Modal.headerContent},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticClass:"slds-p-around_medium text-align-center"},[t._v(t._s(t.Modal.mainContent))])]},proxy:!0},{key:"footer",fn:function(){return[s("ld-button",{directives:[{name:"show",rawName:"v-show",value:t.Modal.isSyncButtonViewed,expression:"Modal.isSyncButtonViewed"}],attrs:{disabled:t.Modal.isCancelButtonDisabled,neutral:""},on:{click:function(e){return t.closeModal()}}},[t._v("\n        "+t._s(t.$t("global.cancelBtn"))+"\n      ")]),t._v(" "),s("ld-button",{directives:[{name:"show",rawName:"v-show",value:t.Modal.isSyncButtonViewed,expression:"Modal.isSyncButtonViewed"}],attrs:{disabled:t.Modal.isSyncButtonDisabled,brand:""},on:{click:function(e){return t.syncFollowerAction(t.accountId)}}},[t._v("\n        "+t._s(t.$t("SyncFollowerBtn"))+"\n      ")]),t._v(" "),s("ld-button",{directives:[{name:"show",rawName:"v-show",value:!t.Modal.isSyncButtonViewed,expression:"!Modal.isSyncButtonViewed"}],attrs:{brand:""},on:{click:function(e){return t.closeModal()}}},[t._v("\n        "+t._s(t.$t("SyncFollowerSuccessBtn"))+"\n      ")])]},proxy:!0}])}),t._v(" "),s("add-to-campaign",{ref:"AddToCampaign",attrs:{followers:t.selectedFollowerList}}),t._v(" "),t.showTagDropdown?s("tag-dropdown",{attrs:{"account-id":t.accountId,currents:t.tagOptions,left:t.dropdownLeft,top:t.dropdownTop,width:t.dropdownWidth,"is-single-selection":!1,"has-no-tag":!0,"no-tag":t.noTagString},on:{"select-option":t.selectTags,close:t.closeDropdown}}):t._e(),t._v(" "),t.showDropdown?s("dropdown",{attrs:{options:t.dropdownOptionData.options,currents:t.dropdownOptionData.currents,left:t.dropdownLeft,top:t.dropdownTop,width:t.dropdownWidth,"default-label":t.dropdownHasDefaultLabel,"has-sort-by":t.hasSortBy},on:{"select-option":t.selectPicklist,close:t.closeDropdown}}):t._e()],1)}),[],!1,null,"04e57c91",null);"function"==typeof Lt.default&&Object(Lt.default)(St);e.default=St.exports},"1i1b":function(t,e,s){},"4IgH":function(t,e,s){"use strict";s.d(e,"c",(function(){return o})),s.d(e,"b",(function(){return i})),s.d(e,"f",(function(){return l})),s.d(e,"d",(function(){return n})),s.d(e,"a",(function(){return r})),s.d(e,"g",(function(){return c})),s.d(e,"e",(function(){return d}));var a=s("00Ee");function o(t){return Object(a.a)({method:"DatabaseRemoteActions.queryData",args:[t]})}function i(t){return Object(a.a)({method:"QRCodeRemoteActions.getCampaignMemberStatus",args:[t]})}function l(){return Object(a.a)({method:"QRCodeRemoteActions.getRelatedObjectNames",args:[]})}function n(t){return Object(a.a)({method:"QRCodeRemoteActions.getQRCodeById",args:[t]})}function r(t,e){return Object(a.a)({method:"QRCodeRemoteActions.changeQRCodeStatus",args:[t,e]})}function c(t){return Object(a.a)({method:"QRCodeRemoteActions.updateQRCode",args:[t]})}function d(t){return Object(a.a)({method:"QRCodeRemoteActions.getQRCodesByCampaignFlowStepId",args:[t]})}},"4f8s":function(t,e,s){"use strict";var a=s("z5SC");s.n(a).a},"4lQI":function(t,e,s){"use strict";var a=s("k87u");s.n(a).a},"7nBR":function(t,e,s){"use strict";var a=s("1i1b");s.n(a).a},"7xmI":function(t,e,s){},A1tU:function(t,e,s){},BeT8:function(t,e,s){"use strict";var a=s("NLab"),o=s.n(a);e.default=o.a},Epmv:function(t,e,s){"use strict";var a=s("x0AZ");s.n(a).a},F5n6:function(t,e,s){"use strict";var a={props:{paginations:{type:Array},pageNumber:{type:Number,default:1}},data:()=>({currentPageNumber:1}),created(){this.currentPageNumber=this.pageNumber},methods:{changePageNumber(t,e){this.currentPageNumber="pre"===e?this.currentPageNumber-1:"next"===e?this.currentPageNumber+1:t,this.$emit("target",this.currentPageNumber)}}},o=(s("hkfk"),s("KHd+")),i=s("k/9o"),l=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.paginations.length>1?s("ul",{staticClass:"slds-grid slds-grid_align-center pagination"},[s("li",{staticClass:"page-turning-pre",attrs:{title:t.$t("preTitle")}},[t.currentPageNumber>1?s("a",{staticClass:"page-turning",attrs:{id:"previousPage"},on:{click:function(e){return t.changePageNumber("","pre")}}},[s("icon",{attrs:{name:"left","text-color":"default",size:"x-small","charket-icon":""}})],1):s("a",{staticClass:"disabled page-turning",attrs:{id:"previousPageDisabled",disabled:"true"}},[s("icon",{attrs:{name:"left","text-color":"default",size:"x-small","charket-icon":""}})],1)]),t._v(" "),t._l(t.paginations,(function(e){return s("li",{staticClass:"middle-page-number"},[0!==e.PageNumber?s("a",{class:{currentPage:e.PageNumber===t.currentPageNumber},on:{click:function(s){return t.changePageNumber(e.PageNumber)}}},[t._v(t._s(e.PageNumber))]):s("a",[t._v("...")])])})),t._v(" "),s("li",{staticClass:"page-turning-pre",attrs:{title:t.$t("nextTitle")}},[t.paginations[t.paginations.length-1].PageNumber!==t.currentPageNumber?s("a",{staticClass:"page-turning",attrs:{id:"nextPage"},on:{click:function(e){return t.changePageNumber("","next")}}},[s("icon",{attrs:{name:"right","text-color":"default",size:"x-small","charket-icon":""}})],1):s("a",{staticClass:"disabled page-turning",attrs:{id:"nextPageDisabled",disabled:"true"}},[s("icon",{attrs:{name:"right","text-color":"default",size:"x-small","charket-icon":""}})],1)])],2):t._e()}),[],!1,null,"430ba9bf",null);"function"==typeof i.default&&Object(i.default)(l);e.a=l.exports},H3OO:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"blockFollowerBtn":"æé»","unblockFollowerBtn":"åæ¶æé»","Male":"ç·","Female":"å¥³","ActivityCount":"æ´»å¨","blockFollowerHeader":"æé»å³æ³¨è","blockFollowerContent":"ä½ ç¡®å®æ³è¦æé»æ­¤å³æ³¨è?","unblockFollowerHeader":"åæ¶æé»å³æ³¨è","unblockFollowerContent":"ä½ ç¡®å®æ³è¦åæ¶æé»æ­¤å³æ³¨è?","blockedStatus":"å·²æé»","followedLabel":"å³æ³¨","unfollowedLabel":"åæ¶å³æ³¨","blockFollowerNotify":"å³æ³¨èå·²è¢«æé»ï¼","unblockFollowerNotify":"å³æ³¨èå·²è¢«åæ¶æé»ï¼","followedDateLabel":"{0}å³æ³¨","unfollowedDateLabel":"{0}åæ¶å³æ³¨","grantedDateLabel":"{0}ææ","lastActivityLabel":"æè¿æ´»è·{0}"},"en":{"blockFollowerBtn":"Block","unblockFollowerBtn":"Unblock","Male":"Male","Female":"Female","ActivityCount":"Activity | Actvities","blockFollowerHeader":"Block Follower | Block Followers","blockFollowerContent":"Are you sure you want to block this follower? | Are you sure you want to block these followers?","unblockFollowerHeader":"Unblock Follower | Unblock Followers","unblockFollowerContent":"Are you sure you want to unblock this follower? | Are you sure you want to unblock these followers?","blockedStatus":"Blocked","followedLabel":"Followed","unfollowedLabel":"Unfollowed","blockFollowerNotify":"The follower was blocked. | The followers were blocked.","unblockFollowerNotify":"The follower was unblocked. | The followers were unblocked.","followedDateLabel":"Followed {0}","unfollowedDateLabel":"Unfollowed {0}","grantedDateLabel":"Granted {0}","lastActivityLabel":"Last Activity {0}"}}'),delete t.options._Ctor}},"ISa+":function(t,e,s){},MTK9:function(t,e,s){},NLab:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"FOLLOWERS":"å³æ³¨è","TAGS":"æ ç­¾","Following":"å·²å³æ³¨","Unfollowed":"å·²åæ¶å³æ³¨","Blocked":"é»åå","AuthorizationGranted":"å·²ææ","AnonymousUser":"å¿åç¨æ·","FollowerSearchPlaceholder":"æç´¢æ­¤åè¡¨...","OpenSyncFollowerPopupBtn":"åæ­¥å³æ³¨è","SyncFollowerBtn":"åæ­¥","SyncFollowerPopupMainContent":"ä½ ç¡®å®ä½ æ³è¦ä»å¾®ä¿¡ç«¯åæ­¥å³æ³¨èäºå?","SyncFollowerPopupSuccessMainContent":"è¯·æ±å·²ç»æäº¤ãåæ­¥æéæ¶é´ä¾èµä¸å½åå¬ä¼æ¥æçå³æ³¨èæ°éãåæ­¥å®æåï¼ä½ å°æ¶å°çµå­é®ä»¶éç¥ã","SyncFollowerPopupHeader":"åæ­¥å¾®ä¿¡å³æ³¨è","SyncFollowerSuccessBtn":"ç¡®å®","SyncFollowerFailedNotification":"åæ­¥å³æ³¨èå¤±è´¥ã","AddTagsBtn":"æ·»å æ ç­¾","BlockBtn":"å å¥é»åå","UnblockBtn":"åæ¶æé»","AddToCampaignBtn":"æ·»å å°å¸åºæ´»å¨","FilterLabel":"è¿æ»¤å¨","tagAssignmentSuccess":"æ¹å¨å·²ä¿å­ã","tagCreateSuccess":"æ ç­¾å·²åå»ºã","No Related":"æ å³èå¯¹è±¡","Contact":"èç³»äºº","Lead":"æ½å¨å®¢æ·","alphabeticallyLabel":"å­æ¯ååº","reverseAlphabeticallyLabel":"å­æ¯éåº","lastSubscriptionLabel":"æè¿å³æ³¨æ¥æ","oldestSubscriptionLabel":"ææ©å³æ³¨æ¥æ","lastUnsubscriptionLabel":"æè¿åæ¶å³æ³¨æ¥æ","oldestUnsubscriptionLabel":"ææ©åæ¶å³æ³¨æ¥æ","lastActivityTimeLabel":"æè¿æ´»è·æ¶é´","oldestActivityTimeLabel":"ææ©æ´»è·æ¶é´","lastGrantedLabel":"æè¿æææ¶é´","oldestGrantedLabel":"ææ©æææ¶é´","unfollowedCannotAssigneTagNotification":"ä¸è½ç»å·²åæ¶å³æ³¨çç¨æ·åéæ ç­¾ã","filteredByLabel":"è¿æ»¤æ¡ä»¶:","tagFilterValue":"æ ç­¾:","leadOrContactFilterValue":"æ½å¨å®¢æ·/èç³»äºº:","campaignFilterValue":"å¸åºæ´»å¨:","activityTimeFilterValue":"æ´»è·æ¶é´:","No Tag":"æ æ ç­¾","selectedLabel":"å·²éä¸­","lastHourLabel":"æè¿{0}å°æ¶","lastDayLabel":"æè¿{0}å¤©"},"en":{"FOLLOWERS":"Followers","TAGS":"Tags","Following":"Following","Unfollowed":"Unfollowed","Blocked":"Blocked","AuthorizationGranted":"Authorization Granted","AnonymousUser":"Anonymous User","FollowerSearchPlaceholder":"Search this list...","OpenSyncFollowerPopupBtn":"Sync Followers","SyncFollowerBtn":"Sync","SyncFollowerPopupMainContent":"Are you sure you want to sync followers from WeChat?","SyncFollowerPopupSuccessMainContent":"Your request was submitted. The sync may take from a few minutes to tens of hours depending on the amount of followers you have. You will receive an email once the sync is completed.","SyncFollowerPopupHeader":"Sync WeChat Followers","SyncFollowerSuccessBtn":"OK","SyncFollowerFailedNotification":"Sync followers failed.","AddTagsBtn":"Add Tags","BlockBtn":"Block","UnblockBtn":"Unblock","AddToCampaignBtn":"Add to Campaign","FilterLabel":"Filters","tagAssignmentSuccess":"Your changes are saved","tagCreateSuccess":"Tag was created.","No Related":"No Related","Contact":"Contact","Lead":"Lead","alphabeticallyLabel":"Alphabetically","reverseAlphabeticallyLabel":"Reverse Alphabetically","lastSubscriptionLabel":"Last Subscription Date","oldestSubscriptionLabel":"Oldest Subscription Date","lastUnsubscriptionLabel":"Last Unsubscription Date","oldestUnsubscriptionLabel":"Oldest Unsubscription Date","lastActivityTimeLabel":"Last Activity Time","oldestActivityTimeLabel":"Oldest Activity Time","lastGrantedLabel":"Last Granted Date","oldestGrantedLabel":"Oldest Granted Date","unfollowedCannotAssigneTagNotification":"The unfollowed follower could not be assigned new tags.","filteredByLabel":"Filtered By:","tagFilterValue":"Tag:","leadOrContactFilterValue":"Lead/Contact:","campaignFilterValue":"Campaign:","activityTimeFilterValue":"Activity Time:","No Tag":"No Tag","selectedLabel":"selected","lastHourLabel":"Last {0} Hours","lastDayLabel":"Last {0} Days"}}'),delete t.options._Ctor}},Ogyo:function(t,e,s){"use strict";var a=s("lIaW");s.n(a).a},OuLJ:function(t,e,s){"use strict";var a=s("A1tU");s.n(a).a},PEPB:function(t,e,s){},S7FQ:function(t,e,s){"use strict";var a=s("7xmI");s.n(a).a},XJQz:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"defaultTagsLabel":"æ ç­¾","defaultLeadOrContactLabel":"æ½å¨å®¢æ·/èç³»äºº","defaultActivityTimeLabel":"æ´»å¨æ¶é´","applyBtn":"åºç¨","resetBtn":"éç½®"},"en":{"defaultTagsLabel":"Tags","defaultLeadOrContactLabel":"Lead/Contact","defaultActivityTimeLabel":"Activity Time","applyBtn":"Apply","resetBtn":"Reset"}}'),delete t.options._Ctor}},Xzh4:function(t,e,s){"use strict";var a=s("d0dz"),o=s.n(a);e.default=o.a},ZFJN:function(t,e,s){"use strict";var a=s("kFI/");s.n(a).a},brcG:function(t,e,s){"use strict";var a=s("MTK9");s.n(a).a},d0dz:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"addToCampaignHeader":"æ·»å å°å¸åºæ´»å¨","followerSelectedCountLabel":"å³æ³¨èè¢«éä¸­","campaignMemberStatusLabel":"å¸åºæ´»å¨æåç¶æ","existingCampaignMemberLabel":"ç°æå¸åºæ´»å¨æå","keepMemberLabel":"ä¿çç°ææåç¶æ","updateMemberLabel":"æ´æ°ä¸ºéå®æåç¶æ"},"en":{"addToCampaignHeader":"Add to Campaign","followerSelectedCountLabel":"follower selected | followers selected","campaignMemberStatusLabel":"Campaign Member Status","existingCampaignMemberLabel":"Existing campaign member","keepMemberLabel":"Keep existing member status","updateMemberLabel":"Update with the selected member status"}}'),delete t.options._Ctor}},fGFX:function(t,e,s){},hOO7:function(t,e,s){},hkfk:function(t,e,s){"use strict";var a=s("fGFX");s.n(a).a},irDv:function(t,e,s){"use strict";var a=s("wfAU"),o=s.n(a);e.default=o.a},"k/9o":function(t,e,s){"use strict";var a=s("qVZU"),o=s.n(a);e.default=o.a},k87u:function(t,e,s){},"kFI/":function(t,e,s){},lIaW:function(t,e,s){},lPmX:function(t,e,s){"use strict";var a=s("PEPB");s.n(a).a},m53b:function(t,e,s){"use strict";var a=s("xWZy"),o=s.n(a);e.default=o.a},oqIK:function(t,e,s){"use strict";var a=s("ISa+");s.n(a).a},p3RT:function(t,e,s){"use strict";var a=s("H3OO"),o=s.n(a);e.default=o.a},qPYy:function(t,e,s){"use strict";var a=s("hOO7");s.n(a).a},qVZU:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"preTitle":"ä¸ä¸é¡µ","nextTitle":"ä¸ä¸é¡µ"},"en":{"preTitle":"Previous Page","nextTitle":"Next Page"}}'),delete t.options._Ctor}},t2Vl:function(t,e,s){"use strict";var a=s("XJQz"),o=s.n(a);e.default=o.a},wfAU:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"NameLabel":"åç§°","syncTagsLabel":"åæ­¥æ ç­¾","createTagLabel":"åå»º{0}æ ç­¾","deleteTagLabel":"å é¤æ ç­¾","editTagLabel":"ç¼è¾æ ç­¾","SyncTagPopupContent":"ä½ ç¡®è®¤æ³è¦ä»å¾®ä¿¡åæ­¥æ ç­¾?","waitSyncTagConfirm":"ä½ çè¯·æ±å·²ç»æäº¤, è¿æ¬¡åæ­¥å¯è½éè¦ä¸äºæ¶é´æ¥å®æã","deleteTagPopupContent":"ä½ ç¡®å®è¦ä»å¾®ä¿¡å é¤è¿ä¸ªæ ç­¾å?","deleteTagSuccessNotification":"æ ç­¾å·²å é¤ã","createTagSuccessNotification":"æ ç­¾å·²åå»ºã","saveTagSuccessNotification":"æ ç­¾å·²ä¿å­ã","mostFollowersLabel":"æå¤å³æ³¨è","fewestFollowersLabel":"æå°å³æ³¨è","alphabeticallyLabel":"å­æ¯ååº","reverseAlphabeticallyLabel":"å­æ¯éåº","WeChat":"å¾®ä¿¡","Charket":"Charket","tagSearchPlaceholder":"æ¥è¯¢æ ç­¾","convertBtn":"è½¬æ¢","overwriteTagLabel":"è¦çå¾®ä¿¡å³æ³¨èçç°ææ ç­¾","convertWeChatHeader":"è½¬æ¢å¾®ä¿¡æ ç­¾","convertWeChatMain":"ç¡®å®è½¬æ¢è¿ä¸ªå¾®ä¿¡æ ç­¾ä¸º Charket æ ç­¾åï¼","convertCharketHeader":"è½¬æ¢ Charket æ ç­¾","convertCharketMain":"ç¡®å®è½¬æ¢è¿ä¸ª Charket æ ç­¾ä¸ºå¾®ä¿¡æ ç­¾åï¼","convertNotify":"{0} å·²ç»å¨ {1} æäº¤äºä¸ä¸ªæ ç­¾è½¬æ¢ãå¨è¿ä¸ªæä½å®æä¹åï¼ä¸è½åè½¬æ¢å¶ä»çæ ç­¾ãå¨è½¬æ¢å®æä¹åï¼{0} ä¼æ¶å°ä¸å°é®ä»¶éç¥ã"},"en":{"NameLabel":"Name","syncTagsLabel":"Sync Tags","createTagLabel":"Create {0} Tag","deleteTagLabel":"Delete Tag","editTagLabel":"Edit Tag","SyncTagPopupContent":"Are you sure you want to sync tags from WeChat?","waitSyncTagConfirm":"Your request was submitted. The sync may take a few minutes to complete.","deleteTagPopupContent":"Are you sure you want to delete this tag which will also be deleted from WeChat?","deleteTagSuccessNotification":"The tag was deleted.","createTagSuccessNotification":"A new tag was created.","saveTagSuccessNotification":"The tag was saved.","mostFollowersLabel":"Most Followers","fewestFollowersLabel":"Least Followers","alphabeticallyLabel":"Alphabetically","reverseAlphabeticallyLabel":"Reverse Alphabetically","WeChat":"WeChat","Charket":"Charket","tagSearchPlaceholder":"Search Tags","convertBtn":"Convert","overwriteTagLabel":"Overwrite the existing WeChat followerâs tags","convertWeChatHeader":"Convert WeChat Tag","convertWeChatMain":"Are you sure you want to convert this WeChat tag to a Charket tag?","convertCharketHeader":"Convert Charket Tag","convertCharketMain":"Are you sure you want to convert this Charket tag to a WeChat tag?","convertNotify":"A tag converting has been initiated by {0} on {1}. You can\'t convert any tags prior to the completion of the operation. {0} will receive an email when the operation finishes."}}'),delete t.options._Ctor}},x0AZ:function(t,e,s){},xWZy:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"cn":{"addTagLabel":"æ·»å æ ç­¾","notifyContent":"æªå³æ³¨èä¸è½è¢«æ·»å æå é¤æ ç­¾ã"},"en":{"addTagLabel":"Add Tag","notifyContent":"An unfollowing follower cannot be added/removed tags."}}'),delete t.options._Ctor}},z5SC:function(t,e,s){}}]);