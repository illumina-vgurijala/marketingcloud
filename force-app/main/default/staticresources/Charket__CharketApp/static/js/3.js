(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2GRW":function(e,t,i){"use strict";function l({iconClassList:e,title:t,desc:i}){const l=document.createElement("div");return l.className="weui-msg",l.innerHTML=`\n    <div class="weui-msg__icon-area"><i class="${e.join(" ")}"></i></div>\n    <div class="weui-msg__text-area">\n      <h2 class="weui-msg__title">${t}</h2>\n      <div class="weui-msg__desc charket-edui edui-init-style">${i}</div>\n    </div>\n  `,l}var s=e=>{if("string"!=typeof e)return e;const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,e=>t[e])};function n({Banner:e,Title:t,Description:i}){const l=document.createElement("div");l.className="banner";let n="";return e&&(n+=`<div class="banner-pic-wrapper">\n        <img src="${e}" class="banner-pic">\n      </div>\n    `),t&&(n+=`<div class="banner-title title form-title">${s(t)}</div>`),i&&(n+=`<article class="weui-article description banner-description ${t?"des-distance":""} charket-edui edui-init-style">${i}</article>`),l.innerHTML=n,l}function a(e,t={}){const i=document.createElement("span"),l=t.ButtonBg||"",n=t.ButtonColor||"",a=t.ButtonFontSize||"";return i.innerHTML=`\n    <a href="javascript:;" style="background-color: ${l}; font-size: ${a}; color: ${n}" class="sure-btn submit-button weui-btn weui-btn_primary">${void 0!==e?s(e):"提交"}</a>\n  `,i}function d(e={}){const t=function(e){const t=document.createElement("div");return t.className="error-msg error-notify",t.style.top="-30px",t.style.backgroundColor=e.ErrorBg,t.style.color=e.ErrorColor,t}(e);return{domElement:t,showErrorMsg:function(e){let i=1500;t.style.top="0px",t.textContent=e;const l=t.clientHeight;e.length>15&&(i=Math.min(e.length/10*1e3,5e3)),window.setTimeout((function(){t.style.top=`-${l}px`}),i)}}}function o(){const e=function(){const e=document.createElement("div");return e.innerHTML='\n    <div class="loading-mask weui-mask_transparent"></div>\n    <div class="loading-toast weui-toast">\n      <i class="weui-loading weui-icon_toast"></i>\n      <p class="weui-toast__content">正在保存</p>\n    </div>\n  ',e.style.display="none",e}();return{domElement:e,show(t){e.style.display=""},hide(){e.style.display="none"}}}const r={hide:"m51.8 25.1c-1.6-3.2-3.7-6.1-6.3-8.4l-8.5 8.4v0.9c0 6.1-4.9 11-11 11h-0.9l-5.4 5.4c2 0.4 4.1 0.7 6.2 0.7 11.3 0 21.1-6.6 25.8-16.1 0.4-0.7 0.4-1.3 0.1-1.9z m-3.3-19.5l-2.1-2.1c-0.6-0.6-1.7-0.5-2.4 0.3l-7.3 7.3c-3.3-1.4-6.9-2.1-10.7-2.1-11.3 0-21.1 6.6-25.8 16.1-0.3 0.6-0.3 1.3 0 1.8 2.2 4.5 5.5 8.2 9.6 11l-6 6.1c-0.7 0.7-0.8 1.8-0.3 2.4l2.1 2.1c0.6 0.6 1.7 0.5 2.4-0.3l40.2-40.2c0.8-0.7 0.9-1.8 0.3-2.4z m-33.5 20.4c0-6.1 4.9-11 11-11 2 0 3.8 0.5 5.4 1.4l-3 3c-0.8-0.2-1.6-0.4-2.4-0.4-3.9 0-7 3.1-7 7 0 0.8 0.2 1.6 0.4 2.4l-3 3c-0.9-1.6-1.4-3.4-1.4-5.4z",preview:"m51.8 25.1c-4.7-9.5-14.5-16.1-25.8-16.1s-21.1 6.6-25.8 16.1c-0.3 0.6-0.3 1.3 0 1.8 4.7 9.5 14.5 16.1 25.8 16.1s21.1-6.6 25.8-16.1c0.3-0.6 0.3-1.2 0-1.8z m-25.8 11.9c-6.1 0-11-4.9-11-11s4.9-11 11-11 11 4.9 11 11-4.9 11-11 11z m0-18c-3.9 0-7 3.1-7 7s3.1 7 7 7 7-3.1 7-7-3.1-7-7-7z",close:"m31 25.4l13-13.1c0.6-0.6 0.6-1.5 0-2.1l-2-2.1c-0.6-0.6-1.5-0.6-2.1 0l-13.1 13.1c-0.4 0.4-1 0.4-1.4 0l-13.1-13.2c-0.6-0.6-1.5-0.6-2.1 0l-2.1 2.1c-0.6 0.6-0.6 1.5 0 2.1l13.1 13.1c0.4 0.4 0.4 1 0 1.4l-13.2 13.2c-0.6 0.6-0.6 1.5 0 2.1l2.1 2.1c0.6 0.6 1.5 0.6 2.1 0l13.1-13.1c0.4-0.4 1-0.4 1.4 0l13.1 13.1c0.6 0.6 1.5 0.6 2.1 0l2.1-2.1c0.6-0.6 0.6-1.5 0-2.1l-13-13.1c-0.4-0.4-0.4-1 0-1.4z"};function c({iconName:e,classNameList:t,width:i,height:l,color:s}){return`<span class="${t.join(" ")}">\n        <svg xmlns="http://www.w3.org/2000/svg" width="${i||"16px"}" height="${l||"16px"}" viewBox="0 0 52 52"><path fill="${s||"#000000"}" d="${r[e]}"></path>\n   </span>`}function u(e){return{None:"","Red Asterisk":"#C23934",Asterisk:"#9FAAB5"}[e.RequiredIcon||"None"]}function m(){let e,t;t=setInterval((function(){e=document.documentElement.scrollTop||document.body.scrollTop,e-=1,window.scrollTo(0,e),e+=1,window.scrollTo(0,e),clearInterval(t)}),1)}let h=0;const p=c({iconName:"hide",color:"#9FAAB5",classNameList:["password-toggle-icon"]}),y=c({iconName:"preview",color:"#9FAAB5",classNameList:["password-toggle-icon"]});class g{constructor(e,t={}){this.isValid=!0,this.domElement=function(e,t){const i=document.createElement("div");i.className="weui-cells text-input charket-cells";const l=t.TitleFontSize||"",n=t.TitleColor||"",a=t.LabelFontSize||"",d=t.LabelColor||"",o=t.FormBg||"",r=u(t);return i.innerHTML="Top"===e.LabelLayout?`\n    <div style="font-size: ${l}; color: ${n};background-color: ${o}" class="weui-cells__title text-input-title field-title">\n      ${s(e.AlternativeLabel||e.DefaultLabel)}\n      <span style="color: ${r}" class="${r&&e.IsRequired?"":"hide-ele"}">*</span>\n    </div>\n    <div class="weui-cells weui-cells-custom charket-cells">\n      <div class="weui-cell charket-cell charket-cell">\n        <div class="weui-cell__bd">\n          <input class="weui-input field-value" maxlength="${"Number"===e.FieldSettings.Type?"":e.FieldSettings.Length}"/>\n        </div>\n        <div style="display: none" class="weui-cell__ft">\n          <i class="weui-icon-warn"></i>\n        </div><span class="icon-wrapper">${"Text"===e.FieldSettings.Type&&!0===e.FieldSettings.IsMasked?p:""}</span>\n      </div>\n    </div>`:`\n    <div class="weui-cell charket-cell">\n      <div style="font-size: ${a}; color: ${d}" class="weui-cell__hd field-label">\n        <label class="weui-label" for="__input__${h}">\n          ${s(e.AlternativeLabel||e.DefaultLabel)}\n          <span style="color: ${r}" class="${r&&e.IsRequired?"":"hide-ele"}">*</span>\n        </label>\n      </div>\n      <div class="weui-cell__bd">\n        <input class="weui-input field-value" id="__input__${h++}" maxlength="${"Number"===e.FieldSettings.Type?"":e.FieldSettings.Length}"/>\n      </div>\n      <div style="display: none" class="weui-cell__ft">\n        <i class="weui-icon-warn"></i>\n      </div><span class="icon-wrapper">${"Text"===e.FieldSettings.Type&&!0===e.FieldSettings.IsMasked?p:""}</span>\n    </div>\n  `,i}(e,t),this.item=e,this.styles=t,this.__warningDiv__=this.domElement.querySelector(".weui-label")||this.domElement.querySelector(".text-input-title"),this.__warningIcon__=this.domElement.querySelector(".weui-cell__ft"),this.__inputElement__=this.domElement.querySelector(".weui-input"),_.call(this,e)}showError(){this.__warningDiv__.style.color="#e64340",this.__warningIcon__.style.display=""}hideError(){this.domElement.querySelector(".weui-label")?this.__warningDiv__.style.color=this.styles.LabelColor||"":this.domElement.querySelector(".text-input-title")&&(this.__warningDiv__.style.color=this.styles.TitleColor||""),this.__warningIcon__.style.display="none"}assignValue(){""!==this.__inputElement__.value?(this.item.Value=this.__inputElement__.value,"Number"===this.item.FieldSettings.Type?this.item.Value=parseFloat(this.item.Value):"Email"===this.item.FieldSettings.Type&&(this.item.Value=this.item.Value.replace(/\s/g,""))):this.item.Value=null}validateFormat(){if(""===this.__inputElement__.value)return this.isValid=!0,void this.hideError();const e=d(this.styles),t=e.showErrorMsg;let i;(document.getElementById("app")||{appendChild:()=>{}}).appendChild(e.domElement);let l=this.__inputElement__.value||"";const s=this.item.FieldSettings.Type;if("Email"===s)i=/^[^.\s@][^\s@]*@[^.\s@]+(?:\.[^.\s@]+)*$/.test(l.replace(/\s/g,""));else if("Number"===s)if(i=/^\d*(.\d+)?$/.test(l),i){let e=this.item.FieldSettings,s=l.split("."),n=s[0].length,a=s[1]?s[1].length:0;if("INTEGER"===this.item.Type)(n>e.Digits||a)&&(i=!1,t(`支持最多输入整数${e.Digits}位`));else if("DOUBLE"===this.item.Type){let l=e.Precision-e.Scale;(n>l||a>e.Scale)&&(i=!1,t(`支持最多输入整数${l}位，小数${e.Scale}位`))}}else t("只支持数字");else"Phone"===s?(l=(e=>{let t="",i=[173,8236,8237];for(let l=0;l<e.length;l++)i.indexOf(e[l].charCodeAt())<0&&(t+=e[l]);return t})(l),i=/^([0-9]|[(]|[)]|[-]|[+]|[ ])+$/.test(l)):i=new RegExp(this.item.FieldSettings.Format).test(l);l.length>this.item.FieldSettings.Length&&"Number"!==s&&t(`最多只能输入${this.item.FieldSettings.Length}`),this.isValid=i,i?this.hideError():this.showError()}}function _(e){e.IsReadOnly&&(this.domElement.querySelector("input").readOnly="readOnly",this.domElement.style.color="#B2B2B2");const t=e.FieldSettings.Type;if(this.__inputElement__.type="Phone"===t?"tel":"text","Text"===e.FieldSettings.Type&&!0===e.FieldSettings.IsMasked){this.__inputElement__.type="password";const e=this.domElement.querySelector(".icon-wrapper");e.addEventListener("click",()=>{this.__inputElement__.type="password"===this.__inputElement__.type?"text":"password",e.innerHTML="password"===this.__inputElement__.type?p:y})}this.__inputElement__.value=null==e.Value?"":e.Value,this.__inputElement__.placeholder=e.Placeholder||"",this.__inputElement__.addEventListener("focus",()=>{this.hideError()}),this.__inputElement__.addEventListener("blur",()=>{this.validateFormat(),navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()})}var f=e=>{let t={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};if(null!=e)return(e=e.replace(/&#0?39;/gi,"'")).replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(e,i){return t[i]}))};const v="连接超时, 请检查您的网络",w="无可用的网络连接";function S({followerId:e,whatIds:t,completionResponsesJSON:i,success:l,fail:s}){Visualforce.remoting.Manager.invokeAction(`${window.namespace?window.namespace+".":""}CompletionResponseRemoteActions.sendCompletionResponses`,e,t,i,(function(e,t){200===t.statusCode?l():s()}),{escape:!0})}function b(e,t){return function(i,l){null===i?!0===l.xhr.isTimeout?t(v):"onLine"in navigator&&!1===navigator.onLine?t(w):t():i.ok?(i.data.redirectURL=i.data.redirectURL?f(i.data.redirectURL):"",e(i.data)):t(i.error)}}const F=60;let E=0;function L(e,t){const i=t.LabelFontSize||"",l=t.LabelColor||"",s=u(t),n=e.Value?"":"weui-btn_disabled",a="Top"===e.LabelLayout?`\n    <div class="weui-cell__bd">\n      <input\n        type="tel"\n        class="weui-input field-value verification__input"\n        pattern="[0-9]*"\n        placeholder="${e.FieldSettings.VerificationCodeComponentSettings.PlaceholderText}"\n        maxlength="6"\n      />\n    </div>\n    <div class="weui-cell__ft">\n      <span class="verification__right">\n        <div style="display: none" class="verification__warning">\n          <i class="weui-icon-warn"></i>\n        </div>\n        <button class="weui-btn weui-btn_default weui-vcode-btn verification-button verification-button--top ${n}">${e.FieldSettings.VerificationCodeComponentSettings.SendButtonLabel}</button>\n        <div class="verification__time"></div>\n      <span>\n    </div>\n  `:`\n    <div style="font-size: ${i}; color: ${l}" class="weui-cell__hd field-label">\n      <label class="weui-label" for="verify__input__${E}">\n      ${e.FieldSettings.VerificationCodeComponentSettings.Label}<span\n          class="${s&&e.IsRequired?"":"hide-ele"}"\n          style="color: ${s}"\n        >*</span>\n      </label>\n    </div>\n    <div class="weui-cell__bd">\n      <input\n        type="tel"\n        class="weui-input field-value verification__input"\n        pattern="[0-9]*"\n        id="verify__input__${E++}"\n        placeholder="${e.FieldSettings.VerificationCodeComponentSettings.PlaceholderText}"\n        maxlength="6"\n      />\n    </div>\n    <div class="weui-cell__ft">\n      <span class="verification__right">\n        <div style="display: none" class="verification__warning">\n          <i class="weui-icon-warn"></i>\n        </div>\n        <button class="weui-btn weui-btn_default weui-vcode-btn verification-button ${n}">${e.FieldSettings.VerificationCodeComponentSettings.SendButtonLabel}</button>\n        <div class="verification__time"></div>\n      <span>\n    </div>\n  `,d=document.createElement("div");d.classList.add("weui-cell"),d.classList.add("charket-cell"),d.innerHTML=a;const o=document.createDocumentFragment();o.appendChild(d),"Top"===e.LabelLayout?this.domElement.childNodes[3].appendChild(o):this.domElement.appendChild(o)}function $(e){const t=this,i=this.domElement.querySelector(".verification-button"),l=this.domElement.querySelector(".verification__time");i.addEventListener("click",function(e,t,i){return l=>{e.hideVerificationError();const s=l.target;if(s.classList.contains("weui-btn_disabled"))return;s.classList.add("weui-btn_disabled");e.isSendingVerificationCode=!0,function({phone:e,success:t,fail:i}){Visualforce.remoting.Manager.invokeAction(`${window.namespace?window.namespace+".":""}FormController.sendVerificationCode`,e,window.encryptOpenId,b(t,i),{escape:!0})}({phone:e.__inputElement__.value,success:function({smsMessageId:l}){e.verificationMessageId=l,I(s,e,t,i)},fail:function(l){if(l&&"VERIFICATION_CODE_ALREADY_SENT"===l.code)return I(s,e,t,i),null;e.isSendingVerificationCode=!1;const n=new CustomEvent("on-global-error",{detail:"系统错误，请重试。"});s.innerHTML=t.FieldSettings.VerificationCodeComponentSettings.ResendButtonLabel,s.classList.remove("weui-btn_disabled"),window.dispatchEvent(n)}})}}(t,e,l)),this.__inputElement__.addEventListener("input",e=>{""===e.target.value?i.classList.add("weui-btn_disabled"):t.isSendingVerificationCode||i.classList.remove("weui-btn_disabled"),t.verificationMessageId=""}),this.__verificationInput__.addEventListener("focus",()=>{t.hideVerificationError()})}function I(e,t,i,l){let s=F,n=window.setInterval(()=>{0===s?(t.isSendingVerificationCode=!1,window.clearInterval(n),e.innerText=i.FieldSettings.VerificationCodeComponentSettings.ResendButtonLabel,l.innerText="",e.classList.remove("weui-btn_disabled"),e.classList.remove("has-time-padding")):(s--,e.innerText=i.FieldSettings.VerificationCodeComponentSettings.ResendButtonLabel,l.innerText=`(${s})`,e.classList.add("has-time-padding"))},1e3)}function V(e,t){e.IsReadOnly&&(this.domElement.querySelector("textarea").readOnly="readOnly",this.domElement.style.color="#B2B2B2"),this.__inputElement__.value=e.Value||"",this.__inputElement__.placeholder=e.Placeholder||"",this.__inputElement__.addEventListener("focus",()=>{this.hideError()});let i=!1,l=e.FieldSettings.Length||0,s=()=>{this.__countEle__.textContent=`${this.__inputElement__.value.length}/${l}`,this.__inputElement__.value.length>l?this.__countEle__.style.color="#e64340":this.__countEle__.style.color="#b2b2b2"};this.__inputElement__.addEventListener("input",()=>{i||s()}),this.__inputElement__.addEventListener("compositionstart",()=>{i=!0}),this.__inputElement__.addEventListener("compositionend",()=>{i=!1,s()}),this.__inputElement__.addEventListener("blur",()=>{if(this.__inputElement__.value.length>l){const e=d(t),i=e.showErrorMsg;document.getElementById("app").appendChild(e.domElement),i(`最多只能输入${l}`)}navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()})}function C(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;{const t=60*(new Date).getTimezoneOffset()*1e3,i=e.match(/(\d+)(?!\d)/g).map(e=>parseInt(e));i[1]--;const l=new Date(new Date(...i)-t);return`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}T${String(l.getHours()).padStart(2,"0")}:${String(l.getMinutes()).padStart(2,"0")}:${String(l.getSeconds()).padStart(2,"0")}`}}function T(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;{let t="";t=e.indexOf(".")>0?e.slice(0,e.indexOf(".")):e,t=t.replace(/-/g,"/").replace("T"," ");const i=new Date(t);return`${i.getUTCFullYear()}-${String(i.getUTCMonth()+1).padStart(2,"0")}-${String(i.getUTCDate()).padStart(2,"0")} ${String(i.getUTCHours()).padStart(2,"0")}:${String(i.getUTCMinutes()).padStart(2,"0")}:${String(i.getUTCSeconds()).padStart(2,"0")}`}}let A=0;class x{constructor(e,t={}){this.domElement=function(e,t){const i=document.createElement("div"),l=t.LabelFontSize||"",n=t.LabelColor||"",a=u(t);let d=window.isAndroid?`\n    <input\n      class="weui-input field-value display-field top-layout"\n      value="${e.Value?k(e):""}"\n      type="text"\n      readonly\n    />\n  `:"";d+=`\n    <input\n      id="__dateinput__${A++}"\n      class="weui-input field-value ${window.isAndroid?"hidden-field":""}"\n      value="${e.Value?C(e.Value):""}"\n      type="${"Date"===e.FieldSettings.Type?"date":"datetime-local"}"\n    />\n  `;let o=window.isAndroid?`\n    <input\n      class="weui-input field-value display-field left-layout"\n      value="${e.Value?k(e):""}"\n      type="text"\n      readonly\n    />\n  `:"";return o+=`\n    <input\n      class="weui-input field-value  ${window.isAndroid?"hidden-field":""}"\n      id="__dateinput__${A++}"\n      value="${e.Value?C(e.Value):""}"\n      type="${"Date"===e.FieldSettings.Type?"date":"datetime-local"}"\n    />\n  `,i.className="weui-cells charket-cells",i.innerHTML="Top"===e.LabelLayout?`\n  <div class="weui-cells__title text-input-title field-title">\n    ${s(e.AlternativeLabel||e.DefaultLabel)}\n    <span style="color: ${a}" class="${a&&e.IsRequired?"":"hide-ele"}">*</span>\n  </div>\n  <div class="weui-cells weui-cells-custom charket-cells">\n    <div class="weui-cell charket-cell">\n      <div class="weui-cell__bd date-cell__bd">\n        ${d}\n      </div>\n    </div>\n  </div>`:`\n  <div class="weui-cell charket-cell">\n    <div style="font-size: ${l}; color: ${n}; position: relative;" class="weui-cell__hd field-label">\n      <label for="__dateinput__${A}" class="weui-label">\n        ${s(e.AlternativeLabel||e.DefaultLabel)}\n        <span style="color: ${a}" class="${a&&e.IsRequired?"":"hide-ele"}">*</span>\n      </label>\n    </div>\n    <div class="weui-cell__bd date-cell__bd">\n      ${o}\n    </div>\n  </div>\n  `,i}(e,t),this.item=e,this.styles=t,this.__inputElement__=window.isAndroid?this.domElement.querySelector(".hidden-field"):this.domElement.querySelector(".weui-input"),window.isAndroid&&(this.__displayInputElement__=this.domElement.querySelector(".display-field")),this.__inputLabel__=this.domElement.querySelector(".weui-label")||this.domElement.querySelector(".text-input-title"),D.call(this,e)}showError(){this.__inputLabel__.style.color="#e64340"}hideError(){this.domElement.querySelector(".weui-label")?this.__inputLabel__.style.color=this.styles.LabelColor||"":this.domElement.querySelector(".text-input-title")&&(this.__inputLabel__.style.color=this.styles.TitleColor||"")}}function D(e){e.Value&&(e.Value=T(C(e.Value))),e.IsReadOnly&&(this.__inputElement__.readonly=!0,this.__inputElement__.disabled=!0,this.domElement.style.color="#B2B2B2"),window.isAndroid&&this.__displayInputElement__.addEventListener("click",()=>{this.__inputElement__.click()}),this.__inputElement__.addEventListener("change",()=>{this.hideError(),e.Value=this.__inputElement__.value?T(this.__inputElement__.value):"",window.isAndroid&&(this.__displayInputElement__.value=k(e))}),this.__inputElement__.addEventListener("blur",()=>{navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()})}function k(e){if(!e.Value)return"";const t=C(e.Value),i={year:"numeric",month:"numeric",day:"numeric"};return"Date"!==e.FieldSettings.Type&&(i.hour="numeric",i.minute="numeric"),new Date(t).toLocaleString(void 0,i)}function N(e){const t=[];for(let i=e.length,l=0;l<i;l++)t.push(e[l]);return t}function q(e){if(e.IsReadOnly)return N(this.domElement.querySelectorAll("input")).forEach(e=>{e.disabled=!0}),void(this.domElement.style.color="#B2B2B2");const t=e.FieldSettings.Options;this.domElement.addEventListener("click",i=>{if("input"===i.target.tagName.toLowerCase()){this.hideError();let l=this.__inputList__.indexOf(i.target),s=-1;t.some(e=>(l-=!e.IsHidden,s++,l<0)),e.Value=t[s].Value,window.dispatchEvent(new CustomEvent("radio-button-change",{detail:{fieldName:e.FieldName,value:e.Value}}))}})}function O(e){const t=N(this.domElement.querySelectorAll("input"));if(e.IsReadOnly)return t.forEach(e=>{e.disabled=!0}),void(this.domElement.style.color="#B2B2B2");this.__checkboxDiv__.addEventListener("click",i=>{const l=i.target;if("input"===l.tagName.toLowerCase()){let i=t.indexOf(l);const s=e.FieldSettings.Options;let n=-1;s.some(e=>(i-=!e.IsHidden,n++,i<0));const a=s[n],d=e.Value;d.indexOf(a.Value)>-1?d.splice(d.indexOf(a.Value),1):(0===d.length&&this.hideError(),d.push(a.Value))}})}function R(e){return e.FieldSettings.AddressFields.State.Value&&e.FieldSettings.AddressFields.City.Value&&e.FieldSettings.AddressFields.Street.Value}function B(e,t,i,l=""){const n=t[i[e.querySelector(".state-select").selectedIndex-1]],a=e.querySelector(".city-select"),d=(n||[]).reduce((e,t)=>`${e}<option ${t===l?"selected":""} value="${t}">${s(t)}</option>`,"<option>请选择城市</option>");a.innerHTML=`${d}`}function M(e,t){const i=e.querySelector(t);i.disabled=!0,i.style.color="#B2B2B2",e.style.color="#B2B2B2"}const H=()=>/(iPhone|iPad|iPod|iOS)/i.test(window.navigator.userAgent);function P(e){let t;H()&&(e.style.overflowY="scroll",e.style.WebkitOverflowScrolling="touch"),window.preventRootTouchStartListener=e=>{t=e.touches[0].clientY},e.addEventListener("touchstart",window.preventRootTouchStartListener,!1),window.preventRootTouchMoveListener=i=>{i.touches[0].clientY-t>0&&0===e.scrollTop&&(i.preventDefault(),i.stopPropagation())},e.addEventListener("touchmove",window.preventRootTouchMoveListener,!1)}const U=c({iconName:"close",color:"#9FAAB5",classNameList:[""]});class z{constructor(e,t={}){this.item=e,this.addressStaticData=Object.keys(t),this.domElement=function(e,t){let i=document.createElement("div");const l=j(t,e,"dialog-state",e.FieldSettings.AddressFields.State.Value),s=`<div class="address-popup-dialog">\n    <div class="dialog-container" style="overflow: hidden;">\n      <div class="dialog-header-section">\n        <div class="dialog-header">\n          <span class="dialog-header-label">${e.AlternativeLabel||e.DefaultValue||"所在地区"}</span>\n          <span class="dialog-header-icon">${U}</span>\n        </div>\n        <div class="dialog-content-title">\n          <p class="dialog-content-state-label field-value" style="color: ${e.FieldSettings.AddressFields.State.Value?"":"red"};\n          border-bottom: ${e.FieldSettings.AddressFields.State.Value?"":"1px red solid"};">${e.FieldSettings.AddressFields.State.Value||"请选择"}</p>\n          <p class="dialog-content-city-label field-value" style="opacity: ${e.FieldSettings.AddressFields.City.Value&&e.FieldSettings.AddressFields.City.Display?"1":"0"};\n          left: ${e.FieldSettings.AddressFields.City.Value?"100px":"20px"};">${e.FieldSettings.AddressFields.City.Value||"请选择"}</p>\n        </div>\n      </div>\n      <div class="dialog-content" style="overflow: hidden;">\n        <div class="dialog-content-list-container">\n          <div class="weui-cells weui-cells_radio dialog-content-list dialog-state-list">\n             ${l}\n          </div>\n          <div class="weui-cells weui-cells_radio dialog-content-list dialog-city-list">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>`;return i.innerHTML=`${s} <a class="address-popup-mask" href="javascript:void(0)"></a>`,i}(e,this.addressStaticData),this.storeStateValue=e.FieldSettings.AddressFields.State.Value,this.storeCityValue=e.FieldSettings.AddressFields.City.Value,this.addressEleObj={stateListEle:this.domElement.querySelector(".dialog-state-list"),stateLabelEle:this.domElement.querySelector(".dialog-content-state-label"),cityListEle:this.domElement.querySelector(".dialog-city-list"),cityLabelEle:this.domElement.querySelector(".dialog-content-city-label")},function(e){let t=e.querySelector(".address-popup-mask"),i=e.querySelector(".address-popup-dialog");i.addEventListener("click",e=>{e.stopPropagation()}),e.addEventListener("click",e=>{document.getElementsByTagName("body")[0].style.overflow="auto";let l=document.getElementById("app");l&&(l.style.overflow="auto"),P(document.getElementById("app")),i.style.maxHeight="0",i.style.overflow="hidden",t.style.opacity=0,t.style.zIndex=-1,t.style.display="none"})}(this.domElement),function(e,t,i,l){let{stateListEle:s,stateLabelEle:n,cityListEle:a,cityLabelEle:d}=l;i.FieldSettings.AddressFields.State.Display||(n.style.opacity="0",d.style.left="20px",d.style.opacity="1");s.addEventListener("click",l=>{(Array.from(document.getElementsByName("dialog-state"))||[]).forEach((function(l){if(l.checked)if(i.FieldSettings.AddressFields.State.Value=l.value,n.style.color="",i.FieldSettings.AddressFields.City.Display){n.textContent=l.value,n.style.borderBottom=0,d.textContent="请选择",d.style.color="red",d.style.borderBottom="1px red solid",d.style.opacity="1",d.style.left="100px";const e=j(t[l.value]||[],i,"dialog-city",i.FieldSettings.AddressFields.City.Value);a.innerHTML=`${e}`,a.style.left=0,a.scrollTo(0,0),s.style.left="-100%"}else J(e,i)}))})}(this.domElement,t,this.item,this.addressEleObj),function(e,t,i,l){let{stateListEle:s,stateLabelEle:n,cityListEle:a,cityLabelEle:d}=l;if(i.FieldSettings.AddressFields.City.Value&&i.FieldSettings.AddressFields.City.Display){const e=j(t[i.FieldSettings.AddressFields.State.Value]||[],i,"dialog-city",i.FieldSettings.AddressFields.City.Value);d.style.borderBottom="1px red solid",n.style.borderBottom=0,a.innerHTML=`${e}`,a.style.left=0,s.style.left="-100%"}a.addEventListener("click",t=>{(Array.from(document.getElementsByName("dialog-city"))||[]).forEach((function(t){if(t.checked){i.FieldSettings.AddressFields.City.Value=t.value;let s=l.cityLabelEle;s.textContent=t.value,s.style.color="",s.style.borderBottom="1px red solid",J(e,i)}}))})}(this.domElement,t,this.item,this.addressEleObj),function(e,t){let{stateListEle:i,stateLabelEle:l,cityListEle:s,cityLabelEle:n}=t;l.addEventListener("click",e=>{l.style.borderBottom="1px red solid",n.style.borderBottom=0,i.style.left=0,s.style.left="100%"})}(this.domElement,this.addressEleObj),function(e,t,i){let{stateListEle:l,stateLabelEle:s,cityListEle:n,cityLabelEle:a}=t;a.addEventListener("click",e=>{i.FieldSettings.AddressFields.State.Value&&(a.style.borderBottom="1px red solid",s.style.borderBottom=0,l.style.left="-100%",n.style.left=0)})}(this.domElement,this.addressEleObj,e),function(e,t,i,l){i.FieldSettings.AddressFields.State.Value=e,i.FieldSettings.AddressFields.City.Value=t,l.querySelector(".dialog-header-icon").addEventListener("click",e=>{document.getElementsByTagName("body")[0].style.overflow="auto";let t=document.getElementById("app");t&&(t.style.overflow="auto"),P(document.getElementById("app"));let i=l.querySelector(".address-popup-mask"),s=l.querySelector(".address-popup-dialog");s.style.maxHeight="0",s.style.overflow="hidden",i.style.opacity=0,i.style.zIndex=-1,i.style.display="none"})}(this.storeStateValue,this.storeCityValue,this.item,this.domElement);const i=this.domElement.querySelector(".address-popup-mask"),l=this.domElement.querySelector(".dialog-header-section");i.addEventListener("touchmove",e=>{e.stopPropagation(),e.preventDefault()},!1),l.addEventListener("touchmove",e=>{e.stopPropagation(),e.preventDefault()},!1),this.addressEleObj.stateListEle.addEventListener("touchstart",e=>{e.stopPropagation()},!1),this.addressEleObj.stateListEle.addEventListener("touchmove",e=>{e.stopPropagation()},!1),this.addressEleObj.cityListEle.addEventListener("touchstart",e=>{e.stopPropagation()},!1),this.addressEleObj.cityListEle.addEventListener("touchmove",e=>{e.stopPropagation()},!1)}}function j(e,t,i,l=""){return(e||[]).reduce((e,t)=>`${e}<label class="weui-cell weui-check__label charket-cell dialog-address-cell" style="background: #fff;">\n      <span class="field-value">${s(t)}</span>\n      <div class="weui-cell__ft" style="margin-top: -7px;">\n          <input type="radio" class="weui-check" name="${i}" value="${t}" ${l===t?"checked":""}>\n          <span class="weui-icon-checked"></span>\n      </div>\n    </label>`,"")}function J(e,t){document.getElementsByTagName("body")[0].style.overflow="auto";let i=document.getElementById("app");i&&(i.style.overflow="auto"),P(document.getElementById("app"));let l=e.querySelector(".address-popup-mask"),s=e.querySelector(".address-popup-dialog");s.style.maxHeight="0",s.style.overflow="hidden",l.style.opacity=0,l.style.zIndex=-1,l.style.display="none",document.querySelector(".address-popup-picker-select").textContent=`${t.FieldSettings.AddressFields.State.Value} ${t.FieldSettings.AddressFields.City.Value===t.FieldSettings.AddressFields.State.Value?"":t.FieldSettings.AddressFields.City.Value}`}function W(){let e=document.querySelector(".address-popup-dialog");if(e&&"0px"!==e.style.maxHeight){let t=document.querySelector(".weui-cell_access"),i=t.getBoundingClientRect();if(document.body.clientHeight-i.bottom>330)e.style.top=`${i.top+t.clientHeight+5}px`;else{const t=i.top-330-5;e.style.top=`${t}px`}e.style.left=`${i.left+120}px`,e.style.width=`${i.width-120}px`}}class X{constructor(e,t=""){this.url=e,this.email=t,this.domElement=this.generateDom()}generateDom(){let e=document.createElement("div");return e.style.opacity=0,e.innerHTML=`\n      <form method="post" action="${this.url}">\n        <input type="text" name="email" value="${this.email}"/>\n        <input type="text" name="ispdt" value="true"/>\n      </form>\n    `,e}submit(){this.domElement.getElementsByTagName("form")[0].submit()}}function Y(e,t){Object({NODE_ENV:"production"}).EMBED_ENV&&Object({NODE_ENV:"production"}).EMBED_ENV.indexOf("charket")>-1&&function(e){switch(e.FieldSettings.Type){case"Text":case"Number":case"Phone":case"Email":case"Textarea":e.Value=e.DefaultValue;break;case"Date":e.DefaultValue&&"string"==typeof e.DefaultValue?e.Value=e.DefaultValue.replace(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,(e,t,i,l)=>(t.length<2&&(t=t.padStart(2,"0")),i.length<2&&(i=i.padStart(2,"0")),`${l}-${t}-${i}`)):e.Value="";break;case"Datetime":{if(!e.DefaultValue)break;const t=new Date(+e.DefaultValue),i=t.getUTCFullYear(),l=String(t.getUTCMonth()+1).padStart(2,"0"),s=String(t.getUTCDate()).padStart(2,"0"),n=String(t.getUTCHours()).padStart(2,"0"),a=String(t.getUTCMinutes()).padStart(2,"0"),d=String(t.getUTCSeconds()).padStart(2,"0");e.Value=`${i}-${l}-${s}T${n}:${a}:${d}`;break}case"Checkbox":e.Value=e.FieldSettings.Options.filter(e=>e.IsDefaultValue).map(e=>e.Value);break;case"RadioButton":case"Picklist":e.FieldSettings.Options.some(t=>!!t.IsDefaultValue&&(e.Value=t.Value,!0)),void 0===e.Value&&(e.Value=null)}}(e),e.IsHidden?e.UrlParameterName&&t[e.UrlParameterName]&&(e.Value=t[e.UrlParameterName]):null==e.Value&&e.UrlParameterName&&t[e.UrlParameterName]&&("Checkbox"===e.FieldSettings.Type?e.Value=t[e.UrlParameterName].split(";"):e.Value=t[e.UrlParameterName])}function G(e){let t={formInfo:{},metadata:{}};return t.formInfo.id=e.FormId,t.formInfo.fields=e.FormFields.map(e=>({name:e.FieldName,value:e.Value})),t.formInfo.verificationCodes=function(e){if(0===Object.keys(window.phoneFieldIdToVerificationInfo).length)return[];return e.filter(e=>"Phone"===e.FieldSettings.Type&&e.FieldSettings.IsSmsVerificationEnabled&&e.Value).map(e=>({fieldName:e.FieldName,phone:e.Value,smsMessageId:window.phoneFieldIdToVerificationInfo[e.FormFieldId]?window.phoneFieldIdToVerificationInfo[e.FormFieldId].smsMessageId:null,code:window.phoneFieldIdToVerificationInfo[e.FormFieldId]?window.phoneFieldIdToVerificationInfo[e.FormFieldId].verificationCode:null}))}(e.FormFields),t.metadata.redirectURL=e.RedirectURL,t.metadata.surveyId=e.SurveyId,t.metadata.flowStepId=e.FlowStepId,t.metadata.qrCodeId=e.QRCodeId,t}String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=new Array(e/t.length+1).join(t)),t.slice(0,e)+String(this))});const Q="INVALID_VERIFICATION_CODE",K={Heading:class{constructor(e,t={}){this.domElement=function(e,t){const i=document.createElement("div"),l=t.TitleFontSize||"",s=t.TitleColor||"";return i.style.fontSize=l,i.style.color=s,i.className="section-header weui-cells__title field-header",i.textContent=e.AlternativeLabel||e.DefaultLabel,i}(e,t),this.item=e,this.styles=t}},Text:g,Email:g,Phone:class extends g{constructor(e,t={}){super(e,t),e.FieldSettings.IsSmsVerificationEnabled&&(L.call(this,e,t),this.__verificationCell__=this.domElement.querySelectorAll(".weui-cell")[1],this.__verificationWarningDiv__=this.__verificationCell__.querySelector(".weui-label"),this.__verificationInput__=this.__verificationCell__.querySelector(".weui-input"),this.__verificationWarningIcon__=this.__verificationCell__.querySelector(".verification__warning"),this.isSendingVerificationCode=!1,$.call(this,e))}showVerificationError(){this.__verificationWarningDiv__&&(this.__verificationWarningDiv__.style.color=this.styles.LabelColor),this.__verificationWarningIcon__.style.display="flex"}hideVerificationError(){this.__verificationWarningDiv__&&(this.__verificationWarningDiv__.style.color=this.styles.LabelColor),this.__verificationWarningIcon__.style.display="none"}assignVerificationCode(){window.phoneFieldIdToVerificationInfo[this.item.FormFieldId]={smsMessageId:this.verificationMessageId||null,verificationCode:this.__verificationInput__.value||null}}},Number:g,Textarea:class{constructor(e,t={}){this.valueLength=e.Value?e.Value.length:0,this.domElement=function(e,t,i){const l=document.createElement("div"),n=t.TitleFontSize||"",a=t.TitleColor||"",d=u(t);return l.innerHTML=`\n    <div style="font-size: ${n}; color: ${a}" class="weui-cells__title field-title">\n      ${s(e.AlternativeLabel||e.DefaultLabel||"")}\n      <span style="color: ${d}" class="${d&&e.IsRequired?"":"hide-ele"}">*</span>\n    </div>\n    <div class="weui-cells charket-cells">\n      <div class="weui-cell charket-cell">\n        <div class="weui-cell__bd">\n          <textarea class="weui-textarea field-value"\n            rows="3" maxlength="${e.FieldSettings.Length}"></textarea>\n          <div class="weui-textarea-counter">\n            <span class="limit-counter">${i}/${e.FieldSettings.Length||0}</span>\n          </div>\n        </div>\n      </div>\n    </div>`,l}(e,t,this.valueLength),this.item=e,this.styles=t,this.__warningDiv__=this.domElement.querySelector(".weui-cells__title"),this.__inputElement__=this.domElement.querySelector(".weui-textarea"),this.__countEle__=this.domElement.querySelector(".limit-counter"),V.call(this,e,t)}showError(){this.__warningDiv__.style.color="#e64340"}hideError(){this.__warningDiv__.style.color=this.styles.TitleColor||""}assignValue(){const e=this.item,t=this.__inputElement__.value;e.Value=""!==t?t:null}validateFormat(){}},Date:x,Datetime:x,Picklist:class{constructor(e,t={}){const i=document.createElement("div");i.className="weui-cells charket-cells",this.domElement=i,this.item=e,this.sub=null,this.options=this.item.FieldSettings.Options.filter(e=>!e.IsHidden),this.currentOptions=this.options,this.value=this.item.Value,this.styles=t,this.item.FieldSettings.Options.map(e=>e.Value).includes(this.value)||(this.value="")}showError(){this.domElement.querySelector(".warning-title").style.color="#e64340"}hideError(){let e=this.domElement.querySelector(".weui-label"),t=this.domElement.querySelector(".text-input-title");e?e.style.color=this.styles.LabelColor||"":t&&(t.style.color=this.styles.TitleColor||"")}assignValue(){this.item.Value=this.value}publish(){this.sub&&this.sub.forEach(e=>{e.init(this.value),e.publish()})}init(e){let t=!1;null!=e?(this.currentOptions=this.options.filter(t=>t.ValidFor.indexOf(e)>-1),this.currentOptions.some(e=>e.Value===this.value)||(this.value=null)):null===e?(this.currentOptions=[],this.value=null,t=!0):this.currentOptions=this.options,this.render({isDisable:t||this.item.IsReadOnly}),this.initEvent()}render({isDisable:e}){const t=(this.currentOptions||[]).reduce((e,t)=>t.IsHidden?e:`${e}<option\n        ${t.Value===this.value?"selected":""}\n        value="${t.Value}"\n        >${s(t.Label||t.DefaultLabel||"")}</option>`,""),i=this.styles.LabelFontSize||"",l=this.styles.LabelColor||"",n=this.styles.TitleFontSize||"",a=this.styles.TitleColor||"",d=this.styles.FormBg||"",o=u(this.styles);this.domElement.innerHTML="Top"===this.item.LabelLayout?`\n      <div style="background-color: ${d}; font-size: ${n}; color: ${a}" class="weui-cells__title text-input-title warning-title field-title">\n        ${s(this.item.AlternativeLabel?this.item.AlternativeLabel:this.item.DefaultLabel)}\n        <span style="color: ${o}" class="${o&&this.item.IsRequired?"":"hide-ele"}">*</span>\n      </div>\n      <div class="weui-cells-custom">\n        <div class="weui-cell weui-cell_select charket-cell">\n          <div class="weui-cell__bd">\n            <select class="weui-select field-value">\n              <option ${this.value?"":"selected "}value>${s(this.item.Placeholder)||"请选择"}</option>\n              ${t}\n            </select>\n          </div>\n        </div>\n      </div>\n    `:`\n      <div class="weui-cell weui-cell_select weui-cell_select-after charket-cell">\n        <div style="font-size: ${i}; color: ${l}" class="weui-cell__hd field-label">\n          <label for="" class="weui-label warning-title">\n            ${s(this.item.AlternativeLabel||this.item.DefaultLabel||"")}\n            <span style="color: ${o}" class="${o&&this.item.IsRequired?"":"hide-ele"}">*</span>\n          </label>\n        </div>\n        <div class="weui-cell__bd">\n          <select class="weui-select field-value">\n            <option ${this.value?"":"selected "}value>${s(this.item.Placeholder)||"请选择"}</option>\n            ${t}\n          </select>\n        </div>\n      </div>\n    `,e?this.disable():this.enable()}initEvent(){const e=this.domElement.querySelector(".weui-select");e.addEventListener("change",e=>{this.hideError();const t=this.currentOptions;let i=e.target.selectedIndex-1;this.value=i<0?null:t[i].Value,this.publish()}),e.addEventListener("blur",()=>{navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()})}disable(){const e=this.domElement.querySelector("select");e.disabled=!0,e.style.color="#B2B2B2",this.domElement.style.color="#B2B2B2"}enable(){const e=this.domElement.querySelector("select");e.disabled=!1,e.style.color="",this.domElement.style.color=""}},RadioButton:class{constructor(e,t={}){this.domElement=function(e,t){const i=document.createElement("div"),l=t.TitleFontSize||"",n=t.TitleColor||"",a=u(t),d=s(e.AlternativeLabel||e.DefaultLabel),o=(e.FieldSettings.Options||[]).reduce((t,i)=>i.IsHidden?t:`${t}<label class="weui-cell weui-check__label charket-cell">\n      <div class="weui-cell__bd">\n          <p class="field-value">${s(i.Label||i.DefaultLabel||"")}</p>\n      </div>\n      <div class="weui-cell__ft">\n          <input type="radio" class="weui-check" name="${d}" ${e.Value===i.Value?"checked":""}>\n          <span class="weui-icon-checked"></span>\n      </div>\n    </label>`,"");return i.innerHTML=`\n    <div style="font-size: ${l}; color: ${n}" class="weui-cells__title field-title">\n      ${d}\n      <span style="color: ${a}" class="${a&&e.IsRequired?"":"hide-ele"}">*</span>\n    </div>\n    <div class="weui-cells weui-cells_radio charket-cells">\n      ${o}\n    </div>\n  `,i}(e,t),this.item=e,this.styles=t,e.FieldSettings.Options=e.FieldSettings.Options||[],e.FieldSettings.Options.map(e=>e.Value).includes(e.Value)||(e.Value=""),this.__title__=this.domElement.querySelector(".weui-cells__title"),this.__inputList__=N(this.domElement.querySelectorAll(".weui-check")),q.call(this,e)}showError(){this.__title__.style.color="#e64340"}hideError(){this.__title__.style.color=this.styles.TitleColor||""}},Checkbox:class{constructor(e,t={}){e.Value=e.Value||[],function(e,t){if(!(e instanceof Array&&t instanceof Array))return!1;if(e.length<t.length)return!1;for(let i=0,l=t.length;i<l;i++)if(!e.includes(t[i]))return!1;return!0}(e.FieldSettings.Options.map(e=>e.Value),e.Value)||(e.Value=[]),this.domElement=function(e,t){const i=document.createElement("div"),l=t.TitleFontSize||"",n=t.TitleColor||"",a=u(t),d=(e.FieldSettings.Options||[]).reduce((t,i)=>i.IsHidden?t:`${t}\n      <label class="weui-cell weui-check__label charket-cell">\n        <div class="weui-cell__hd">\n          <input type="checkbox" class="weui-check" ${e.Value.indexOf(i.Value)>-1?"checked":""}><i class="weui-icon-checked"></i>\n        </div>\n        <div class="weui-cell__bd">\n          <p class="field-value">${s(i.Label||i.DefaultLabel||"")}</p>\n        </div>\n      </label>`,"");return i.innerHTML=`\n    <div style="font-size: ${l}; color: ${n}" class="weui-cells__title field-title">\n      ${s(e.AlternativeLabel||e.DefaultLabel)}\n      <span style="color: ${a}" class="${a&&e.IsRequired?"":"hide-ele"}">*</span>\n    </div>\n    <div class="weui-cells weui-cells_checkbox charket-cells">\n      ${d}\n    </div>\n  `,i}(e,t),this.item=e,this.styles=t,this.__checkboxTitle__=this.domElement.querySelector(".weui-cells__title"),this.__checkboxDiv__=this.domElement.querySelector(".weui-cells_checkbox"),O.call(this,e)}showError(){this.__checkboxTitle__.style.color="#e64340"}hideError(){this.__checkboxTitle__.style.color=this.styles.TitleColor||""}},Address:class{constructor(e,t={},i={}){this.item=e,this.styles=t,this.addressStaticData=Object.keys(i);let l=e.FieldSettings.AddressFields;var n;l.State.Value=l.State.Value||l.State.DefaultValue||"",l.City.Value=l.City.Value||l.City.DefaultValue||"",l.Street.Value=l.Street.Value||l.Street.DefaultValue||"",this.domElement=function(e,t,i){let l=document.createElement("div");const n=t.TitleColor,a=t.TitleFontSize,d=t.LabelColor,o=t.LabelFontSize,r=u(t),c=`<div style="font-size: ${a}; color: ${n}" class="weui-cells__title field-title warning-title ${e.IsTitleHidden?"hide-ele":""}">\n    ${s(e.AlternativeLabel||e.DefaultLabel)||"Address"}\n    <span style="color: ${r}" class="${r&&e.IsRequired?"":"hide-ele"}">*</span>\n  </div>`,m=(i||[]).reduce((t,i)=>`${t}<option\n        ${i===e.FieldSettings.AddressFields.State.Value?"selected":""}\n        value="${i}"\n        >${s(i)}</option>`,""),h=`<div class="weui-cells charket-cells ${e.FieldSettings.AddressFields.State.Display?"":"hide-ele"}"><div class="weui-cell weui-cell_select weui-cell_select-after charket-cell">\n    <div class="weui-cell__hd">\n      <label style="font-size: ${o}; color: ${d}" class="weui-label field-label state-label">\n        ${e.FieldSettings.AddressFields.State.Label}\n        <span style="color: ${r}" class="${r&&e.IsRequired?"":"hide-ele"}">*</span>\n      </label>\n    </div>\n    <div class="weui-cell__bd">\n      <select class="weui-select field-value state-select">\n        <option ${e.FieldSettings.AddressFields.State.Value?"":"selected "}value>请选择省份</option>\n        ${m}\n      </select>\n     </div>\n  </div></div>`,p=`<div class="weui-cells charket-cells ${e.FieldSettings.AddressFields.City.Display?"":"hide-ele"}"><div class="weui-cell weui-cell_select weui-cell_select-after charket-cell">\n    <div class="weui-cell__hd">\n      <label style="font-size: ${o}; color: ${d}" class="weui-label field-label city-label">\n        ${e.FieldSettings.AddressFields.City.Label}\n        <span style="color: ${r}" class="${r&&e.IsRequired?"":"hide-ele"}">*</span>\n      </label>\n    </div>\n    <div class="weui-cell__bd">\n      <select class="weui-select field-value city-select">\n        <option ${e.FieldSettings.AddressFields.City.Value?"":"selected "}value>请选择城市</option>\n      </select>\n     </div>\n  </div></div>`,y=`<div class="weui-cells charket-cells ${e.FieldSettings.AddressFields.Street.Display?"":"hide-ele"}">\n    <div class="weui-cell address-cell charket-cell">\n      <div class="weui-cell__hd">\n        <label class="weui-label field-label street-label" style="font-size: ${o}; color: ${d}">\n          ${e.FieldSettings.AddressFields.Street.Label}\n          <span style="color: ${r}" class="${r&&e.IsRequired?"":"hide-ele"}">*</span>\n        </label>\n      </div>\n      <div class="weui-cell_hd">\n        <textarea class="weui-textarea field-value field-textarea" maxlength="200" rows="2" cols="1000" value="${e.FieldSettings.AddressFields.Street.Value}">${e.FieldSettings.AddressFields.Street.Value}</textarea>\n      </div>\n    </div>\n  </div>`;return l.innerHTML=`${c} ${h} ${p} ${y}`,l}(e,t,this.addressStaticData),this.cityDefaultValue=e.FieldSettings.AddressFields.City.Value,B(this.domElement,i,this.addressStaticData,this.cityDefaultValue),function(e,t,i,l,s){let n="",a="",d="",o="";e.IsRequired&&(n=t.querySelector(".state-label"),a=t.querySelector(".city-label"),d=t.querySelector(".street-label"),o=t.querySelector(".warning-title"));const r=t.querySelector(".state-select");r.addEventListener("change",a=>{e.FieldSettings.AddressFields.State.Value=l[a.target.selectedIndex-1]||"",e.FieldSettings.AddressFields.City.Value="",B(t,i,l),e.IsRequired&&(R(e)&&(o.style.color=s.TitleColor||""),n.style.color=s.LabelColor||"")}),r.addEventListener("blur",()=>{navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()});const c=t.querySelector(".city-select");c.addEventListener("change",t=>{const l=i[e.FieldSettings.AddressFields.State.Value]||[];e.FieldSettings.AddressFields.City.Value=l[t.target.selectedIndex-1]||"",e.IsRequired&&(R(e)&&(o.style.color=s.TitleColor||""),a.style.color=s.LabelColor||"")}),c.addEventListener("blur",()=>{navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()});const u=t.querySelector(".weui-textarea");u.addEventListener("input",t=>{e.FieldSettings.AddressFields.Street.Value=t.target.value||"",e.IsRequired&&(R(e)&&(o.style.color=s.TitleColor||""),d.style.color=s.LabelColor||"")}),u.addEventListener("blur",()=>{navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()})}(this.item,this.domElement,i,this.addressStaticData,t),e.IsReadOnly&&(M(this.domElement,".state-select"),M(this.domElement,".city-select"),(n=this.domElement).querySelector("textarea").readOnly="readOnly",n.style.color="#B2B2B2")}showError(){let e=this.domElement.querySelector(".warning-title"),t=this.domElement.querySelector(".state-label"),i=this.domElement.querySelector(".city-label"),l=this.domElement.querySelector(".street-label");e&&(e.style.color="#e64340"),t&&!this.item.FieldSettings.AddressFields.State.Value&&(t.style.color="#e64340"),this.item.FieldSettings.AddressFields.City.Value,i&&!this.item.FieldSettings.AddressFields.City.Value&&(i.style.color="#e64340"),l&&!this.item.FieldSettings.AddressFields.Street.Value&&(l.style.color="#e64340")}},XAddress:class{constructor(e,t={},i={},l="",s=""){this.item=e,this.styles=t,this.addressStaticData=Object.keys(i);let n=e.FieldSettings.AddressFields;n.State.Value=n.State.Value||n.State.DefaultValue||"",n.City.Value=n.City.Value||n.City.DefaultValue||"",n.Street.Value=n.Street.Value||n.Street.DefaultValue||"",this.domElement=function(e,t,i){let l=document.createElement("div");const s=t.LabelColor,n=t.LabelFontSize,a=u(t),d=`<div class="weui-cells charket-cells ${e.FieldSettings.AddressFields.State.Display||e.FieldSettings.AddressFields.City.Display?"":"hide-ele"}""><div class="weui-cell weui-cell_access charket-cell">\n    <div class="weui-cell__hd">\n      <label style="font-size: ${n}; color: ${s}" class="weui-label field-label address-all-label">\n        ${e.AlternativeLabel||e.DefaultValue||"所在地区"}\n        <span style="color: ${a}" class="${a&&e.IsRequired?"":"hide-ele"}">*</span>\n      </label>\n    </div>\n    <div class="address-cell-primary">\n      <div class="address-popup-picker-select field-value">${e.FieldSettings.AddressFields.State.Value} ${e.FieldSettings.AddressFields.City.Value===e.FieldSettings.AddressFields.State.Value?"":e.FieldSettings.AddressFields.City.Value}</div>\n    </div>\n    <div class="weui-cell__ft"></div>\n  </div></div>`,o=`<div class="weui-cells charket-cells ${e.FieldSettings.AddressFields.Street.Display?"":"hide-ele"}">\n    <div class="weui-cell address-cell charket-cell">\n      <div class="weui-cell__hd">\n        <label class="weui-label field-label street-label" style="font-size: ${n}; color: ${s}">\n          ${e.FieldSettings.AddressFields.Street.Label}\n          <span style="color: ${a}" class="${a&&e.IsRequired?"":"hide-ele"}">*</span>\n        </label>\n      </div>\n      <div class="weui-cell_hd">\n        <textarea class="weui-textarea field-value field-textarea" maxlength="200" rows="2" cols="1000" value="${e.FieldSettings.AddressFields.Street.Value}">${e.FieldSettings.AddressFields.Street.Value}</textarea>\n      </div>\n    </div>\n  </div>`;return l.innerHTML=`${d} ${o}`,l}(this.item,t,this.addressStaticData);const a=new z(e,i);var d;(document.getElementById("app")||document.getElementById(s)).appendChild(a.domElement),function(e,t,i,l,s){const n=e.querySelector(t),a=()=>{document.getElementsByTagName("body")[0].style.overflow="hidden";let e=document.getElementById("app");e&&(e.style.overflow="hidden")};n.addEventListener("click",t=>{e.querySelector(".address-all-label").style.color=i.LabelColor||"";let d=document.querySelector(".address-popup-mask"),o=document.querySelector(".address-popup-dialog");const r=window.navigator.platform.toLowerCase();if(r.indexOf("win")>-1||r.indexOf("mac")>-1)if("phone"!==l){let e=n.getBoundingClientRect();if(document.body.clientHeight-e.bottom>330)o.style.top=`${e.top+n.clientHeight+5}px`;else{const t=e.top-330-5;o.style.top=`${t}px`}o.style.left=`${e.left+120}px`,o.style.width=`${e.width-120}px`,o.style.maxHeight="330px",o.style.margin=0}else{let e=document.getElementById(s).getBoundingClientRect(),t=document.body.clientHeight-e.bottom;d.style.top=`${e.top}px`,d.style.width=`${e.width}px`,d.style.bottom=`${t-1}px`,d.style.height="auto",d.style.opacity=1,o.style.bottom=`${t}px`,o.style.maxHeight="100%",o.style.width=`${e.width}px`,a()}else o.style.maxHeight="100%",d.style.opacity=1,a(),window.removeEventListener("touchstart",window.preventRootTouchStartListener),window.removeEventListener("touchmove",window.preventRootTouchMoveListener);d.style.zIndex=500,d.style.display="block"})}(this.domElement,".weui-cell_access",t,l,s),function(e,t,i){let l=e.querySelector(".street-label");const s=e.querySelector(".weui-textarea");s.addEventListener("input",e=>{t.FieldSettings.AddressFields.Street.Value=e.target.value||"",t.IsRequired&&(l.style.color=i.LabelColor||"")}),s.addEventListener("blur",()=>{navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&m()})}(this.domElement,e,t),e.IsReadOnly&&((d=this.domElement).querySelector(".weui-cell_access").style.pointerEvents="none",d.style.color="#B2B2B2",function(e){e.querySelector("textarea").readOnly="readOnly"}(this.domElement));const o=window.navigator.platform.toLowerCase();(o.indexOf("win")>-1||o.indexOf("mac")>-1)&&"phone"!==l?(window.addEventListener("resize",W),window.addEventListener("mousewheel",W),window.addEventListener("DOMMouseScroll",W)):(window.removeEventListener("resize",W),window.removeEventListener("mousewheel",W),window.removeEventListener("DOMMouseScroll",W))}showError(){let e=this.domElement.querySelector(".address-all-label"),t=this.domElement.querySelector(".street-label");!e||this.item.FieldSettings.AddressFields.State.Value||this.item.FieldSettings.AddressFields.City.Value||(e.style.color="#e64340"),t&&!this.item.FieldSettings.AddressFields.Street.Value&&(t.style.color="#e64340")}},DecisionBox:class{constructor(e,t={}){this.item=e,this.styles=t,e.Value=e.Value||e.DefaultValue,this.domElement=function(e,t){let i=document.createElement("div");const l=u(t),s=`<label for="weuiAgree" class="weui-agree">\n    <input id="weuiAgree" type="checkbox" class="weui-agree__checkbox" ${"1"===e.Value?"checked":""}>\n    <span class="weui-agree__text field-value">\n      ${e.FieldSettings.Text}\n    </span>\n    <span style="color: ${l}" class="${l&&e.IsRequired?"":"hide-ele"}">*</span>\n  </label>`;return i.innerHTML=`${s}`,i}(e,t),this.__label__=this.domElement.querySelector(".weui-agree__text"),function(e,t,i){e.querySelector(".weui-agree__checkbox").addEventListener("click",(function(e){i.style.color="#999",t.Value=e.target.checked?"1":"0"}))}(this.domElement,this.item,this.__label__,this.styles)}showError(){this.__label__.style.color="#e64340"}}};let Z={},ee="OutBuilderPreview",te="BuilderPreview",ie=!1,le={},se=null;function ne(e){document.body.innerHTML="",document.body.appendChild(e),document.body.style.minHeight=""}function ae(e){var t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e))}catch(i){t.styleSheet.cssText=e}document.getElementsByTagName("head")[0].appendChild(t)}t.a=function(e,t,i,s,r,c={},u,m){const h=navigator.userAgent;window.isAndroid=h.indexOf("Android")>-1||h.indexOf("Adr")>-1,window.phoneFieldIdToVerificationInfo={};const p=new l({iconClassList:["weui-icon-success","weui-icon_msg"],title:"提交成功",desc:t.ThankYouMessage});if(!t||"Archived"===t.Status){return void ne(new l({iconClassList:["weui-icon-warn","weui-icon_msg-primary"],title:"表单已关闭",desc:"您访问的表单已停止收集信息"}))}if(!1===window.isDisplayForm){const i=window.checkInSuccessResponses.responses;return i?void S({followerId:window.checkInSuccessResponses.followerId||null,whatIds:window.checkInSuccessResponses.whatIds||[],completionResponsesJSON:JSON.stringify(i),success:function(){if(window.pardotIntegration&&window.pardotIntegration.formHandlerUrl&&window.checkInSuccessResponses.email){let t=new X(window.pardotIntegration.formHandlerUrl,window.checkInSuccessResponses.email);const i=t.domElement;e.appendChild(i),t.submit()}else window.checkInSuccessResponses.redirectURL?window.location.href=window.checkInSuccessResponses.redirectURL:ne(p)},fail:function(){V.hide(),L("网络请求失败")}}):void(t.RedirectURL?window.location.href=t.RedirectURL:ne(p))}if(window.pardotIntegration&&window.pardotIntegration.isCompleted)return void ne(p);!function(e){"charket-pc"!==Object({NODE_ENV:"production"}).EMBED_ENV&&e.FormFields.sort((e,t)=>e.Index-t.Index)}(t),Z=t.Styles||{};const y=document.createDocumentFragment();y.appendChild(new n(t));const g=[];s===te&&s!==ee||function(e){let t=[],i=[];for(let l=0;l<e.length;l++){let s=e[l];if("ADDRESS"===s.Type){let n={FieldSettings:{Type:"Address",AddressFields:{State:{FieldSettings:{Type:""},Display:!1,Label:"",DefaultValue:"",FieldLabel:"",FieldName:"",Type:"",FormFieldId:""},City:{FieldSettings:{Type:""},Display:!1,Label:"",DefaultValue:"",FieldName:"",FieldLabel:"",Type:"",FormFieldId:""},Street:{FieldSettings:{Type:""},Display:!1,Label:"",DefaultValue:"",FieldName:"",FieldLabel:"",Type:"",FormFieldId:""}}},UrlParameterName:null,IsDatabaseRequired:!1,IsRequired:!0,IsReadOnly:!1,LabelLayout:"",Index:0,IsHidden:!1,DefaultValue:null,DefaultLabel:"",AlternativeLabel:"",Placeholder:null,Type:"",FieldName:null,FormFieldId:""},a={address:-1,fieldNames:[]};a.address=l;let d=s.FieldSettings.AddressFields.State,o=s.FieldSettings.AddressFields.City,r=s.FieldSettings.AddressFields.Street;const c=d.FieldName,u=o.FieldName,m=r.FieldName;c&&a.fieldNames.push(c),u&&a.fieldNames.push(u),m&&a.fieldNames.push(m);let h=e.find(e=>e.FieldName===c),p=e.find(e=>e.FieldName===u),y=e.find(e=>e.FieldName===m);i.push(a),n.IsRequired=s.IsRequired,n.IsReadOnly=s.IsReadOnly,n.IsHidden=s.IsHidden,n.LabelLayout=s.LabelLayout,n.DefaultValue=s.DefaultValue,n.DefaultLabel=s.DefaultLabel,n.AlternativeLabel=s.AlternativeLabel,n.Index=s.Index,n.FormFieldId=s.FormFieldId,n.Type=s.Type;let g=n.FieldSettings.AddressFields.State,_=n.FieldSettings.AddressFields.City,f=n.FieldSettings.AddressFields.Street;const v=(e,t)=>{t&&(e.Display=t.FieldSettings.Display,e.Label=t.DefaultLabel||"",e.DefaultValue=t.DefaultValue,e.FieldLabel=t.AlternativeLabel||"",e.FieldName=t.FieldName,e.FieldSettings.Type=t.FieldSettings.Type,e.Type=t.Type,e.FormFieldId=t.FormFieldId,e.Value=t.Value)};v(g,h),v(_,p),v(f,y),t.push(n)}}for(let l=0;l<i.length;l++){let s=i[l];e.splice(s.address,1),e.splice(s.address,0,t[l]),s.fieldNames.map((function(t){const i=e.findIndex(e=>e.FieldName===t);e.splice(i,1)}))}}(t.FormFields),t.FormFields.forEach(e=>{let t;const l=e.FieldSettings;l&&l.Type&&(Y(e,i),t="Address"===l.Type?"Hidden"===e.LabelLayout?new K.XAddress(e,Z,c,u,m):new K.Address(e,Z,c):K[l.Type]&&new K[l.Type](e,Z),e.IsHidden||y.appendChild(t.domElement),g.push(t))});const _=e=>e.item&&e.item.FieldSettings&&e.item.FieldSettings.ControllingField,v=e=>e.item&&e.item.FieldName,w=g.filter(e=>e.item&&e.item.FieldSettings&&"Picklist"===e.item.FieldSettings.Type);e:for(let e=0,t=w.length;e<t;e++){const t=_(w[e]);if(!t)continue;let i,l=e,s=e;for(;l-- >0||++s<w.length;)if(i=l>-1?l:s,t===v(w[i])){w[i].sub?w[i].sub.push(w[e]):w[i].sub=[w[e]];continue e}}const F=g.filter(e=>"RadioButton"===e.item.FieldSettings.Type);w.forEach(e=>{e.item.FieldSettings.ControllingField||(e.init(),e.publish()),F.forEach(t=>{t.item.FieldName===e.item.FieldSettings.ControllingField&&(e.init(t.item.Value),e.publish())})}),window.addEventListener("radio-button-change",e=>{w.forEach(t=>{t.item.FieldSettings.ControllingField===e.detail.fieldName&&(t.init(e.detail.value),t.publish())})});const E=new d(Z),L=E.showErrorMsg.bind(E);e.appendChild(E.domElement),window.addEventListener("on-global-error",e=>{L(e.detail)});const $=new a(t.ButtonLabel||t.ButtonSettings&&t.ButtonSettings.Label,Z),I=$.querySelector("a");s&&(I.className=I.className+" weui-btn_disabled"),y.appendChild($);const V=new o;y.appendChild(V.domElement),e.appendChild(y);let C="",T="",A="";s===te||s===ee?(C=document.getElementById(m),A=document.getElementsByClassName("we-chat-form-preview-dialog")[0],T=`#${m}`):(C=document.getElementById("app"),A=C,T="#app");const x=Z.CheckedColor;ae(`${T} .weui-cells_checkbox .weui-check:checked+.weui-icon-checked:before{color: ${x};}`),ae(`${T} .weui-cells_radio .weui-check:checked+.weui-icon-checked:before{color: ${x};}`),ae(s===te||s===ee?r:t.AdvancedStyles);const D=Z.FormBg,k=Z.PageFontFamily;D&&(C.style.backgroundColor=D),k&&(C.style.fontFamily=k);const N=window.navigator.platform.toLowerCase();if((N.indexOf("win")>-1||N.indexOf("mac")>-1)&&(!s||!0===s)){C.style.padding="16px",C.style.marginTop="50px",C.style.marginBottom="50px",C.style.height="auto",C.style.overflow="auto";let e=document.getElementsByTagName("body")[0];A=e.parentElement,Z.PageBg?e.style.backgroundColor=Z.PageBg:e.style.backgroundColor="#e1e2e5",Z.PageBgImage?(e.style.backgroundImage=`url(${Z.PageBgImage})`,e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="contain",e.style.backgroundPosition="center"):e.style.backgroundImage=""}I.addEventListener("click",(function(){if(s)return;window.messageIdToVerificationCode={};const i=function(e){let t,i,l=!0;return e.forEach(e=>{const s=e.item;if(!s.IsHidden){if("Address"===s.FieldSettings.Type)s.IsRequired&&(!s.FieldSettings.AddressFields.State.Value&&s.FieldSettings.AddressFields.State.Display||!s.FieldSettings.AddressFields.City.Value&&s.FieldSettings.AddressFields.City.Display||!s.FieldSettings.AddressFields.Street.Value&&s.FieldSettings.AddressFields.Street.Display)&&(e.showError(),t||(t="请完成页面上的必填项"),l=!1);else{if(["Text","Textarea","Number","Email","Phone","Picklist"].indexOf(s.FieldSettings.Type)>-1&&(e.assignValue&&e.assignValue(),e.validateFormat&&e.validateFormat()),"Phone"===s.FieldSettings.Type&&s.FieldSettings.IsSmsVerificationEnabled&&e.assignVerificationCode(),s.IsRequired&&(null===s.Value||""===s.Value||s.Value&&0===s.Value.toString().replace(/\s+/g,"").length||"[object Array]"===Object.prototype.toString.call(s.Value)&&0===s.Value.length))e.showError(),t||(t="请完成页面上的必填项"),l=!1;else if(!1===e.isValid){if(e.showError(),!t){const e=s.FieldSettings.Type;t="Email"===e?"请输入正确格式的邮箱":"Number"===e?"请输入数字":"Phone"===e?"请输入正确格式的电话号码":`请输入正确格式的${s.AlternativeLabel||s.DefaultLabel}`}l=!1}}"DecisionBox"===e.item.FieldSettings.Type&&s.IsRequired&&"0"===s.Value&&(e.showError(),t||(t="请完成页面上的必填项"),l=!1),t&&!i&&(i=e)}}),{isValid:l,firstErrorInput:i,errorMsg:t}}(g);if(i.isValid){let i=JSON.parse(JSON.stringify(t));i.FormFields=function(e){const t=JSON.parse(JSON.stringify(e));let i=[],l=[];for(let e=0;e<t.length;e++){let s=t[e];if("ADDRESS"===s.Type){let t={},n=s.FieldSettings.AddressFields.State,a=s.FieldSettings.AddressFields.City,d=s.FieldSettings.AddressFields.Street;t.address={FieldSettings:{Type:""},UrlParameterName:null,IsDatabaseRequired:!1,IsRequired:!1,IsReadOnly:!1,LabelLayout:"",Index:null,IsHidden:!1,DefaultValue:null,DefaultLabel:"",AlternativeLabel:"",Placeholder:null,Type:"",FieldName:null,FormFieldId:""},t.address.FieldSettings.Type="Address",l.push(e),t.address.FieldSettings.AddressFields={State:{FieldName:n.FieldName},City:{FieldName:a.FieldName},Street:{FieldName:d.FieldName}},t.address.IsRequired=s.IsRequired,t.address.IsReadOnly=s.IsReadOnly,t.address.IsHidden=s.IsHidden,t.address.LabelLayout=s.LabelLayout,t.address.DefaultValue=s.DefaultValue,t.address.DefaultLabel=s.DefaultLabel,t.address.AlternativeLabel=s.AlternativeLabel,t.address.Index=s.Index,t.address.FormFieldId=s.FormFieldId,t.address.Type="ADDRESS",n.FieldName?t.state={FieldSettings:{Type:""},UrlParameterName:null,IsDatabaseRequired:!1,IsRequired:!1,IsReadOnly:!1,LabelLayout:"",Index:null,IsHidden:!1,DefaultValue:null,DefaultLabel:"",AlternativeLabel:"",Placeholder:null,Type:"",FieldName:null,FormFieldId:""}:t.state="",a.FieldName?t.city={FieldSettings:{Type:""},UrlParameterName:null,IsDatabaseRequired:!1,IsRequired:!1,IsReadOnly:!1,LabelLayout:"",Index:null,IsHidden:!1,DefaultValue:null,DefaultLabel:"",AlternativeLabel:"",Placeholder:null,Type:"",FieldName:null,FormFieldId:""}:t.city="",d.FieldName?t.street={FieldSettings:{Type:""},UrlParameterName:null,IsDatabaseRequired:!1,IsRequired:!1,IsReadOnly:!1,LabelLayout:"",Index:null,IsHidden:!1,DefaultValue:null,DefaultLabel:"",AlternativeLabel:"",Placeholder:null,Type:"",FieldName:null,FormFieldId:""}:t.street="";const o=(e,t)=>{t.FieldName&&(e.FieldSettings.Display=t.Display,e.DefaultLabel=t.Label,e.DefaultValue=t.DefaultValue,e.AlternativeLabel=t.FieldLabel,e.FieldName=t.FieldName,e.FieldSettings.Type=t.FieldSettings.Type,e.Type=t.Type,e.FormFieldId=t.FormFieldId,e.Value=t.Value)},r=(e,t)=>{e&&(e.IsRequired=t.IsRequired,e.IsHidden=t.IsHidden,e.IsReadOnly=t.IsReadOnly)};o(t.state,n),o(t.city,a),o(t.street,d),r(t.state,s),r(t.city,s),r(t.street,s),i.push(t)}}for(let e=0;e<l.length;e++){t.splice(l[e],1);let s=i[e];t.splice(l[e],0,s.address),s.state&&t.push(s.state),s.city&&t.push(s.city),s.street&&t.push(s.street)}return t}(t.FormFields),V.show();const l=function(){V.hide();const e=le.redirectURL;e?window.location.href=e:ne(p)},s=function(){const e=JSON.parse(JSON.stringify(le.responses));se&&(e.executeSkillResult=se),S({followerId:le.followerId||null,whatIds:le.whatIds||[],completionResponsesJSON:JSON.stringify(e),success:function(){n()},fail:function(){V.hide(),L("网络请求失败")}})},n=function(){if(window.pardotIntegration&&window.pardotIntegration.formHandlerUrl&&le.pardotIntegrationEmail){let t=new X(window.pardotIntegration.formHandlerUrl,le.pardotIntegrationEmail);const i=t.domElement;e.appendChild(i),t.submit()}else l()};ie?(V.show(),s()):function({dataJSON:e,metadata:t,successCallback:i,failCallback:l}){Visualforce.remoting.Manager.invokeAction(`${window.namespace?window.namespace+".":""}FormController.submit`,e,window.encryptOpenId,t,b(i,l),{escape:!0,timeout:3e4})}({dataJSON:JSON.stringify(G(i).formInfo),metadata:JSON.stringify(G(i).metadata),successCallback:async function(e){ie=!0,le=e,le.responses?le.responses.skillId?function({skillId:e,followerId:t,success:i}){Visualforce.remoting.Manager.invokeAction(`${window.namespace?window.namespace+".":""}CompletionResponseRemoteActions.executeSkill`,e,t,(function(e){if(!e)return i(e),null;i(JSON.parse(f(e)))}),{escape:!0})}({skillId:le.responses.skillId,followerId:le.followerId,success:function(e){se=e||null,s()}}):s():n()},failCallback:function(e){V.hide();const t=e&&e[0]&&(e[0].code===Q?"验证码不正确，请重新输入。":e[0].message);g.forEach(t=>{let i=!1;e instanceof Array&&(i=e.some(e=>{if(t.item.FieldName===e.fieldName)return e.code===Q?t.showVerificationError():t.showError(),!0})),"Phone"===t.item.FieldSettings.Type&&t.item.FieldSettings.IsSmsVerificationEnabled&&!i&&t.hideVerificationError()}),L(t||"提交失败")}})}else if(L(i.errorMsg),i.firstErrorInput&&i.firstErrorInput.domElement){const e=i.firstErrorInput.domElement.offsetTop;A.scrollTop=e-30}}))}}}]);