(function(){var a=SVMX.Package("com.servicemax.client.sfmopdocdelivery.engine");a.init=function(){var c=com.servicemax.client.sfmopdocdelivery.constants.Constants;var b=com.servicemax.client.sfmopdocdelivery.utils.SFMOPDOCUtils;a.Class("DeliveryEngineImpl",com.servicemax.client.sfmconsole.api.AbstractDeliveryEngine,{__nodeProcessor:null,__orgNamespace:null,styleNodeValue:null,__timeFormat:null,__dateFormat:null,__uniqueObjects:null,__depthCount:2,__uniqueObjects:null,__jsee:null,__pendingNodeItems:null,__metadata:null,__data:null,__processedMetadata:null,__recsInfo:null,__aliasObjectName:null,__aliasDescribeInfo:null,__imageIds:null,__eventBus:null,__signaturesPending:null,__allowSignatures:null,__allowDraft:null,__spinner:null,__displayTags:null,__settings:null,__recordId:null,__processId:null,__sourceRecord:null,__objectLabel:null,__isCheckListProcess:false,__isLightning:null,__isSalesForceIsInLightning:null,initAsync:function(d){var e=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.niservice").getInstance();this.__eventBus=SVMX.create("com.servicemax.client.sfmopdocdelivery.impl.SFMOPDOCDeliveryEngineEventBus",{});e.createNamedInstanceAsync("CONTROLLER",{handler:function(f){e.createNamedInstanceAsync("MODEL",{handler:function(g){f.setModel(g);d.handler.call(d.context);},context:this});},context:this,additionalParams:{eventBus:this.__eventBus}});},run:function(d){if(d!==undefined&&d!==null&&d.options!==undefined&&d.options!==null){this.__processId=d.options.SVMX_processId;this.__recordId=d.options.SVMX_recordId;this.__processName=d.options.SVMX_processName;this.changeStyleSignature=d.changeStyleSignature;this.removeSignatureButtons=d.removeSignatureButtons;this.createSignatureButtons=d.createSignatureButtons;this.addReplaceCapturedSignature=d.addReplaceCapturedSignature;this.onEngineRendered=d.onRendered;this.__sourceRecord=d.options.SVMX_record;}this.__isLightning=SVMX.getClient().getApplicationParameter("lightning");this.__isSalesForceIsInLightning=SVMX.getClient().getApplicationParameter("isSalesforceLightning");if(this.__processId===undefined||this.__processId===null){this.__processId=SVMX.getUrlParameter("SVMX_processId");}if(this.__recordId===undefined||this.__recordId===null){this.__recordId=SVMX.getUrlParameter("SVMX_recordId");}var e=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.niservice").getInstance();e.createNamedInstanceAsync("NODE_PROCESSOR",{handler:function(f){this.__nodeProcessor=f;this.__orgNamespace=SVMX.getClient().getApplicationParameter("org-name-space");this.__allowSignatures=SVMX.getClient().getApplicationParameter("allow-signatures");this.__allowDraft=SVMX.getClient().getApplicationParameter("allow-draft");this.__runInternal(d);},context:this});},__runInternal:function(e){this.__rootNode=e.container?e.container.body.dom:$("#"+SVMX.getDisplayRootId());this.__rootNode.css("width","100%");$($("body")[0]).css("background-image","none");var f=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.sfmopdoc.platformspecifics").getInstance();this.returnUrl=SVMX.getUrlParameter("SVMX_retURL");var d=f.getQualificationInfo(this.__recordId,this.__processId,this.__process,this);this.__requestClose=e.requestClose;this.__requestCancel=e.requestCancel;this.__settings=f.getSettingsInfo();},__process:function(d){if(!d.isQualified){var g=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.sfmopdoc.platformspecifics").getInstance();g.alert(d.errorMessage,this.__requestCancel);g.navigateBack(this.returnUrl);}else{this.__includeSpinner();this.__jsee=new com.servicemax.client.sfmopdocdelivery.jsel.JSExpressionEngine(this);this.__pendingNodeItems=new com.servicemax.client.sfmopdocdelivery.engine.PendingNodeProcessCollection();this.__signaturesPending=new com.servicemax.client.sfmopdocdelivery.engine.PendingSignatures(this);SVMX.getClient().triggerEvent(new com.servicemax.client.lib.api.Event("SFMOPDOCDELIVERY.JSEE_CREATED",this,{jsee:this.__jsee}));this.__jsee.initialize({contextRoots:["$D","$M"]});var f=this.getEventBus();var e=SVMX.create("com.servicemax.client.sfmconsole.utils.EventCollection",f,[SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.GET_TEMPLATE",this,{request:{context:this,processId:this.__processId}}),SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.GET_USERINFO",this,{request:{context:this}}),SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.GET_DOCUMENT_METADATA",this,{request:{context:this,processId:this.__processId}}),SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.GET_DOCUMENT_DATA",this,{request:{context:this,returnUrl:this.returnUrl,processId:this.__processId,recordId:this.__recordId}}),SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.GET_DISPLAY_TAGS",this,{request:{context:this}})]);e.triggerAll(function(o){var h=o.items(),l=h.length,k,m=null;for(k=0;k<l;k++){var n=h[k];if(n.type()=="SFMOPDOCDELIVERY.GET_DOCUMENT_METADATA"){this.__metadata=n.response;
}else{if(n.type()=="SFMOPDOCDELIVERY.GET_DOCUMENT_DATA"){this.__data=n.response;}else{if(n.type()=="SFMOPDOCDELIVERY.GET_USERINFO"){this.__onGetUserInfoComplete(n.response);}else{if(n.type()=="SFMOPDOCDELIVERY.GET_TEMPLATE"){m=n.response;}else{if(n.type()=="SFMOPDOCDELIVERY.GET_DISPLAY_TAGS"){this.__displayTags=n.response;}}}}}}if(m){this.__onGetTemplateComplete(m);this.__getObjectDescribeInfo();}else{var j=SVMX.create("com.servicemax.client.sfmconsole.utils.EventCollection",f,[SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.MISSING_TEMPLATE",this,{request:{context:this}})]);j.triggerAll();}},this);}},__makeAttachmentProperty:function(){var g=this.__data;if(this.__isChecklistAttachmentHasPermission()){var f=g.DocumentData.length;for(var d=0;d<f;d++){var e=g.DocumentData[d]["Key"];if(e!=undefined&&e.indexOf("Checklist")>=0){this.__jsee.setProperty("allChecklistAttachment",this.__getObjectHashMapFromArray(g.DocumentData[d].relatedRecords));break;}}}else{this.__jsee.setProperty("allChecklistAttachment",[]);}},__isChecklistAttachmentHasPermission:function(){if(this.__aliasDescribeInfo&&this.__aliasDescribeInfo.Checklist_Attachment){var j=this.__aliasDescribeInfo.Checklist_Attachment;var f=this.__orgNamespace;var e=true;var h=[f+"__SM_Internal_Question_ID__c",f+"__SM_Attachment_ID__c",f+"__SM_Attachment_Name__c",f+"__SM_Checklist__c"];for(var d=0;d<h.length;d++){var g=j[h[d]];if(!g||(g&&!g.accessible)){e=false;break;}}return e;}return false;},__getObjectHashMapFromArray:function(g){var d={};if(g&&g.length>0){var h=g.length;for(var f=0;f<h;f++){var e=g[f];d[e.headerRecordId]=e.records;}}return d;},__evaluateBusinessRule:function(){var o=this.__metadata;var u=this.__data;var h=u.DocumentData.length;for(var g=0;g<h;g++){var s=u.DocumentData[g]["Records"];var n=u.DocumentData[g]["SpecialFields"];var v=u.DocumentData[g]["Key"];if(v!=undefined&&v.indexOf("Checklist")>=0){var p=s.length;var q=[];for(var t=0;t<p;t++){var f=s[t];var m=this.getRuleFormId(o,f[SVMX.OrgNamespace+"__ChecklistProcessID__c"]);if(m){var k=SVMX.OrgNamespace+"__Checklist__c";var r={};r[k]=this.getField(f);var e=SVMX.toObject(f[SVMX.OrgNamespace+"__ChecklistJSON__c"]);var j=this.addingNullForSkipSection(e,m);e.attributes={type:SVMX.OrgNamespace+"__Checklist__c",url:""};var l=SVMX.create("com.servicemax.client.sfmbizrules.impl.BusinessRuleValidator");var d=l.evaluateEntryCriteriaBusinessRules({rules:m,fieldValueData:j,fields:r,data:j});if(d&&d.errors&&d.errors.length>0){q.push(f);}}else{q.push(f);}}u.DocumentData[g]["Records"]=q;}}},addingNullForSkipSection:function(r,n){var f=n.header;var g={};if(f){var p=f.rules;var j=p.length;for(var k=0;k<j;k++){var m=p[k];var q=m.ruleInfo;if(q){var d=q.bizRuleDetails;if(d){var l=d.length;for(var e=0;e<j;e++){var h=d[e];var o=h[SVMX.OrgNamespace+"__Field_Name__c"];if(!r.hasOwnProperty(o)){g[o]=null;}else{g[o]=r[o];}}}}}}return g;},getRuleFormId:function(e,k){var g=e.outputDocConfigurationObject.lstSelectedChecklistProcess;var h=g.length;var d;for(var f=0;f<h;f++){var j=g[f];if(j.checklistProcessSFId===k){if(j.businessRules&&j.businessRules.ruleInfo&&j.businessRules.ruleInfo.bizRule&&j.businessRules.ruleInfo.bizRuleDetails){d=this.getBusinessRule(j.businessRules);}break;}}return d;},getBusinessRule:function(d){var f={aliasName:null,message:null,sequence:null,ruleInfo:null};f.ruleInfo=d.ruleInfo;f.ruleInfo.bizRule[SVMX.OrgNamespace+"__Message_Type__c"]="Error";f.ruleInfo.bizRule[SVMX.OrgNamespace+"__Advance_Expression__c"]=this.getAdvanceExpression(d.ruleInfo.bizRuleDetails);var g=[];g.push(f);var e={};e.header={key:null,rules:g};return e;},getAdvanceExpression:function(g){if(g&&g.length>1){var e=g.length;var h="1";for(var d=0;d<e;d++){var f=d+1;if(d>0){h=h+" OR "+f;}}return"("+h+")";}return null;},getField:function(f){var e={};if(f){if(f[SVMX.OrgNamespace+"__ChecklistJSON__c"]){var h=Object.keys(SVMX.toObject(f[SVMX.OrgNamespace+"__ChecklistJSON__c"]));var g=h.length;for(var d=0;d<g;d++){e[h[d]]="question";}}}return e;},__getObjectDescribeInfo:function(){this.__uniqueObjects={};this.__processMetaDataCollection();this.__parseForImageIds();var e=[];var j=0;for(var h in this.__uniqueObjects){var d=SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.DESCRIBE_OBJECT",this,{request:{objectName:this.__uniqueObjects[h]}});e[j]=d;j++;}if(j>0){var g=this.getEventBus();var f=SVMX.create("com.servicemax.client.sfmconsole.utils.EventCollection",g,e);f.triggerAll(this.onDescribeObjectsComplete,this);}else{this.__processTemplate();}},onDescribeObjectsComplete:function(m){this.__aliasDescribeInfo={};this.__objectLabel="";var l=m.items(),p=l.length,g;var q={};var f="";if(this.__sourceRecord!==undefined&&this.__sourceRecord!==null&&this.__sourceRecord.attributes!==undefined&&this.__sourceRecord.attributes!==null&&this.__sourceRecord.attributes.type!==undefined&&this.__sourceRecord.attributes.type!==null){f=this.__sourceRecord.attributes.type;}for(g=0;g<p;g++){var o=l[g],j=o.getEventObj().data.request.objectName;
var d=o.response.fields;q[j]=this.__processObjectDescribe(d);if(j===f){this.__objectLabel=o.response.label;}}var n=this.__depthCount;for(var h in this.__aliasObjectName){var k=this.__aliasObjectName[h];if(q[k]){var e={};e[h]=this.__processRefFieldsObjectDescribe(k,q,n);this.__aliasDescribeInfo[h]=e[h];this.__jsee.addContext(e,"$M");}}this.__processTemplate();},__processRefFieldsObjectDescribe:function(g,f,d){var h=f[g];for(var e in h){if(((h[e].dataType&&h[e].dataType==="reference")||(h[e].type&&h[e].type==="reference"))&&h[e].referenceTo&&f[h[e].referenceTo]){if(d>0){this.__processRefFieldsObjectDescribe(h[e].referenceTo,f,d-1);}this.__assignFields(h[e],f[h[e].referenceTo]);}}return h;},__assignFields:function(e,g){var d=e;for(var f in g){d[f]=g[f];}return d;},__processObjectDescribe:function(e){var d={};for(var f in e){d[e[f].name]=e[f];}return d;},__processChecklist:function(){if(this.__isCheckListProcess){if(this.__metadata.outputDocConfigurationObject&&this.__metadata.outputDocConfigurationObject.processOutputDoc){this.__jsee.setProperty("includeSkippedSections",this.__metadata.outputDocConfigurationObject.processOutputDoc[this.__orgNamespace+"__SM_Include_Skipped_Sections__c"]);}this.__makeAttachmentProperty();this.__evaluateBusinessRule();}},__processTemplate:function(){this.__processChecklist();this.__processDataCollection();this.__processReferenceData();this.__onDataFetchComplete();},getEventBus:function(){return this.__eventBus;},__onDataFetchComplete:function(){var q=$("[svmx-data]",$(this.__rootNode)),f;var o=0,g=q.length;for(o=0;o<g;o++){f=q[o];this.__nodeProcessor.process({engine:this,node:f,jsee:this.__jsee,pendingNodeItems:this.__pendingNodeItems});}var m=[{type:"div",name:"ILDIV"},{type:"strong",name:"ILSTRONG"},{type:"u",name:"ILU"},{type:"i",name:"ILI"},{type:"p",name:"ILP"},{type:"pre",name:"ILPRE"},{type:"h1",name:"ILH"},{type:"h2",name:"ILH"},{type:"h3",name:"ILH"},{type:"h4",name:"ILH"},{type:"h5",name:"ILH"},{type:"h6",name:"ILH"},{type:"style",name:"ILS"},{type:"span",name:"ILSP"},{type:"em",name:"ILEM"},{type:"strike",name:"ILSTRIKE"},{type:"sub",name:"ILSUB"},{type:"sup",name:"ILSUP"},{type:"ol ",name:"ILOL"},{type:"li",name:"ILLI"},{type:"ul",name:"ILUL"},{type:"b",name:"ILB"},{type:"td",name:"ILTD"},{type:"th",name:"ILTH"}],n,h=m.length;for(n=0;n<h;n++){q=$(m[n].type,$(this.__rootNode));g=q.length;for(o=0;o<g;o++){f=q[o];this.__nodeProcessor.process({engine:this,node:f,jsee:this.__jsee,name:m[n].name});}}$("#"+c.DOCUMENT_PAGE,$(this.__rootNode)).show();this.__spinner.stop();if(SVMX.getClient().getApplicationParameter("use_jsr")!==true&&this.__signaturesPending.isPending()){if(document.getElementById("svmx_draft")){document.getElementById("svmx_draft").disabled=true;document.getElementById("svmx_draft").style.opacity=0.3;}if(document.getElementById("svmx_finalize")){document.getElementById("svmx_finalize").disabled=true;document.getElementById("svmx_finalize").style.opacity=0.3;}}else{if(document.getElementById("svmx_draft")){document.getElementById("svmx_draft").disabled=false;document.getElementById("svmx_draft").style.opacity=1;}if(document.getElementById("svmx_finalize")){document.getElementById("svmx_finalize").disabled=false;document.getElementById("svmx_finalize").style.opacity=1;}}if(this.onEngineRendered){var p=this.__sourceRecord._fields.getNameField().name;var e=this.__objectLabel;var d=this.__processName;this.onEngineRendered.handler.apply(this.onEngineRendered.context,[e,d]);}},getRoot:function(){return this.__rootNode;},__checkForPendingNodeItems:function(){var f=this;if(this.__pendingNodeItems.isPending()){setTimeout(function(){f.__checkForPendingNodeItems();},100);}else{var e=$("#"+c.DOCUMENT_PAGE,$(this.__rootNode)).html();e=e.replace(this.__processedStyleNodeValue,"");if(this.__processedStyleNodeValue!==null&&this.__processedStyleNodeValue!==undefined&&this.__processedStyleNodeValue.length>0){e=this.__processedStyleNodeValue+e;}var d=SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.SUBMIT_DOCUMENT",f,{request:{context:f,document:e}});f.getEventBus().triggerEvent(d);}},__onGetUserInfoComplete:function(d){this.__jsee.setProperty(c.TODAY,d.Today);this.__jsee.setProperty(c.TOMORROW,d.Tomorrow);this.__jsee.setProperty(c.YESTERDAY,d.Yesterday);this.__jsee.setProperty(c.NOW,d.Now);this.__jsee.setProperty(c.USERNAME,d.UserName);this.__jsee.setProperty(c.ADDRESS,d.Address);this.__jsee.setProperty(c.LOCALE,d.Locale);this.__timeFormat=d.TimeFormat;this.__dateFormat=d.DateFormat;this.__jsee.setProperty("userTimezoneOffset",d.TimezoneOffset);com.servicemax.client.lib.datetimeutils.DatetimeUtil.setAmPmText(d.amText,d.pmText);},__onGetTemplateComplete:function(j){if(this.__allowDraft!=null&&this.__allowDraft===true){this.__createDraftButton();}else{this.__createFinalizeButton();}var g=this.__metadata.AllObjectInfo;var f,k=g.length;var e;var h="classic-root-opdoc";if(this.__isSalesForceIsInLightning){h="lightning-root-opdoc";}for(f=0;f<k;f++){if(g[f][this.__orgNamespace+"__Type__c"]==="Detail_Object"&&g[f][this.__orgNamespace+"__Object_Name__c"]===(this.__orgNamespace+"__Checklist__c")){e=g[f][this.__orgNamespace+"__Alias__c"];
}}j.Template=j.Template.replace("{{$F.CHECKLIST()}}",'<div class="part-details"><table border="0" cellpadding="0" cellspacing="0" style="width: 100%" svmx-data="{{$D.'+e+'}}"><thead><tr><th class="theader" svmx-data="{{$F.CHECKLIST($D.'+e+"."+this.__orgNamespace+"__ChecklistJSON__c,$D."+e+"."+this.__orgNamespace+"__ChecklistMetaJSON__c,$D."+e+'.Id)}}">	&nbsp;</th></tr></thead></table></div>');this.styleNodeValue=this.__parseforStyle(j.Template);var d="";if(this.__isLightning){if(this.__isSalesForceIsInLightning){d="opdoc-document-page-container";}}else{d="document-page-container";}$(this.__rootNode).append("<div class='"+d+"'><div style='border-radius:5px; margin-top: 5px;padding: 5px' id='"+c.DOCUMENT_PAGE+"'></div></div>");$(this.__rootNode).addClass(h);document.getElementById($(this.__rootNode)[0].id).style.overflow="auto";$("#"+c.DOCUMENT_PAGE,$(this.__rootNode)).append(j.Template);$("#"+c.DOCUMENT_PAGE,$(this.__rootNode)).hide();},__includeSpinner:function(){var d={lines:17,length:40,width:10,radius:59,corners:1,rotate:85,direction:1,color:"#da5e28",speed:2.2,trail:60,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"auto",left:"auto"};if(this.__isLightning){d.className="spinner-lightning";d.line=0;d.length=0;d.radius=0;d.speed=0;d.top=-10;d.left=-10;$(this.__rootNode).append("<div id='"+c.DOCUMENT_SPINNER+"' class='spinner-lightning-container'></div>");}else{$(this.__rootNode).append("<div style='position:fixed;top:50%;left:50%' id='"+c.DOCUMENT_SPINNER+"'></div>");}var e=$("#"+c.DOCUMENT_SPINNER,$(this.__rootNode))[0];this.__spinner=new Spinner(d).spin(e);},handleFinalizeButtonClick:function(){if(document.getElementById("svmx_finalize")){document.getElementById("svmx_finalize").disabled=true;document.getElementById("svmx_finalize").style.opacity=0.3;}if(this.removeSignatureButtons){this.removeSignatureButtons.handler.apply(this.removeSignatureButtons.context);}else{var j=$("#"+c.DOCUMENT_PAGE,$(this.__rootNode));var h=$(j).find("button");if(h&&h.length>0){for(var f=0;f<h.length;f++){var e=$(h[0]).attr("signature-name")!=undefined?true:false;if(e===true){$(h[f]).remove();}}}}var g=$("#"+c.DOCUMENT_PAGE,$(this.__rootNode)).html();g=g.replace(this.__processedStyleNodeValue,"");if(this.__processedStyleNodeValue!==null&&this.__processedStyleNodeValue!==undefined&&this.__processedStyleNodeValue.length>0){g=this.__processedStyleNodeValue+g;}var d=SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.FINALIZE",this,{request:{processId:this.__processId,recordId:this.__recordId,htmlContent:g,sourceRecord:this.__sourceRecord,requestClose:this.__requestClose}});this.getEventBus().triggerEvent(d);},__createFinalizeButton:function(){var g=this;var f=this.__getTagValue("SFM004_TAG006");var d=this.__getTagValue("SFM004_TAG013");if(f==null){f=c.FINALIZE;}if(d==null){d=c.CANCEL;}var j="<input style='background:#f16138; -moz-border-radius:3px; -webkit-border-radius:3px; border-radius:3px; font: normal 13px tahoma,arial,verdana,sans-serif; border: 1px solid #db3202; color:#FFFFFF; font-weight:bold; padding:3px 15px; cursor:pointer; width: 20%; height: 50px' type='button' id='svmx_finalize' value='"+f+"'>";var h="<input style='background:#f16138; -moz-border-radius:3px; -webkit-border-radius:3px; border-radius:3px; font: normal 13px tahoma,arial,verdana,sans-serif; border: 1px solid #db3202; color:#FFFFFF; font-weight:bold; padding:3px 15px; cursor:pointer; width: 20%; height: 50px' type='button' id='svmx_finalize' value='"+d+"'>";$(this.__rootNode).append("<div style='background:#a4d0e7; -moz-border-radius:5px; -webkit-border-radius:5px; border-radius:5px; border: 1px solid #72b3d5;padding: 5px' id='"+c.FINALIZE_DIV+"'></div>");$("#"+c.FINALIZE_DIV,$(this.__rootNode)).append(j);const e=SVMX.getClient().getApplicationParameter("svmx-sfm-sal-model-use-jsr");if(e&&e===true){$("#"+c.FINALIZE_DIV,$(this.__rootNode)).append(h);}$("#svmx_finalize",$(this.__rootNode)).on("click",SVMX.proxy(this,this.handleFinalizeButtonClick));if(document.getElementById("svmx_finalize")){document.getElementById("svmx_finalize").disabled=true;document.getElementById("svmx_finalize").style.opacity=0.3;}},__onCaptureSignature:function(j){var g=$("#"+j.uniqueName,$(this.__rootNode));if(g!=undefined&&g&&j.path!=undefined&&j.path.length>0){var h=g.find("img");if(h){h.remove();}var f="";var d=j.path;var e=d.split("/");f=e[e.length-1];if(this.addReplaceCapturedSignature){this.addReplaceCapturedSignature.handler.apply(this.addReplaceCapturedSignature.context,[j,f,g]);}else{g.prepend("<img style='width:"+j.width+"; height:"+j.height+";' svmx-data='"+f+"' src='"+j.path+"'/>");}this.__signaturesPending.removeItem(j.uniqueName);}},__createDraftButton:function(){var h=this;var g=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.sfmopdoc.platformspecifics").getInstance();var d=function(){if(document.getElementById("svmx_draft")){document.getElementById("svmx_draft").disabled=true;document.getElementById("svmx_draft").style.opacity=0.3;
}var j=true;if(h.__signaturesPending.isPending()){if(h.__settings.SET001!==undefined&&h.__settings.SET001==="Allow"){j=true;}else{if(h.__settings.SET001!==undefined&&h.__settings.SET001==="Warn"){j=g.confirm(h.__getTagValue("SFM004_TAG007"));}else{if(h.__settings.SET001!==undefined&&h.__settings.SET001==="Disallow"){g.alert(h.__getTagValue("SFM004_TAG008"));j=false;}}}}if(j==true){h.__checkForPendingNodeItems();}else{if(document.getElementById("svmx_draft")){document.getElementById("svmx_draft").disabled=false;document.getElementById("svmx_draft").style.opacity=1;}}};var f=this.__getTagValue("SFM004_TAG006");if(f==null){f=c.DRAFT;}var e="<input style='background:#f16138; -moz-border-radius:3px; -webkit-border-radius:3px; border-radius:3px; font: normal 13px tahoma,arial,verdana,sans-serif; border: 1px solid #db3202; color:#FFFFFF; font-weight:bold; padding:3px 15px; cursor:pointer' type='button' id='svmx_draft' value='"+f+"'>";if(this.__isLightning){e=this.__makeLightningComponents();}else{$(this.__rootNode).append("<div style='background:#a4d0e7; -moz-border-radius:5px; -webkit-border-radius:5px; border-radius:5px; border: 1px solid #72b3d5;padding: 5px' id='"+c.DRAFT_DIV+"'></div>");}$("#"+c.DRAFT_DIV,$(this.__rootNode)).append(e);$("#svmx_draft",$(this.__rootNode)).on("click",SVMX.proxy(this,d));if(document.getElementById("svmx_draft")){document.getElementById("svmx_draft").disabled=true;document.getElementById("svmx_draft").style.opacity=0.3;}},__makeLightningComponents:function(){var m=this.__getTagValue("SFM004_TAG013");if(m==null){m=c.CANCEL;}var o=this.__getTagValue("SFM004_TAG014");if(o==null){o=c.SAVE;}var k=function(){var q=SVMX.getClient().getServiceRegistry().getService("com.servicemax.client.sfmopdoc.platformspecifics").getInstance();q.navigateBack(this.returnUrl);};$(this.__rootNode).append("<div class='opdoc-header-container' id='"+c.DRAFT_DIV+"'></div>");var h="<div class='opdoc-header-title' id='"+c.OBJECT_HEADER+"'></div>";$("#"+c.DRAFT_DIV,$(this.__rootNode)).append(h);var e=SVMX.getClient().getApplicationParameter("objectIconURL");var g=10;var p=SVMX.getClient().getApplicationParameter("colorCodeForIcon");if(e&&e.length>0){g=42;}var d='<img src="'+e+'" width="'+(g-10)+'" height="'+(g-10)+'" style="margin: 0 10px 10px 0; background:#'+p+'">';var n="<label >"+SVMX.getClient().getApplicationParameter("objectLabel")+"</label>";var j="<label >"+SVMX.getClient().getApplicationParameter("recordName")+"</label>";var f='<table width="100%" border="0" cellpadding="0" cellspacing="0" style="table-layout:fixed">';f+='<tr><td rowspan="2" width="'+g+'" style="word-break:break-word;word-wrap:break-word">';f+=d;f+='</td><td style="word-break:break-word;word-wrap:break-word;"><span>';f+=n;f+='</span></td></tr><tr><td width="50%" style="word-break:break-word;word-wrap:break-word;"><h1>';f+=j;f+="</h1></td></tr></table>";$("#"+c.OBJECT_HEADER,$(this.__rootNode)).append(f);var l="<input style='' type='button' id='svmx_cancelBTN' class='opdoc-btn' value='"+m+"'>";$("#"+c.DRAFT_DIV,$(this.__rootNode)).append(l);$("#svmx_cancelBTN",$(this.__rootNode)).on("click",SVMX.proxy(this,k));return"<input style='margin-left: 10px' type='button' id='svmx_draft' class='opdoc-btn opdoc-btn-brand' value='"+o+"'>";},__getTagValue:function(d){var e=null;if(this.__displayTags!=null&&this.__displayTags[d]!==undefined&&this.__displayTags[d]!==null){e=this.__displayTags[d];}return e;},__parseforStyle:function(e){var g,f;var d="";if(!e){return d;}g=e.indexOf("<style");f=e.indexOf("</style>");if(g!=-1&&f!=-1){d=e.substring(g,f);}if(d!==undefined&&d!==null&&d.length>0){d=d+"</style>";}return d;},onSubmitDocumentComplete:function(d){var f=d.DocumentId;var e=SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.CREATE_PDF",this,{request:{context:this,returnUrl:this.returnUrl,documentId:f,recordId:SVMX.getUrlParameter("SVMX_recordId"),processId:SVMX.getUrlParameter("SVMX_processId")}});this.getEventBus().triggerEvent(e);},onCreatePDFComplete:function(e){var d=SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.TARGET_UPDATES",this,{request:{context:this,processId:SVMX.getUrlParameter("SVMX_processId"),recordId:SVMX.getUrlParameter("SVMX_recordId"),pdf:e}});this.getEventBus().triggerEvent(d);},onTargetUpdatesComplete:function(e){var d=SVMX.create("com.servicemax.client.lib.api.Event","SFMOPDOCDELIVERY.VIEW_DOCUMENT",this,{request:{context:this,attachmentId:e.PDFAttachmentId,recordId:SVMX.getUrlParameter("SVMX_recordId")}});this.getEventBus().triggerEvent(d);},__processMetaDataCollection:function(){var h=this.__metadata.AllObjectInfo;this.__processedMetadata={};this.__recsInfo={};this.__aliasObjectName={};var g;var f,j=h.length;if(this.__isCheckListExistInMata(h)){var e=this.__orgNamespace+"__SM_Checklist_Attachment__c";this.__addToUniqueObjects(e);this.__aliasObjectName.Checklist_Attachment=e;}for(f=0;f<j;f++){g=[];var d=h[f][this.__orgNamespace+"__Fields__c"];if(!d||d.length===0){continue;}g=this.__sortFieldsInformation(h[f][this.__orgNamespace+"__Fields__c"]);
this.__processedMetadata[h[f][this.__orgNamespace+"__Alias__c"]]=g;this.__recsInfo[h[f][this.__orgNamespace+"__Alias__c"]]=h[f][this.__orgNamespace+"__Type__c"];this.__aliasObjectName[h[f][this.__orgNamespace+"__Alias__c"]]=h[f][this.__orgNamespace+"__Object_Name__c"];}},__isCheckListExistInMata:function(e){var f=e.length;for(var d=0;d<f;d++){if(e[d][this.__orgNamespace+"__Type__c"]==="Detail_Object"&&e[d][this.__orgNamespace+"__Object_Name__c"]===(this.__orgNamespace+"__Checklist__c")){this.__isCheckListProcess=true;break;}}return this.__isCheckListProcess;},__parseForImageIds:function(){this.__imageIds={};var f=this.__metadata.TemplateRecord;if(f!=null&&f){var d=f[0][this.__orgNamespace+"__Media_Resources__c"];if(d!=null&&d.length>0){var e=SVMX.toObject(d);for(i=0;i<e.length;i++){this.__imageIds[e[i]["DeveloperName"]]=e[i]["Id"];}}}this.__jsee.setProperty(c.IMAGENAMEID,this.__imageIds);},__processDataCollection:function(){if(this.__data.DocumentData===undefined){return;}var e,f=this.__data.DocumentData.length;var d=this.__data.DocumentData;this.__processedData={};this.__specialFieldsData={};for(e=0;e<f;e++){this.__processedData[this.__data.DocumentData[e]["Key"]]=this.__data.DocumentData[e]["Records"];this.__specialFieldsData[this.__data.DocumentData[e]["Key"]]=this.__data.DocumentData[e]["SpecialFields"];}},__processReferenceData:function(){var q=this.__processedMetadata;var m=this.__processedData;var k=this.__specialFieldsData;for(var s in q){var f=m[s];var r={};for(var p in k[s]){r[k[s][p].Key]=k[s][p].Value;}if(f!==undefined&&f!==null){var n=q[s];var d=this.__aliasDescribeInfo[s]||[];var l,o=n.length;var h,t=f.length;for(l=0;l<o;l++){for(h=0;h<t;h++){if(n[l][c.REF_OBJ_NAME_2]){if(f[h][n[l][c.RLN_NAME]]!==null&&f[h][n[l][c.RLN_NAME]][n[l][c.RLN_NAME_2]]!==null){f[h][n[l][c.RLN_NAME]][n[l][c.REF_FLD_NAME]]=f[h][n[l][c.RLN_NAME]][n[l][c.RLN_NAME_2]][n[l][c.REF_FLD_NAME_2]];}}if(n[l][c.REF_OBJ_NAME]){if((n[l][c.REF_FLD_TYP]==="picklist"||n[l][c.REF_FLD_TYP]==="multipicklist")&&f[h][n[l][c.RLN_NAME]]!==null){f[h][n[l][c.RLN_NAME]][n[l][c.REF_FLD_NAME]]=this.__processPicklistValues(this.__aliasDescribeInfo[s][n[l][c.FLD_NAME]],n[l][c.REF_FLD_NAME],f[h][n[l][c.RLN_NAME]],n[l][c.REF_FLD_TYP]);}var g="";if(f[h][n[l][c.FLD_NAME]]&&f[h][n[l][c.FLD_NAME]].Id){g=f[h][n[l][c.FLD_NAME]].Id;}else{g=f[h][n[l][c.FLD_NAME]];}f[h][n[l][c.FLD_NAME]]=f[h][n[l][c.RLN_NAME]];if(f[h][n[l][c.FLD_NAME]]){f[h][n[l][c.FLD_NAME]].Id=g;}}if(n[l][c.FLD_TYP]==="picklist"||n[l][c.FLD_TYP]==="multipicklist"){f[h][n[l][c.FLD_NAME]]=this.__processPicklistValues(this.__aliasDescribeInfo[s],n[l][c.FLD_NAME],f[h],n[l][c.FLD_TYP]);}}}for(h=0;h<t;h++){f[h]=this.__processSpecialFields(r,f[h]);f[h]=this.__processFieldSecurity(f[h],d);f[h].aliasName=s;}}var e={};e[s]=f;if(this.__recsInfo[s]===c.TYPE_HEADER){e[s]=f[0];}this.__jsee.addContext(e,"$D");}},__processPicklistValues:function(d,e,j,o){if(!d[e]){console.warn("__processPicklistValues: Skipp field "+e+", which does not exist in object description, possibly limited by security setting.");return;}var n=d[e].picklistValues;var m=(j&&j[e]?j[e]:"");var l={label:m,value:m,toString:function(){return this.value;}};if(n!==undefined&&n.length>0){var h=o&&o==="multipicklist"?m.split(";"):[m];var k=0,f=h.length;var q="";for(k=0;k<f;k++){var p=h[k];if(q.length>0){q+="; ";}var g=n.filter(function(r){return r.value===p;});q+=g[0]&&g[0].label?g[0].label:p;}l.value=m;l.label=m;if(q.length>0){l.label=q;}}return l;},__processFieldSecurity:function(d,e){for(var f in d){if(typeof d[f]==="object"&&e[f]!==undefined&&e[f].accessible===true&&f!=="Id"&&e[f].dataType==="reference"){this.__processFieldSecurity(d[f],e[f]);}else{if(e[f]!=null&&e[f].accessible===false){d[f]="";}else{if(e[f]===undefined||e[f]===null){d[f]="";}}}}return d;},__processSpecialFields:function(g,d){var k=d.Id;var j=g[k];if(!j){return d;}for(var f=0;f<j.length;f++){var e=j[f].Key.split(".");var h=j[f].Value;if(j[f].Info&&j[f].Info==="datetime"){h=com.servicemax.client.lib.datetimeutils.DatetimeUtil.getFormattedDatetime(j[f].Value,this.__dateFormat+" "+this.__timeFormat);}else{if(j[f].Info&&j[f].Info==="date"){h=com.servicemax.client.lib.datetimeutils.DatetimeUtil.getFormattedDatetime(j[f].Value,this.__dateFormat);}}if(e.length==2){d[e[0]][e[1]]=h;}else{d[j[f].Key]=h;}}return d;},getProcessId:function(){return this.__processId;},getRecordId:function(){return this.__recordId;},__sortFieldsInformation:function(f){var l=[],m=[],n=[];var e=0,j=0,d=0;var k=SVMX.toObject(f);var h=k.Metadata;if(h.length>0){for(var g in h){if(h[g][c.REF_OBJ_NAME_2]){l[e]=h[g];this.__addToUniqueObjects(h[g][c.REF_OBJ_NAME_2]);this.__addToUniqueObjects(h[g][c.REF_OBJ_NAME]);this.__addToUniqueObjects(h[g][c.OBJ_NAME]);e++;}else{if(h[g][c.REF_OBJ_NAME]){m[j]=h[g];this.__addToUniqueObjects(h[g][c.REF_OBJ_NAME]);this.__addToUniqueObjects(h[g][c.OBJ_NAME]);j++;}else{if(h[g][c.OBJ_NAME]){n[d]=h[g];this.__addToUniqueObjects(h[g][c.OBJ_NAME]);d++;}}}}}return l.concat(m,n);},__addToUniqueObjects:function(d){if(d!=undefined&&d&&d.length>0){this.__uniqueObjects[d]=d;
}},__processNode:function(e,f){var d=this.__jsee.evalExpression($(e).attr(f));$(e,$(this.__rootNode)).html(b.htmlEncoding(d));}},{});a.Class("AbstractNodeProcessor",com.servicemax.client.lib.api.Object,{__constructor:function(){},process:function(d){return null;},_removeControlCharacters:function(d){return d.replace(/[\n\r\t]/g,"");},_removeSVMXCharacters:function(d){return d.substring(2,d.length-2);},format:function(h,g){var e=0,d=g.length;for(var e=0;e<d;e++){var f=new RegExp("\\{"+e+"\\}","gi");h=h.replace(f,g[e]);}return h;},replaceExpressions:function(j,m,e){var h,g=j.items,f=g.length,k,d;for(h=0;h<f;h++){k=g[h];k=k.substring(2,k.length-2);k=this._removeControlCharacters(k);d=m.jsee.evalExpression(k,m);if(e){if(d===undefined||d===null||d===""){d="";}}g[h]=d!=undefined&&d!=null?d:"";}return this.format(j.expression,g);},parseforExpressions:function(h){var e={expression:h,found:false,items:[]};var k,g,j,d,f;if(!h){return e;}f=0;while(true){k=h.indexOf("{{");g=h.indexOf("}}");if(k!=-1&&g!=-1){j=h.substring(k,g+2);d=h.substring(0,k)+"{"+f+"}";if(g+2<h.length){d+=h.substring(g+2);}h=d;e.found=true;e.expression=h;e.items[f]=j;f++;}else{break;}}return e;},parseandreplaceExpressions:function(d,e){res=this.parseforExpressions(d);var f=this.replaceExpressions(res,e);return f;}},{});a.Class("NodeProcessor",com.servicemax.client.runtime.api.AbstractNamedInstance,{__nodeTypeToProcessor:{},__constructor:function(){this.__nodeTypeToProcessor={};},initialize:function(f,k,g){var l,m=k.length;for(l=0;l<m;l++){var o=k[l];var n=o.data,p=n.length,h;for(h=0;h<p;h++){var e=n[h];this.__nodeTypeToProcessor[e.nodeType]={processor:e.processor,inst:null};}}},process:function(k){var h=k.name||$(k.node)[0].nodeName;var f=this.__nodeTypeToProcessor[h],j=null,g=false;if(f){if(!f.inst){var e=SVMX.getClass(f.processor);var d=new e();f.inst=d;}j=f.inst;}if(j){g=j.process({engine:k.engine,jsee:k.jsee,node:k.node,pendingNodeItems:k.pendingNodeItems});}return g;}},{});a.Class("DivNodeProcessor",a.AbstractNodeProcessor,{__constructor:function(){this.__base();},process:function(f){var e=$(f.node).attr("svmx-data");e=this._removeControlCharacters(e);var d=this.parseandreplaceExpressions(e,f);$(f.node).html(b.htmlEncoding(d));return true;}},{});a.Class("TableNodeProcessor",a.AbstractNodeProcessor,{__constructor:function(){this.__base();},process:function(D){var q=$(D.node).attr("svmx-data");q=this._removeSVMXCharacters(q);var o=D.jsee.evalExpression(q);if(o!=null&&o.length>0){var v=o.length,z;var d=$("tbody",$(D.node));if(d.length==0){$(D.node).append(document.createElement("tbody"));}d=$("tbody",$(D.node))[0];var B=$("thead",$(D.node));var f=$($(B[0]).children()[0]).children(),r=f.length,x;for(z=0;z<v;z++){var t=o[z];var n=d.insertRow(z);var E=q.substring(3);this.assignContext(D.jsee,E,t);for(x=0;x<r;x++){var m=$(f[x]).attr("svmx-data");var h=this._removeSVMXCharacters(m);var p=n.insertCell(x);var s=h.split("."),A=s.length,w;var u=t;for(w=0;w<A;w++){if(u[s[w]]&&typeof(u[s[w]])==="object"&&u[s[w]].Id&&A===1){u=u[s[w]].Id;}else{if(u[s[w]]!==undefined&&u[s[w]]!==null){u=u[s[w]];}else{u="";}}}var g=true;if(u.length==0){var y=this._removeControlCharacters(m);u=this.parseandreplaceExpressions(y,D);g=false;}try{if(u&&typeof(u)==="object"){if(u.label!==undefined&&u.label!==null&&u.value!==undefined&&u.value!==null){u=u.value;}}u=u.toString();}catch(C){}if(g){$(p).html(b.htmlEncoding(u));}else{$(p).html(u);}p.align="center";}}this.assignContext(D.jsee,E,o);}return true;},assignContext:function(f,e,g){var d={};d[e]=g;f.addContext(d,"$D");}},{});a.Class("ImageNodeProcessor",a.AbstractNodeProcessor,{__constructor:function(){this.__base();},process:function(f){var e=$(f.node).attr("svmx-data");e=this._removeSVMXCharacters(e);var d=f.jsee.evalExpression(e,{node:f.node,pendingNodeItems:f.pendingNodeItems});return true;}},{});a.Class("TdNodeProcessor",a.AbstractNodeProcessor,{__constructor:function(){this.__base();},process:function(f){var e=$(f.node).attr("svmx-data");e=this._removeControlCharacters(e);var d=this.parseandreplaceExpressions(e,f);f.node.innerText=d;return true;}},{});a.Class("AbstractInlineNodeProcessor",a.AbstractNodeProcessor,{__constructor:function(){this.__base();},processChildNodes:function(k){var h=k.node,g=h.childNodes,m,j=g.length,f,e,n;for(m=0;m<j;m++){f=g[m];if(f.nodeType==3){e=f.nodeValue;n=this.parseforExpressions(e);var o=this.replaceExpressions(n,k,k.handleSpecialCharacters);var d=this.processSignatureNodes(o,f);if(!d){f.nodeValue=o;}}}},processSignatureNodes:function(k,j){var f=[],h,e;var m=false;var g=$("<span></span>");f=this.processTextWithDelimiters(k,"svmx-signature-start","svmx-signature-end",20,18);if(f&&f.length>0){e=f.length;$(g).insertBefore(j);m=true;for(h=0;h<e;h++){var d=$("<span></span>").html(f[h]);$(g).append(d);}$(j).remove();}return m;},processTextWithDelimiters:function(n,d,j,e,f){var h=n;var k=[];var l,g;while(true){var m="";l=h.indexOf(d);g=h.indexOf(j);if(l!=-1&&g!=-1){k.push(h.substring(0,l));k.push(h.substring(l+e,g));
if(g+f<h.length){m=h.substring(g+f);}h=m;}else{break;}}return k;}},{});a.Class("InlineDivNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineStrongNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineUnderlineNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineItalicNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineParaNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlinePreNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineHeadingNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineStyleNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;},processChildNodes:function(j){if(j.engine.styleNodeValue==null){return;}var g=j.node,f=g.childNodes,k,h=f.length,e,d,n;d=j.engine.styleNodeValue;n=this.parseforExpressions(d);processData=this.replaceExpressions(n,j);j.engine.__processedStyleNodeValue=processData;if(processData&&processData.length>0){var p=processData.indexOf("<style"),o=0;var m=processData.indexOf("</style>"),q=0;if(p!=-1){o=processData.indexOf(">",p)+1;}if(m!=-1){q=m;}if(p!=-1&&m!=-1){processData=processData.substring(o,q);}}if(h>0){e=f[0];e.nodeValue=processData;}else{g.nodeValue=processData;}}},{});a.Class("InlineSpanNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineEMNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineStrikeNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineSubNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineSupNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineOlNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineLiNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){d.handleSpecialCharacters=true;this.processChildNodes(d);return true;}},{});a.Class("InlineUlNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineBoldNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineTDNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("InlineTHNodeProcessor",a.AbstractInlineNodeProcessor,{__constructor:function(){this.__base();},process:function(d){this.processChildNodes(d);return true;}},{});a.Class("PendingNodeProcessCollection",com.servicemax.client.lib.api.Object,{__constructor:function(){this.__pendingNodeItems={};},__pendingNodeItems:{},addItem:function(d,e){this.__pendingNodeItems[d]=e;},removeItem:function(d){delete this.__pendingNodeItems[d];},isPending:function(){for(key in this.__pendingNodeItems){return true;}return false;}},{});a.Class("PendingSignatures",com.servicemax.client.lib.api.Object,{__constructor:function(d){this.__parent=d;this.__pendingSignatures={};},__parent:null,__pendingSignatures:{},__finBtnName:"svmx_finalize",__draBtnDiv:c.DRAFT_DIV,addItem:function(d,e){this.__pendingSignatures[d]=e;$("#"+this.__finBtnName,$(this.__parent.__rootNode)).prop("disabled","true");if(this.__parent.changeStyleSignature){this.__parent.changeStyleSignature.handler.apply(this.__parent.changeStyleSignature.context,["add",this.__finBtnName,$(this.__parent.__rootNode)]);}else{$("#"+this.__finBtnName,$(this.__parent.__rootNode)).css({background:"#cecece",border:"1px solid #b1b1b1",color:"#a9a9a9","text-shadow":"-1px 0px 1px #ededed",cursor:"default",opacity:"1"});
}},removeItem:function(d){if(this.__pendingSignatures[d]){delete this.__pendingSignatures[d];}if(!this.isPending()){$("#"+this.__finBtnName,$(this.__parent.__rootNode)).removeAttr("disabled");if(this.__parent.changeStyleSignature){this.__parent.changeStyleSignature.handler.apply(this.__parent.changeStyleSignature.context,["remove",this.__finBtnName,$(this.__parent.__rootNode)]);}else{$("#"+this.__finBtnName,$(this.__parent.__rootNode)).css({background:"#f16138",border:"1px solid #db3202",color:"#FFFFFF","text-shadow":"none",opacity:"1"});}}},isPending:function(){for(key in this.__pendingSignatures){return true;}return false;}},{});};})();